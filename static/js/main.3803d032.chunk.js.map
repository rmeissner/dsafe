{"version":3,"sources":["../../simple-indexer/safe-indexer-ts/bin/ethers/parser/utils.js","logic/utils/proposing.ts","../../simple-indexer/safe-indexer-ts/bin/types/index.js","../../simple-indexer/safe-indexer-ts/bin/types/ethereum.js","../../simple-indexer/safe-indexer-ts/bin/types/indexer.js","../../simple-indexer/safe-indexer-ts/bin/types/interactions.js","../../simple-indexer/safe-indexer-ts/bin/indexer.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/sources.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/module.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/multisig.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/settings.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/transfers.js","components/provider/AppSettingsProvider.tsx","components/settings/SettingsDialog.tsx","logic/db/base.ts","logic/db/safe.ts","logic/db/interactions.ts","logic/state/indexer.ts","logic/account/TransactionRepository.ts","logic/utils/indexer.ts","components/provider/TransactionRepositoryProvider.tsx","components/utils/media.ts","styled/tables.ts","components/account/transaction/summary/SettingsTxSummary.tsx","components/account/transaction/summary/TransferTxSummary.tsx","components/account/transaction/TxSummary.tsx","components/account/transaction/details/TxEvents.tsx","components/account/transaction/details/ModuleTxDetails.tsx","components/account/transaction/details/MultisigTxDetails.tsx","components/account/transaction/details/TransferTxDetails.tsx","components/account/transaction/TxDetails.tsx","components/account/transaction/Transactions.tsx","logic/utils/signatures.ts","logic/utils/execution.ts","logic/utils/safe.ts","logic/account/QueueRepository.ts","components/provider/QueueRepositoryProvider.tsx","components/account/queue/QueuedTxSummary.tsx","components/account/queue/AddSignatureDialog.tsx","components/account/queue/SignTransactionDialog.tsx","components/account/queue/ExecuteTxDialog.tsx","components/account/queue/QueuedTxDetails.tsx","components/account/queue/ProposeTxsDialog.tsx","components/account/queue/Queue.tsx","logic/apps/appList.ts","logic/db/app.ts","logic/utils/chainIdToNetwork.ts","logic/apps/connector.ts","components/account/apps/AppWindow.tsx","components/account/apps/Apps.tsx","logic/utils/account.ts","components/account/Dashboard.tsx","components/welcome/Welcome.tsx","components/App.tsx","reportWebVitals.ts","index.tsx","../../simple-indexer/safe-indexer-ts/bin/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/constants.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","mapEvents","mapEvent","decoder","event","_a","_b","_c","decode","undefined","interaction","logs","all","map","removeHexPrefix","input","toLowerCase","startsWith","slice","encodeData","operation","to","data","dataBuffer","Buffer","from","utils","solidityPack","BigNumber","toHexString","buildTx","account","transactions","chainId","network","toString","multiSendDeployment","getMultiSendDeployment","Error","multiSendInterface","Interface","abi","multiSendBytes","transaction","multiSendData","encodeFunctionData","networkAddresses","buildMultiSend","__createBinding","create","o","m","k","k2","enumerable","get","__exportStar","p","prototype","hasOwnProperty","require","__assign","assign","s","i","arguments","SafeIndexer","sleep","timeout","cb","setTimeout","conditionalSleep","configDefaults","earliestBlock","maxBlocks","upToDateTimeout","syncTimeout","reverse","state","loader","parser","callback","config","indexing","paused","updateConfig","update","postStatusUpdate","status","onStatusUpdate","console","error","getCurrentBlockInterval","latestBlock","log","earliestIndexedBlock","lastIndexedBlock","fromBlock","Math","max","toBlock","min","ensureBlockDefaults","start","_d","activeChainId","errorMsg","blockInterval","e_1","_e","loadChainId","logger","type","reason","code","loadCurrentBlock","processBlocks","stop","pause","resume","events","interactions","loadEvents","safe","parse","onNewInteractions","EthersLoader","isOlder","compare","base","blockNumber","transactionIndex","logIndex","provider","sources","getNetwork","getBlockNumber","merge","loaders","_i","loaderCount","logResults","currentLogIndex","out","runs","resultIndex","nextLog","candidate","Array","fill","toEvent","eventId","_this","l","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","OutgoingTransferEventSource","IncomingTransferEventSource","IncomingEthEventSource","SettingsChangeEventSource","ModuleTransactionEventSource","MultisigTransactionEventSource","StaticTopicEventSource","ethers_1","constants_1","BaseEventSource","name","address","filter","buildFilter","getLogs","_super","topics","successTopic","failureTopic","multisigDetailsTopic","moduleSuccessTopic","moduleFailureTopic","moduleDetailsTopic","safeInterface","getEventTopic","etherReceivedTopic","transferTopic","ethers","defaultAbiCoder","encode","EthersParser","module_1","multisig_1","settings_1","transfers_1","groupIdFromEvent","transactionHash","decoders","MultisigDecoder","ModuleDecoder","TransferDecoder","SettingsDecoder","updateGroupedLogs","groups","detailsCandidate","parentCandidate","currentChildren","parent","details","children","group","detailsCandidates","currentGroupId","events_1","groupId","isParentCandidate","isDetailsCandidate","parentTopics","indexOf","detailsTopics","subEvents","detailEvent","inter","utils_1","useFallbackDecoding","decodeEthereumTx","tx","decodeFromEthereumHash","txHash","ethTx","getTransaction","decodeModuleDetailsEvent","parsed","decodeEventLog","decodeInternal","module","success","subLogs","parentDecoder","decodedTx","id","block","getBlock","blockHash","number","timestamp","eventParams","safe_contracts_1","NonceMapper","init","calculateHash111","nonce","_TypedDataEncoder","hash","verifyingContract","EIP712_SAFE_TX_TYPE","expectedHash","currentNonce","Contract","safeAbi","toNumber","calculateSafeTransactionHash","nonceMapper","decodeFunctionData","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","signatures","safeTxHash","concat","decodeMultisigDetailsEvent","additionalInfo","setupTopic","addedOwnerTopic","removedOwnerTopic","changeThresholdTopic","enabledModuleTopic","disabledModuledTopic","changeFallbackHandlerTopic","changeGuardTopic","getSettingsDetails","component","change","owner","threshold","handler","guard","decodeSettingsChange","decodeTokenTransfer","eventInterface","erc721Interface","erc20Interface","erc20OldInterface","tokenAddress","amount","tokenId","sender","receipient","direction","decodeEtherTransfer","defaultConfig","startingBlock","AppSettingsContext","React","createContext","useAppSettings","appSettings","useContext","AppSettingsProvider","useState","localStorage","getItem","useCustomRpc","setUseCustomRpc","customRpc","setCustomRpc","storedConfig","JSON","networkConfig","setNetworkConfig","useMemo","providers","JsonRpcProvider","window","ethereum","Web3Provider","enable","a","Provider","signer","getSigner","toggleCustomRpc","setItem","updateCustomRpc","updateNetworkConfig","serialized","stringify","SettingsDialog","open","reindex","handleClose","updateStartingBlock","useCallback","parseInt","updateMaxBlocks","Dialog","onClose","maxWidth","fullWidth","DialogTitle","DialogContent","Typography","variant","Switch","checked","onChange","TextField","target","Button","onClick","AbstractDB","dbKey","dbVersion","migration","internalDb","indexedDB","dbStore","request","onerror","onsuccess","onupgradeneeded","oldVersion","version","AbstractDAO","db","storeName","entry","objectStore","put","delete","index","key","getAll","clear","INTERACTIONS_STORE","INTERACTIONS_INDEX","QUEUED_TX_STORE","QUEUED_TX_INDEX","TX_SIGNATURES_STORE","TX_SIGNATURES_INDEX","SafeDB","createObjectStore","keyPath","createIndex","unique","InteractionsDAO","getAllByIndex","QueuedInteractionsDAO","IDBKeyRange","lowerBound","TxSignaturesDAO","parseIntWithFallback","fallback","Number","isNaN","IndexerState","defaultBlock","_lastIndexedBlock","_earliestIndexedBlock","_earliestBlock","storedEarliestIndexedBlock","storedLastIndexedBlock","storedEarliestBlock","removeItem","TransactionRepository","callbacks","Set","currentStatus","indexer","disconnect","getIndexer","catch","add","postCurrentStatusUpdateToCallback","checkForCreation","forEach","handleNewInteraction","postCurrentStatusUpdate","drop","reset","TransactionRepoContext","useTransactionRepo","repo","TransactionRepositoryProvider","useAccount","useEffect","connect","useDektopLayout","useMediaQuery","Group","styled","theme","display","flexDirection","Row","Header","textAlign","Entry","alignItems","paddingBottom","LongText","width","wordWrap","Summary","SettingsTxSummary","settingsChange","hideDate","showDetails","Date","toUTCString","TransferTxSummary","transfer","TxSummary","TxEvents","ModuleTxDetails","color","MultisigTxDetails","renderDetails","asset","subjectTitle","subject","TransferTxDetails","TxDialog","TxDetails","accountRepo","setInteraction","getTx","loadInteraction","fullScreen","DialogActions","Root","Transactions","selectedId","setSelectedId","txs","setTxs","setStatus","showSettings","setShowSettings","getAllTxs","loaded","registerCallback","unregisterCallback","recoverEthSign","signature","hashMessage","arrayify","recoverAddress","recoverEIP712","parseSafeSignature","signatureString","sigType","signatureParts","split","keccak256","getEIP712Domain","getEIP712TxType","SafeTx","signEip712","_signTypedData","getAddress","signerAddress","recoveredAddress","signMessage","buildPreValidatedSignature","signQueuedTx","warn","prepareSignatures","submitterAddress","signatureMap","Map","owners","has","set","submitterIsOwner","requiredSigntures","sub","size","signatureArray","values","buildStaticPart","offset","buildDynamicPart","buildSignatureBytes","sort","left","right","localeCompare","staticParts","dynamicParts","sig","Safe","providerOrSigner","safeContract","WritableSafe","getOwners","getThreshold","VERSION","information","getTransactionHash","execTransaction","QueueRepository","queueDao","signaturesDao","onNewTx","hashInfo","queuedTx","notifyNewTxs","getQueuedTxs","queuedTxs","submitter","writableSafe","writable","signatureBytes","signedTx","executeTx","QueueRepoContext","useQueueRepo","QueueRepositoryProvider","QueuedTxSummary","AddSignatureDialog","handleNewSignature","signerString","setSignerString","setSignatureString","queuedRepo","handleAdd","addSignature","SignTransactionDialog","handleSign","ExecuteTxDialog","handleTxSubmitted","handleExecution","getSignatures","submitTx","ethereumTxHash","QueuedTxDetails","showAddSignature","setShowAddSignature","showSignTransaction","setShowSignTransaction","showExecuteTransaction","setShowExecuteTransaction","setTransaction","load","setSignatures","loadSignatures","shareText","navigator","clipboard","writeText","shareSignature","ProposeTxs","onConfirm","onReject","requestId","setToString","valueString","setValueString","dataString","setDataString","operationString","setOperationString","nonceString","setNonceString","getNextNonce","defaultTx","cancelCreation","handleCreate","isHexString","constants","AddressZero","addTx","Queue","showNewTxDialog","setShowNewTxDialog","ququedTxs","setQueuedTxs","queueRepo","txRepo","loadQueuedTxs","creation","defaultApps","title","url","section","ACCOUNTS_STORE","ACCOUNTS_INDEX","APP_URLS_STORE","APP_URLS_INDEX","AppDB","AccountsDAO","AppUrlsDAO","chainIdToNetwork","1","2","3","4","5","42","56","100","137","246","4447","73799","FrameCommunicator","frame","appUrl","info","handlers","method","params","onTransactionProposal","sendResponse","txServiceUrl","safeAddress","payload","communicator","send","resp","err","sendError","message","source","includes","origin","handleMessage","frameWindow","current","contentWindow","sdkVersion","getSDKVersion","msg","MessageFormatter","makeResponse","postMessage","makeErrorResponse","defaultWindow","eventWindow","ev","onMessage","addEventListener","removeEventListener","AppFrame","height","border","AppWindow","loading","proposalParams","setProposalParams","appFrame","useRef","document","hidden","alert","handleTransactionConfirmation","handleTransactionRejection","CircularProgress","ref","src","Apps","appUrlsDao","setAppUrl","appUrlError","setAppUrlError","appUrlInput","setAppUrlInput","appUrlsHistory","setAppUrlsHistory","appHistory","handleInputChange","openUrl","newValue","openAppUrl","cleanUrl","trim","getTime","Autocomplete","freeSolo","options","defaultValue","groupBy","option","getOptionLabel","renderInput","helperText","buildCaip2Addr","parseAddress","parseAccount","shortName","accountParts","shortNames","networkParts","parseChainId","Sidebar","overflowY","AccountContext","Dashboard","useParams","isDesktop","padding","Welcome","addressInput","setAddressInput","addressError","setAddressError","accountHistory","setAccountHistory","history","useHistory","accountsDao","openAccount","createTheme","ThemeProvider","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById","erc721InterfaceDefinition","erc20OldInterfaceDefinition","erc20InterfaceDefinition","safe_deployments_1","getSafeL2SingletonDeployment","released"],"mappings":"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","file":"static/js/main.3803d032.chunk.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapEvents = exports.mapEvent = void 0;\nvar mapEvent = function (decoder, event) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a;\n    var _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _b = {\n                    event: event\n                };\n                if (!decoder) return [3 /*break*/, 2];\n                return [4 /*yield*/, decoder.decode(event)];\n            case 1:\n                _a = _c.sent();\n                return [3 /*break*/, 3];\n            case 2:\n                _a = undefined;\n                _c.label = 3;\n            case 3: return [2 /*return*/, (_b.interaction = _a,\n                    _b)];\n        }\n    });\n}); };\nexports.mapEvent = mapEvent;\nvar mapEvents = function (decoder, logs) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!logs)\n                    return [2 /*return*/, []];\n                return [4 /*yield*/, Promise.all(logs.map(function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            return [2 /*return*/, exports.mapEvent(decoder, e)];\n                        });\n                    }); }))];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n}); };\nexports.mapEvents = mapEvents;\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { utils } from \"ethers\";\nimport { MetaTransaction } from \"../models/transactions\"\nimport { getMultiSendDeployment } from \"@gnosis.pm/safe-deployments\"\nimport { Account } from \"./account\";\n\nexport const removeHexPrefix = (input: string) => input.toLowerCase().startsWith(\"0x\") ? input.slice(2) : input;\n\nconst encodeData = (operation: number, to: string, value: string, data: string) => {\n    let dataBuffer = Buffer.from(removeHexPrefix(data), \"hex\")\n    return removeHexPrefix(utils.solidityPack(\n        [\"uint8\", \"address\", \"uint256\", \"uint256\", \"bytes\"],\n        [operation, to, BigNumber.from(value).toHexString(), dataBuffer.length, dataBuffer]\n    ))\n}\n\nexport const buildMultiSend = (transactions: MetaTransaction[], chainId: number): MetaTransaction => {\n    const network = chainId.toString()\n    const multiSendDeployment = getMultiSendDeployment({ network })\n    if (!multiSendDeployment) throw Error(\"MultiSend not available on this network\")\n    const multiSendInterface = new utils.Interface(multiSendDeployment.abi)\n    let multiSendBytes = \"0x\"\n    for (let transaction of transactions) {\n        multiSendBytes += encodeData(0, transaction.to, transaction.value, transaction.data)\n    }\n    const multiSendData = multiSendInterface.encodeFunctionData(\"multiSend\", [multiSendBytes])\n    return {\n        to: multiSendDeployment.networkAddresses[network],\n        value: \"0x00\",\n        data: multiSendData,\n        operation: 1\n    }\n}\n\n\nexport const buildTx = (account: Account, transactions?: MetaTransaction[]): MetaTransaction => {\n    if (!transactions || transactions.length === 0) {\n        return {\n            to: \"\",\n            value: \"\",\n            data: \"\",\n            operation: 0\n        }\n    }\n    if (transactions.length === 1) {\n        return transactions[0]\n    }\n    return buildMultiSend(transactions, account.chainId)\n}","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ethereum\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./interactions\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeIndexer = void 0;\nvar sleep = function (timeout) { return new Promise(function (cb) { return setTimeout(cb, timeout); }); };\nvar conditionalSleep = function (timeout) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(timeout && timeout > 0)) return [3 /*break*/, 2];\n                return [4 /*yield*/, sleep(timeout)];\n            case 1:\n                _a.sent();\n                _a.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar configDefaults = {\n    earliestBlock: 0,\n    maxBlocks: 100,\n    upToDateTimeout: 10000,\n    syncTimeout: 100,\n    reverse: false\n};\nvar SafeIndexer = /** @class */ (function () {\n    function SafeIndexer(state, loader, parser, callback, config) {\n        this.indexing = false;\n        this.paused = false;\n        this.state = state;\n        this.loader = loader;\n        this.parser = parser;\n        this.callback = callback;\n        this.config = __assign(__assign({}, configDefaults), config);\n    }\n    SafeIndexer.prototype.updateConfig = function (update) {\n        this.config = __assign(__assign({}, this.config), update);\n    };\n    SafeIndexer.prototype.postStatusUpdate = function (status) {\n        var _a, _b;\n        try {\n            (_b = (_a = this.callback) === null || _a === void 0 ? void 0 : _a.onStatusUpdate) === null || _b === void 0 ? void 0 : _b.call(_a, status);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    SafeIndexer.prototype.getCurrentBlockInterval = function (earliestBlock, latestBlock, reverse) {\n        console.log(this.state);\n        var earliestIndexedBlock = this.state.earliestIndexedBlock;\n        var lastIndexedBlock = this.state.lastIndexedBlock;\n        var maxBlocks = this.config.maxBlocks;\n        if (reverse !== undefined ? reverse : this.config.reverse) {\n            if (earliestBlock >= earliestIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: Math.max(earliestBlock, earliestIndexedBlock - maxBlocks),\n                toBlock: earliestIndexedBlock - 1\n            };\n        }\n        else {\n            if (latestBlock <= lastIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: lastIndexedBlock + 1,\n                toBlock: Math.min(latestBlock, lastIndexedBlock + maxBlocks)\n            };\n        }\n    };\n    SafeIndexer.prototype.ensureBlockDefaults = function (latestBlock) {\n        if (this.config.earliestBlock < 0) {\n            this.config.earliestBlock = latestBlock;\n        }\n        if (this.state.earliestIndexedBlock < 0) {\n            this.state.earliestIndexedBlock = latestBlock + 1;\n        }\n        if (this.state.lastIndexedBlock < 0) {\n            this.state.lastIndexedBlock = latestBlock - 1;\n        }\n    };\n    SafeIndexer.prototype.start = function (reverse) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var activeChainId, errorMsg, latestBlock, earliestBlock, blockInterval, fromBlock, toBlock, e_1;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadChainId()];\n                    case 1:\n                        activeChainId = _e.sent();\n                        if (this.config.chainId && activeChainId != this.config.chainId) {\n                            errorMsg = \"Wrong chain! Expected \" + this.config.chainId + \" got \" + activeChainId;\n                            (_a = this.config.logger) === null || _a === void 0 ? void 0 : _a.error(errorMsg);\n                            this.postStatusUpdate({ type: \"aborted\", reason: errorMsg, code: 1 });\n                            return [2 /*return*/];\n                        }\n                        this.indexing = true;\n                        _e.label = 2;\n                    case 2:\n                        if (!this.indexing) return [3 /*break*/, 14];\n                        if (!this.paused) return [3 /*break*/, 4];\n                        return [4 /*yield*/, sleep(this.config.syncTimeout)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 4: return [4 /*yield*/, this.loader.loadCurrentBlock()];\n                    case 5:\n                        latestBlock = _e.sent();\n                        this.ensureBlockDefaults(latestBlock);\n                        earliestBlock = this.config.earliestBlock;\n                        blockInterval = this.getCurrentBlockInterval(earliestBlock, latestBlock, reverse);\n                        if (!!blockInterval) return [3 /*break*/, 7];\n                        (_b = this.config.logger) === null || _b === void 0 ? void 0 : _b.log(\"Up to date with current block!\");\n                        this.postStatusUpdate({ type: \"up_to_date\", latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 6:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 7:\n                        fromBlock = blockInterval.fromBlock, toBlock = blockInterval.toBlock;\n                        this.postStatusUpdate({ type: \"processing\", fromBlock: fromBlock, toBlock: toBlock, latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        (_c = this.config.logger) === null || _c === void 0 ? void 0 : _c.log(\"Process from block\", fromBlock, \"to block\", toBlock);\n                        _e.label = 8;\n                    case 8:\n                        _e.trys.push([8, 11, , 13]);\n                        return [4 /*yield*/, this.processBlocks(fromBlock, toBlock)];\n                    case 9:\n                        _e.sent();\n                        this.state.lastIndexedBlock = Math.max(toBlock, this.state.lastIndexedBlock);\n                        this.state.earliestIndexedBlock = Math.min(fromBlock, this.state.earliestIndexedBlock);\n                        return [4 /*yield*/, conditionalSleep(this.config.syncTimeout)];\n                    case 10:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 11:\n                        e_1 = _e.sent();\n                        (_d = this.config.logger) === null || _d === void 0 ? void 0 : _d.error(e_1);\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 12:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 13: return [3 /*break*/, 2];\n                    case 14: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SafeIndexer.prototype.stop = function () {\n        this.indexing = false;\n    };\n    SafeIndexer.prototype.pause = function () {\n        this.paused = true;\n    };\n    SafeIndexer.prototype.resume = function () {\n        this.paused = false;\n    };\n    SafeIndexer.prototype.processBlocks = function (from, to) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, interactions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadEvents(from, to, this.config.safe)];\n                    case 1:\n                        events = _a.sent();\n                        return [4 /*yield*/, this.parser.parse(events)];\n                    case 2:\n                        interactions = _a.sent();\n                        if (interactions.length > 0)\n                            try {\n                                this.callback.onNewInteractions(interactions);\n                            }\n                            catch (_b) { }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SafeIndexer;\n}());\nexports.SafeIndexer = SafeIndexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersLoader = void 0;\n__exportStar(require(\"./sources\"), exports);\nvar isOlder = function (compare, base) {\n    if (compare === undefined)\n        return false;\n    if (base === undefined)\n        return true;\n    if (compare.blockNumber != base.blockNumber)\n        return compare.blockNumber < base.blockNumber;\n    if (compare.transactionIndex != base.transactionIndex)\n        return compare.transactionIndex < base.transactionIndex;\n    if (compare.logIndex != base.logIndex)\n        return compare.logIndex < base.logIndex;\n    return false; // Equal defaults to false\n};\nvar EthersLoader = /** @class */ (function () {\n    function EthersLoader(provider, sources) {\n        this.provider = provider;\n        this.sources = sources;\n    }\n    EthersLoader.prototype.loadChainId = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var network;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        network = _a.sent();\n                        return [2 /*return*/, network.chainId];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.loadCurrentBlock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getBlockNumber()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.merge = function () {\n        var loaders = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            loaders[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var loaderCount, logResults, currentLogIndex, i, out, runs, resultIndex, nextLog, i, candidate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        loaderCount = loaders.length;\n                        if (loaderCount == 0)\n                            return [2 /*return*/, []];\n                        return [4 /*yield*/, Promise.all(loaders)];\n                    case 1:\n                        logResults = _a.sent();\n                        if (loaderCount == 1)\n                            return [2 /*return*/, logResults[0]];\n                        currentLogIndex = new Array(loaderCount).fill(0);\n                        for (i = 0; i < loaderCount; i++)\n                            currentLogIndex[i] = 0;\n                        out = [];\n                        runs = 0;\n                        // Panic check against endless loop (10k is max amount of events, per loader)\n                        while (runs < 10000 * loaderCount) {\n                            resultIndex = 0;\n                            nextLog = logResults[0][currentLogIndex[0]];\n                            for (i = 1; i < loaderCount; i++) {\n                                candidate = logResults[i][currentLogIndex[i]];\n                                if (isOlder(candidate, nextLog)) {\n                                    resultIndex = i;\n                                    nextLog = candidate;\n                                }\n                            }\n                            currentLogIndex[resultIndex]++;\n                            if (nextLog)\n                                out.push(nextLog);\n                            else\n                                break;\n                            runs++;\n                        }\n                        return [2 /*return*/, out];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.toEvent = function (log, safe) {\n        return __assign(__assign({}, log), { eventId: log.logIndex.toString(), account: safe });\n    };\n    EthersLoader.prototype.loadEvents = function (from, to, safe) {\n        return __awaiter(this, void 0, void 0, function () {\n            var logs;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.merge.apply(this, this.sources.map(function (l) { return l.loadEvents(from, to, safe); }))];\n                    case 1:\n                        logs = _a.sent();\n                        return [2 /*return*/, logs.reverse().map(function (e) { return _this.toEvent(e, safe); })];\n                }\n            });\n        });\n    };\n    return EthersLoader;\n}());\nexports.EthersLoader = EthersLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingTransferEventSource = exports.IncomingTransferEventSource = exports.IncomingEthEventSource = exports.SettingsChangeEventSource = exports.ModuleTransactionEventSource = exports.MultisigTransactionEventSource = exports.StaticTopicEventSource = void 0;\nvar ethers_1 = require(\"ethers\");\nvar constants_1 = require(\"../constants\");\nvar BaseEventSource = /** @class */ (function () {\n    function BaseEventSource(name, provider) {\n        this.provider = provider;\n        this.name = name;\n    }\n    BaseEventSource.prototype.loadEvents = function (fromBlock, toBlock, address) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filter;\n            return __generator(this, function (_a) {\n                filter = this.buildFilter(fromBlock, toBlock, address);\n                return [2 /*return*/, this.provider.getLogs(filter).then(function (e) {\n                        //console.debug(this.name, \"source loaded\", e.length, \"events\")\n                        return e;\n                    })];\n            });\n        });\n    };\n    return BaseEventSource;\n}());\nvar StaticTopicEventSource = /** @class */ (function (_super) {\n    __extends(StaticTopicEventSource, _super);\n    function StaticTopicEventSource(name, topics, provider) {\n        var _this = _super.call(this, name, provider) || this;\n        _this.topics = topics;\n        return _this;\n    }\n    StaticTopicEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        return {\n            topics: [this.topics],\n            address: address,\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return StaticTopicEventSource;\n}(BaseEventSource));\nexports.StaticTopicEventSource = StaticTopicEventSource;\nvar MultisigTransactionEventSource = /** @class */ (function (_super) {\n    __extends(MultisigTransactionEventSource, _super);\n    function MultisigTransactionEventSource(provider) {\n        return _super.call(this, \"MultiSig\", [constants_1.successTopic, constants_1.failureTopic, constants_1.multisigDetailsTopic], provider) || this;\n    }\n    return MultisigTransactionEventSource;\n}(StaticTopicEventSource));\nexports.MultisigTransactionEventSource = MultisigTransactionEventSource;\nvar ModuleTransactionEventSource = /** @class */ (function (_super) {\n    __extends(ModuleTransactionEventSource, _super);\n    function ModuleTransactionEventSource(provider) {\n        return _super.call(this, \"Module\", [constants_1.moduleSuccessTopic, constants_1.moduleFailureTopic, constants_1.moduleDetailsTopic], provider) || this;\n    }\n    return ModuleTransactionEventSource;\n}(StaticTopicEventSource));\nexports.ModuleTransactionEventSource = ModuleTransactionEventSource;\nvar SettingsChangeEventSource = /** @class */ (function (_super) {\n    __extends(SettingsChangeEventSource, _super);\n    function SettingsChangeEventSource(provider) {\n        return _super.call(this, \"Settings\", [\n            \"SafeSetup\",\n            \"AddedOwner\",\n            \"RemovedOwner\",\n            \"ChangedThreshold\",\n            \"EnabledModule\",\n            \"DisabledModule\",\n            \"ChangedFallbackHandler\",\n            \"ChangedGuard\",\n        ].map(function (name) { return constants_1.safeInterface.getEventTopic(name); }), provider) || this;\n    }\n    return SettingsChangeEventSource;\n}(StaticTopicEventSource));\nexports.SettingsChangeEventSource = SettingsChangeEventSource;\nvar IncomingEthEventSource = /** @class */ (function (_super) {\n    __extends(IncomingEthEventSource, _super);\n    function IncomingEthEventSource(provider) {\n        return _super.call(this, \"Incoming Ether\", [constants_1.etherReceivedTopic], provider) || this;\n    }\n    return IncomingEthEventSource;\n}(StaticTopicEventSource));\nexports.IncomingEthEventSource = IncomingEthEventSource;\nvar IncomingTransferEventSource = /** @class */ (function (_super) {\n    __extends(IncomingTransferEventSource, _super);\n    function IncomingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    IncomingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return IncomingTransferEventSource;\n}(BaseEventSource));\nexports.IncomingTransferEventSource = IncomingTransferEventSource;\nvar OutgoingTransferEventSource = /** @class */ (function (_super) {\n    __extends(OutgoingTransferEventSource, _super);\n    function OutgoingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    OutgoingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], null, [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return OutgoingTransferEventSource;\n}(BaseEventSource));\nexports.OutgoingTransferEventSource = OutgoingTransferEventSource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersParser = void 0;\nvar constants_1 = require(\"../constants\");\nvar module_1 = require(\"./module\");\nvar multisig_1 = require(\"./multisig\");\nvar settings_1 = require(\"./settings\");\nvar transfers_1 = require(\"./transfers\");\nvar EthersParser = /** @class */ (function () {\n    function EthersParser(provider) {\n        this.groupIdFromEvent = function (event) { return \"\" + event.transactionHash; };\n        this.provider = provider;\n        this.decoders = [\n            new multisig_1.MultisigDecoder(provider),\n            new module_1.ModuleDecoder(provider),\n            new transfers_1.TransferDecoder(provider),\n            new settings_1.SettingsDecoder(provider)\n        ];\n    }\n    EthersParser.prototype.updateGroupedLogs = function (groups, detailsCandidate, parentCandidate, currentChildren) {\n        if (parentCandidate) {\n            groups.push({\n                parent: parentCandidate,\n                details: detailsCandidate,\n                children: currentChildren\n            });\n        }\n        else if (currentChildren.length > 0) {\n            groups.push.apply(groups, currentChildren.map(function (log) { return { parent: log, children: [] }; }));\n        }\n    };\n    EthersParser.prototype.group = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var out, currentChildren, detailsCandidates, parentCandidate, currentGroupId, _i, events_1, event, groupId, isParentCandidate, isDetailsCandidate;\n            return __generator(this, function (_a) {\n                out = [];\n                currentChildren = [];\n                detailsCandidates = [];\n                currentGroupId = undefined;\n                for (_i = 0, events_1 = events; _i < events_1.length; _i++) {\n                    event = events_1[_i];\n                    groupId = this.groupIdFromEvent(event);\n                    isParentCandidate = constants_1.parentTopics.indexOf(event.topics[0]) >= 0;\n                    isDetailsCandidate = constants_1.detailsTopics.indexOf(event.topics[0]) >= 0;\n                    if (currentGroupId !== groupId || (isParentCandidate && parentCandidate)) {\n                        this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                        parentCandidate = undefined;\n                        detailsCandidates = [];\n                        currentChildren = [];\n                        currentGroupId = undefined;\n                    }\n                    if (!currentGroupId)\n                        currentGroupId = groupId;\n                    if (isParentCandidate) {\n                        parentCandidate = event;\n                    }\n                    else if (isDetailsCandidate) {\n                        detailsCandidates.push(event);\n                    }\n                    else {\n                        currentChildren.push(event);\n                    }\n                }\n                this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                return [2 /*return*/, out];\n            });\n        });\n    };\n    EthersParser.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, decoder, interaction;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _i = 0, _a = this.decoders;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        decoder = _a[_i];\n                        return [4 /*yield*/, decoder.decode(event, subEvents, detailEvent, this)];\n                    case 2:\n                        interaction = _b.sent();\n                        if (interaction)\n                            return [2 /*return*/, interaction];\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EthersParser.prototype.parse = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var groups, inter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.group(events)];\n                    case 1:\n                        groups = _a.sent();\n                        inter = groups.map(function (_a) {\n                            var parent = _a.parent, children = _a.children, details = _a.details;\n                            return _this.decode(parent, children, details);\n                        });\n                        return [4 /*yield*/, Promise.all(inter)];\n                    case 2: return [2 /*return*/, (_a.sent()).filter(function (e) { return e !== undefined; })];\n                }\n            });\n        });\n    };\n    return EthersParser;\n}());\nexports.EthersParser = EthersParser;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar ModuleDecoder = /** @class */ (function () {\n    function ModuleDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    ModuleDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        // TODO: implement\n        return undefined;\n    };\n    ModuleDecoder.prototype.decodeFromEthereumHash = function (safe, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _a.sent();\n                        return [2 /*return*/, this.decodeEthereumTx(safe, ethTx)];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decodeModuleDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeModuleTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n        };\n    };\n    ModuleDecoder.prototype.decodeInternal = function (safe, module, event, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"module_\" + event.transactionHash + \"_\" + event.eventId;\n                        decodedTx = this.decodeModuleDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"module_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.module = module,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.moduleSuccessTopic: return [3 /*break*/, 1];\n                            case constants_1.moduleFailureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ModuleDecoder;\n}());\nexports.ModuleDecoder = ModuleDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultisigDecoder = void 0;\nvar ethers_1 = require(\"ethers\");\nvar safe_contracts_1 = require(\"@gnosis.pm/safe-contracts\");\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar NonceMapper = /** @class */ (function () {\n    function NonceMapper(provider) {\n        this.provider = provider;\n    }\n    NonceMapper.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        _a.chainId = (_b.sent()).chainId;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NonceMapper.prototype.calculateHash111 = function (tx, nonce) {\n        return ethers_1.ethers.utils._TypedDataEncoder.hash({ verifyingContract: tx.safe }, safe_contracts_1.EIP712_SAFE_TX_TYPE, __assign(__assign({}, tx), { nonce: nonce }));\n    };\n    NonceMapper.prototype.map = function (expectedHash, tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var safe, currentNonce, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.chainId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        safe = new ethers_1.ethers.Contract(tx.safe, constants_1.safeAbi, this.provider);\n                        return [4 /*yield*/, safe.nonce()];\n                    case 3:\n                        currentNonce = (_a.sent()).toNumber();\n                        for (nonce = currentNonce; nonce >= 0; nonce--) {\n                            if (this.calculateHash111(tx, nonce) === expectedHash)\n                                return [2 /*return*/, nonce];\n                            if (safe_contracts_1.calculateSafeTransactionHash(safe, __assign(__assign({}, tx), { nonce: nonce }), this.chainId) === expectedHash)\n                                return [2 /*return*/, nonce];\n                        }\n                        return [2 /*return*/, -1];\n                }\n            });\n        });\n    };\n    return NonceMapper;\n}());\nvar MultisigDecoder = /** @class */ (function () {\n    function MultisigDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.nonceMapper = new NonceMapper(provider);\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    MultisigDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        try {\n            if (tx.to !== safe) {\n                console.log(\"Transaction is not to the Safe\");\n                return undefined;\n            }\n            var result = constants_1.safeInterface.decodeFunctionData(\"execTransaction\", tx.data);\n            return {\n                safe: safe,\n                to: result.to,\n                value: result.value.toString(),\n                data: result.data,\n                operation: result.operation,\n                safeTxGas: result.safeTxGas.toString(),\n                baseGas: result.baseGas.toString(),\n                gasPrice: result.gasPrice.toString(),\n                gasToken: result.gasToken,\n                refundReceiver: result.refundReceiver,\n                signatures: result.signatures,\n            };\n        }\n        catch (e) {\n            // TODO: try to decode other ways \n            console.log(\"Unknown function\", tx.data.slice(0, 10));\n            return undefined;\n        }\n    };\n    MultisigDecoder.prototype.decodeFromEthereumHash = function (safe, safeTxHash, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx, decodedTx, _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _c.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        if (!decodedTx)\n                            return [2 /*return*/, undefined];\n                        _a = [__assign({}, decodedTx)];\n                        _b = {};\n                        return [4 /*yield*/, this.nonceMapper.map(safeTxHash, decodedTx)];\n                    case 2: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_b.nonce = _c.sent(), _b)]))];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decodeMultisigDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeMultiSigTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n            safeTxGas: parsed.safeTxGas.toString(),\n            baseGas: parsed.baseGas.toString(),\n            gasPrice: parsed.gasPrice.toString(),\n            gasToken: parsed.gasToken,\n            refundReceiver: parsed.refundReceiver,\n            signatures: parsed.signatures,\n            nonce: ethers_1.BigNumber.from(parsed.additionalInfo.slice(0, 66)).toNumber()\n        };\n    };\n    MultisigDecoder.prototype.decodeInternal = function (safe, event, safeTxHash, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, decodedTx, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"multisig_\" + safeTxHash;\n                        decodedTx = this.decodeMultisigDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, safeTxHash, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"multisig_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.safeTxHash = safeTxHash,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.successTopic: return [3 /*break*/, 1];\n                            case constants_1.failureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return MultisigDecoder;\n}());\nexports.MultisigDecoder = MultisigDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingsDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar setupTopic = constants_1.safeInterface.getEventTopic(\"SafeSetup\");\nvar addedOwnerTopic = constants_1.safeInterface.getEventTopic(\"AddedOwner\");\nvar removedOwnerTopic = constants_1.safeInterface.getEventTopic(\"RemovedOwner\");\nvar changeThresholdTopic = constants_1.safeInterface.getEventTopic(\"ChangedThreshold\");\nvar enabledModuleTopic = constants_1.safeInterface.getEventTopic(\"EnabledModule\");\nvar disabledModuledTopic = constants_1.safeInterface.getEventTopic(\"DisabledModule\");\nvar changeFallbackHandlerTopic = constants_1.safeInterface.getEventTopic(\"ChangedFallbackHandler\");\nvar changeGuardTopic = constants_1.safeInterface.getEventTopic(\"ChangedGuard\");\nvar SettingsDecoder = /** @class */ (function () {\n    function SettingsDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    SettingsDecoder.prototype.getSettingsDetails = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventParams, eventParams, eventParams, eventParams, eventParams, eventParams, eventParams;\n            return __generator(this, function (_a) {\n                switch (event.topics[0]) {\n                    case addedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"AddedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'added',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case removedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"RemovedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'removed',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case changeThresholdTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedThreshold\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'threshold',\n                                change: 'set',\n                                value: eventParams.threshold.toString()\n                            }];\n                    }\n                    case enabledModuleTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"EnabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'added',\n                                value: eventParams.module\n                            }];\n                    }\n                    case disabledModuledTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"DisabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'removed',\n                                value: eventParams.module\n                            }];\n                    }\n                    case changeFallbackHandlerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedFallbackHandler\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'fallbackHandler',\n                                change: 'set',\n                                value: eventParams.handler\n                            }];\n                    }\n                    case changeGuardTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedGuard\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'guard',\n                                change: 'set',\n                                value: eventParams.guard\n                            }];\n                    }\n                    default: {\n                        return [2 /*return*/, undefined];\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    SettingsDecoder.prototype.decodeSettingsChange = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var details, block;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getSettingsDetails(event)];\n                    case 1:\n                        details = _a.sent();\n                        if (!details)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _a.sent();\n                        return [2 /*return*/, __assign({ type: \"settings\", id: \"settings_\" + event.transactionHash + \"_\" + event.eventId, block: block.number, timestamp: block.timestamp, txHash: event.transactionHash }, details)];\n                }\n            });\n        });\n    };\n    SettingsDecoder.prototype.decode = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, block;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case setupTopic: return [3 /*break*/, 1];\n                        }\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _b.sent();\n                        return [2 /*return*/, {\n                                type: \"setup\",\n                                id: \"setup_\" + event.transactionHash + \"_\" + event.eventId,\n                                block: block.number,\n                                timestamp: block.timestamp,\n                                txHash: event.transactionHash,\n                            }];\n                    case 3:\n                        {\n                            return [2 /*return*/, this.decodeSettingsChange(event)];\n                        }\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SettingsDecoder;\n}());\nexports.SettingsDecoder = SettingsDecoder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransferDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar TransferDecoder = /** @class */ (function () {\n    function TransferDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    TransferDecoder.prototype.decodeTokenTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, type, eventInterface, eventParams, details;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        type = \"\";\n                        if (event.topics.length === 4) {\n                            eventInterface = constants_1.erc721Interface;\n                            type = \"ERC721\";\n                        }\n                        else if (event.topics.length === 3) {\n                            eventInterface = constants_1.erc20Interface;\n                            type = \"ERC20\";\n                        }\n                        else if (event.topics.length === 2) {\n                            eventInterface = constants_1.erc20OldInterface;\n                            type = \"ERC20\";\n                        }\n                        else {\n                            return [2 /*return*/, undefined];\n                        }\n                        eventParams = eventInterface.decodeEventLog(\"Transfer\", event.data, event.topics);\n                        if (type === \"ERC20\") {\n                            details = {\n                                type: \"ERC20\",\n                                tokenAddress: event.address,\n                                value: eventParams.amount.toString()\n                            };\n                        }\n                        else {\n                            details = {\n                                type: \"ERC721\",\n                                tokenAddress: event.address,\n                                tokenId: eventParams.tokenId.toString()\n                            };\n                        }\n                        return [2 /*return*/, {\n                                type: \"transfer\",\n                                id: id,\n                                block: block.number,\n                                txHash: event.transactionHash,\n                                timestamp: block.timestamp,\n                                sender: eventParams.from,\n                                receipient: eventParams.to,\n                                direction: (eventParams.to.toLowerCase() === safe.toLowerCase() ? \"INCOMING\" : \"OUTGOING\"),\n                                details: details\n                            }];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decodeEtherTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, eventParams, details, transferMeta;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"SafeReceived\", event.data, event.topics);\n                        details = {\n                            type: \"ETHER\",\n                            value: eventParams.value.toString()\n                        };\n                        transferMeta = {\n                            type: \"transfer\",\n                            id: id,\n                            sender: eventParams.sender,\n                            receipient: safe,\n                            direction: \"INCOMING\",\n                            timestamp: block.timestamp,\n                            txHash: event.transactionHash,\n                            details: details\n                        };\n                        return [2 /*return*/, transferMeta];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.transferTopic: return [3 /*break*/, 1];\n                            case constants_1.etherReceivedTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        if (!event.account)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.decodeTokenTransfer(event.account, event)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        return [4 /*yield*/, this.decodeEtherTransfer(event.address, event)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return TransferDecoder;\n}());\nexports.TransferDecoder = TransferDecoder;\n","import { ethers, providers, Signer } from \"ethers\";\nimport { TypedDataSigner } from \"@ethersproject/abstract-signer\"\nimport React, { useContext, useMemo, useState } from \"react\";\n\ndeclare let window: any;\n\nexport interface NetworkConfig {\n    maxBlocks: number,\n    startingBlock: number\n}\n\nconst defaultConfig: NetworkConfig = {\n    startingBlock: -1,\n    maxBlocks: 1000\n}\n\nexport interface AppSettings {\n    readonly customRpc: string,\n    readonly useCustomRpc: boolean,\n    readonly provider: providers.JsonRpcProvider | undefined,\n    readonly signer: Signer & TypedDataSigner | undefined,\n    readonly networkConfig: NetworkConfig,\n    toggleCustomRpc: (value: boolean) => void\n    updateCustomRpc: (value: string) => void\n    updateNetworkConfig: (value: NetworkConfig) => void\n    enable: () => Promise<string[]>\n}\n\nconst AppSettingsContext = React.createContext<AppSettings | undefined>(undefined);\n\nexport const useAppSettings = () => {\n    const appSettings = useContext(AppSettingsContext)\n    if (!appSettings) throw Error(\"App Settings not available!\")\n    return appSettings\n}\n\nexport const AppSettingsProvider: React.FC = ({ children }) => {\n    const [useCustomRpc, setUseCustomRpc] = useState(localStorage.getItem(\"app_state_use_rpc\") === \"true\")\n    const [customRpc, setCustomRpc] = useState(localStorage.getItem(\"app_state_rpc\") || \"\")\n    const storedConfig = localStorage.getItem(\"app_state_network_config\")\n    const [networkConfig, setNetworkConfig] = useState<NetworkConfig>(storedConfig ? JSON.parse(storedConfig) : defaultConfig)\n    const toggleCustomRpc = (value: boolean) => {\n        localStorage.setItem(\"app_state_use_rpc\", value ? \"true\" : \"false\")\n        setUseCustomRpc(value)\n    }\n    const updateCustomRpc = (value: string) => {\n        localStorage.setItem(\"app_state_rpc\", value)\n        setCustomRpc(value)\n    }\n    const updateNetworkConfig = (value: NetworkConfig) => {\n        const serialized = JSON.stringify({\n            maxBlocks: value.maxBlocks || 100,\n            startingBlock: value.startingBlock || -1\n        })\n        localStorage.setItem(\"app_state_network_config\", serialized)\n        setNetworkConfig(value)\n    }\n    const provider = useMemo(() => {\n        if (useCustomRpc) {\n            if (!customRpc) return undefined\n            return new ethers.providers.JsonRpcProvider(customRpc); // \"https://bsc-dataseed1.ninicoin.io\" \n        }\n        if (window.ethereum) {\n            return new ethers.providers.Web3Provider(window.ethereum)\n        }\n        return undefined\n    }, [useCustomRpc, customRpc])\n    const enable = async (): Promise<string[]> => {\n        if (window.ethereum) {\n            return window.ethereum.enable()\n        }\n        return []\n    }\n    return <AppSettingsContext.Provider value={{ customRpc, useCustomRpc, provider, signer: provider?.getSigner(), networkConfig, toggleCustomRpc, updateCustomRpc, updateNetworkConfig, enable }}>\n        {children}\n    </AppSettingsContext.Provider>\n}\n\nexport default AppSettingsProvider","import { Button, Dialog, DialogContent, DialogTitle, Switch, TextField, Typography } from '@mui/material'\nimport React, { useCallback } from 'react'\nimport { useAppSettings } from '../provider/AppSettingsProvider'\n\nexport interface Props {\n    open: boolean,\n    handleClose: () => void,\n    reindex?: () => void,\n}\n\nexport const SettingsDialog: React.FC<Props> = ({open, reindex, handleClose}) => {\n    const { useCustomRpc, toggleCustomRpc, customRpc, updateCustomRpc, networkConfig, updateNetworkConfig } = useAppSettings()\n    const updateStartingBlock = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: parseInt(value),\n                maxBlocks: networkConfig.maxBlocks\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    const updateMaxBlocks = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: networkConfig.startingBlock,\n                maxBlocks: parseInt(value)\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    return <Dialog open={open} onClose={handleClose} maxWidth=\"xs\" fullWidth>\n        <DialogTitle>Settings</DialogTitle>\n        <DialogContent>\n            <Typography variant=\"caption\">App Settings</Typography><br />\n            Use custom prc endpoint <Switch checked={useCustomRpc} onChange={(_, checked) => toggleCustomRpc(checked) } /><br /><br />\n            <TextField label=\"RPC\" onChange={(e) => updateCustomRpc(e.target.value)} value={customRpc} fullWidth /><br /><br />\n            <TextField label=\"Intital block\" onChange={(e) => updateStartingBlock(e.target.value)} value={networkConfig.startingBlock} fullWidth /><br /><br />\n            <TextField label=\"Max blocks\" onChange={(e) => updateMaxBlocks(e.target.value)} value={networkConfig.maxBlocks} fullWidth /><br /><br />\n            {\n                !!reindex && (<>\n                    <Typography variant=\"caption\">Account Settings</Typography><br />\n                    <Button onClick={() => reindex()}>Reindex</Button><br /><br />\n                </>)\n            }\n        </DialogContent>\n    </Dialog>\n}\n\nexport default SettingsDialog","export abstract class AbstractDB {\n    private internalDb: IDBDatabase | undefined;\n    private indexedDB = window.indexedDB;\n    readonly dbKey: string;\n    readonly dbVersion: number;\n    readonly migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void;\n\n    constructor(dbKey: string, dbVersion: number, migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void) {\n        this.dbKey = dbKey;\n        this.dbVersion = dbVersion;\n        this.migration = migration;\n    }\n\n    async open(): Promise<IDBDatabase> {\n        console.log(\"open\")\n        if (this.internalDb) return this.internalDb\n        const dbStore = this;\n        return new Promise((callback, reject) => {\n            const request = this.indexedDB.open(this.dbKey, this.dbVersion)\n            request.onerror = function () {\n                reject(\"Error: \" + this.error);\n            }\n            request.onsuccess = function () {\n                dbStore.internalDb = this.result;\n                callback(this.result);\n            }\n            request.onupgradeneeded = function (event) {\n                console.log(\"onupgradeneeded\")\n                dbStore.migration(this.result, event.oldVersion, this.result.version)\n            }\n        })\n    }\n}\n\nexport abstract class AbstractDAO<T> {\n    readonly db: AbstractDB;\n    readonly storeName: string;\n\n    constructor(db: AbstractDB, storeName: string) {\n        this.db = db;\n        this.storeName = storeName;\n    }\n\n\n    async add(entry: T): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.put(entry).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async remove(id: string): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.delete(id).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async get(id: string): Promise<T> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.get(id).onsuccess = function () {\n                callback(this.result as T)\n            }\n        })\n    }\n\n    async getAllByIndex(index: string, key?: IDBKeyRange | IDBValidKey): Promise<T[]> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.index(index).getAll(key).onsuccess = function () {\n                callback(this.result.reverse() as T[])\n            }\n        })\n    }\n\n    async drop(): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            transaction.objectStore(this.storeName).clear().onsuccess = function () {\n                callback()\n            }\n        })\n    }\n}","import { AbstractDB } from \"./base\";\n\nexport const INTERACTIONS_STORE = \"interactions\"\nexport const INTERACTIONS_KEY = \"id\"\nexport const INTERACTIONS_INDEX = \"timestamp\"\n\nexport const QUEUED_TX_STORE = \"queued_tx\"\nexport const QUEUED_TX_KEY = \"id\"\nexport const QUEUED_TX_INDEX = \"nonce\"\n\nexport const TX_SIGNATURES_STORE = \"tx_signatures\"\nexport const TX_SIGNATURES_KEY = \"id\"\nexport const TX_SIGNATURES_INDEX = \"safeTxHash\"\n\nexport class SafeDB extends AbstractDB {\n    constructor(safe: string) {\n        super(safe, 3, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(INTERACTIONS_STORE, { keyPath: INTERACTIONS_KEY })\n                store.createIndex(INTERACTIONS_INDEX, INTERACTIONS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(QUEUED_TX_STORE, { keyPath: QUEUED_TX_KEY })\n                store.createIndex(QUEUED_TX_INDEX, QUEUED_TX_INDEX, { unique: false })\n            }\n            if (oldVersion < 3) {\n                const store = db.createObjectStore(TX_SIGNATURES_STORE, { keyPath: TX_SIGNATURES_KEY })\n                store.createIndex(TX_SIGNATURES_INDEX, TX_SIGNATURES_INDEX, { unique: false })\n            }\n        });\n    }\n}","import { SafeInteraction } from \"safe-indexer-ts\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { AbstractDAO } from \"./base\";\nimport { INTERACTIONS_INDEX, INTERACTIONS_STORE, QUEUED_TX_INDEX, QUEUED_TX_STORE, SafeDB, TX_SIGNATURES_INDEX, TX_SIGNATURES_STORE } from \"./safe\";\n\n\nexport class InteractionsDAO extends AbstractDAO<SafeInteraction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), INTERACTIONS_STORE)\n    }\n\n    getAll(): Promise<SafeInteraction[]> {\n        return this.getAllByIndex(INTERACTIONS_INDEX)\n    }\n\n}\n\nexport interface QueuedSafeTransaction extends SafeTransaction {\n    id: string\n    version: string\n}\n\nexport class QueuedInteractionsDAO extends AbstractDAO<QueuedSafeTransaction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), QUEUED_TX_STORE)\n    }\n\n    getAll(nonce: number): Promise<QueuedSafeTransaction[]> {\n        return this.getAllByIndex(QUEUED_TX_INDEX, IDBKeyRange.lowerBound(nonce))\n    }\n}\n\nexport class TxSignaturesDAO extends AbstractDAO<SafeTransactionSignature> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), TX_SIGNATURES_STORE)\n    }\n\n    getAll(safeTxHash: string): Promise<SafeTransactionSignature[]> {\n        return this.getAllByIndex(TX_SIGNATURES_INDEX, safeTxHash)\n    }\n}","import { State } from \"safe-indexer-ts\";\n\nconst parseIntWithFallback = (input: string | undefined | null, fallback: number): number => {\n    if (!input) return fallback\n    const value = parseInt(input)\n    if (Number.isNaN(value)) return fallback\n    return value\n}\n\nexport class IndexerState implements State {\n    safe: string;\n    defaultBlock: number;\n    private _lastIndexedBlock: number;\n    private _earliestIndexedBlock: number; // 8485873 is the Block of initial 1.3.0 deployment\n    private _earliestBlock: number;\n\n    constructor(safe: string, defaultBlock?: number) {\n        this.safe = safe;\n        this.defaultBlock = defaultBlock || -1;\n        const storedEarliestIndexedBlock = localStorage.getItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe);\n        this._earliestIndexedBlock = parseIntWithFallback(storedEarliestIndexedBlock, this.defaultBlock);\n        const storedLastIndexedBlock = localStorage.getItem(\"indexer_state_safe_last_indexed_block\" + this.safe);\n        this._lastIndexedBlock = parseIntWithFallback(storedLastIndexedBlock, this.defaultBlock);\n        const storedEarliestBlock = localStorage.getItem(\"indexer_state_safe_earliest_block\" + this.safe);\n        this._earliestBlock = parseIntWithFallback(storedEarliestBlock, 0);\n    }\n\n    set lastIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_last_indexed_block\" + this.safe, value.toString())\n        this._lastIndexedBlock = value;\n    }\n    get lastIndexedBlock() {\n        return this._lastIndexedBlock\n    }\n\n    set earliestIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe, value.toString())\n        this._earliestIndexedBlock = value;\n    }\n    get earliestIndexedBlock() {\n        return this._earliestIndexedBlock\n    }\n\n    set earliestBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_block\" + this.safe, value.toString())\n        this._earliestBlock = value;\n    }\n    get earliestBlock() {\n        return this._earliestBlock\n    }\n\n    reset() {\n        localStorage.removeItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_last_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_earliest_block\" + this.safe)\n        this._lastIndexedBlock = this.defaultBlock\n        this._earliestIndexedBlock = this.defaultBlock\n    }\n}","import { providers } from \"ethers\";\nimport { Callback, IndexerStatus, SafeIndexer, SafeInteraction } from \"safe-indexer-ts\";\nimport { NetworkConfig } from \"../../components/provider/AppSettingsProvider\";\nimport { InteractionsDAO } from \"../db/interactions\";\nimport { IndexerState } from \"../state/indexer\";\nimport { Account } from \"../utils/account\";\nimport { getIndexer } from \"../utils/indexer\";\n\n\nexport class TransactionRepository implements Callback {\n    callbacks: Set<Callback> = new Set()\n    currentStatus: IndexerStatus | undefined\n    indexer: SafeIndexer | undefined\n    state: IndexerState\n    db: InteractionsDAO\n    account: Account\n    networkConfig: NetworkConfig\n\n    constructor(account: Account, networkConfig: NetworkConfig) {\n        this.account = account\n        this.networkConfig = networkConfig\n        this.db = new InteractionsDAO(account.id)\n        this.state = new IndexerState(account.id, networkConfig.startingBlock)\n    }\n\n    connect(provider: providers.Provider): () => void {\n        this.disconnect()\n        const indexer = getIndexer(this.account, provider, this.state, this.networkConfig, this)\n        this.indexer = indexer\n        indexer.start().catch((e) => console.error(e))\n        indexer.start(true).catch((e) => console.error(e))\n        return () => {\n            this.disconnect()\n        }\n    }\n\n    disconnect() {\n        this.indexer?.stop()\n        this.currentStatus = undefined\n    }\n\n    registerCallback(callback: Callback) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: Callback) {\n        this.callbacks.delete(callback)\n        this.postCurrentStatusUpdateToCallback(callback)\n    }\n\n    private checkForCreation(interactions: SafeInteraction[]) {\n        for (const interaction of interactions) {\n            console.log(interaction)\n            if (interaction.type === \"setup\" || (\n                interaction.type === \"multisig_transaction\" && interaction.details?.nonce === 0\n            )) {\n                console.log(\"Found creation, stop reverse indexing\")\n                const earliestBlock = Math.max(0, interaction.block - this.networkConfig.maxBlocks)\n                this.state.earliestBlock = earliestBlock\n                this.indexer?.updateConfig({ earliestBlock })\n                return\n            }\n        }\n    }\n\n    private async handleNewInteraction(interaction: SafeInteraction) {\n        try {\n            await this.db.add(interaction)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    onNewInteractions(interactions: SafeInteraction[]) {\n        this.checkForCreation(interactions)\n        interactions.forEach((i) => { this.handleNewInteraction(i) })\n        this.callbacks.forEach((callback) => {\n            try {\n                callback.onNewInteractions(interactions)\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    onStatusUpdate(update: IndexerStatus) {\n        this.currentStatus = update\n        this.postCurrentStatusUpdate()\n    }\n\n    private postCurrentStatusUpdate() {\n        if (!this.currentStatus) return\n        this.callbacks.forEach((cb) => { this.postCurrentStatusUpdateToCallback(cb) })\n    }\n\n    private postCurrentStatusUpdateToCallback(callback: Callback) {\n        const currentStatus = this.currentStatus\n        if (!currentStatus) return\n        try {\n            callback.onStatusUpdate?.(currentStatus)\n        } catch (e) {\n            console.log(e)\n        }\n    }\n\n    async getTx(id: string): Promise<SafeInteraction> {\n        return this.db.get(id)\n    }\n\n    async getAllTxs(): Promise<SafeInteraction[]> {\n        return this.db.getAll()\n    }\n\n    async reindex(): Promise<boolean> {\n        this.currentStatus = undefined\n        const indexer = this.indexer\n        if (!indexer) return false;\n        indexer.pause();\n        await this.db.drop();\n        this.state.reset();\n        indexer.resume();\n        return true\n    }\n\n}","\nimport { providers } from 'ethers';\nimport { Callback, EthersLoader, EthersParser, IncomingEthEventSource, IncomingTransferEventSource, ModuleTransactionEventSource, MultisigTransactionEventSource, OutgoingTransferEventSource, SafeIndexer, SafeIndexerUserConfig, SettingsChangeEventSource } from 'safe-indexer-ts'\nimport { NetworkConfig } from '../../components/provider/AppSettingsProvider';\nimport { IndexerState } from '../state/indexer';\nimport { Account } from './account';\n\nexport const getIndexer = (account: Account, provider: providers.Provider, state: IndexerState, networkConfig: NetworkConfig, callback: Callback): SafeIndexer => {\n    const loader = new EthersLoader(provider, [\n        new MultisigTransactionEventSource(provider), \n        new ModuleTransactionEventSource(provider), \n        new IncomingTransferEventSource(provider), \n        new OutgoingTransferEventSource(provider), \n        new IncomingEthEventSource(provider), \n        new SettingsChangeEventSource(provider)\n    ])\n    const parser = new EthersParser(provider)\n    const config: SafeIndexerUserConfig = { chainId: account.chainId, safe: account.address, maxBlocks: networkConfig.maxBlocks, logger: console, earliestBlock: state.earliestBlock }\n    return new SafeIndexer(state, loader, parser, callback, config)\n}","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { TransactionRepository as TransactionRepository } from \"../../logic/account/TransactionRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst TransactionRepoContext = React.createContext<TransactionRepository | undefined>(undefined);\n\nexport const useTransactionRepo = () => {\n    const repo = useContext(TransactionRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const TransactionRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { provider, networkConfig } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new TransactionRepository(account, networkConfig)\n    }, [ account, networkConfig ])\n\n    useEffect(() => {\n        if (!provider) return\n        return repo.connect(provider)\n    }, [provider])\n\n    useEffect(() => {\n        return () => repo.disconnect()\n    }, [repo])\n\n    return <TransactionRepoContext.Provider value={repo}>\n        { children }\n    </TransactionRepoContext.Provider>\n}\n\nexport default TransactionRepositoryProvider","import { useMediaQuery } from \"@mui/material\";\n\nexport const useDektopLayout = (): boolean => useMediaQuery('(min-width:600px)');","import { Typography } from \"@mui/material\"\nimport { styled } from \"@mui/system\"\n\nexport const Group = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const Row = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'row'\n}))\n\nexport const Header = styled('div')(({ theme }) => ({\n    textAlign: 'start'\n}))\n\nexport const Entry = styled('div')(({ theme }) => ({\n    display: 'flex',\n    alignItems: 'center',\n    paddingBottom: 16\n}))\n\nexport const LongText = styled(Typography)(({ theme }) => ({\n    width: '100%',\n    textAlign: 'start',\n    wordWrap: 'break-word'\n}))","import styled from '@emotion/styled';\nimport React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event, TransferTx, SettingsChangeTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    settingsChange: SettingsChangeTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const SettingsTxSummary: React.FC<Props> = ({ settingsChange, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(settingsChange.id)}>\n        {`${settingsChange.component} ${settingsChange.change}: ${settingsChange.value}`}\n        {!hideDate && (<>\n            <br />{new Date(settingsChange.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default SettingsTxSummary","import styled from '@emotion/styled';\nimport React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event, TransferTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    transfer: TransferTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const TransferTxSummary: React.FC<Props> = ({ transfer, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(transfer.id)}>\n        {`${transfer.direction} ${transfer.details.type} Transfer`}\n        {!hideDate && (<>\n            <br />{new Date(transfer.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default TransferTxSummary","import React from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\nimport TransferTxSummary from './summary/TransferTxSummary'\n\nexport interface Props {\n    interaction: SafeInteraction,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\nexport const TxSummary: React.FC<Props> = ({ interaction, showDetails, hideDate }) => {\n    switch (interaction.type) {\n        case \"multisig_transaction\":\n        case \"module_transaction\":\n        case \"setup\":\n            return <div onClick={() => showDetails?.(interaction.id)}>\n                {`${interaction.type}`}<br />\n                {!hideDate ? `${new Date(interaction.timestamp * 1000).toUTCString()}` : \"\"}<br />\n                <br />\n            </div>\n        case \"settings\":\n            return <SettingsTxSummary settingsChange={interaction} hideDate={hideDate} showDetails={showDetails} />\n        case \"transfer\":\n            return <TransferTxSummary transfer={interaction} hideDate={hideDate} showDetails={showDetails} />\n        default:\n            return <div>\n                Unknown Interaction\n            </div>\n    }\n}\n\nexport default TxSummary","import React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    interactions: SafeInteractionEvent[]\n}\n\nconst eventSummary = (event: Event): ReactElement => {\n    return <div>\n        {`Event - ${event.eventId}`}<br />\n        <br />\n    </div>\n}\n\nexport const TxEvents: React.FC<Props> = ({ interactions }) => {\n    if (interactions.length == 0) return <></>\n    return <>\n        <Header>Events:</Header>\n        <Group>\n            {interactions.map((e) => (<Entry>\n                {e.interaction ? <TxSummary interaction={e.interaction} hideDate /> : eventSummary(e.event)}\n            </Entry>))}\n        </Group>\n    </>\n}\n\nexport default TxEvents","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { ModuleTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport { Typography } from '@mui/material';\nimport TxEvents from './TxEvents';\n\nexport interface Props {\n    transaction: ModuleTx\n}\n\nexport const ModuleTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Module:</Header>\n        <Entry>\n            <Typography>{transaction.module}</Typography>\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <Typography>{transaction.txHash}</Typography>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <Typography>{transaction.details.to}</Typography>\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <Entry>\n                    <LongText>{transaction.details.data}</LongText>\n                </Entry>\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default ModuleTxDetails","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { MultisigTx } from 'safe-indexer-ts'\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport TxEvents from './TxEvents';\n\nexport interface Props {\n    transaction: MultisigTx\n}\n\nexport const MultisigTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <Typography>{transaction.txHash}</Typography>\n        </Entry>\n        <Header>Id:</Header>\n        <Entry>\n            <Typography>{transaction.safeTxHash}</Typography>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <Typography>{transaction.details.to}</Typography>\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <Entry>\n                    <LongText>{transaction.details.data}</LongText>\n                </Entry>\n                <Header>Nonce:</Header>\n                <Entry>\n                    <LongText>{transaction.details.nonce}</LongText>\n                </Entry>\n                <Header>Signatures:</Header>\n                <Entry>\n                    <LongText>{transaction.details.signatures}</LongText>\n                </Entry>\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default MultisigTxDetails","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\n\nexport interface Props {\n    transaction: TransferTx\n}\n\nconst renderDetails = (details: TransferDetails): ReactElement => {\n    let asset: string = \"\"\n    let subjectTitle: string = \"\"\n    let subject: string = \"\"\n    switch (details.type) {\n        case \"ERC20\":\n            asset = \"ERC20 - \" + details.tokenAddress\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        case \"ERC721\":\n            asset = \"ERC721 - \" + details.tokenAddress\n            subjectTitle = \"ID\"\n            subject = details.tokenId\n            break\n        case \"ETHER\":\n            asset = \"Ether\"\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        default:\n            break\n    }\n    return (<>\n        <Header>Asset:</Header>\n        <Entry>\n            <Typography>{asset}</Typography>\n        </Entry>\n        <Header>{subjectTitle}</Header>\n        <Entry>\n            <Typography>{subject}</Typography>\n        </Entry>\n    </>)\n}\n\nexport const TransferTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>From:</Header>\n        <Entry>\n            <Typography>{transaction.sender}</Typography>\n        </Entry>\n        <Header>To:</Header>\n        <Entry>\n            <Typography>{transaction.receipient}</Typography>\n        </Entry>\n        {renderDetails(transaction.details)}\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <Typography>{transaction.txHash}</Typography>\n        </Entry>\n    </Group>\n}\n\nexport default TransferTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { ReactElement, useEffect, useState } from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport ModuleTxDetails from './details/ModuleTxDetails'\nimport MultisigTxDetails from './details/MultisigTxDetails'\nimport TransferTxDetails from './details/TransferTxDetails'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst renderDetails = (interaction?: SafeInteraction): ReactElement => {\n    switch(interaction?.type) {\n        case \"multisig_transaction\":\n            return (<MultisigTxDetails transaction={interaction} />)\n        case \"module_transaction\":\n            return (<ModuleTxDetails transaction={interaction} />)\n        case \"transfer\":\n            return (<TransferTxDetails transaction={interaction} />)\n        default: \n            return (<>\"Unknown details\"</>)\n    }\n}\n\nexport const TxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const accountRepo = useTransactionRepo()\n    const [interaction, setInteraction] = useState<SafeInteraction | undefined>(undefined)\n    useEffect(() => {\n        setInteraction(undefined)\n        if (!id) return\n        const loadInteraction = async () => {\n            try {\n                setInteraction(await accountRepo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        loadInteraction()\n    }, [id, accountRepo, setInteraction, handleClose])\n    return <TxDialog open={!!id} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Transaction Details</DialogTitle>\n        <DialogContent>\n            {renderDetails(interaction)}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default TxDetails","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Callback, SafeInteraction } from 'safe-indexer-ts';\nimport { Button, styled } from '@mui/material';\nimport { useAccount } from '../Dashboard';\nimport SettingsDialog from '../../settings/SettingsDialog';\nimport TxDetails from './TxDetails';\nimport TxSummary from './TxSummary';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\",\n}))\n\nfunction Transactions() {\n  const account = useAccount()\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [txs, setTxs] = useState<SafeInteraction[]>([])\n  const [status, setStatus] = useState<string>(\"\")\n  const [showSettings, setShowSettings] = useState<boolean>(false)\n  const accountRepo = useTransactionRepo()\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: () => {\n        accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n      },\n      onStatusUpdate: (update) => {\n        switch (update.type) {\n          case \"up_to_date\":\n            setStatus(`Up to date with block ${update.latestBlock}`)\n            break;  \n          case \"processing\":\n            setStatus(`Indexing block ${update.fromBlock}/${update.latestBlock}`)\n            break;\n          case \"aborted\":\n            setStatus(`Indexing aborted: ${update.reason}`)\n            break;\n          default:\n            setStatus(\"\")\n            break;\n        }\n      }\n    }\n    accountRepo.registerCallback(callback)\n    return () => accountRepo.unregisterCallback(callback)\n  }, [accountRepo, txs, setTxs, setStatus])\n\n  useEffect(() => {\n    // Reset id if account changes\n    setSelectedId(undefined)\n  }, [account])\n\n  const showDetails = useCallback(async (id) => {\n    setSelectedId(id)\n  }, [setSelectedId])\n\n  const reindex = useCallback(async () => {\n    if (await accountRepo.reindex()) {\n      accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n      setStatus(\"Waiting for reindexing\")\n    }\n  }, [accountRepo, setStatus])\n\n  useEffect(() => {\n    setTxs([])\n    accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n  }, [accountRepo, setTxs])\n\n  const details = useMemo(() => {\n    return <TxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <>\n        {status}<br />\n        <Button onClick={() => setShowSettings(true)}>Settings</Button>\n      </>\n      {txs.map((e) => <TxSummary interaction={e} showDetails={(id) => showDetails(id)} />)}\n      <SettingsDialog open={showSettings} handleClose={() => setShowSettings(false)} reindex={reindex} />\n      {details}\n    </Root>\n  );\n}\n\nexport default Transactions;\n","import { Signer, TypedDataSigner, TypedDataDomain, TypedDataField } from \"@ethersproject/abstract-signer\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"./account\";\n\nexport type SafeSignatureType = \"eip712\" | \"eth_sign\" | \"pre_validated\" | \"contract\"\n\nconst recoverEthSign = (safeTxHash: string, signature: string) => {\n    const hash = ethers.utils.hashMessage(ethers.utils.arrayify(safeTxHash))\n    // TODO: adjust v\n    return ethers.utils.recoverAddress(hash, signature)\n}\n\nconst recoverEIP712 = (safeTxHash: string, signature: string) => {\n    return ethers.utils.recoverAddress(safeTxHash, signature)\n}\n\nconst recoverPreValidated = async (signature: string) => {\n    // TODO: add on-chain check\n    return signature.slice(0, 66)\n}\n\nexport const checkSafeTransactionSignature = async (signature: SafeTransactionSignature) => {\n    let signer;\n    switch (signature.type) {\n        case \"eth_sign\": {\n            signer = recoverEthSign(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"eip712\": {\n            signer = recoverEIP712(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"pre_validated\": {\n            signer = recoverPreValidated(signature.data)\n            break\n        }\n        case \"contract\": {\n            throw Error(\"Contract signatures not supported yet\")\n        }\n        default: {\n            throw Error(\"Unknown signature type\")\n        }\n    }\n    if (signer !== signature.signer) throw Error(`Unexpected signer! Expected ${signature.signer} got ${signer}`)\n}\n\nexport const shareableSignatureString = (signature: SafeTransactionSignature): string => {\n    return `${signature.data}:${signature.signer}:${signature.safeTxHash}:${signature.type}`\n}\n\nexport const parseSafeSignature = async (signatureString: string, safeTxHash?: string, sigType?: SafeSignatureType): Promise<SafeTransactionSignature> => {\n    const signatureParts = signatureString.split(\":\")\n    if (\n        (signatureParts.length == 2 && !safeTxHash && !sigType) ||\n        (signatureParts.length == 3 && !sigType) ||\n        signatureParts.length != 4\n    ) {\n        throw Error(\"Missing Safe signature info\")\n    }\n    const data = signatureParts[0]\n    const signer = signatureParts[1]\n    const hash = safeTxHash || signatureParts[2]\n    // TODO: verify signature type\n    const type = sigType || signatureParts[3] as SafeSignatureType\n    const id = ethers.utils.keccak256(data + hash.slice(2))\n    return {\n        id,\n        type,\n        signer,\n        safeTxHash: hash,\n        data\n    }\n}\n\nexport const parseSignatureType = (signature: string): SafeSignatureType => {\n    const sigType = signature.slice(-2)\n    switch(sigType) {\n        case \"00\": {\n            return \"contract\" // contract signature (aka old eip 1271 version)\n        }\n        case \"01\": {\n            return \"pre_validated\" // pre-validated signature\n        }\n        case \"1b\": \n        case \"1c\": {\n            return \"eip712\" // Typed Data based signature\n        }\n        case \"1f\": \n        case \"20\": {\n            return \"eth_sign\" // eth_sign based signature\n        }\n        default: \n            throw Error(\"Unknown signature type\")\n    }\n}\n\nconst getEIP712Domain = (version: string, account: Account): TypedDataDomain => {\n    switch (version) {\n        case \"1.3.0\": {\n            return {\n                verifyingContract: account.address,\n                chainId: account.chainId\n            }\n        }\n        default: {\n            return { verifyingContract: account.address }\n        }\n    }\n}\n\nconst getEIP712TxType = (version: string): Record<string, TypedDataField[]> => {\n    switch (version) {\n        case \"0.1.0\": {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"dataGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n        default: {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"baseGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n    }\n}\n\nconst signEip712 = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer._signTypedData(\n        getEIP712Domain(transaction.version, account),\n        getEIP712TxType(transaction.version),\n        transaction\n    )\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEIP712(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    return {\n        type: \"eip712\",\n        id: signatureString,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nconst signMessage = async (signer: Signer & TypedDataSigner, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer.signMessage(arrayify(transaction.id))\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEthSign(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    return {\n        type: \"eth_sign\",\n        id: signatureString,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nexport const buildPreValidatedSignature = async (signerAddress: string, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signature = \"0x000000000000000000000000\" + signerAddress.slice(2) + \"0000000000000000000000000000000000000000000000000000000000000000\" + \"01\"\n    return {\n        id: signature + transaction.id,\n        safeTxHash: transaction.id,\n        type: \"pre_validated\",\n        signer: signerAddress,\n        data: signature,\n    }\n}\n\nexport const signQueuedTx = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    try {\n        return await signEip712(signer, account, transaction)\n    } catch (e: any) {\n        if (e.code && e.code === 4001) {\n            console.warn(\"User canceled signing\")\n            throw e\n        }\n        console.warn(\"Could not sign with EIP-712\")\n    }\n    return await signMessage(signer, transaction) \n}","import { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { SafeStatus } from \"./safe\";\nimport { buildPreValidatedSignature } from \"./signatures\";\n\nexport const prepareSignatures = async (status: SafeStatus, tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[], submitterAddress?: string): Promise<SafeTransactionSignature[]> => {\n    const signatureMap = new Map<String, SafeTransactionSignature>()\n    for (const signature of signatures) {\n        if (status.owners.indexOf(signature.signer) < 0) continue\n        if (submitterAddress === signature.signer || signatureMap.has(signature.signer)) continue\n        signatureMap.set(signature.signer, signature)\n    }\n    const submitterIsOwner = submitterAddress && status.owners.indexOf(submitterAddress) >= 0\n    const requiredSigntures = submitterIsOwner ? status.threshold.sub(1) : status.threshold\n    if (requiredSigntures.toNumber() > signatureMap.size) throw Error(`Not enough signatures (${signatureMap.size} of ${requiredSigntures})`)\n    const signatureArray = []\n    if (submitterIsOwner) {\n        signatureArray.push(await buildPreValidatedSignature(submitterAddress, tx))\n    }\n    return signatureArray.concat(Array.from(signatureMap.values()).slice(0, requiredSigntures.toNumber()))\n}\n\nconst buildStaticPart = (signature: SafeTransactionSignature, offset: number): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return \"\" +\n                ethers.utils.defaultAbiCoder.encode([\"address\"], [signature.signer]).slice(2) +\n                ethers.utils.defaultAbiCoder.encode([\"uint256\"], [offset]).slice(2) +\n                \"00\"\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return signature.data.slice(2)\n    }\n}\n\nconst buildDynamicPart = (signature: SafeTransactionSignature): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return ethers.utils.defaultAbiCoder.encode([\"bytes\"], [arrayify(signature.data)]).slice(2)\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return \"\"\n    }\n}\n\nexport const buildSignatureBytes = (signatures: SafeTransactionSignature[]): string => {\n    signatures.sort((left, right) => left.signer.toLowerCase().localeCompare(right.signer.toLowerCase()))\n    let staticParts = \"\"\n    let dynamicParts = \"\"\n    for (const sig of signatures) {\n        staticParts += buildStaticPart(sig, dynamicParts.length / 2)\n        dynamicParts += buildDynamicPart(sig)\n    }\n    return \"0x\" + staticParts + dynamicParts\n}","import { Contract } from \"@ethersproject/contracts\";\nimport { safeInterface, SignedSafeTransaction } from \"safe-indexer-ts\";\nimport { ethers, BigNumber, Signer } from \"ethers\";\nimport { SafeTransaction } from \"../models/transactions\";\n\nexport interface SafeStatus {\n    nonce: BigNumber,\n    threshold: BigNumber,\n    owners: string[],\n    version: string\n}\n\nexport class Safe {\n    protected readonly safeContract: Contract\n\n    constructor(address: string, providerOrSigner?: ethers.providers.Provider | Signer) {\n        this.safeContract = new Contract(address, safeInterface, providerOrSigner)\n    }\n\n    writable(signer: Signer): WritableSafe {\n        return new WritableSafe(this.safeContract.address, signer)\n    }\n\n    nonce(): Promise<BigNumber> {\n        return this.safeContract.nonce()\n    }\n\n    owners(): Promise<string> {\n        return this.safeContract.getOwners()\n    }\n\n    async status(): Promise<SafeStatus> {\n        const information = await Promise.all([\n            this.safeContract.nonce(),\n            this.safeContract.getThreshold(),\n            this.safeContract.getOwners(),\n            this.safeContract.VERSION(),\n        ])\n        return {\n            nonce: information[0],\n            threshold: information[1],\n            owners: information[2],\n            version: information[3]\n        }\n    }\n\n    async getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }> {\n        const hash: string = await this.safeContract.getTransactionHash(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.nonce\n        )\n        const version: string = await this.safeContract.VERSION()\n        return { hash, version }\n    }\n}\n\nexport class WritableSafe extends Safe {\n    constructor(address: string, signer: Signer) {\n        super(address, signer)\n    }\n\n    executeTx(tx: SignedSafeTransaction): Promise<string> {\n        return this.safeContract.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}","import { providers, Signer, BigNumber } from \"ethers\";\nimport { QueuedInteractionsDAO, QueuedSafeTransaction, TxSignaturesDAO } from \"../db/interactions\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"../utils/account\";\nimport { buildSignatureBytes, prepareSignatures } from \"../utils/execution\";\nimport { Safe } from \"../utils/safe\";\n\nexport interface QueueRepositoryUpdates {\n    onNewTx: () => void\n}\n\nexport class QueueRepository {\n    callbacks: Set<QueueRepositoryUpdates> = new Set()\n    queueDao: QueuedInteractionsDAO\n    signaturesDao: TxSignaturesDAO\n    account: Account\n    safe: Safe\n\n    constructor(account: Account, provider?: providers.Provider) {\n        this.account = account\n        this.queueDao = new QueuedInteractionsDAO(account.id)\n        this.signaturesDao = new TxSignaturesDAO(account.id)\n        this.safe = new Safe(account.address, provider)\n    }\n\n    registerCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.delete(callback)\n    }\n\n    private notifyNewTxs() {\n        this.callbacks.forEach((callback) => { \n            try {\n                callback.onNewTx()\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    async addTx(tx: SafeTransaction): Promise<QueuedSafeTransaction> {\n        const hashInfo = await this.safe.getTransactionHash(tx)\n        const queuedTx = {\n            id: hashInfo.hash,\n            version: hashInfo.version,\n            ...tx\n        }\n        await this.queueDao.add(queuedTx)\n        this.notifyNewTxs()\n        return queuedTx\n    }\n\n    async getTx(hash: string): Promise<QueuedSafeTransaction> {\n        return this.queueDao.get(hash)\n    }\n\n    async getQueuedTxs(): Promise<QueuedSafeTransaction[]> {\n        const nonce = await this.safe.nonce()\n        return this.queueDao.getAll(nonce.toNumber())\n    }\n\n    async getNextNonce(): Promise<string> {\n        const queuedTxs = await this.getQueuedTxs()\n        if (queuedTxs.length > 0) {\n            return BigNumber.from(queuedTxs[queuedTxs.length - 1].nonce).add(1).toString()\n        }\n        return (await this.safe.nonce()).toString()\n    }\n\n    async getSignatures(hash: string): Promise<SafeTransactionSignature[]> {\n        return this.signaturesDao.getAll(hash)\n    }\n\n    async addSignature(signature: SafeTransactionSignature): Promise<void> {\n        await this.signaturesDao.add(signature)\n    }\n\n    async submitTx(tx: QueuedSafeTransaction, submitter: Signer, signatures: SafeTransactionSignature[]): Promise<string> {\n        const writableSafe = this.safe.writable(submitter)\n        const status = await this.safe.status()\n        if (status.nonce.toNumber() !== tx.nonce) throw Error(`Unexpected nonce! Expected ${status.nonce} got ${tx.nonce}`)\n        const submitterAddress = await submitter.getAddress()\n        const signatureBytes = buildSignatureBytes(await prepareSignatures(status, tx, signatures, submitterAddress))\n        const signedTx = {\n            signatures: signatureBytes,\n            ...tx\n        }\n        return writableSafe.executeTx(signedTx)\n    }\n\n}","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { QueueRepository } from \"../../logic/account/QueueRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst QueueRepoContext = React.createContext<QueueRepository | undefined>(undefined);\n\nexport const useQueueRepo = () => {\n    const repo = useContext(QueueRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const QueueRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { provider } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new QueueRepository(account, provider)\n    }, [ account, provider ])\n\n    return <QueueRepoContext.Provider value={repo}>\n        { children }\n    </QueueRepoContext.Provider>\n}\n\nexport default QueueRepositoryProvider","import React from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\n\nexport interface Props {\n    transaction: QueuedSafeTransaction,\n    showDetails?: (id: string) => void\n}\nexport const QueuedTxSummary: React.FC<Props> = ({ transaction, showDetails }) => {\n    return <div onClick={() => showDetails?.(transaction.id)}>\n        {transaction.to}<br />\n        {transaction.nonce} - {transaction.version} - {transaction.id.slice(0, 10)}<br />\n    </div>\n}\n\nexport default QueuedTxSummary","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useState } from 'react'\nimport { parseSafeSignature } from '../../../logic/utils/signatures'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    safeTxHash?: string\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const AddSignatureDialog: React.FC<Props> = ({ safeTxHash, open, handleClose, handleNewSignature }) => {\n    const [signerString, setSignerString] = useState(\"\")\n    const [signatureString, setSignatureString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n\n    const handleAdd = async () => {\n        if (!safeTxHash) return\n        try {\n            const signature = await parseSafeSignature(signatureString, safeTxHash)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n            setSignerString(\"\")\n            setSignatureString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Add Signature</DialogTitle>\n        <DialogContent>\n            <TextField label=\"Signature\" onChange={(e) => setSignatureString(e.target.value)} value={signatureString} fullWidth /><br />\n            <TextField label=\"Signer (optional)\" onChange={(e) => setSignerString(e.target.value)} value={signerString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleAdd}>Add</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default AddSignatureDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { parseSafeSignature, signQueuedTx } from '../../../logic/utils/signatures'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const SignTransactionDialog: React.FC<Props> = ({ transaction, open, handleClose, handleNewSignature }) => {\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n    const { signer, enable } = useAppSettings()\n\n    const handleSign = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const accounts = await enable()\n            if (accounts.length === 0) throw Error(\"No accounts available\")\n            const signature = await signQueuedTx(signer, account, transaction)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleSign()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Sign Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default SignTransactionDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleTxSubmitted?: (ethereumTxHash: string) => void\n}\n\nexport const ExecuteTxDialog: React.FC<Props> = ({ transaction, open, handleClose, handleTxSubmitted }) => {\n    const queuedRepo = useQueueRepo()\n    const { signer, enable } = useAppSettings()\n\n    const handleExecution = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const accounts = await enable()\n            if (accounts.length === 0) throw Error(\"No accounts available\")\n            const signatures = await queuedRepo.getSignatures(transaction.id)\n            const ethereumTxHash = await queuedRepo.submitTx(transaction, signer, signatures)\n            handleTxSubmitted?.(ethereumTxHash)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleExecution()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n    <DialogTitle>Execute Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ExecuteTxDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Entry, Group, Header, LongText } from '../../../styled/tables';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { SafeTransactionSignature } from '../../../logic/models/transactions';\nimport AddSignatureDialog from './AddSignatureDialog';\nimport SignTransactionDialog from './SignTransactionDialog';\nimport ExecuteTxDialog from './ExecuteTxDialog';\nimport { shareableSignatureString } from '../../../logic/utils/signatures';\nimport { useDektopLayout } from '../../utils/media';\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst shareSignature = (sig: SafeTransactionSignature) => {\n    const shareText = shareableSignatureString(sig)\n    console.log({shareText})\n    navigator.clipboard.writeText(shareText)\n}\n\nexport const QueuedTxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [showAddSignature, setShowAddSignature] = useState<boolean>(false)\n    const [showSignTransaction, setShowSignTransaction] = useState<boolean>(false)\n    const [showExecuteTransaction, setShowExecuteTransaction] = useState<boolean>(false)\n    const repo = useQueueRepo()\n\n    const [transaction, setTransaction] = useState<QueuedSafeTransaction | undefined>(undefined)\n    useEffect(() => {\n        setTransaction(undefined)\n        if (!id) return\n        const load = async () => {\n            try {\n                setTransaction(await repo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        load()\n    }, [id, repo, setTransaction, handleClose])\n\n    const [signatures, setSignatures] = useState<SafeTransactionSignature[] | undefined>(undefined)\n    const loadSignatures = useCallback(async () => {\n        console.log(\"Load Signatures\")\n        if (!id) return\n        try {\n            setSignatures(await repo.getSignatures(id))\n        } catch(e) {\n            console.error(e)\n        }\n    }, [id, repo, setSignatures])\n    useEffect(() => {\n        setSignatures(undefined)\n        loadSignatures()\n    }, [loadSignatures])\n    return <>\n        <TxDialog open={!!id && !showAddSignature} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n            <DialogTitle>Transaction Details</DialogTitle>\n            <DialogContent>\n                {transaction ? (\n                    <Group>\n                        <Header>Id:</Header>\n                        <Entry>\n                            <LongText>{transaction.id}</LongText>\n                        </Entry>\n                        <Header>Operation:</Header>\n                        <Entry>\n                            <Typography>{transaction.operation}</Typography>\n                        </Entry>\n                        <Header>To:</Header>\n                        <Entry>\n                            <Typography>{transaction.to}</Typography>\n                        </Entry>\n                        <Header>Value:</Header>\n                        <Entry>\n                            <Typography>{transaction.value}</Typography>\n                        </Entry>\n                        <Header>Data:</Header>\n                        <Entry>\n                            <LongText>{transaction.data}</LongText>\n                        </Entry>\n                        <Header>Nonce:</Header>\n                        <Entry>\n                            <LongText>{transaction.nonce}</LongText>\n                        </Entry>\n                        <Header>Signatures:</Header>\n                        {signatures?.map((sig) => (<Entry>\n                            <LongText onClick={() => { shareSignature(sig) }}>{sig.signer}</LongText>\n                        </Entry>))}\n                        <Button onClick={() => setShowSignTransaction(true)}>Sign</Button>\n                        <Button onClick={() => setShowAddSignature(true)}>Add</Button>\n                        <Button onClick={() => setShowExecuteTransaction(true)}>Execute</Button>\n                    </Group>\n                ) : (\n                    <>\"Unknown details\"</>\n                )}\n            </DialogContent>\n            <DialogActions>\n            <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </TxDialog>\n        <AddSignatureDialog open={showAddSignature} handleClose={() => setShowAddSignature(false) } handleNewSignature={loadSignatures} safeTxHash={id} />\n        <SignTransactionDialog open={showSignTransaction} handleClose={() => setShowSignTransaction(false) } handleNewSignature={loadSignatures} transaction={transaction} />\n        <ExecuteTxDialog open={showExecuteTransaction} handleClose={() => setShowExecuteTransaction(false) } handleTxSubmitted={handleClose} transaction={transaction} />\n    </>\n}\n\nexport default QueuedTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport { ethers, BigNumber } from 'ethers'\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { SafeTransaction, MetaTransaction } from '../../../logic/models/transactions'\nimport { buildTx } from '../../../logic/utils/proposing'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n    onConfirm: (tx: QueuedSafeTransaction, requestId?: string) => void\n    onReject?: (message: string, requestId?: string) => void\n    transactions?: MetaTransaction[]\n    requestId?: string\n}\n\nexport const ProposeTxs: React.FC<Props> = ({ open, handleClose, onConfirm, onReject, requestId, transactions }) => {\n    const [toString, setToString] = useState(\"\")\n    const [valueString, setValueString] = useState(\"\")\n    const [dataString, setDataString] = useState(\"\")\n    const [operationString, setOperationString] = useState(\"\")\n    const [nonceString, setNonceString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n\n    useEffect(() => {\n        if (!open) return\n        (async () => {\n            setNonceString(await queuedRepo.getNextNonce())\n        })()\n    }, [queuedRepo, open])\n\n    useEffect(() => {\n        const defaultTx = buildTx(account, transactions)\n        setToString(defaultTx.to)\n        setValueString(defaultTx.value)\n        setDataString(defaultTx.data)\n        setOperationString(defaultTx.operation.toString())\n    }, [account, transactions])\n\n    const cancelCreation = () => {\n        onReject?.(\"Canceled\", requestId)\n        handleClose()\n    }\n\n    const handleCreate = async () => {\n        try {\n            if (dataString && !ethers.utils.isHexString(dataString)) throw Error(\"Invalid data\")\n            const tx: SafeTransaction = {\n                to: ethers.utils.getAddress(toString),\n                value: BigNumber.from(valueString).toString(),\n                data: dataString || \"0x\",\n                nonce: parseInt(nonceString),\n                operation: parseInt(operationString),\n                safeTxGas: \"0\",\n                baseGas: \"0\",\n                gasPrice: \"0\",\n                gasToken: ethers.constants.AddressZero,\n                refundReceiver: ethers.constants.AddressZero,\n            }\n            const queuedTx = await queuedRepo.addTx(tx)\n            onConfirm(queuedTx, requestId)\n            handleClose()\n            setToString(\"\")\n            setValueString(\"\")\n            setDataString(\"\")\n            setOperationString(\"\")\n            setNonceString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n    return <TxDialog open={open} onClose={cancelCreation} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Add Tx</DialogTitle>\n        <DialogContent>\n            <TextField label=\"To\" onChange={(e) => setToString(e.target.value)} value={toString} fullWidth /><br />\n            <TextField label=\"Value\" onChange={(e) => setValueString(e.target.value)} value={valueString} fullWidth /><br />\n            <TextField label=\"Data\" onChange={(e) => setDataString(e.target.value)} value={dataString} fullWidth /><br />\n            <TextField label=\"Operation\" onChange={(e) => setOperationString(e.target.value)} value={operationString} fullWidth /><br />\n            <TextField label=\"Nonce\" onChange={(e) => setNonceString(e.target.value)} value={nonceString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={cancelCreation}>Cancel</Button>\n          <Button onClick={handleCreate} color=\"primary\">Create</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ProposeTxs","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Button, styled } from '@mui/material';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider';\nimport QueuedTxSummary from './QueuedTxSummary';\nimport QueuedTxDetails from './QueuedTxDetails';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\nimport { Callback } from 'safe-indexer-ts';\nimport { QueueRepositoryUpdates } from '../../../logic/account/QueueRepository';\nimport ProposeTxs from './ProposeTxsDialog';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\"\n}))\n\nfunction Queue() {\n  const [showNewTxDialog, setShowNewTxDialog] = useState<boolean>(false)\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [ququedTxs, setQueuedTxs] = useState<QueuedSafeTransaction[]>([])\n  const queueRepo = useQueueRepo()\n  const txRepo = useTransactionRepo()\n\n  const loadQueuedTxs = useCallback(async () => {\n    try {\n      setQueuedTxs(await queueRepo.getQueuedTxs())\n    } catch (e) {\n      console.error(e)\n    }\n  }, [queueRepo, setQueuedTxs])\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: loadQueuedTxs\n    }\n    txRepo.registerCallback(callback)\n    return () => txRepo.unregisterCallback(callback)\n  }, [txRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    const callback: QueueRepositoryUpdates = {\n      onNewTx: loadQueuedTxs\n    }\n    queueRepo.registerCallback(callback)\n    return () => queueRepo.unregisterCallback(callback)\n  }, [queueRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    loadQueuedTxs()\n  }, [loadQueuedTxs])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={showNewTxDialog} handleClose={() => setShowNewTxDialog(false)} onConfirm={() => loadQueuedTxs() } />\n  }, [showNewTxDialog, setShowNewTxDialog])\n\n  const details = useMemo(() => {\n    return <QueuedTxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <Button onClick={() => setShowNewTxDialog(true)}>Add</Button>\n      {ququedTxs.map((tx) => <QueuedTxSummary transaction={tx} showDetails={(id) => setSelectedId(id)} />)}\n      {creation}\n      {details}\n    </Root>\n  );\n}\n\nexport default Queue;\n","export const defaultApps: AppOption[] = [\n    {\n        title: \"WalletConnect\",\n        url: \"https://apps.gnosis-safe.io/wallet-connect\"\n    },\n    {\n        title: \"ENS\",\n        url: \"https://app.ens.domains/\"\n    }\n].map((entry) => {return {\n    section: \"Default\",\n    ...entry\n}})\n\nexport interface AppOption {\n    section: string,\n    title: string,\n    url: string\n}","import { Account } from \"../utils/account\";\nimport { AbstractDAO, AbstractDB } from \"./base\";\n\nexport const ACCOUNTS_STORE = \"accounts\"\nexport const ACCOUNTS_KEY = \"id\"\nexport const ACCOUNTS_INDEX = \"timestamp\"\n\nexport const APP_URLS_STORE = \"app_urls\"\nexport const APP_URLS_KEY = \"id\"\nexport const APP_URLS_INDEX = \"timestamp\"\n\nexport interface StoredAccount extends Account {\n    timestamp: number\n}\n\nexport interface StoredAppUrls {\n    id: string,\n    timestamp: number\n}\n\nexport class AppDB extends AbstractDB {\n    constructor() {\n        super(\"app_state\", 2, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(ACCOUNTS_STORE, { keyPath: ACCOUNTS_KEY })\n                store.createIndex(ACCOUNTS_INDEX, ACCOUNTS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(APP_URLS_STORE, { keyPath: APP_URLS_KEY })\n                store.createIndex(APP_URLS_INDEX, APP_URLS_INDEX, { unique: false })\n            }\n        });\n    }\n}\n\nexport class AccountsDAO extends AbstractDAO<StoredAccount> {\n    constructor() {\n        super(new AppDB(), ACCOUNTS_STORE)\n    }\n\n    getAll(): Promise<StoredAccount[]> {\n        return this.getAllByIndex(ACCOUNTS_INDEX)\n    }\n}\n\nexport class AppUrlsDAO extends AbstractDAO<StoredAppUrls> {\n    constructor() {\n        super(new AppDB(), APP_URLS_STORE)\n    }\n\n    getAll(): Promise<StoredAppUrls[]> {\n        return this.getAllByIndex(APP_URLS_INDEX)\n    }\n}\n","export const chainIdToNetwork: Record<number, string> = {\n    1: \"MAINNET\",\n    2: \"MORDEN\",\n    3: \"ROPSTEN\",\n    4: \"RINKEBY\",\n    5: \"GOERLI\",\n    42: \"KOVAN\",\n    56: \"BSC\",\n    100: \"XDAI\",\n    137: \"POLYGON\",\n    246: \"ENERGY_WEB_CHAIN\",\n    4447: \"LOCAL\",\n    73799: \"VOLTA\",\n}","import {\n    getSDKVersion,\n    SDKMessageEvent,\n    MethodToResponse,\n    Methods,\n    SafeInfo,\n    MessageFormatter,\n    RequestId,\n    BaseTransaction,\n    RPCPayload\n} from '@gnosis.pm/safe-apps-sdk'\nimport {\n    providers\n} from 'ethers'\nimport { Account } from '../utils/account'\nimport { chainIdToNetwork } from '../utils/chainIdToNetwork'\n\ntype LegacyMethods = 'getEnvInfo'\ntype SDKMethods = Methods | LegacyMethods\n\nexport interface MessageHandlers {\n    onTransactionProposal: (transactions: BaseTransaction[], requestId: RequestId) => void\n}\n\nexport class FrameCommunicator {\n    provider?: providers.JsonRpcProvider\n    constructor(\n        readonly frame: React.RefObject<HTMLIFrameElement>,\n        readonly appUrl: string,\n        readonly info: Account,\n        readonly handlers: MessageHandlers\n    ) { }\n\n    handleMessage(\n        method: SDKMethods,\n        params: unknown,\n        requestId: RequestId\n    ) {\n        if (!method) {\n            console.error('ThirdPartyApp: A message was received without message id.')\n            return\n        }\n        console.log(`Received ${method} with ${JSON.stringify(params)}`)\n\n        switch (method) {\n            case 'sendTransactions': {\n                if (params) {\n                    this.handlers.onTransactionProposal(\n                        // @ts-expect-error explore ways to fix this\n                        params.txs as Transaction[],\n                        requestId,\n                    )\n                }\n                break\n            }\n\n            case 'getEnvInfo': {\n                this.sendResponse({ txServiceUrl: \"\" }, requestId)\n                break\n            }\n\n            case 'getSafeInfo': {\n                this.sendResponse({\n                    safeAddress: this.info.address,\n                    chainId: this.info.chainId,\n                    network: chainIdToNetwork[this.info.chainId],\n                }, requestId)\n                break\n            }\n\n            case 'rpcCall': {\n                const payload = params as RPCPayload\n                const communicator = this\n                try {\n                    this.provider!!.send(payload.call, payload.params).then(\n                        (resp: any) => {\n                            communicator.sendResponse(resp, requestId)\n                        }, (err: any) => {\n                            communicator.sendError(err, requestId)\n                        }\n                    )\n                } catch (err: any) {\n                    communicator.sendError(err.toString(), requestId)\n                }\n                break\n            }\n\n            default: {\n                console.error(`ThirdPartyApp: A message was received with an unknown method ${method}.`)\n                this.sendError(`Unknown method ${method}.`, requestId)\n                break\n            }\n        }\n    }\n\n    onMessage(message: SDKMessageEvent) {\n        if (message.source === window) {\n            return\n        }\n        if (!this.appUrl.includes(message.origin)) {\n            console.error(`ThirdPartyApp: A message was received from an unknown origin ${message.origin}`)\n            return\n        }\n        this.handleMessage(message.data.method, message.data.params, message.data.id)\n    }\n\n    sendResponse(\n        data: MethodToResponse[Methods],\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeResponse(requestId, data, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    sendError(\n        error: string,\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    connect(defaultWindow?: Window): (() => void) | undefined {\n        const eventWindow = defaultWindow || this.frame.current?.contentWindow\n        if (!eventWindow) return\n        const callback = (ev: MessageEvent<any>) => { this.onMessage(ev) }\n        eventWindow.addEventListener('message', callback)\n        return () => {\n            eventWindow.removeEventListener('message', callback)\n        }\n    }\n}","import { useCallback, useEffect, useMemo, useState, useRef } from 'react';\nimport { CircularProgress, styled } from '@mui/material';\nimport { FrameCommunicator } from '../../../logic/apps/connector';\nimport {\n  RequestId,\n  BaseTransaction\n} from '@gnosis.pm/safe-apps-sdk'\nimport { useAccount } from '../Dashboard';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport ProposeTxs from '../queue/ProposeTxsDialog';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\n\nconst AppFrame = styled('iframe')(({ theme }) => ({\n  width: \"100%\",\n  height: \"100%\",\n  border: 0\n}))\n\ninterface ProposalParams {\n    transactions: BaseTransaction[]\n    requestId: RequestId\n}\n\nexport interface Props {\n  appUrl: string\n}\n\nconst AppWindow: React.FC<Props> = ({ appUrl }) =>  {\n  const account = useAccount()\n  const { provider } = useAppSettings()\n  const [loading, setLoading] = useState<boolean>(false)\n  const [proposalParams, setProposalParams] = useState<ProposalParams | undefined>(undefined)\n  const appFrame = useRef<HTMLIFrameElement>(null)\n  const communicator: FrameCommunicator = useMemo(() => {\n    return new FrameCommunicator(appFrame, appUrl, account, {\n      onTransactionProposal: (transactions, requestId) => {\n        if (transactions.length == 0) return\n        if (document.hidden) {\n          window.alert(\"New transaction\")\n        }\n        setProposalParams({ transactions, requestId })\n      }\n    })\n  }, [account, appFrame, appUrl, setProposalParams])\n\n  useEffect(() => {\n    communicator.provider = provider\n  }, [communicator, provider])\n\n  const handleTransactionConfirmation = useCallback(async (tx: QueuedSafeTransaction, requestId?: string) => {\n    console.log(\"handleTransactionConfirmation\", tx, requestId)\n    communicator.sendResponse({ safeTxHash: tx.id }, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  const handleTransactionRejection = useCallback(async (message: string, requestId?: string) => {\n    console.log(\"handleTransactionRejection\", message, requestId)\n    communicator.sendError(message, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  useEffect(() => {\n    return communicator.connect(window)\n  }, [communicator])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={!!proposalParams}\n      transactions={proposalParams?.transactions?.map((tx) => {\n        return {\n          ...tx,\n          operation: 0\n        }\n      })}\n      requestId={proposalParams?.requestId}\n      onReject={handleTransactionRejection}\n      onConfirm={handleTransactionConfirmation}\n      handleClose={() => setProposalParams(undefined) } />\n  }, [proposalParams, handleTransactionRejection, handleTransactionConfirmation])\n\n  if (loading) return (<CircularProgress />)\n  return (\n    <>\n      <AppFrame ref={appFrame} src={appUrl} />\n      {creation}\n    </>\n  );\n}\n\nexport default AppWindow;\n","import { Autocomplete, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport { useState, useMemo, useEffect } from 'react';\nimport { AppOption, defaultApps } from '../../../logic/apps/appList';\nimport { AppUrlsDAO } from '../../../logic/db/app';\nimport { Group, Row } from '../../../styled/tables';\nimport AppWindow from './AppWindow';\n\nconst Root = styled(Group)(({ theme }) => ({\n  textAlign: \"center\",\n  width: \"100vw\",\n  height: \"100vh\"\n}))\n\nfunction Apps() {\n  const appUrlsDao = useMemo(() => new AppUrlsDAO(), [])\n  const [appUrl, setAppUrl] = useState(defaultApps[0].url)\n  const [appUrlError, setAppUrlError] = useState(\"\")\n  const [appUrlInput, setAppUrlInput] = useState(appUrl)\n  const [appUrlsHistory, setAppUrlsHistory] = useState<AppOption[]>([])\n\n  useEffect(() => {\n    (async () => {\n      const appHistory = (await appUrlsDao.getAll()).map(appUrl => {\n        return {\n          section: \"History\",\n          title: appUrl.id,\n          url: appUrl.id\n        }\n      })\n      setAppUrlsHistory(defaultApps.concat(appHistory))\n    })()\n  }, [setAppUrlsHistory, appUrl])\n\n  const handleInputChange = (input: string | AppOption | null, openUrl?: boolean) => {\n    let newValue: string\n    if (!input) {\n      newValue = \"\"\n    } else if (typeof input === \"string\") {\n      newValue = input\n    } else {\n      newValue = input.url\n    }\n    setAppUrlInput(newValue)\n    setAppUrlError(\"\")\n\n    if (openUrl) {\n      openAppUrl(newValue)\n    }\n  }\n\n  const openAppUrl = async (appUrl: string) => {\n    let cleanUrl = appUrl.trim()\n    if (cleanUrl.length === 0) {\n      setAppUrlError(\"Empty App Url is not allowed\")\n      return\n    }\n    if (!cleanUrl.startsWith(\"http\")) {\n      cleanUrl = \"https://\" + cleanUrl\n    }\n    await appUrlsDao.add({ id: cleanUrl, timestamp: new Date().getTime() })\n    setAppUrl(cleanUrl)\n  }\n  return (\n    <Root>\n      <Row>\n        <Autocomplete\n          id=\"free-solo-demo\"\n          freeSolo\n          fullWidth\n          options={appUrlsHistory}\n          defaultValue={defaultApps[0]}\n          groupBy={(option) => option.section}\n          getOptionLabel={(option: AppOption | string) => {\n            if (typeof option === \"string\") return option\n            return option.title\n          }}\n          onChange={(e, newValue) => handleInputChange(newValue, !!newValue && newValue !== \"\")}\n          renderInput={(params) =>\n            <TextField\n              {...params}\n              label=\"App Url\"\n              value={appUrlInput}\n              error={!!appUrlError}\n              helperText={appUrlError}\n              variant=\"filled\"\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          }\n        />\n      </Row>\n      <AppWindow appUrl={appUrl} />\n    </Root>\n  );\n}\n\nexport default Apps;\n","import { ethers } from 'ethers'\nimport shortNames from './shotNameToChainId.json'\n\nexport interface Account {\n    id: string\n    chainId: number\n    address: string\n}\n\nexport const buildCaip2Addr = (chainId: number, address: string) => {\n    return `eip155:${chainId}:${address}`\n}\n\nexport const shortNameToChainId = (shortName: string): string | undefined => {\n    return (shortNames as Record<string, string>)[shortName]\n}\n\nexport const parseAddress = (address: string): string | undefined => {\n    try {\n        return ethers.utils.getAddress(address)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseChainId = (chainId: string): number | undefined => {\n    try {\n        return parseInt(chainId)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseAccount = (account: string): Account | undefined => {\n    const accountParts = account.split(\":\")\n    let network = undefined\n    let address = undefined\n    if (accountParts.length == 1) {\n        address = parseAddress(accountParts[0])\n        network = \"eip155:1\"\n    } else if (accountParts.length == 2) {\n        address = parseAddress(accountParts[1])\n        network = shortNameToChainId(accountParts[0])\n    } else if (accountParts.length == 3) {\n        address = parseAddress(accountParts[2])\n        network = `${accountParts[0]}:${accountParts[1]}`\n    }\n\n    if (!network || !address) return undefined\n    const networkParts = network.split(\":\")\n    if (networkParts.length != 2 || networkParts[0] !== \"eip155\") return undefined\n    const chainId = parseChainId(networkParts[1])\n    if (!chainId) return undefined\n    return {\n        address,\n        chainId: chainId,\n        id: buildCaip2Addr(chainId, address)\n    }\n}","import React, { useContext } from 'react'\nimport { useParams } from 'react-router'\nimport Transactions from './transaction/Transactions';\nimport TransactionRepositoryProvider from '../provider/TransactionRepositoryProvider';\nimport QueueRepositoryProvider from '../provider/QueueRepositoryProvider';\nimport Queue from './queue/Queue';\nimport { Group, Row } from '../../styled/tables';\nimport Apps from './apps/Apps';\nimport { Account, parseAccount } from '../../logic/utils/account';\nimport { styled } from '@mui/system';\nimport { useDektopLayout } from '../utils/media';\n\nconst Sidebar = styled(Group)(({ theme }) => ({\n    height: \"100vh\",\n    width: \"400px\",\n    overflowY: \"scroll\"\n}))\n\ninterface Path {\n    account: string\n}\n\nconst AccountContext = React.createContext<Account | undefined>(undefined);\n\nexport const useAccount = () => {\n    const account = useContext(AccountContext)\n    if (!account) throw Error(\"Account not available!\")\n    return account\n}\n\nexport const Dashboard: React.FC = () => {\n    const { account } = useParams<Path>() //0x969c350577B6CD3A8E963cBB8D9c728B840c459e\n    const isDesktop = useDektopLayout();\n    const value = parseAccount(account)\n    if (!value) return (<>\n        \"Invalid account\"\n    </>)\n    return <AccountContext.Provider value={value}>\n        <TransactionRepositoryProvider>\n            <QueueRepositoryProvider>\n                <Row>\n                    <Sidebar>\n                        <Queue />\n                        <Transactions />\n                    </Sidebar>\n                    {isDesktop && <Apps />}\n                </Row>\n            </QueueRepositoryProvider>\n        </TransactionRepositoryProvider>\n    </AccountContext.Provider>\n}\n\nexport default Dashboard","import { Button, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { useHistory } from 'react-router';\nimport { AccountsDAO, StoredAccount } from '../../logic/db/app';\nimport { parseAccount } from '../../logic/utils/account';\nimport { Entry, Group, LongText, Row } from '../../styled/tables';\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\",\n    padding: 16,\n}))\n\nexport const Welcome: React.FC = () => {\n    const [addressInput, setAddressInput] = useState(\"\")\n    const [addressError, setAddressError] = useState(\"\")\n    const [accountHistory, setAccountHistory] = useState<StoredAccount[]>([])\n    const history = useHistory()\n    const accountsDao = useMemo(() => new AccountsDAO(), [])\n\n    const handleAddressInput = (address: string) => {\n        setAddressInput(address)\n        setAddressError(\"\")\n    }\n\n    useEffect(() => {\n        (async () => {\n            setAccountHistory(await accountsDao.getAll())\n        })()\n    }, [setAccountHistory])\n\n    const openAccount = async (address: string) => {\n        const account = parseAccount(address)\n        if (!account) {\n            setAddressError(\"Invalid account!\")\n            return\n        }\n        accountsDao.add({\n            ...account,\n            timestamp: new Date().getTime()\n        })\n        history.push(\"/\" + account.id)\n    }\n\n    return <Root>\n        Welcome!<br /><br />\n        <TextField label=\"Account address\" onChange={(e) => handleAddressInput(e.target.value)} value={addressInput} error={!!addressError} helperText={addressError} fullWidth /><br />\n        <Button onClick={() => openAccount(addressInput)}>Open</Button>\n        {accountHistory.map((account) => {\n            return (\n                <Entry onClick={() => openAccount(account.id)}>\n                    <LongText>{account.id}</LongText>\n                </Entry>\n            )\n        })}\n    </Root>\n}\n\nexport default Welcome","import React from 'react'\nimport { Route, Switch, HashRouter as Router } from \"react-router-dom\"\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Dashboard from './account/Dashboard';\nimport AppSettingsProvider from './provider/AppSettingsProvider';\nimport Welcome from './welcome/Welcome';\n\nconst theme = createTheme({})\n\nexport const Root: React.FC = () => {\n    return (\n        <AppSettingsProvider>\n            <ThemeProvider theme={theme}>\n                <Router>\n                    <Switch>\n                        <Route path=\"/:account\">\n                            <Dashboard />\n                        </Route>\n                        <Route path=\"/\">\n                            <Welcome />\n                        </Route>\n                    </Switch>\n                </Router>\n            </ThemeProvider>\n        </AppSettingsProvider>\n    )\n}\n\nexport default Root","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n// Ethers dependencies \n// TODO: move to separate repo\n__exportStar(require(\"./ethers/loader\"), exports);\n__exportStar(require(\"./ethers/parser\"), exports);\n__exportStar(require(\"./ethers/constants\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detailsTopics = exports.parentTopics = exports.etherReceivedTopic = exports.moduleDetailsTopic = exports.moduleFailureTopic = exports.moduleSuccessTopic = exports.multisigDetailsTopic = exports.failureTopic = exports.successTopic = exports.safeInterface = exports.safeAbi = exports.transferTopic = exports.erc721Interface = exports.erc20OldInterface = exports.erc20Interface = exports.erc721InterfaceDefinition = exports.erc20OldInterfaceDefinition = exports.erc20InterfaceDefinition = void 0;\nvar safe_deployments_1 = require(\"@gnosis.pm/safe-deployments\");\nvar ethers_1 = require(\"ethers\");\nexports.erc20InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 amount)\"\n];\nexports.erc20OldInterfaceDefinition = [\n    \"event Transfer(address indexed from, address to, uint256 amount)\"\n];\nexports.erc721InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\n];\nexports.erc20Interface = new ethers_1.ethers.utils.Interface(exports.erc20InterfaceDefinition);\nexports.erc20OldInterface = new ethers_1.ethers.utils.Interface(exports.erc20OldInterfaceDefinition);\nexports.erc721Interface = new ethers_1.ethers.utils.Interface(exports.erc721InterfaceDefinition);\n// The same for all interfaces as `indexed` has no impact on the topic\nexports.transferTopic = exports.erc20Interface.getEventTopic(\"Transfer\");\nexports.safeAbi = safe_deployments_1.getSafeL2SingletonDeployment({ released: undefined }).abi;\nexports.safeInterface = new ethers_1.ethers.utils.Interface(exports.safeAbi);\nexports.successTopic = exports.safeInterface.getEventTopic(\"ExecutionSuccess\");\nexports.failureTopic = exports.safeInterface.getEventTopic(\"ExecutionFailure\");\nexports.multisigDetailsTopic = exports.safeInterface.getEventTopic(\"SafeMultiSigTransaction\");\nexports.moduleSuccessTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleSuccess\");\nexports.moduleFailureTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleFailure\");\nexports.moduleDetailsTopic = exports.safeInterface.getEventTopic(\"SafeModuleTransaction\");\nexports.etherReceivedTopic = exports.safeInterface.getEventTopic(\"SafeReceived\");\n// Failure topics cannot generate sub events, we should remove them in the future\nexports.parentTopics = [exports.successTopic, exports.moduleSuccessTopic, exports.failureTopic, exports.moduleFailureTopic];\nexports.detailsTopics = [exports.multisigDetailsTopic, exports.moduleDetailsTopic];\n"],"sourceRoot":""}