{"version":3,"sources":["../../simple-indexer/safe-indexer-ts/bin/ethers/constants.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/utils.js","logic/utils/proposing.ts","../../simple-indexer/safe-indexer-ts/bin/types/index.js","../../simple-indexer/safe-indexer-ts/bin/types/ethereum.js","../../simple-indexer/safe-indexer-ts/bin/types/indexer.js","../../simple-indexer/safe-indexer-ts/bin/types/interactions.js","../../simple-indexer/safe-indexer-ts/bin/indexer.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/sources.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/module.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/multisig.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/settings.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/transfers.js","logic/db/base.ts","logic/db/safe.ts","logic/db/interactions.ts","logic/state/indexer.ts","logic/account/TransactionRepository.ts","logic/utils/indexer.ts","logic/account/SafeSigner.ts","logic/utils/chainInfo.ts","components/provider/AppSettingsProvider.tsx","logic/config/defaults.ts","components/provider/TransactionRepositoryProvider.tsx","logic/utils/account.ts","components/utils/media.ts","styled/tables.ts","logic/utils/address.ts","components/utils/AddressInfo.tsx","components/account/transaction/details/SettingsTxDetails.tsx","components/account/transaction/summary/SettingsTxSummary.tsx","components/account/transaction/summary/TransferTxSummary.tsx","components/account/transaction/TxSummary.tsx","components/account/transaction/details/TxEvents.tsx","components/utils/TxData.tsx","components/account/transaction/details/ModuleTxDetails.tsx","components/account/transaction/details/MultisigTxDetails.tsx","components/account/transaction/details/TransferTxDetails.tsx","components/account/transaction/TxDetails.tsx","components/account/transaction/Transactions.tsx","logic/utils/signatures.ts","logic/utils/execution.ts","logic/account/QueueRepository.ts","logic/db/app.ts","logic/utils/safe.ts","logic/execution/FactoryRepository.ts","components/provider/FactoryRepositoryProvider.tsx","components/provider/QueueRepositoryProvider.tsx","components/account/queue/QueuedTxSummary.tsx","components/account/queue/AddSignatureDialog.tsx","components/account/queue/SignTransactionDialog.tsx","components/account/queue/ExecuteTxDialog.tsx","logic/execution/RelayRepository.ts","components/provider/RelayRepositoryProvider.tsx","components/account/queue/RelayTxDialog.tsx","components/account/queue/QueuedTxDetails.tsx","components/account/queue/ProposeTxsDialog.tsx","components/account/queue/Queue.tsx","logic/apps/appList.ts","components/account/ResponsiveSidebar.tsx","logic/utils/chainIdToNetwork.ts","logic/apps/connector.ts","components/account/apps/AppWindow.tsx","components/account/apps/Apps.tsx","components/settings/SettingsDialog.tsx","components/account/info/SafeInfoDialog.tsx","components/account/header/AccountHeader.tsx","components/account/signer/SignerInfo.tsx","components/account/Dashboard.tsx","components/create/CreateAccountDialog.tsx","components/welcome/Welcome.tsx","components/App.tsx","reportWebVitals.ts","serviceWorkerRegistration.ts","index.tsx","../../simple-indexer/safe-indexer-ts/bin/index.js"],"names":["Object","defineProperty","exports","value","detailsTopics","parentTopics","etherReceivedTopic","moduleDetailsTopic","moduleFailureTopic","moduleSuccessTopic","multisigDetailsTopic","failureTopic","successTopic","safeInterface","safeAbi","transferTopic","erc721Interface","erc20OldInterface","erc20Interface","erc721InterfaceDefinition","erc20OldInterfaceDefinition","erc20InterfaceDefinition","safe_deployments_1","require","ethers_1","ethers","utils","Interface","getEventTopic","getSafeL2SingletonDeployment","released","undefined","abi","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","mapEvents","mapEvent","decoder","event","_a","_b","_c","decode","interaction","logs","all","map","removeHexPrefix","input","toLowerCase","startsWith","slice","encodeData","operation","to","data","dataBuffer","Buffer","from","solidityPack","BigNumber","toHexString","buildTx","account","transactions","chainId","network","toString","multiSendDeployment","getMultiSendDeployment","Error","multiSendInterface","multiSendBytes","transaction","multiSendData","encodeFunctionData","networkAddresses","buildMultiSend","__createBinding","create","o","m","k","k2","enumerable","get","__exportStar","p","prototype","hasOwnProperty","__assign","assign","s","i","arguments","SafeIndexer","sleep","timeout","cb","setTimeout","conditionalSleep","configDefaults","earliestBlock","maxBlocks","upToDateTimeout","syncTimeout","reverse","state","loader","parser","callback","config","running","paused","instanceId","Math","random","updateConfig","update","postStatusUpdate","status","onStatusUpdate","console","error","getCurrentBlockInterval","latestBlock","log","earliestIndexedBlock","lastIndexedBlock","fromBlock","max","toBlock","min","ensureBlockDefaults","watch","_d","activeChainId","errorMsg","blockInterval","e_1","_e","loadChainId","logger","type","reason","code","loadCurrentBlock","processBlocks","shutdown","pause","resume","events","interactions","loadEvents","safe","parse","onNewInteractions","EthersLoader","isOlder","compare","base","blockNumber","transactionIndex","logIndex","provider","sources","getNetwork","getBlockNumber","merge","loaders","_i","loaderCount","logResults","currentLogIndex","out","runs","resultIndex","nextLog","candidate","Array","fill","toEvent","eventId","_this","l","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","OutgoingTransferEventSource","IncomingTransferEventSource","IncomingEthEventSource","SettingsChangeEventSource","ModuleTransactionEventSource","MultisigTransactionEventSource","StaticTopicEventSource","constants_1","BaseEventSource","name","address","filter","buildFilter","getLogs","_super","topics","defaultAbiCoder","encode","EthersParser","module_1","multisig_1","settings_1","transfers_1","groupIdFromEvent","transactionHash","decoders","MultisigDecoder","ModuleDecoder","TransferDecoder","SettingsDecoder","updateGroupedLogs","groups","detailsCandidate","parentCandidate","currentChildren","parent","details","children","group","detailsCandidates","currentGroupId","events_1","groupId","isParentCandidate","isDetailsCandidate","indexOf","subEvents","detailEvent","inter","utils_1","useFallbackDecoding","decodeEthereumTx","tx","decodeFromEthereumHash","txHash","ethTx","getTransaction","decodeModuleDetailsEvent","parsed","decodeEventLog","decodeInternal","module","success","subLogs","parentDecoder","decodedTx","id","block","getBlock","blockHash","number","timestamp","eventParams","safe_contracts_1","NonceMapper","init","calculateHash111","nonce","_TypedDataEncoder","hash","verifyingContract","EIP712_SAFE_TX_TYPE","expectedHash","currentNonce","Contract","toNumber","calculateSafeTransactionHash","nonceMapper","decodeFunctionData","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","signatures","safeTxHash","concat","decodeMultisigDetailsEvent","additionalInfo","setupTopic","addedOwnerTopic","removedOwnerTopic","changeThresholdTopic","enabledModuleTopic","disabledModuledTopic","changeFallbackHandlerTopic","changeGuardTopic","getSettingsDetails","component","change","owner","threshold","handler","guard","decodeSettingsChange","decodeTokenTransfer","eventInterface","tokenAddress","amount","tokenId","sender","receipient","direction","decodeEtherTransfer","AbstractDB","dbKey","dbVersion","migration","internalDb","indexedDB","window","a","dbStore","request","open","onerror","onsuccess","onupgradeneeded","oldVersion","version","AbstractDAO","db","storeName","entry","objectStore","put","delete","index","key","getAll","clear","INTERACTIONS_STORE","INTERACTIONS_INDEX","QUEUED_TX_STORE","QUEUED_TX_INDEX","TX_SIGNATURES_STORE","TX_SIGNATURES_INDEX","SafeDB","createObjectStore","keyPath","createIndex","unique","InteractionsDAO","getAllByIndex","QueuedInteractionsDAO","IDBKeyRange","lowerBound","TxSignaturesDAO","parseIntWithFallback","fallback","parseInt","Number","isNaN","IndexerState","defaultBlock","_lastIndexedBlock","_earliestIndexedBlock","_earliestBlock","storedEarliestIndexedBlock","localStorage","getItem","storedLastIndexedBlock","storedEarliestBlock","setItem","removeItem","TransactionRepository","networkConfig","callbacks","Set","currentStatus","indexer","startingBlock","disconnect","getIndexer","catch","add","postCurrentStatusUpdateToCallback","checkForCreation","forEach","handleNewInteraction","postCurrentStatusUpdate","drop","reset","SafeSigner","onboard","rpcProvider","providerChangeListener","listener","networkId","showSelection","wallets","walletName","rpc","bridge","rpcUrl","Onboard","subscriptions","wallet","walletSelect","description","walletCheck","checkName","lastSelectedWallet","prepare","walletReset","getState","signerAddress","findChainRpc","includeInfura","chain","chains","find","includes","defaultConfig","AppSettingsContext","React","createContext","useAppSettings","appSettings","useContext","AppSettingsProvider","useState","useCustomRpc","setUseCustomRpc","customRpc","setCustomRpc","relayService","setRelayService","infuraToken","setInfuraToken","connectedProvider","setConnectedProvider","storedConfig","JSON","setNetworkConfig","getChainRpc","useCallback","replaceAll","loadProvider","providers","JsonRpcProvider","Web3Provider","chainRpc","signer","useMemo","getSigner","safeSigner","useEffect","setRpcProvider","onProviderChange","Provider","toggleCustomRpc","updateCustomRpc","updateRelayService","updateInfuraToken","updateNetworkConfig","serialized","stringify","TransactionRepoContext","useTransactionRepo","repo","TransactionRepositoryProvider","useAccount","connect","buildCaip2Addr","parseAddress","getAddress","parseAccount","shortName","accountParts","split","shortNames","networkParts","parseChainId","useDektopLayout","useMediaQuery","copyToClipboard","text","copyMessage","navigator","clipboard","writeText","alert","useCopyAddress","shareableText","Group","styled","theme","display","flexDirection","Row","Header","textAlign","Entry","alignItems","paddingBottom","LongText","Typography","width","wordWrap","shortAddress","visibleChars","identicon","size","xs","sm","md","lg","xl","xxl","StyledImg","height","borderRadius","AddressInfo","onClick","iconSrc","makeBlockie","copyAddress","sx","src","fontFamily","paddingX","IconButton","color","ContentCopy","fontSize","renderSettingsValue","SettingsTxDetails","Date","toUTCString","toUpperCase","Summary","SettingsTxSummary","settingsChange","hideDate","showDetails","TransferTxSummary","transfer","TxSummary","TxEvents","TxData","collapsed","setCollapsed","decodePossible","canCollapse","displayData","Link","textDecoration","Button","ModuleTxDetails","MultisigTxDetails","renderDetails","asset","subjectTitle","subject","TransferTxDetails","TxDialog","Dialog","TxDetails","handleClose","debugLink","setDebugLink","txRepo","setInteraction","loadInteraction","getTx","link","onClose","maxWidth","fullWidth","fullScreen","DialogTitle","DialogContent","DialogActions","Root","Transactions","selectedId","setSelectedId","txs","setTxs","accountRepo","getAllTxs","loaded","registerCallback","unregisterCallback","recoverEthSign","signature","hashMessage","arrayify","recoverAddress","recoverEIP712","signatureId","signatureData","keccak256","parseSafeSignature","signatureString","sigType","signatureParts","getEIP712Domain","getEIP712TxType","SafeTx","signEip712","_signTypedData","recoveredAddress","signMessage","buildPreValidatedSignature","signQueuedTx","warn","prepareSignatures","submitterAddress","signatureMap","Map","owners","has","set","submitterIsOwner","requiredSigntures","sub","signatureArray","values","buildStaticPart","offset","buildDynamicPart","buildSignatureBytes","sort","left","right","localeCompare","staticParts","dynamicParts","sig","QueueRepository","factoryRepo","queueDao","signaturesDao","onNewTx","getSafeForAccount","getTransactionHash","hashInfo","queuedTx","notifyNewTxs","remove","getQueuedTxs","queuedTxs","signatureBytes","submitter","writableSafe","writable","initialize","signedTx","executeTx","populateTx","ACCOUNTS_STORE","ACCOUNTS_INDEX","ACCOUNTS_INIT_STORE","APP_URLS_STORE","APP_URLS_INDEX","AppDB","AccountsDAO","AccountInitializerDAO","AppUrlsDAO","CounterfactualSafe","initializer","safeContract","signers","populateTransaction","execTransaction","WritableDeployedSafe","DeployedSafe","providerOrSigner","getOwners","getThreshold","VERSION","information","getCode","sendTransaction","initializerTo","initializerData","relayProtocol","lib","libInterface","FactoryRepository","relaySupport","constants","AddressZero","l2","singletonDeployment","getSafeSingletonDeployment","singletonAddress","proxyFactoryDeployment","getProxyFactoryDeployment","proxyFactoryAddress","fallbackHandlerDeployment","getFallbackHandlerDeployment","fallbackHandlerAddress","useRelaySupport","supportsRelaying","createSetupInitData","initTo","initData","setup","setupData","factoryContract","callStatic","createProxyWithNonce","proxyAddress","deploymentTx","createInitData","caip2","intializer","salt","FactoryRepoContext","useFactoryRepo","FactoryRepositoryProvider","QueueRepoContext","useQueueRepo","QueueRepositoryProvider","QueuedTxSummary","AddSignatureDialog","handleNewSignature","setSignatureString","queuedRepo","handleAdd","addSignature","TextField","onChange","target","SignTransactionDialog","handleSign","ExecuteTxDialog","handleTxSubmitted","handleExecution","getSignatures","submitTx","ethereumTxHash","RelayRepository","relayUrl","executor","storedInitializer","axios","post","resp","RelayRepoContext","RelayRepositoryProvider","RelayTxDialog","relayRepo","useRelayRepo","connected","relayTransaction","relayId","QueuedTxDetails","simulateLink","setSimulateLink","showAddSignature","setShowAddSignature","showSignTransaction","setShowSignTransaction","showExecuteTransaction","setShowExecuteTransaction","showRelayTransaction","setShowRelayTransaction","factory","deleteTx","setTransaction","load","setSignatures","loadSignatures","populatedTx","shareText","shareSignature","ProposeTxs","onConfirm","onReject","requestId","setToString","valueString","setValueString","dataString","setDataString","operationString","setOperationString","nonceString","setNonceString","getNextNonce","defaultTx","cancelCreation","handleCreate","isHexString","addTx","Queue","showNewTxDialog","setShowNewTxDialog","ququedTxs","setQueuedTxs","queueRepo","loadQueuedTxs","creation","defaultApps","title","url","section","Sidebar","overflowY","StyledBox","Box","backgroundColor","palette","mode","grey","Puller","position","top","ResponsiveSidebar","isDesktop","header","setOpen","toggleDrawer","newOpen","SwipeableDrawer","anchor","onOpen","swipeAreaWidth","disableSwipeToOpen","ModalProps","keepMounted","overflow","borderTopLeftRadius","borderTopRightRadius","visibility","justifyContent","px","pb","chainIdToNetwork","FrameCommunicator","frame","appUrl","info","handlers","method","params","onTransactionProposal","sendResponse","txServiceUrl","safeAddress","payload","communicator","send","err","sendError","message","source","origin","handleMessage","frameWindow","current","contentWindow","sdkVersion","getSDKVersion","msg","MessageFormatter","makeResponse","postMessage","makeErrorResponse","defaultWindow","eventWindow","ev","onMessage","addEventListener","removeEventListener","AppFrame","border","AppWindow","loading","proposalParams","setProposalParams","appFrame","useRef","document","hidden","handleTransactionConfirmation","handleTransactionRejection","CircularProgress","ref","Apps","appUrlsDao","setAppUrl","appUrlError","setAppUrlError","appUrlInput","setAppUrlInput","appUrlsHistory","setAppUrlsHistory","appHistory","handleInputChange","openUrl","newValue","openAppUrl","cleanUrl","trim","getTime","marginBottom","Autocomplete","freeSolo","options","defaultValue","groupBy","option","getOptionLabel","renderInput","helperText","variant","SettingsDialog","reindex","setStatus","updateStartingBlock","updateMaxBlocks","Switch","checked","renderInfo","safeInfo","SafeInfoDialog","history","useHistory","setSafeInfo","AccountHeader","expanded","showSettings","setShowSettings","showInfo","setShowInfo","queueSize","setQueueSize","Settings","SignerInfo","AccountContext","Dashboard","useParams","InnerDialog","CreateAccountDialog","setChains","selectedChainIndex","setSelectedChainIndex","round","setNonce","setSignerAddress","newAccount","FormControl","minWidth","marginTop","InputLabel","htmlFor","Select","MenuItem","padding","Welcome","showCreateAccountDialog","setShowCreateAccountDialog","addressInput","setAddressInput","addressError","setAddressError","accountHistory","setAccountHistory","accountsDao","openAccount","createTheme","ThemeProvider","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","App","getElementById","URL","process","href","fetch","headers","response","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.3b60a508.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detailsTopics = exports.parentTopics = exports.etherReceivedTopic = exports.moduleDetailsTopic = exports.moduleFailureTopic = exports.moduleSuccessTopic = exports.multisigDetailsTopic = exports.failureTopic = exports.successTopic = exports.safeInterface = exports.safeAbi = exports.transferTopic = exports.erc721Interface = exports.erc20OldInterface = exports.erc20Interface = exports.erc721InterfaceDefinition = exports.erc20OldInterfaceDefinition = exports.erc20InterfaceDefinition = void 0;\nvar safe_deployments_1 = require(\"@gnosis.pm/safe-deployments\");\nvar ethers_1 = require(\"ethers\");\nexports.erc20InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 amount)\"\n];\nexports.erc20OldInterfaceDefinition = [\n    \"event Transfer(address indexed from, address to, uint256 amount)\"\n];\nexports.erc721InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\n];\nexports.erc20Interface = new ethers_1.ethers.utils.Interface(exports.erc20InterfaceDefinition);\nexports.erc20OldInterface = new ethers_1.ethers.utils.Interface(exports.erc20OldInterfaceDefinition);\nexports.erc721Interface = new ethers_1.ethers.utils.Interface(exports.erc721InterfaceDefinition);\n// The same for all interfaces as `indexed` has no impact on the topic\nexports.transferTopic = exports.erc20Interface.getEventTopic(\"Transfer\");\nexports.safeAbi = safe_deployments_1.getSafeL2SingletonDeployment({ released: undefined }).abi;\nexports.safeInterface = new ethers_1.ethers.utils.Interface(exports.safeAbi);\nexports.successTopic = exports.safeInterface.getEventTopic(\"ExecutionSuccess\");\nexports.failureTopic = exports.safeInterface.getEventTopic(\"ExecutionFailure\");\nexports.multisigDetailsTopic = exports.safeInterface.getEventTopic(\"SafeMultiSigTransaction\");\nexports.moduleSuccessTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleSuccess\");\nexports.moduleFailureTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleFailure\");\nexports.moduleDetailsTopic = exports.safeInterface.getEventTopic(\"SafeModuleTransaction\");\nexports.etherReceivedTopic = exports.safeInterface.getEventTopic(\"SafeReceived\");\n// Failure topics cannot generate sub events, we should remove them in the future\nexports.parentTopics = [exports.successTopic, exports.moduleSuccessTopic, exports.failureTopic, exports.moduleFailureTopic];\nexports.detailsTopics = [exports.multisigDetailsTopic, exports.moduleDetailsTopic];\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapEvents = exports.mapEvent = void 0;\nvar mapEvent = function (decoder, event) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a;\n    var _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _b = {\n                    event: event\n                };\n                if (!decoder) return [3 /*break*/, 2];\n                return [4 /*yield*/, decoder.decode(event)];\n            case 1:\n                _a = _c.sent();\n                return [3 /*break*/, 3];\n            case 2:\n                _a = undefined;\n                _c.label = 3;\n            case 3: return [2 /*return*/, (_b.interaction = _a,\n                    _b)];\n        }\n    });\n}); };\nexports.mapEvent = mapEvent;\nvar mapEvents = function (decoder, logs) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!logs)\n                    return [2 /*return*/, []];\n                return [4 /*yield*/, Promise.all(logs.map(function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            return [2 /*return*/, exports.mapEvent(decoder, e)];\n                        });\n                    }); }))];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n}); };\nexports.mapEvents = mapEvents;\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { utils } from \"ethers\";\nimport { MetaTransaction } from \"../models/transactions\"\nimport { getMultiSendDeployment } from \"@gnosis.pm/safe-deployments\"\nimport { Account } from \"./account\";\n\nexport const removeHexPrefix = (input: string) => input.toLowerCase().startsWith(\"0x\") ? input.slice(2) : input;\n\nconst encodeData = (operation: number, to: string, value: string, data: string) => {\n    let dataBuffer = Buffer.from(removeHexPrefix(data), \"hex\")\n    return removeHexPrefix(utils.solidityPack(\n        [\"uint8\", \"address\", \"uint256\", \"uint256\", \"bytes\"],\n        [operation, to, BigNumber.from(value).toHexString(), dataBuffer.length, dataBuffer]\n    ))\n}\n\nexport const buildMultiSend = (transactions: MetaTransaction[], chainId: number): MetaTransaction => {\n    const network = chainId.toString()\n    const multiSendDeployment = getMultiSendDeployment({ network })\n    if (!multiSendDeployment) throw Error(\"MultiSend not available on this network\")\n    const multiSendInterface = new utils.Interface(multiSendDeployment.abi)\n    let multiSendBytes = \"0x\"\n    for (let transaction of transactions) {\n        multiSendBytes += encodeData(0, transaction.to, transaction.value, transaction.data)\n    }\n    const multiSendData = multiSendInterface.encodeFunctionData(\"multiSend\", [multiSendBytes])\n    return {\n        to: multiSendDeployment.networkAddresses[network],\n        value: \"0x00\",\n        data: multiSendData,\n        operation: 1\n    }\n}\n\n\nexport const buildTx = (account: Account, transactions?: MetaTransaction[]): MetaTransaction => {\n    if (!transactions || transactions.length === 0) {\n        return {\n            to: \"\",\n            value: \"\",\n            data: \"\",\n            operation: 0\n        }\n    }\n    if (transactions.length === 1) {\n        return transactions[0]\n    }\n    return buildMultiSend(transactions, account.chainId)\n}","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ethereum\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./interactions\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeIndexer = void 0;\nvar sleep = function (timeout) { return new Promise(function (cb) { return setTimeout(cb, timeout); }); };\nvar conditionalSleep = function (timeout) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(timeout && timeout > 0)) return [3 /*break*/, 2];\n                return [4 /*yield*/, sleep(timeout)];\n            case 1:\n                _a.sent();\n                _a.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar configDefaults = {\n    earliestBlock: 0,\n    maxBlocks: 100,\n    upToDateTimeout: 10000,\n    syncTimeout: 100,\n    reverse: false\n};\nvar SafeIndexer = /** @class */ (function () {\n    function SafeIndexer(state, loader, parser, callback, config) {\n        this.running = true;\n        this.paused = false;\n        this.instanceId = Math.random().toString(36);\n        this.state = state;\n        this.loader = loader;\n        this.parser = parser;\n        this.callback = callback;\n        this.config = __assign(__assign({}, configDefaults), config);\n    }\n    SafeIndexer.prototype.updateConfig = function (update) {\n        this.config = __assign(__assign({}, this.config), update);\n    };\n    SafeIndexer.prototype.postStatusUpdate = function (status) {\n        var _a, _b;\n        try {\n            (_b = (_a = this.callback) === null || _a === void 0 ? void 0 : _a.onStatusUpdate) === null || _b === void 0 ? void 0 : _b.call(_a, status);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    SafeIndexer.prototype.getCurrentBlockInterval = function (earliestBlock, latestBlock, reverse) {\n        console.log(this.state);\n        var earliestIndexedBlock = this.state.earliestIndexedBlock;\n        var lastIndexedBlock = this.state.lastIndexedBlock;\n        var maxBlocks = this.config.maxBlocks;\n        if (reverse !== undefined ? reverse : this.config.reverse) {\n            if (earliestBlock >= earliestIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: Math.max(earliestBlock, earliestIndexedBlock - maxBlocks),\n                toBlock: earliestIndexedBlock - 1\n            };\n        }\n        else {\n            if (latestBlock <= lastIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: lastIndexedBlock + 1,\n                toBlock: Math.min(latestBlock, lastIndexedBlock + maxBlocks)\n            };\n        }\n    };\n    SafeIndexer.prototype.ensureBlockDefaults = function (latestBlock) {\n        if (this.config.earliestBlock < 0) {\n            this.config.earliestBlock = latestBlock;\n        }\n        if (this.state.earliestIndexedBlock < 0) {\n            this.state.earliestIndexedBlock = latestBlock + 1;\n        }\n        if (this.state.lastIndexedBlock < 0) {\n            this.state.lastIndexedBlock = latestBlock - 1;\n        }\n    };\n    SafeIndexer.prototype.watch = function (reverse) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var activeChainId, errorMsg, latestBlock, earliestBlock, blockInterval, fromBlock, toBlock, e_1;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadChainId()];\n                    case 1:\n                        activeChainId = _e.sent();\n                        if (this.config.chainId && activeChainId != this.config.chainId) {\n                            errorMsg = \"Wrong chain! Expected \" + this.config.chainId + \" got \" + activeChainId;\n                            (_a = this.config.logger) === null || _a === void 0 ? void 0 : _a.error(errorMsg);\n                            this.postStatusUpdate({ type: \"aborted\", reason: errorMsg, code: 1 });\n                            return [2 /*return*/];\n                        }\n                        _e.label = 2;\n                    case 2:\n                        if (!this.running) return [3 /*break*/, 14];\n                        if (!this.paused) return [3 /*break*/, 4];\n                        return [4 /*yield*/, sleep(this.config.syncTimeout)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 4: return [4 /*yield*/, this.loader.loadCurrentBlock()];\n                    case 5:\n                        latestBlock = _e.sent();\n                        this.ensureBlockDefaults(latestBlock);\n                        earliestBlock = this.config.earliestBlock;\n                        blockInterval = this.getCurrentBlockInterval(earliestBlock, latestBlock, reverse);\n                        if (!!blockInterval) return [3 /*break*/, 7];\n                        (_b = this.config.logger) === null || _b === void 0 ? void 0 : _b.log(this.instanceId, \"Up to date with current block!\");\n                        this.postStatusUpdate({ type: \"up_to_date\", latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 6:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 7:\n                        fromBlock = blockInterval.fromBlock, toBlock = blockInterval.toBlock;\n                        this.postStatusUpdate({ type: \"processing\", fromBlock: fromBlock, toBlock: toBlock, latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        (_c = this.config.logger) === null || _c === void 0 ? void 0 : _c.log(this.instanceId, \"Process from block\", fromBlock, \"to block\", toBlock);\n                        _e.label = 8;\n                    case 8:\n                        _e.trys.push([8, 11, , 13]);\n                        return [4 /*yield*/, this.processBlocks(fromBlock, toBlock)];\n                    case 9:\n                        _e.sent();\n                        this.state.lastIndexedBlock = Math.max(toBlock, this.state.lastIndexedBlock);\n                        this.state.earliestIndexedBlock = Math.min(fromBlock, this.state.earliestIndexedBlock);\n                        return [4 /*yield*/, conditionalSleep(this.config.syncTimeout)];\n                    case 10:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 11:\n                        e_1 = _e.sent();\n                        (_d = this.config.logger) === null || _d === void 0 ? void 0 : _d.error(e_1);\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 12:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 13: return [3 /*break*/, 2];\n                    case 14:\n                        console.log(this.instanceId, \"Shutting down\");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SafeIndexer.prototype.shutdown = function () {\n        this.running = false;\n    };\n    SafeIndexer.prototype.pause = function () {\n        this.paused = true;\n    };\n    SafeIndexer.prototype.resume = function () {\n        this.paused = false;\n    };\n    SafeIndexer.prototype.processBlocks = function (from, to) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, interactions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadEvents(from, to, this.config.safe)];\n                    case 1:\n                        events = _a.sent();\n                        return [4 /*yield*/, this.parser.parse(events)];\n                    case 2:\n                        interactions = _a.sent();\n                        if (interactions.length > 0)\n                            try {\n                                this.callback.onNewInteractions(interactions);\n                            }\n                            catch (_b) { }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SafeIndexer;\n}());\nexports.SafeIndexer = SafeIndexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersLoader = void 0;\n__exportStar(require(\"./sources\"), exports);\nvar isOlder = function (compare, base) {\n    if (compare === undefined)\n        return false;\n    if (base === undefined)\n        return true;\n    if (compare.blockNumber != base.blockNumber)\n        return compare.blockNumber < base.blockNumber;\n    if (compare.transactionIndex != base.transactionIndex)\n        return compare.transactionIndex < base.transactionIndex;\n    if (compare.logIndex != base.logIndex)\n        return compare.logIndex < base.logIndex;\n    return false; // Equal defaults to false\n};\nvar EthersLoader = /** @class */ (function () {\n    function EthersLoader(provider, sources) {\n        this.provider = provider;\n        this.sources = sources;\n    }\n    EthersLoader.prototype.loadChainId = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var network;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        network = _a.sent();\n                        return [2 /*return*/, network.chainId];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.loadCurrentBlock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getBlockNumber()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.merge = function () {\n        var loaders = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            loaders[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var loaderCount, logResults, currentLogIndex, i, out, runs, resultIndex, nextLog, i, candidate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        loaderCount = loaders.length;\n                        if (loaderCount == 0)\n                            return [2 /*return*/, []];\n                        return [4 /*yield*/, Promise.all(loaders)];\n                    case 1:\n                        logResults = _a.sent();\n                        if (loaderCount == 1)\n                            return [2 /*return*/, logResults[0]];\n                        currentLogIndex = new Array(loaderCount).fill(0);\n                        for (i = 0; i < loaderCount; i++)\n                            currentLogIndex[i] = 0;\n                        out = [];\n                        runs = 0;\n                        // Panic check against endless loop (10k is max amount of events, per loader)\n                        while (runs < 10000 * loaderCount) {\n                            resultIndex = 0;\n                            nextLog = logResults[0][currentLogIndex[0]];\n                            for (i = 1; i < loaderCount; i++) {\n                                candidate = logResults[i][currentLogIndex[i]];\n                                if (isOlder(candidate, nextLog)) {\n                                    resultIndex = i;\n                                    nextLog = candidate;\n                                }\n                            }\n                            currentLogIndex[resultIndex]++;\n                            if (nextLog)\n                                out.push(nextLog);\n                            else\n                                break;\n                            runs++;\n                        }\n                        return [2 /*return*/, out];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.toEvent = function (log, safe) {\n        return __assign(__assign({}, log), { eventId: log.logIndex.toString(), account: safe });\n    };\n    EthersLoader.prototype.loadEvents = function (from, to, safe) {\n        return __awaiter(this, void 0, void 0, function () {\n            var logs;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.merge.apply(this, this.sources.map(function (l) { return l.loadEvents(from, to, safe); }))];\n                    case 1:\n                        logs = _a.sent();\n                        return [2 /*return*/, logs.reverse().map(function (e) { return _this.toEvent(e, safe); })];\n                }\n            });\n        });\n    };\n    return EthersLoader;\n}());\nexports.EthersLoader = EthersLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingTransferEventSource = exports.IncomingTransferEventSource = exports.IncomingEthEventSource = exports.SettingsChangeEventSource = exports.ModuleTransactionEventSource = exports.MultisigTransactionEventSource = exports.StaticTopicEventSource = void 0;\nvar ethers_1 = require(\"ethers\");\nvar constants_1 = require(\"../constants\");\nvar BaseEventSource = /** @class */ (function () {\n    function BaseEventSource(name, provider) {\n        this.provider = provider;\n        this.name = name;\n    }\n    BaseEventSource.prototype.loadEvents = function (fromBlock, toBlock, address) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filter;\n            return __generator(this, function (_a) {\n                filter = this.buildFilter(fromBlock, toBlock, address);\n                return [2 /*return*/, this.provider.getLogs(filter).then(function (e) {\n                        //console.debug(this.name, \"source loaded\", e.length, \"events\")\n                        return e;\n                    })];\n            });\n        });\n    };\n    return BaseEventSource;\n}());\nvar StaticTopicEventSource = /** @class */ (function (_super) {\n    __extends(StaticTopicEventSource, _super);\n    function StaticTopicEventSource(name, topics, provider) {\n        var _this = _super.call(this, name, provider) || this;\n        _this.topics = topics;\n        return _this;\n    }\n    StaticTopicEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        return {\n            topics: [this.topics],\n            address: address,\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return StaticTopicEventSource;\n}(BaseEventSource));\nexports.StaticTopicEventSource = StaticTopicEventSource;\nvar MultisigTransactionEventSource = /** @class */ (function (_super) {\n    __extends(MultisigTransactionEventSource, _super);\n    function MultisigTransactionEventSource(provider) {\n        return _super.call(this, \"MultiSig\", [constants_1.successTopic, constants_1.failureTopic, constants_1.multisigDetailsTopic], provider) || this;\n    }\n    return MultisigTransactionEventSource;\n}(StaticTopicEventSource));\nexports.MultisigTransactionEventSource = MultisigTransactionEventSource;\nvar ModuleTransactionEventSource = /** @class */ (function (_super) {\n    __extends(ModuleTransactionEventSource, _super);\n    function ModuleTransactionEventSource(provider) {\n        return _super.call(this, \"Module\", [constants_1.moduleSuccessTopic, constants_1.moduleFailureTopic, constants_1.moduleDetailsTopic], provider) || this;\n    }\n    return ModuleTransactionEventSource;\n}(StaticTopicEventSource));\nexports.ModuleTransactionEventSource = ModuleTransactionEventSource;\nvar SettingsChangeEventSource = /** @class */ (function (_super) {\n    __extends(SettingsChangeEventSource, _super);\n    function SettingsChangeEventSource(provider) {\n        return _super.call(this, \"Settings\", [\n            \"SafeSetup\",\n            \"AddedOwner\",\n            \"RemovedOwner\",\n            \"ChangedThreshold\",\n            \"EnabledModule\",\n            \"DisabledModule\",\n            \"ChangedFallbackHandler\",\n            \"ChangedGuard\",\n        ].map(function (name) { return constants_1.safeInterface.getEventTopic(name); }), provider) || this;\n    }\n    return SettingsChangeEventSource;\n}(StaticTopicEventSource));\nexports.SettingsChangeEventSource = SettingsChangeEventSource;\nvar IncomingEthEventSource = /** @class */ (function (_super) {\n    __extends(IncomingEthEventSource, _super);\n    function IncomingEthEventSource(provider) {\n        return _super.call(this, \"Incoming Ether\", [constants_1.etherReceivedTopic], provider) || this;\n    }\n    return IncomingEthEventSource;\n}(StaticTopicEventSource));\nexports.IncomingEthEventSource = IncomingEthEventSource;\nvar IncomingTransferEventSource = /** @class */ (function (_super) {\n    __extends(IncomingTransferEventSource, _super);\n    function IncomingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    IncomingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return IncomingTransferEventSource;\n}(BaseEventSource));\nexports.IncomingTransferEventSource = IncomingTransferEventSource;\nvar OutgoingTransferEventSource = /** @class */ (function (_super) {\n    __extends(OutgoingTransferEventSource, _super);\n    function OutgoingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    OutgoingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], null, [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return OutgoingTransferEventSource;\n}(BaseEventSource));\nexports.OutgoingTransferEventSource = OutgoingTransferEventSource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersParser = void 0;\nvar constants_1 = require(\"../constants\");\nvar module_1 = require(\"./module\");\nvar multisig_1 = require(\"./multisig\");\nvar settings_1 = require(\"./settings\");\nvar transfers_1 = require(\"./transfers\");\nvar EthersParser = /** @class */ (function () {\n    function EthersParser(provider) {\n        this.groupIdFromEvent = function (event) { return \"\" + event.transactionHash; };\n        this.provider = provider;\n        this.decoders = [\n            new multisig_1.MultisigDecoder(provider),\n            new module_1.ModuleDecoder(provider),\n            new transfers_1.TransferDecoder(provider),\n            new settings_1.SettingsDecoder(provider)\n        ];\n    }\n    EthersParser.prototype.updateGroupedLogs = function (groups, detailsCandidate, parentCandidate, currentChildren) {\n        if (parentCandidate) {\n            groups.push({\n                parent: parentCandidate,\n                details: detailsCandidate,\n                children: currentChildren\n            });\n        }\n        else if (currentChildren.length > 0) {\n            groups.push.apply(groups, currentChildren.map(function (log) { return { parent: log, children: [] }; }));\n        }\n    };\n    EthersParser.prototype.group = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var out, currentChildren, detailsCandidates, parentCandidate, currentGroupId, _i, events_1, event, groupId, isParentCandidate, isDetailsCandidate;\n            return __generator(this, function (_a) {\n                out = [];\n                currentChildren = [];\n                detailsCandidates = [];\n                currentGroupId = undefined;\n                for (_i = 0, events_1 = events; _i < events_1.length; _i++) {\n                    event = events_1[_i];\n                    groupId = this.groupIdFromEvent(event);\n                    isParentCandidate = constants_1.parentTopics.indexOf(event.topics[0]) >= 0;\n                    isDetailsCandidate = constants_1.detailsTopics.indexOf(event.topics[0]) >= 0;\n                    if (currentGroupId !== groupId || (isParentCandidate && parentCandidate)) {\n                        this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                        parentCandidate = undefined;\n                        detailsCandidates = [];\n                        currentChildren = [];\n                        currentGroupId = undefined;\n                    }\n                    if (!currentGroupId)\n                        currentGroupId = groupId;\n                    if (isParentCandidate) {\n                        parentCandidate = event;\n                    }\n                    else if (isDetailsCandidate) {\n                        detailsCandidates.push(event);\n                    }\n                    else {\n                        currentChildren.push(event);\n                    }\n                }\n                this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                return [2 /*return*/, out];\n            });\n        });\n    };\n    EthersParser.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, decoder, interaction;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _i = 0, _a = this.decoders;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        decoder = _a[_i];\n                        return [4 /*yield*/, decoder.decode(event, subEvents, detailEvent, this)];\n                    case 2:\n                        interaction = _b.sent();\n                        if (interaction)\n                            return [2 /*return*/, interaction];\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EthersParser.prototype.parse = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var groups, inter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.group(events)];\n                    case 1:\n                        groups = _a.sent();\n                        inter = groups.map(function (_a) {\n                            var parent = _a.parent, children = _a.children, details = _a.details;\n                            return _this.decode(parent, children, details);\n                        });\n                        return [4 /*yield*/, Promise.all(inter)];\n                    case 2: return [2 /*return*/, (_a.sent()).filter(function (e) { return e !== undefined; })];\n                }\n            });\n        });\n    };\n    return EthersParser;\n}());\nexports.EthersParser = EthersParser;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar ModuleDecoder = /** @class */ (function () {\n    function ModuleDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    ModuleDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        // TODO: implement\n        return undefined;\n    };\n    ModuleDecoder.prototype.decodeFromEthereumHash = function (safe, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _a.sent();\n                        return [2 /*return*/, this.decodeEthereumTx(safe, ethTx)];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decodeModuleDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeModuleTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n        };\n    };\n    ModuleDecoder.prototype.decodeInternal = function (safe, module, event, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"module_\" + event.transactionHash + \"_\" + event.eventId;\n                        decodedTx = this.decodeModuleDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"module_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.module = module,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.moduleSuccessTopic: return [3 /*break*/, 1];\n                            case constants_1.moduleFailureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ModuleDecoder;\n}());\nexports.ModuleDecoder = ModuleDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultisigDecoder = void 0;\nvar ethers_1 = require(\"ethers\");\nvar safe_contracts_1 = require(\"@gnosis.pm/safe-contracts\");\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar NonceMapper = /** @class */ (function () {\n    function NonceMapper(provider) {\n        this.provider = provider;\n    }\n    NonceMapper.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        _a.chainId = (_b.sent()).chainId;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NonceMapper.prototype.calculateHash111 = function (tx, nonce) {\n        return ethers_1.ethers.utils._TypedDataEncoder.hash({ verifyingContract: tx.safe }, safe_contracts_1.EIP712_SAFE_TX_TYPE, __assign(__assign({}, tx), { nonce: nonce }));\n    };\n    NonceMapper.prototype.map = function (expectedHash, tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var safe, currentNonce, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.chainId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        safe = new ethers_1.ethers.Contract(tx.safe, constants_1.safeAbi, this.provider);\n                        return [4 /*yield*/, safe.nonce()];\n                    case 3:\n                        currentNonce = (_a.sent()).toNumber();\n                        for (nonce = currentNonce; nonce >= 0; nonce--) {\n                            if (this.calculateHash111(tx, nonce) === expectedHash)\n                                return [2 /*return*/, nonce];\n                            if (safe_contracts_1.calculateSafeTransactionHash(safe, __assign(__assign({}, tx), { nonce: nonce }), this.chainId) === expectedHash)\n                                return [2 /*return*/, nonce];\n                        }\n                        return [2 /*return*/, -1];\n                }\n            });\n        });\n    };\n    return NonceMapper;\n}());\nvar MultisigDecoder = /** @class */ (function () {\n    function MultisigDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.nonceMapper = new NonceMapper(provider);\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    MultisigDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        try {\n            if (tx.to !== safe) {\n                console.log(\"Transaction is not to the Safe\");\n                return undefined;\n            }\n            var result = constants_1.safeInterface.decodeFunctionData(\"execTransaction\", tx.data);\n            return {\n                safe: safe,\n                to: result.to,\n                value: result.value.toString(),\n                data: result.data,\n                operation: result.operation,\n                safeTxGas: result.safeTxGas.toString(),\n                baseGas: result.baseGas.toString(),\n                gasPrice: result.gasPrice.toString(),\n                gasToken: result.gasToken,\n                refundReceiver: result.refundReceiver,\n                signatures: result.signatures,\n            };\n        }\n        catch (e) {\n            // TODO: try to decode other ways \n            console.log(\"Unknown function\", tx.data.slice(0, 10));\n            return undefined;\n        }\n    };\n    MultisigDecoder.prototype.decodeFromEthereumHash = function (safe, safeTxHash, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx, decodedTx, _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _c.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        if (!decodedTx)\n                            return [2 /*return*/, undefined];\n                        _a = [__assign({}, decodedTx)];\n                        _b = {};\n                        return [4 /*yield*/, this.nonceMapper.map(safeTxHash, decodedTx)];\n                    case 2: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_b.nonce = _c.sent(), _b)]))];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decodeMultisigDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeMultiSigTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n            safeTxGas: parsed.safeTxGas.toString(),\n            baseGas: parsed.baseGas.toString(),\n            gasPrice: parsed.gasPrice.toString(),\n            gasToken: parsed.gasToken,\n            refundReceiver: parsed.refundReceiver,\n            signatures: parsed.signatures,\n            nonce: ethers_1.BigNumber.from(parsed.additionalInfo.slice(0, 66)).toNumber()\n        };\n    };\n    MultisigDecoder.prototype.decodeInternal = function (safe, event, safeTxHash, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, decodedTx, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"multisig_\" + safeTxHash;\n                        decodedTx = this.decodeMultisigDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, safeTxHash, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"multisig_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.safeTxHash = safeTxHash,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.successTopic: return [3 /*break*/, 1];\n                            case constants_1.failureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return MultisigDecoder;\n}());\nexports.MultisigDecoder = MultisigDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingsDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar setupTopic = constants_1.safeInterface.getEventTopic(\"SafeSetup\");\nvar addedOwnerTopic = constants_1.safeInterface.getEventTopic(\"AddedOwner\");\nvar removedOwnerTopic = constants_1.safeInterface.getEventTopic(\"RemovedOwner\");\nvar changeThresholdTopic = constants_1.safeInterface.getEventTopic(\"ChangedThreshold\");\nvar enabledModuleTopic = constants_1.safeInterface.getEventTopic(\"EnabledModule\");\nvar disabledModuledTopic = constants_1.safeInterface.getEventTopic(\"DisabledModule\");\nvar changeFallbackHandlerTopic = constants_1.safeInterface.getEventTopic(\"ChangedFallbackHandler\");\nvar changeGuardTopic = constants_1.safeInterface.getEventTopic(\"ChangedGuard\");\nvar SettingsDecoder = /** @class */ (function () {\n    function SettingsDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    SettingsDecoder.prototype.getSettingsDetails = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventParams, eventParams, eventParams, eventParams, eventParams, eventParams, eventParams;\n            return __generator(this, function (_a) {\n                switch (event.topics[0]) {\n                    case addedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"AddedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'added',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case removedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"RemovedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'removed',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case changeThresholdTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedThreshold\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'threshold',\n                                change: 'set',\n                                value: eventParams.threshold.toString()\n                            }];\n                    }\n                    case enabledModuleTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"EnabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'added',\n                                value: eventParams.module\n                            }];\n                    }\n                    case disabledModuledTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"DisabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'removed',\n                                value: eventParams.module\n                            }];\n                    }\n                    case changeFallbackHandlerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedFallbackHandler\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'fallbackHandler',\n                                change: 'set',\n                                value: eventParams.handler\n                            }];\n                    }\n                    case changeGuardTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedGuard\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'guard',\n                                change: 'set',\n                                value: eventParams.guard\n                            }];\n                    }\n                    default: {\n                        return [2 /*return*/, undefined];\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    SettingsDecoder.prototype.decodeSettingsChange = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var details, block;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getSettingsDetails(event)];\n                    case 1:\n                        details = _a.sent();\n                        if (!details)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _a.sent();\n                        return [2 /*return*/, __assign({ type: \"settings\", id: \"settings_\" + event.transactionHash + \"_\" + event.eventId, block: block.number, timestamp: block.timestamp, txHash: event.transactionHash }, details)];\n                }\n            });\n        });\n    };\n    SettingsDecoder.prototype.decode = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, block;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case setupTopic: return [3 /*break*/, 1];\n                        }\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _b.sent();\n                        return [2 /*return*/, {\n                                type: \"setup\",\n                                id: \"setup_\" + event.transactionHash + \"_\" + event.eventId,\n                                block: block.number,\n                                timestamp: block.timestamp,\n                                txHash: event.transactionHash,\n                            }];\n                    case 3:\n                        {\n                            return [2 /*return*/, this.decodeSettingsChange(event)];\n                        }\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SettingsDecoder;\n}());\nexports.SettingsDecoder = SettingsDecoder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransferDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar TransferDecoder = /** @class */ (function () {\n    function TransferDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    TransferDecoder.prototype.decodeTokenTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, type, eventInterface, eventParams, details;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        type = \"\";\n                        if (event.topics.length === 4) {\n                            eventInterface = constants_1.erc721Interface;\n                            type = \"ERC721\";\n                        }\n                        else if (event.topics.length === 3) {\n                            eventInterface = constants_1.erc20Interface;\n                            type = \"ERC20\";\n                        }\n                        else if (event.topics.length === 2) {\n                            eventInterface = constants_1.erc20OldInterface;\n                            type = \"ERC20\";\n                        }\n                        else {\n                            return [2 /*return*/, undefined];\n                        }\n                        eventParams = eventInterface.decodeEventLog(\"Transfer\", event.data, event.topics);\n                        if (type === \"ERC20\") {\n                            details = {\n                                type: \"ERC20\",\n                                tokenAddress: event.address,\n                                value: eventParams.amount.toString()\n                            };\n                        }\n                        else {\n                            details = {\n                                type: \"ERC721\",\n                                tokenAddress: event.address,\n                                tokenId: eventParams.tokenId.toString()\n                            };\n                        }\n                        return [2 /*return*/, {\n                                type: \"transfer\",\n                                id: id,\n                                block: block.number,\n                                txHash: event.transactionHash,\n                                timestamp: block.timestamp,\n                                sender: eventParams.from,\n                                receipient: eventParams.to,\n                                direction: (eventParams.to.toLowerCase() === safe.toLowerCase() ? \"INCOMING\" : \"OUTGOING\"),\n                                details: details\n                            }];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decodeEtherTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, eventParams, details, transferMeta;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"SafeReceived\", event.data, event.topics);\n                        details = {\n                            type: \"ETHER\",\n                            value: eventParams.value.toString()\n                        };\n                        transferMeta = {\n                            type: \"transfer\",\n                            id: id,\n                            sender: eventParams.sender,\n                            receipient: safe,\n                            direction: \"INCOMING\",\n                            timestamp: block.timestamp,\n                            txHash: event.transactionHash,\n                            details: details\n                        };\n                        return [2 /*return*/, transferMeta];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.transferTopic: return [3 /*break*/, 1];\n                            case constants_1.etherReceivedTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        if (!event.account)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.decodeTokenTransfer(event.account, event)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        return [4 /*yield*/, this.decodeEtherTransfer(event.address, event)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return TransferDecoder;\n}());\nexports.TransferDecoder = TransferDecoder;\n","export abstract class AbstractDB {\n    private internalDb: IDBDatabase | undefined;\n    private indexedDB = window.indexedDB;\n    readonly dbKey: string;\n    readonly dbVersion: number;\n    readonly migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void;\n\n    constructor(dbKey: string, dbVersion: number, migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void) {\n        this.dbKey = dbKey;\n        this.dbVersion = dbVersion;\n        this.migration = migration;\n    }\n\n    async open(): Promise<IDBDatabase> {\n        if (this.internalDb) return this.internalDb\n        const dbStore = this;\n        return new Promise((callback, reject) => {\n            const request = this.indexedDB.open(this.dbKey, this.dbVersion)\n            request.onerror = function () {\n                reject(\"Error: \" + this.error);\n            }\n            request.onsuccess = function () {\n                dbStore.internalDb = this.result;\n                callback(this.result);\n            }\n            request.onupgradeneeded = function (event) {\n                dbStore.migration(this.result, event.oldVersion, this.result.version)\n            }\n        })\n    }\n}\n\nexport abstract class AbstractDAO<T> {\n    readonly db: AbstractDB;\n    readonly storeName: string;\n\n    constructor(db: AbstractDB, storeName: string) {\n        this.db = db;\n        this.storeName = storeName;\n    }\n\n\n    async add(entry: T): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.put(entry).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async remove(id: string): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.delete(id).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async get(id: string): Promise<T> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.get(id).onsuccess = function () {\n                callback(this.result as T)\n            }\n        })\n    }\n\n    async getAllByIndex(index: string, key?: IDBKeyRange | IDBValidKey): Promise<T[]> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.index(index).getAll(key).onsuccess = function () {\n                callback(this.result.reverse() as T[])\n            }\n        })\n    }\n\n    async drop(): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            transaction.objectStore(this.storeName).clear().onsuccess = function () {\n                callback()\n            }\n        })\n    }\n}","import { AbstractDB } from \"./base\";\n\nexport const INTERACTIONS_STORE = \"interactions\"\nexport const INTERACTIONS_KEY = \"id\"\nexport const INTERACTIONS_INDEX = \"timestamp\"\n\nexport const QUEUED_TX_STORE = \"queued_tx\"\nexport const QUEUED_TX_KEY = \"id\"\nexport const QUEUED_TX_INDEX = \"nonce\"\n\nexport const TX_SIGNATURES_STORE = \"tx_signatures\"\nexport const TX_SIGNATURES_KEY = \"id\"\nexport const TX_SIGNATURES_INDEX = \"safeTxHash\"\n\nexport class SafeDB extends AbstractDB {\n    constructor(safe: string) {\n        super(safe, 3, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(INTERACTIONS_STORE, { keyPath: INTERACTIONS_KEY })\n                store.createIndex(INTERACTIONS_INDEX, INTERACTIONS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(QUEUED_TX_STORE, { keyPath: QUEUED_TX_KEY })\n                store.createIndex(QUEUED_TX_INDEX, QUEUED_TX_INDEX, { unique: false })\n            }\n            if (oldVersion < 3) {\n                const store = db.createObjectStore(TX_SIGNATURES_STORE, { keyPath: TX_SIGNATURES_KEY })\n                store.createIndex(TX_SIGNATURES_INDEX, TX_SIGNATURES_INDEX, { unique: false })\n            }\n        });\n    }\n}","import { SafeInteraction } from \"safe-indexer-ts\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { AbstractDAO } from \"./base\";\nimport { INTERACTIONS_INDEX, INTERACTIONS_STORE, QUEUED_TX_INDEX, QUEUED_TX_STORE, SafeDB, TX_SIGNATURES_INDEX, TX_SIGNATURES_STORE } from \"./safe\";\n\n\nexport class InteractionsDAO extends AbstractDAO<SafeInteraction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), INTERACTIONS_STORE)\n    }\n\n    getAll(): Promise<SafeInteraction[]> {\n        return this.getAllByIndex(INTERACTIONS_INDEX)\n    }\n\n}\n\nexport interface QueuedSafeTransaction extends SafeTransaction {\n    id: string\n    version: string\n}\n\nexport class QueuedInteractionsDAO extends AbstractDAO<QueuedSafeTransaction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), QUEUED_TX_STORE)\n    }\n\n    getAll(nonce: number): Promise<QueuedSafeTransaction[]> {\n        return this.getAllByIndex(QUEUED_TX_INDEX, IDBKeyRange.lowerBound(nonce))\n    }\n}\n\nexport class TxSignaturesDAO extends AbstractDAO<SafeTransactionSignature> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), TX_SIGNATURES_STORE)\n    }\n\n    getAll(safeTxHash: string): Promise<SafeTransactionSignature[]> {\n        return this.getAllByIndex(TX_SIGNATURES_INDEX, safeTxHash)\n    }\n}","import { State } from \"safe-indexer-ts\";\n\nconst parseIntWithFallback = (input: string | undefined | null, fallback: number): number => {\n    if (!input) return fallback\n    const value = parseInt(input)\n    if (Number.isNaN(value)) return fallback\n    return value\n}\n\nexport class IndexerState implements State {\n    safe: string;\n    defaultBlock: number;\n    private _lastIndexedBlock: number;\n    private _earliestIndexedBlock: number; // 8485873 is the Block of initial 1.3.0 deployment\n    private _earliestBlock: number;\n\n    constructor(safe: string, defaultBlock?: number) {\n        this.safe = safe;\n        this.defaultBlock = defaultBlock || -1;\n        const storedEarliestIndexedBlock = localStorage.getItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe);\n        this._earliestIndexedBlock = parseIntWithFallback(storedEarliestIndexedBlock, this.defaultBlock);\n        const storedLastIndexedBlock = localStorage.getItem(\"indexer_state_safe_last_indexed_block\" + this.safe);\n        this._lastIndexedBlock = parseIntWithFallback(storedLastIndexedBlock, this.defaultBlock);\n        const storedEarliestBlock = localStorage.getItem(\"indexer_state_safe_earliest_block\" + this.safe);\n        this._earliestBlock = parseIntWithFallback(storedEarliestBlock, 0);\n    }\n\n    set lastIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_last_indexed_block\" + this.safe, value.toString())\n        this._lastIndexedBlock = value;\n    }\n    get lastIndexedBlock() {\n        return this._lastIndexedBlock\n    }\n\n    set earliestIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe, value.toString())\n        this._earliestIndexedBlock = value;\n    }\n    get earliestIndexedBlock() {\n        return this._earliestIndexedBlock\n    }\n\n    set earliestBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_block\" + this.safe, value.toString())\n        this._earliestBlock = value;\n    }\n    get earliestBlock() {\n        return this._earliestBlock\n    }\n\n    reset() {\n        localStorage.removeItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_last_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_earliest_block\" + this.safe)\n        this._lastIndexedBlock = this.defaultBlock\n        this._earliestIndexedBlock = this.defaultBlock\n    }\n}","import { providers } from \"ethers\";\nimport { Callback, IndexerStatus, SafeIndexer, SafeInteraction } from \"safe-indexer-ts\";\nimport { NetworkConfig } from \"../../components/provider/AppSettingsProvider\";\nimport { InteractionsDAO } from \"../db/interactions\";\nimport { IndexerState } from \"../state/indexer\";\nimport { Account } from \"../utils/account\";\nimport { getIndexer } from \"../utils/indexer\";\n\n\nexport class TransactionRepository implements Callback {\n    callbacks: Set<Callback> = new Set()\n    currentStatus: IndexerStatus | undefined\n    indexer: SafeIndexer | undefined\n    state: IndexerState\n    db: InteractionsDAO\n    account: Account\n    networkConfig: NetworkConfig\n\n    constructor(account: Account, networkConfig: NetworkConfig) {\n        this.account = account\n        this.networkConfig = networkConfig\n        this.db = new InteractionsDAO(account.id)\n        this.state = new IndexerState(account.id, networkConfig.startingBlock)\n    }\n\n    connect(provider: providers.Provider): () => void {\n        this.disconnect()\n        const indexer = getIndexer(this.account, provider, this.state, this.networkConfig, this)\n        this.indexer = indexer\n        indexer.watch().catch((e) => console.error(e))\n        indexer.watch(true).catch((e) => console.error(e))\n        return () => {\n            indexer.shutdown()\n        }\n    }\n\n    disconnect() {\n        this.indexer?.shutdown()\n        this.currentStatus = undefined\n    }\n\n    registerCallback(callback: Callback) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: Callback) {\n        this.callbacks.delete(callback)\n        this.postCurrentStatusUpdateToCallback(callback)\n    }\n\n    private checkForCreation(interactions: SafeInteraction[]) {\n        for (const interaction of interactions) {\n            if (interaction.type === \"setup\" || (\n                interaction.type === \"multisig_transaction\" && interaction.details?.nonce === 0\n            )) {\n                console.log(\"Found creation, stop reverse indexing\")\n                const earliestBlock = Math.max(0, interaction.block - this.networkConfig.maxBlocks)\n                this.state.earliestBlock = earliestBlock\n                this.indexer?.updateConfig({ earliestBlock })\n                return\n            }\n        }\n    }\n\n    private async handleNewInteraction(interaction: SafeInteraction) {\n        try {\n            await this.db.add(interaction)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    onNewInteractions(interactions: SafeInteraction[]) {\n        this.checkForCreation(interactions)\n        interactions.forEach((i) => { this.handleNewInteraction(i) })\n        this.callbacks.forEach((callback) => {\n            try {\n                callback.onNewInteractions(interactions)\n            } catch (e) {\n                console.error(e)\n            }\n        })\n    }\n\n    onStatusUpdate(update: IndexerStatus) {\n        this.currentStatus = update\n        this.postCurrentStatusUpdate()\n    }\n\n    private postCurrentStatusUpdate() {\n        if (!this.currentStatus) return\n        this.callbacks.forEach((cb) => { this.postCurrentStatusUpdateToCallback(cb) })\n    }\n\n    private postCurrentStatusUpdateToCallback(callback: Callback) {\n        const currentStatus = this.currentStatus\n        if (!currentStatus) return\n        try {\n            callback.onStatusUpdate?.(currentStatus)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    async getTx(id: string): Promise<SafeInteraction> {\n        return this.db.get(id)\n    }\n\n    async getAllTxs(): Promise<SafeInteraction[]> {\n        return this.db.getAll()\n    }\n\n    async reindex(): Promise<boolean> {\n        this.currentStatus = undefined\n        const indexer = this.indexer\n        if (!indexer) return false;\n        indexer.pause();\n        await this.db.drop();\n        this.state.reset();\n        indexer.resume();\n        return true\n    }\n\n}","\nimport { providers } from 'ethers';\nimport { Callback, EthersLoader, EthersParser, IncomingEthEventSource, IncomingTransferEventSource, ModuleTransactionEventSource, MultisigTransactionEventSource, OutgoingTransferEventSource, SafeIndexer, SafeIndexerUserConfig, SettingsChangeEventSource } from 'safe-indexer-ts'\nimport { NetworkConfig } from '../../components/provider/AppSettingsProvider';\nimport { IndexerState } from '../state/indexer';\nimport { Account } from './account';\n\nexport const getIndexer = (account: Account, provider: providers.Provider, state: IndexerState, networkConfig: NetworkConfig, callback: Callback): SafeIndexer => {\n    const loader = new EthersLoader(provider, [\n        new MultisigTransactionEventSource(provider), \n        new ModuleTransactionEventSource(provider), \n        new IncomingTransferEventSource(provider), \n        new OutgoingTransferEventSource(provider), \n        new IncomingEthEventSource(provider), \n        new SettingsChangeEventSource(provider)\n    ])\n    const parser = new EthersParser(provider)\n    const config: SafeIndexerUserConfig = { chainId: account.chainId, safe: account.address, maxBlocks: networkConfig.maxBlocks, logger: console, earliestBlock: state.earliestBlock }\n    return new SafeIndexer(state, loader, parser, callback, config)\n}","import Onboard from 'bnc-onboard'\nimport { API, WalletInitOptions } from \"bnc-onboard/dist/src/interfaces\";\nimport { findChainRpc } from '../utils/chainInfo';\n\nexport interface SignerInfo {\n    signerAddress?: string\n}\n\nexport class SafeSigner {\n\n    private onboard?: API\n    private rpcProvider?: (networkId: number) => string | undefined\n    private providerChangeListener?: (provider: any | null) => void\n\n    onProviderChange(listener?: (provider: any) => void) {\n        this.providerChangeListener = listener\n    }\n\n    setRpcProvider(rpcProvider: ((networkId: number) => string | undefined) | undefined) {\n        this.rpcProvider = rpcProvider\n    }\n\n    async prepare(networkId: number, showSelection?: boolean): Promise<boolean> {\n        this.clear()\n        const wallets: WalletInitOptions[] = [\n            { walletName: \"metamask\" },\n            { walletName: \"opera\" },\n            { walletName: \"status\" },\n            { walletName: \"frame\" },\n            { walletName: \"gnosis\" },\n        ]\n        const rpc = this.rpcProvider?.(networkId)\n        if (rpc) {\n            wallets.push(\n                {\n                    walletName: 'walletConnect',\n                    rpc: {\n                        [networkId.toString()]: rpc\n                    },\n                    bridge: 'https://safe-walletconnect.gnosis.io/',\n                },\n                {\n                  walletName: 'ledger',\n                  rpcUrl: rpc\n                }\n            )\n        }\n        const onboard = Onboard({\n            networkId,\n            subscriptions: {\n                wallet: wallet => {\n                    if (wallet.name) localStorage.setItem(\"last_selected_wallet_name\", wallet.name)\n                    try {\n                        this.providerChangeListener?.(wallet.provider)\n                    } catch (e) {\n                        console.error(e)\n                    }\n                }\n            },\n            walletSelect: {\n                description: 'Please select a Signer',\n                wallets\n            },\n            walletCheck: [\n                { checkName: 'derivationPath' },\n                { checkName: 'connect' },\n                { checkName: 'accounts' },\n                { checkName: 'network' }\n            ],\n        })\n        this.onboard = onboard\n        const lastSelectedWallet = localStorage.getItem(\"last_selected_wallet_name\") || undefined\n        if (!lastSelectedWallet && showSelection != true) return false\n        if (await onboard.walletSelect(lastSelectedWallet))\n            return await onboard.walletCheck();\n        return false\n    }\n\n    async connect(networkId: number): Promise<boolean> {\n        return this.prepare(networkId, true)\n    }\n\n    async disconnect(): Promise<void> {\n        localStorage.removeItem(\"last_selected_wallet_name\")\n        this.clear()\n    }\n\n    async clear() {\n        this.onboard?.walletReset()\n        this.onboard = undefined\n    }\n\n    status(): SignerInfo {\n        try {\n            const state = this.onboard?.getState()\n            return {\n                signerAddress: state?.address\n            }\n        } catch (e) {\n            return {}\n        }\n    }\n}","import chains from '../../logic/utils/chains.json'\n\nexport interface ChainInfo {\n    name: string,\n    id: number\n}\n\nexport const findChainRpc = (networkId: number, includeInfura: boolean): string | undefined => {\n    const chain = chains.find(\n        (chain) => {\n            return chain.chainId === networkId\n        }\n    )\n    return chain?.rpc?.find(\n        (rpc) => {\n            return !rpc.startsWith(\"ws\") && (includeInfura || !rpc.includes(\"INFURA_API_KEY\"))\n        }\n    )\n}\n\nexport const loadChains = (): ChainInfo[] => {\n    return chains.map(chain => {\n        return {\n            id: chain.chainId,\n            name: chain.name\n        }\n    })\n}","import { ethers, providers, Signer } from \"ethers\";\nimport { TypedDataSigner } from \"@ethersproject/abstract-signer\"\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport { SafeSigner } from \"../../logic/account/SafeSigner\";\nimport { findChainRpc } from \"../../logic/utils/chainInfo\";\nimport { defaultRelay } from \"../../logic/config/defaults\";\n\nexport interface NetworkConfig {\n    maxBlocks: number,\n    startingBlock: number\n}\n\nconst defaultConfig: NetworkConfig = {\n    startingBlock: -1,\n    maxBlocks: 1000\n}\n\nexport interface AppSettings {\n    readonly infuraToken: string,\n    readonly customRpc: string,\n    readonly relayService: string,\n    readonly useCustomRpc: boolean,\n    readonly signer: Signer & TypedDataSigner | undefined,\n    readonly safeSigner: SafeSigner,\n    readonly networkConfig: NetworkConfig,\n    loadProvider: (networkId: number) => providers.JsonRpcProvider | undefined,\n    toggleCustomRpc: (value: boolean) => void\n    updateCustomRpc: (value: string) => void\n    updateRelayService: (value: string) => void\n    updateInfuraToken: (value: string) => void\n    updateNetworkConfig: (value: NetworkConfig) => void\n}\n\nconst AppSettingsContext = React.createContext<AppSettings | undefined>(undefined);\n\nexport const useAppSettings = () => {\n    const appSettings = useContext(AppSettingsContext)\n    if (!appSettings) throw Error(\"App Settings not available!\")\n    return appSettings\n}\n\nexport const AppSettingsProvider: React.FC = ({ children }) => {\n    const [useCustomRpc, setUseCustomRpc] = useState(localStorage.getItem(\"app_state_use_rpc\") === \"true\")\n    const [customRpc, setCustomRpc] = useState(localStorage.getItem(\"app_state_rpc\") || \"\")\n    const [relayService, setRelayService] = useState(localStorage.getItem(\"app_relay_service\") || defaultRelay)\n    const [infuraToken, setInfuraToken] = useState(localStorage.getItem(\"app_state_infura_token\") || \"\")\n    const [connectedProvider, setConnectedProvider] = useState<any | null>(undefined)\n    const storedConfig = localStorage.getItem(\"app_state_network_config\")\n    const [networkConfig, setNetworkConfig] = useState<NetworkConfig>(storedConfig ? JSON.parse(storedConfig) : defaultConfig)\n    const toggleCustomRpc = (value: boolean) => {\n        localStorage.setItem(\"app_state_use_rpc\", value ? \"true\" : \"false\")\n        setUseCustomRpc(value)\n    }\n    const updateCustomRpc = (value: string) => {\n        localStorage.setItem(\"app_state_rpc\", value)\n        setCustomRpc(value)\n    }\n    const updateRelayService = (value: string) => {\n        localStorage.setItem(\"app_relay_service\", value)\n        setRelayService(value)\n    }\n    const updateInfuraToken = (value: string) => {\n        localStorage.setItem(\"app_state_infura_token\", value)\n        setInfuraToken(value)\n    }\n    const updateNetworkConfig = (value: NetworkConfig) => {\n        const serialized = JSON.stringify({\n            maxBlocks: value.maxBlocks || 100,\n            startingBlock: value.startingBlock || -1\n        })\n        localStorage.setItem(\"app_state_network_config\", serialized)\n        setNetworkConfig(value)\n    }\n\n    const getChainRpc = useCallback((networkId: number): string | undefined => {\n        if (infuraToken) {\n            const rpcUrl = findChainRpc(networkId, true)\n            return rpcUrl?.replaceAll(\"${INFURA_API_KEY}\", infuraToken);\n        }\n        return findChainRpc(networkId, false)\n    }, [infuraToken])\n\n    const loadProvider = useCallback((networkId: number): providers.JsonRpcProvider | undefined => {\n        if (useCustomRpc) {\n            if (!customRpc) return undefined\n            return new ethers.providers.JsonRpcProvider(customRpc);\n        }\n        if (connectedProvider) {\n            return new ethers.providers.Web3Provider(connectedProvider)\n        }\n        const chainRpc = getChainRpc(networkId)\n        if (chainRpc) {\n            return new ethers.providers.JsonRpcProvider(chainRpc);\n        }\n        return undefined\n    }, [getChainRpc, useCustomRpc, connectedProvider])\n\n    const signer = useMemo(() => {\n        if (connectedProvider) {\n            return new ethers.providers.Web3Provider(connectedProvider).getSigner()\n        }\n        return undefined;\n    }, [connectedProvider])\n\n    // TODO refactor all safeSigner hooks into separate file\n    const safeSigner = useMemo(() => {\n        return new SafeSigner();\n    }, [])\n\n    useEffect(() => {\n        safeSigner.setRpcProvider(getChainRpc)\n    }, [safeSigner, getChainRpc])\n\n    useEffect(() => {\n        safeSigner.onProviderChange(setConnectedProvider)\n    }, [safeSigner, setConnectedProvider])\n\n    return <AppSettingsContext.Provider value={{\n        customRpc, useCustomRpc, relayService, infuraToken, signer, networkConfig,\n        loadProvider, toggleCustomRpc, updateCustomRpc, updateRelayService, updateInfuraToken, updateNetworkConfig,\n        safeSigner\n    }}>\n        {children}\n    </AppSettingsContext.Provider>\n}\n\nexport default AppSettingsProvider","export const defaultRelay = \"https://relay-module-service.herokuapp.com\"","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { TransactionRepository as TransactionRepository } from \"../../logic/account/TransactionRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst TransactionRepoContext = React.createContext<TransactionRepository | undefined>(undefined);\n\nexport const useTransactionRepo = () => {\n    const repo = useContext(TransactionRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const TransactionRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { loadProvider, networkConfig } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new TransactionRepository(account, networkConfig)\n    }, [ account, networkConfig ])\n\n    useEffect(() => {\n        const provider = loadProvider(account.chainId)\n        if (!provider) return\n        return repo.connect(provider)\n    }, [repo, loadProvider])\n\n    useEffect(() => {\n        return () => repo.disconnect()\n    }, [repo])\n\n    return <TransactionRepoContext.Provider value={repo}>\n        { children }\n    </TransactionRepoContext.Provider>\n}\n\nexport default TransactionRepositoryProvider","import { ethers } from 'ethers'\nimport shortNames from './shortNameToChainId.json'\n\nexport interface Account {\n    id: string\n    chainId: number\n    address: string\n}\n\nexport const buildCaip2Addr = (chainId: number, address: string) => {\n    return `eip155:${chainId}:${address}`\n}\n\nexport const shortNameToChainId = (shortName: string): string | undefined => {\n    return (shortNames as Record<string, string>)[shortName]\n}\n\nexport const parseAddress = (address: string): string | undefined => {\n    try {\n        return ethers.utils.getAddress(address)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseChainId = (chainId: string): number | undefined => {\n    try {\n        return parseInt(chainId)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseAccount = (account: string): Account | undefined => {\n    const accountParts = account.split(\":\")\n    let network = undefined\n    let address = undefined\n    if (accountParts.length == 1) {\n        address = parseAddress(accountParts[0])\n        network = \"eip155:1\"\n    } else if (accountParts.length == 2) {\n        address = parseAddress(accountParts[1])\n        network = shortNameToChainId(accountParts[0])\n    } else if (accountParts.length == 3) {\n        address = parseAddress(accountParts[2])\n        network = `${accountParts[0]}:${accountParts[1]}`\n    }\n\n    if (!network || !address) return undefined\n    const networkParts = network.split(\":\")\n    if (networkParts.length != 2 || networkParts[0] !== \"eip155\") return undefined\n    const chainId = parseChainId(networkParts[1])\n    if (!chainId) return undefined\n    return {\n        address,\n        chainId: chainId,\n        id: buildCaip2Addr(chainId, address)\n    }\n}","import { useMediaQuery } from \"@mui/material\";\nimport { buildCaip2Addr } from \"../../logic/utils/account\";\nimport { useAccount } from \"../account/Dashboard\";\n\nexport const useDektopLayout = (): boolean => useMediaQuery('(min-width:600px)');\n\nexport const copyToClipboard = (text: string, copyMessage?: string) => {\n    try {\n        navigator.clipboard.writeText(text)\n        if (copyMessage) {\n            window.alert(copyMessage)\n        }\n    }  catch (e) {\n        console.log(e)\n    }\n}\n\nexport const useCopyAddress = (address: string): (() => void) => {\n    const account = useAccount()\n    const shareableText = buildCaip2Addr(account.chainId, address)\n    return () => { copyToClipboard(shareableText, \"Copied address to clipboard!\") }\n}","import { Typography } from \"@mui/material\"\nimport { styled } from \"@mui/system\"\n\nexport const Group = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const Row = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'row'\n}))\n\nexport const Header = styled('div')(({ theme }) => ({\n    textAlign: 'start'\n}))\n\nexport const Entry = styled('div')(({ theme }) => ({\n    display: 'flex',\n    alignItems: 'center',\n    paddingBottom: 16\n}))\n\nexport const LongText = styled(Typography)(({ theme }) => ({\n    width: '100%',\n    textAlign: 'start',\n    wordWrap: 'break-word'\n}))","export const shortAddress = (address: string, visibleChars: number = 4): string => {\n    const length = address.length\n    if (length <= 2 * visibleChars + 2) return address;\n    return \"0x\" + address.slice(2, 2 + visibleChars) + '...' + address.slice(address.length - visibleChars)\n}","import { IconButton, Typography } from \"@mui/material\"\nimport { useMemo } from \"react\";\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { ContentCopy } from \"@mui/icons-material\";\nimport { Row } from \"../../styled/tables\";\nimport { shortAddress } from \"../../logic/utils/address\";\nimport { copyToClipboard, useCopyAddress } from \"./media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AddressInfo: React.FC<{ address: string, onClick?: (address: string) => void  }> = ({ address, onClick }) => {\n    const iconSrc = useMemo(() => makeBlockie(address), [address]);\n    const copyAddress = useCopyAddress(address)\n    return <Row sx={{\n        width: `calc(100% - 32px)`,\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" onClick={() => onClick?.(address) } />\n        <Typography sx={{ fontFamily: 'Monospace', paddingX: '8px' }} onClick={() => onClick?.(address) } >{shortAddress(address)}</Typography>\n        <IconButton color=\"default\" component=\"span\" onClick={() => copyAddress() }>\n            <ContentCopy fontSize=\"small\" />\n        </IconButton>\n    </Row>\n}\n\nexport default AddressInfo","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { SettingsChangeTx, TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: SettingsChangeTx\n}\n\nexport const renderSettingsValue = (component: string, value: string): React.ReactNode => {\n    switch (component) {\n        case 'owners':\n        case 'modules':\n        case 'fallbackHandler':\n            return <AddressInfo address={value} />\n        default:\n            return <LongText>{value}</LongText>\n    }\n}\n\nconst capitalize = (value: string): string => {\n    if (value.length < 2) return value\n    return value.slice(0, 1).toUpperCase() + value.slice(1)\n}\n\nexport const SettingsTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>{capitalize(transaction.component)} {transaction.change}</Header>\n        <Entry>\n            {renderSettingsValue(transaction.component, transaction.value)}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group >\n}\n\nexport default SettingsTxDetails","import styled from '@emotion/styled';\nimport React from 'react'\nimport { SettingsChangeTx } from 'safe-indexer-ts'\nimport { Entry, Group, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\nimport { renderSettingsValue } from '../details/SettingsTxDetails';\n\nexport interface Props {\n    settingsChange: SettingsChangeTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'inline-block',\n    width: '100%',\n    wordWrap: 'break-word'\n}))\n\nexport const SettingsTxSummary: React.FC<Props> = ({ settingsChange, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(settingsChange.id)}>\n        {`${settingsChange.component} ${settingsChange.change}`}\n        {hideDate && renderSettingsValue(settingsChange.component, settingsChange.value)}\n        {!hideDate && (<>\n            <br />{new Date(settingsChange.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default SettingsTxSummary","import styled from '@emotion/styled';\nimport React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event, TransferTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    transfer: TransferTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const TransferTxSummary: React.FC<Props> = ({ transfer, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(transfer.id)}>\n        {`${transfer.direction} ${transfer.details.type} Transfer`}\n        {!hideDate && (<>\n            <br />{new Date(transfer.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default TransferTxSummary","import React from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\nimport TransferTxSummary from './summary/TransferTxSummary'\n\nexport interface Props {\n    interaction: SafeInteraction,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\nexport const TxSummary: React.FC<Props> = ({ interaction, showDetails, hideDate }) => {\n    switch (interaction.type) {\n        case \"multisig_transaction\":\n        case \"module_transaction\":\n        case \"setup\":\n            return <div onClick={() => showDetails?.(interaction.id)}>\n                {`${interaction.type}`}<br />\n                {!hideDate ? `${new Date(interaction.timestamp * 1000).toUTCString()}` : \"\"}<br />\n                <br />\n            </div>\n        case \"settings\":\n            return <SettingsTxSummary settingsChange={interaction} hideDate={hideDate} showDetails={showDetails} />\n        case \"transfer\":\n            return <TransferTxSummary transfer={interaction} hideDate={hideDate} showDetails={showDetails} />\n        default:\n            return <div>\n                Unknown Interaction\n            </div>\n    }\n}\n\nexport default TxSummary","import React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    interactions: SafeInteractionEvent[]\n}\n\nconst eventSummary = (event: Event): ReactElement => {\n    return <div>\n        {`Event - ${event.eventId}`}<br />\n        <br />\n    </div>\n}\n\nexport const TxEvents: React.FC<Props> = ({ interactions }) => {\n    if (interactions.length == 0) return <></>\n    return <>\n        <Header>Events:</Header>\n        <Group sx={{ textAlign: \"left\" }}>\n            {interactions.map((e) => (<Entry>\n                {e.interaction ? <TxSummary interaction={e.interaction} hideDate /> : eventSummary(e.event)}\n            </Entry>))}\n        </Group>\n    </>\n}\n\nexport default TxEvents","import React, { useState } from 'react'\nimport { Button, Link, Typography } from '@mui/material';\nimport { Group, LongText } from '../../styled/tables';\n\nexport interface Props {\n    data: string\n}\n\nexport const TxData: React.FC<Props> = ({ data }) => {\n    const [collapsed, setCollapsed] = useState<boolean>(true)\n    const decodePossible = data.length >= 10\n    const canCollapse = data.length >= 42\n    const displayData = canCollapse && collapsed ? data.slice(0, 24) + `...` : data\n    return <Group sx={{ paddingBottom: \"16px\" }}>\n        <LongText>{displayData} {canCollapse && (<Link onClick={() => { setCollapsed(!collapsed) }} sx={{ textDecoration: \"none\" }}>{collapsed ? \"Expand\" : \"Collapse\"}</Link>)}</LongText>\n        {decodePossible && (<Button onClick={() => { window.open('https://rimeissner.dev/transaction-decoder/#/?data=' + data, '_blank'); }}>Decode</Button>)}\n    </Group>\n}\n\nexport default TxData","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { ModuleTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport { Typography } from '@mui/material';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: ModuleTx\n}\n\nexport const ModuleTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Module:</Header>\n        <Entry>\n            <AddressInfo address={transaction.module} />\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default ModuleTxDetails","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { MultisigTx } from 'safe-indexer-ts'\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: MultisigTx\n}\n\nexport const MultisigTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        <Header>Id:</Header>\n        <Entry>\n            <LongText>{transaction.safeTxHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n                <Header>Nonce:</Header>\n                <Entry>\n                    <LongText>{transaction.details.nonce}</LongText>\n                </Entry>\n                <Header>Signatures:</Header>\n                <Entry>\n                    <LongText>{transaction.details.signatures}</LongText>\n                </Entry>\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default MultisigTxDetails","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: TransferTx\n}\n\nconst renderDetails = (details: TransferDetails): ReactElement => {\n    let asset: string = \"\"\n    let subjectTitle: string = \"\"\n    let subject: string = \"\"\n    switch (details.type) {\n        case \"ERC20\":\n            asset = \"ERC20 - \" + details.tokenAddress\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        case \"ERC721\":\n            asset = \"ERC721 - \" + details.tokenAddress\n            subjectTitle = \"ID\"\n            subject = details.tokenId\n            break\n        case \"ETHER\":\n            asset = \"Ether\"\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        default:\n            break\n    }\n    return (<>\n        <Header>Asset:</Header>\n        <Entry>\n            <Typography>{asset}</Typography>\n        </Entry>\n        <Header>{subjectTitle}</Header>\n        <Entry>\n            <Typography>{subject}</Typography>\n        </Entry>\n    </>)\n}\n\nexport const TransferTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>From:</Header>\n        <Entry>\n            <AddressInfo address={transaction.sender} />\n        </Entry>\n        <Header>To:</Header>\n        <Entry>\n            <AddressInfo address={transaction.receipient} />\n        </Entry>\n        {renderDetails(transaction.details)}\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group>\n}\n\nexport default TransferTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { ReactElement, useEffect, useState } from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\nimport ModuleTxDetails from './details/ModuleTxDetails'\nimport MultisigTxDetails from './details/MultisigTxDetails'\nimport SettingsTxDetails from './details/SettingsTxDetails'\nimport TransferTxDetails from './details/TransferTxDetails'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst renderDetails = (interaction?: SafeInteraction): ReactElement => {\n    switch (interaction?.type) {\n        case \"multisig_transaction\":\n            return (<MultisigTxDetails transaction={interaction} />)\n        case \"module_transaction\":\n            return (<ModuleTxDetails transaction={interaction} />)\n        case \"transfer\":\n            return (<TransferTxDetails transaction={interaction} />)\n        case \"settings\":\n            return <SettingsTxDetails transaction={interaction} />\n        default:\n            return (<>\"Unknown details\"</>)\n    }\n}\n\nexport const TxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [debugLink, setDebugLink] = useState<string | undefined>(undefined)\n    const txRepo = useTransactionRepo()\n    const account = useAccount()\n    const [interaction, setInteraction] = useState<SafeInteraction | undefined>(undefined)\n    useEffect(() => {\n        setInteraction(undefined)\n        if (!id) return\n        const loadInteraction = async () => {\n            try {\n                setInteraction(await txRepo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        loadInteraction()\n    }, [id, txRepo, setInteraction, handleClose])\n\n    useEffect(() => {\n        if (!interaction) {\n            setDebugLink(undefined)\n            return\n        }\n        let link = \"https://dashboard.tenderly.co/tx/\"\n        link += account.chainId + \"/\"\n        link += interaction?.txHash\n        setDebugLink(link)\n    }, [interaction, account])\n    return <TxDialog open={!!id} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Transaction Details</DialogTitle>\n        <DialogContent>\n            {renderDetails(interaction)}\n        </DialogContent>\n        <DialogActions>\n            {debugLink && (<Button onClick={() => { window.open(debugLink, \"_blank\") }}>Debug</Button>)}\n            <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default TxDetails","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Callback, SafeInteraction } from 'safe-indexer-ts';\nimport { Button, styled, Typography } from '@mui/material';\nimport { useAccount } from '../Dashboard';\nimport SettingsDialog from '../../settings/SettingsDialog';\nimport TxDetails from './TxDetails';\nimport TxSummary from './TxSummary';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\",\n}))\n\nfunction Transactions() {\n  const account = useAccount()\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [txs, setTxs] = useState<SafeInteraction[]>([])\n  const accountRepo = useTransactionRepo()\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: () => {\n        accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n      }\n    }\n    accountRepo.registerCallback(callback)\n    return () => accountRepo.unregisterCallback(callback)\n  }, [accountRepo, txs, setTxs])\n\n  useEffect(() => {\n    // Reset id if account changes\n    setSelectedId(undefined)\n  }, [account])\n\n  const showDetails = useCallback(async (id) => {\n    setSelectedId(id)\n  }, [setSelectedId])\n\n  useEffect(() => {\n    setTxs([])\n    accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n  }, [accountRepo, setTxs])\n\n  const details = useMemo(() => {\n    return <TxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      {txs.map((e) => <TxSummary interaction={e} showDetails={(id) => showDetails(id)} />)}\n      {details}\n    </Root>\n  );\n}\n\nexport default Transactions;\n","import { Signer, TypedDataSigner, TypedDataDomain, TypedDataField } from \"@ethersproject/abstract-signer\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"./account\";\n\nexport type SafeSignatureType = \"eip712\" | \"eth_sign\" | \"pre_validated\" | \"contract\"\n\nconst recoverEthSign = (safeTxHash: string, signature: string) => {\n    const hash = ethers.utils.hashMessage(ethers.utils.arrayify(safeTxHash))\n    // TODO: adjust v\n    return ethers.utils.recoverAddress(hash, signature)\n}\n\nconst recoverEIP712 = (safeTxHash: string, signature: string) => {\n    return ethers.utils.recoverAddress(safeTxHash, signature)\n}\n\nconst recoverPreValidated = async (signature: string) => {\n    // TODO: add on-chain check\n    return signature.slice(0, 66)\n}\n\nexport const checkSafeTransactionSignature = async (signature: SafeTransactionSignature) => {\n    let signer;\n    switch (signature.type) {\n        case \"eth_sign\": {\n            signer = recoverEthSign(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"eip712\": {\n            signer = recoverEIP712(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"pre_validated\": {\n            signer = recoverPreValidated(signature.data)\n            break\n        }\n        case \"contract\": {\n            throw Error(\"Contract signatures not supported yet\")\n        }\n        default: {\n            throw Error(\"Unknown signature type\")\n        }\n    }\n    if (signer !== signature.signer) throw Error(`Unexpected signer! Expected ${signature.signer} got ${signer}`)\n}\n\nexport const shareableSignatureString = (signature: SafeTransactionSignature): string => {\n    return `${signature.data}:${signature.signer}:${signature.safeTxHash}:${signature.type}`\n}\n\nconst signatureId = (signatureData: string, safeTxHash: string): string => ethers.utils.keccak256(signatureData + safeTxHash.slice(2))\n\nexport const parseSafeSignature = async (signatureString: string, safeTxHash?: string, sigType?: SafeSignatureType): Promise<SafeTransactionSignature> => {\n    const signatureParts = signatureString.split(\":\")\n    if (\n        (signatureParts.length == 2 && !safeTxHash && !sigType) ||\n        (signatureParts.length == 3 && !sigType) ||\n        signatureParts.length != 4\n    ) {\n        throw Error(\"Missing Safe signature info\")\n    }\n    const data = signatureParts[0]\n    const signer = signatureParts[1]\n    const hash = safeTxHash || signatureParts[2]\n    // TODO: verify signature type\n    const type = sigType || signatureParts[3] as SafeSignatureType\n    const id = signatureId(data, hash)\n    return {\n        id,\n        type,\n        signer,\n        safeTxHash: hash,\n        data\n    }\n}\n\nexport const parseSignatureType = (signature: string): SafeSignatureType => {\n    const sigType = signature.slice(-2)\n    switch(sigType) {\n        case \"00\": {\n            return \"contract\" // contract signature (aka old eip 1271 version)\n        }\n        case \"01\": {\n            return \"pre_validated\" // pre-validated signature\n        }\n        case \"1b\": \n        case \"1c\": {\n            return \"eip712\" // Typed Data based signature\n        }\n        case \"1f\": \n        case \"20\": {\n            return \"eth_sign\" // eth_sign based signature\n        }\n        default: \n            throw Error(\"Unknown signature type\")\n    }\n}\n\nexport const getEIP712Domain = (version: string, account: Account): TypedDataDomain => {\n    switch (version) {\n        case \"1.3.0\": {\n            return {\n                verifyingContract: account.address,\n                chainId: account.chainId\n            }\n        }\n        default: {\n            return { verifyingContract: account.address }\n        }\n    }\n}\n\nexport const getEIP712TxType = (version: string): Record<string, TypedDataField[]> => {\n    switch (version) {\n        case \"0.1.0\": {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"dataGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n        default: {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"baseGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n    }\n}\n\nconst signEip712 = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer._signTypedData(\n        getEIP712Domain(transaction.version, account),\n        getEIP712TxType(transaction.version),\n        transaction\n    )\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEIP712(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    const id = signatureId(signatureString, transaction.id)\n    return {\n        type: \"eip712\",\n        id,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nconst signMessage = async (signer: Signer & TypedDataSigner, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer.signMessage(arrayify(transaction.id))\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEthSign(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    const id = signatureId(signatureString, transaction.id)\n    return {\n        type: \"eth_sign\",\n        id,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nexport const buildPreValidatedSignature = async (signerAddress: string, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signature = \"0x000000000000000000000000\" + signerAddress.slice(2) + \"0000000000000000000000000000000000000000000000000000000000000000\" + \"01\"\n    const id = signatureId(signature, transaction.id)\n    return {\n        id,\n        safeTxHash: transaction.id,\n        type: \"pre_validated\",\n        signer: signerAddress,\n        data: signature,\n    }\n}\n\nexport const signQueuedTx = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    try {\n        return await signEip712(signer, account, transaction)\n    } catch (e: any) {\n        if (e.code && e.code === 4001) {\n            console.warn(\"User canceled signing\")\n            throw e\n        }\n        console.error(e)\n        console.warn(\"Could not sign with EIP-712\")\n    }\n    return await signMessage(signer, transaction) \n}","import { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { SafeStatus } from \"./safe\";\nimport { buildPreValidatedSignature } from \"./signatures\";\n\nexport const prepareSignatures = async (status: SafeStatus, tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[], submitterAddress?: string): Promise<SafeTransactionSignature[]> => {\n    const signatureMap = new Map<String, SafeTransactionSignature>()\n    for (const signature of signatures) {\n        if (status.owners.indexOf(signature.signer) < 0) continue\n        if (submitterAddress === signature.signer || signatureMap.has(signature.signer)) continue\n        signatureMap.set(signature.signer, signature)\n    }\n    const submitterIsOwner = submitterAddress && status.owners.indexOf(submitterAddress) >= 0\n    const requiredSigntures = submitterIsOwner ? status.threshold.sub(1) : status.threshold\n    if (requiredSigntures.toNumber() > signatureMap.size) throw Error(`Not enough signatures (${signatureMap.size} of ${requiredSigntures})`)\n    const signatureArray = []\n    if (submitterIsOwner) {\n        signatureArray.push(await buildPreValidatedSignature(submitterAddress, tx))\n    }\n    return signatureArray.concat(Array.from(signatureMap.values()).slice(0, requiredSigntures.toNumber()))\n}\n\nconst buildStaticPart = (signature: SafeTransactionSignature, offset: number): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return \"\" +\n                ethers.utils.defaultAbiCoder.encode([\"address\"], [signature.signer]).slice(2) +\n                ethers.utils.defaultAbiCoder.encode([\"uint256\"], [offset]).slice(2) +\n                \"00\"\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return signature.data.slice(2)\n    }\n}\n\nconst buildDynamicPart = (signature: SafeTransactionSignature): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return ethers.utils.defaultAbiCoder.encode([\"bytes\"], [arrayify(signature.data)]).slice(2)\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return \"\"\n    }\n}\n\nexport const buildSignatureBytes = (signatures: SafeTransactionSignature[]): string => {\n    signatures.sort((left, right) => left.signer.toLowerCase().localeCompare(right.signer.toLowerCase()))\n    let staticParts = \"\"\n    let dynamicParts = \"\"\n    for (const sig of signatures) {\n        staticParts += buildStaticPart(sig, dynamicParts.length / 2)\n        dynamicParts += buildDynamicPart(sig)\n    }\n    return \"0x\" + staticParts + dynamicParts\n}","import { providers, Signer, BigNumber } from \"ethers\";\nimport { PopulatedTransaction } from \"@ethersproject/contracts\";\nimport { QueuedInteractionsDAO, QueuedSafeTransaction, TxSignaturesDAO } from \"../db/interactions\";\nimport { SafeTransaction, SafeTransactionSignature, SignedSafeTransaction } from \"../models/transactions\";\nimport { Account } from \"../utils/account\";\nimport { buildSignatureBytes, prepareSignatures } from \"../utils/execution\";\nimport { Safe } from \"../utils/safe\";\nimport { FactoryRepository } from \"../execution/FactoryRepository\";\n\nexport interface QueueRepositoryUpdates {\n    onNewTx: () => void\n}\n\nexport class QueueRepository {\n    callbacks: Set<QueueRepositoryUpdates> = new Set()\n    queueDao: QueuedInteractionsDAO\n    signaturesDao: TxSignaturesDAO\n\n    constructor(readonly account: Account, readonly factoryRepo: FactoryRepository, readonly provider?: providers.Provider) {\n        this.queueDao = new QueuedInteractionsDAO(account.id)\n        this.signaturesDao = new TxSignaturesDAO(account.id)\n    }\n\n    registerCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.delete(callback)\n    }\n\n    private notifyNewTxs() {\n        this.callbacks.forEach((callback) => { \n            try {\n                callback.onNewTx()\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    async addTx(tx: SafeTransaction): Promise<QueuedSafeTransaction> {\n        const safe = await this.factoryRepo.getSafeForAccount(this.account, this.provider)\n        const hashInfo = await safe.getTransactionHash(tx)\n        const queuedTx = {\n            id: hashInfo.hash,\n            version: hashInfo.version,\n            ...tx\n        }\n        await this.queueDao.add(queuedTx)\n        this.notifyNewTxs()\n        return queuedTx\n    }\n\n    async deleteTx(id: string): Promise<void> {\n        await this.queueDao.remove(id)\n        this.notifyNewTxs()\n    }\n\n    async getTx(hash: string): Promise<QueuedSafeTransaction> {\n        return this.queueDao.get(hash)\n    }\n\n    async getQueuedTxs(): Promise<QueuedSafeTransaction[]> {\n        const safe = await this.factoryRepo.getSafeForAccount(this.account, this.provider)\n        const nonce = await safe.nonce()\n        return this.queueDao.getAll(nonce.toNumber())\n    }\n\n    async getNextNonce(): Promise<string> {\n        const queuedTxs = await this.getQueuedTxs()\n        if (queuedTxs.length > 0) {\n            return BigNumber.from(queuedTxs[queuedTxs.length - 1].nonce).add(1).toString()\n        }\n        const safe = await this.factoryRepo.getSafeForAccount(this.account, this.provider)\n        return (await safe.nonce()).toString()\n    }\n\n    async getSignatures(hash: string): Promise<SafeTransactionSignature[]> {\n        return this.signaturesDao.getAll(hash)\n    }\n\n    async addSignature(signature: SafeTransactionSignature): Promise<void> {\n        await this.signaturesDao.add(signature)\n    }\n\n    async signedTx(tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[], submitterAddress?: string): Promise<SignedSafeTransaction> {\n        const safe = await this.factoryRepo.getSafeForAccount(this.account, this.provider)\n        const status = await safe.status()\n        if (status.nonce.toNumber() !== tx.nonce) throw Error(`Unexpected nonce! Expected ${status.nonce} got ${tx.nonce}`)\n        const signatureBytes = buildSignatureBytes(await prepareSignatures(status, tx, signatures, submitterAddress))\n        return {\n            signatures: signatureBytes,\n            ...tx\n        }\n    }\n\n    async submitTx(tx: QueuedSafeTransaction, submitter: Signer, signatures: SafeTransactionSignature[]): Promise<string> {\n        const safe = await this.factoryRepo.getSafeForAccount(this.account, this.provider)\n        const writableSafe = safe.writable(submitter)\n        await writableSafe.initialize()\n        const submitterAddress = await submitter.getAddress()\n        const signedTx = await this.signedTx(tx, signatures, submitterAddress)\n        return writableSafe.executeTx(signedTx)\n    }\n\n    async populateTx(tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[]): Promise<PopulatedTransaction> {\n        const signedTx = await this.signedTx(tx, signatures)\n        const safe = await this.factoryRepo.getSafeForAccount(this.account, this.provider)\n        return await safe.populateTx(signedTx)\n    }\n\n}","import { Account } from \"../utils/account\";\nimport { AbstractDAO, AbstractDB } from \"./base\";\n\nexport const ACCOUNTS_STORE = \"accounts\"\nexport const ACCOUNTS_KEY = \"id\"\nexport const ACCOUNTS_INDEX = \"timestamp\"\n\nexport const ACCOUNTS_INIT_STORE = \"acc_initializers\"\nexport const ACCOUNTS_INIT_KEY = \"id\"\n\nexport const APP_URLS_STORE = \"app_urls\"\nexport const APP_URLS_KEY = \"id\"\nexport const APP_URLS_INDEX = \"timestamp\"\n\nexport interface StoredAccount extends Account {\n    timestamp: number\n}\n\nexport interface AccountInitializer extends Account {\n    initializerTo: string\n    initializerData: string\n    signers: string[]\n    threshold: number\n    salt: string\n    version: string\n}\n\nexport interface StoredAppUrls {\n    id: string,\n    timestamp: number\n}\n\nexport class AppDB extends AbstractDB {\n    constructor() {\n        super(\"app_state\", 3, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(ACCOUNTS_STORE, { keyPath: ACCOUNTS_KEY })\n                store.createIndex(ACCOUNTS_INDEX, ACCOUNTS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(APP_URLS_STORE, { keyPath: APP_URLS_KEY })\n                store.createIndex(APP_URLS_INDEX, APP_URLS_INDEX, { unique: false })\n            }\n            if (oldVersion < 3) {\n                const store = db.createObjectStore(ACCOUNTS_INIT_STORE, { keyPath: ACCOUNTS_INIT_KEY })\n            }\n        });\n    }\n}\n\nexport class AccountsDAO extends AbstractDAO<StoredAccount> {\n    constructor() {\n        super(new AppDB(), ACCOUNTS_STORE)\n    }\n\n    getAll(): Promise<StoredAccount[]> {\n        return this.getAllByIndex(ACCOUNTS_INDEX)\n    }\n}\n\nexport class AccountInitializerDAO extends AbstractDAO<AccountInitializer> {\n    constructor() {\n        super(new AppDB(), ACCOUNTS_INIT_STORE)\n    }\n\n    getAll(): Promise<AccountInitializer[]> {\n        return this.getAllByIndex(ACCOUNTS_INIT_KEY)\n    }\n}\n\nexport class AppUrlsDAO extends AbstractDAO<StoredAppUrls> {\n    constructor() {\n        super(new AppDB(), APP_URLS_STORE)\n    }\n\n    getAll(): Promise<StoredAppUrls[]> {\n        return this.getAllByIndex(APP_URLS_INDEX)\n    }\n}\n","import { Contract, PopulatedTransaction } from \"@ethersproject/contracts\";\nimport { safeInterface, SignedSafeTransaction } from \"safe-indexer-ts\";\nimport { ethers, BigNumber, Signer } from \"ethers\";\nimport { SafeTransaction } from \"../models/transactions\";\nimport { AccountInitializer, AccountInitializerDAO } from \"../db/app\";\nimport { _TypedDataEncoder } from \"ethers/lib/utils\";\nimport { getEIP712Domain, getEIP712TxType } from \"./signatures\";\n\nexport interface SafeStatus {\n    nonce: BigNumber,\n    threshold: BigNumber,\n    owners: string[],\n    version: string\n}\n\nexport interface Safe {\n    owners(): Promise<string[]>\n    nonce(): Promise<BigNumber>\n    status(): Promise<SafeStatus>\n    getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }>\n    populateTx(tx: SignedSafeTransaction): Promise<PopulatedTransaction>\n    writable(signer: Signer): WritableSafe\n}\n\nexport interface WritableSafe extends Safe {\n    executeTx(tx: SignedSafeTransaction): Promise<string>\n    initialize(): Promise<string|void>\n}\n\nexport class CounterfactualSafe implements Safe {\n    // TODO: Add fallback to deployed Safe\n    protected readonly safeContract: Contract\n\n    constructor(readonly initializer: AccountInitializer) {\n        this.safeContract = new Contract(initializer.address, safeInterface)\n    }\n\n    async owners(): Promise<string[]> {\n        return this.initializer.signers\n    }\n\n    async nonce(): Promise<BigNumber> {\n        return BigNumber.from(0)\n    }\n\n    async status(): Promise<SafeStatus> {\n        return {\n            nonce: BigNumber.from(0),\n            threshold: BigNumber.from(this.initializer.threshold),\n            owners: this.initializer.signers,\n            version: this.initializer.version\n        }\n    }\n\n    async getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }> {\n        const hash = _TypedDataEncoder.hash(\n            getEIP712Domain(this.initializer.version, this.initializer),\n            getEIP712TxType(this.initializer.version),\n            tx\n        )\n        return {\n            hash,\n            version: this.initializer.version\n        }\n    }\n\n    populateTx(tx: SignedSafeTransaction): Promise<PopulatedTransaction> {\n        return this.safeContract.populateTransaction.execTransaction(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.signatures\n        )\n    }\n\n    writable(signer: Signer): WritableSafe {\n        return new WritableDeployedSafe(this.safeContract.address, signer, this.initializer)\n    }\n}\n\nexport class DeployedSafe implements Safe {\n    protected readonly safeContract: Contract\n\n    constructor(readonly address: string, providerOrSigner?: ethers.providers.Provider | Signer) {\n        this.safeContract = new Contract(address, safeInterface, providerOrSigner)\n    }\n\n    nonce(): Promise<BigNumber> {\n        return this.safeContract.nonce()\n    }\n\n    owners(): Promise<string[]> {\n        return this.safeContract.getOwners()\n    }\n\n    async status(): Promise<SafeStatus> {\n        const information = await Promise.all([\n            this.safeContract.nonce(),\n            this.safeContract.getThreshold(),\n            this.safeContract.getOwners(),\n            this.safeContract.VERSION(),\n        ])\n        return {\n            nonce: information[0],\n            threshold: information[1],\n            owners: information[2],\n            version: information[3]\n        }\n    }\n\n    async getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }> {\n        const hash: string = await this.safeContract.getTransactionHash(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.nonce\n        )\n        const version: string = await this.safeContract.VERSION()\n        return { hash, version }\n    }\n\n    populateTx(tx: SignedSafeTransaction): Promise<PopulatedTransaction> {\n        return this.safeContract.populateTransaction.execTransaction(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.signatures\n        )\n    }\n\n    writable(signer: Signer): WritableSafe {\n        return new WritableDeployedSafe(this.safeContract.address, signer)\n    }\n}\n\nexport class WritableDeployedSafe extends DeployedSafe implements WritableSafe {\n    constructor(address: string, readonly signer: Signer, readonly initializer?: AccountInitializer) {\n        super(address, signer)\n    }\n\n    async initialize(): Promise<string|void> {\n        if (!this.initializer) return\n        if (await this.signer.provider?.getCode(this.address) !== \"0x\") return\n        const { hash } = await this.signer.sendTransaction({\n            to: this.initializer.initializerTo,\n            data: this.initializer.initializerData\n        })\n        return hash\n    }\n\n    executeTx(tx: SignedSafeTransaction): Promise<string> {\n        return this.safeContract.execTransaction(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.signatures\n        )\n    }\n}","import { ethers, PopulatedTransaction, Signer } from 'ethers';\nimport { getFallbackHandlerDeployment, getProxyFactoryDeployment, getSafeL2SingletonDeployment, getSafeSingletonDeployment } from \"@gnosis.pm/safe-deployments\"\nimport { AccountInitializerDAO } from '../db/app';\nimport { Account, buildCaip2Addr, parseAccount } from '../utils/account';\nimport { CounterfactualSafe, DeployedSafe, Safe } from '../utils/safe';\n\nconst relayProtocol: Record<string, {module: string, lib: string}> = {\n    \"4\": {\n        module: \"0x35A8d3A9e036311CF3E37D520399A89221156Afb\",\n        lib: \"0xD70e1eBB07d2b00715D189FDd54e0Ef39A05d9f8\"\n    },\n    \"100\": {\n        module: \"0x35A8d3A9e036311CF3E37D520399A89221156Afb\",\n        lib: \"0xD70e1eBB07d2b00715D189FDd54e0Ef39A05d9f8\"\n    }\n}\n\nconst libInterface = new ethers.utils.Interface([\n    \"function enableModules(address[] modules) public\"\n])\n\nexport class FactoryRepository {\n\n    db: AccountInitializerDAO\n\n    constructor() {\n        this.db = new AccountInitializerDAO()\n    }\n\n    supportsRelaying(chainId: string): boolean {\n        return relayProtocol[chainId] !== undefined\n    }\n\n    createSetupInitData(chainId: string, relaySupport: boolean) {\n        if (!relaySupport || !relayProtocol[chainId]) return {\n            to: ethers.constants.AddressZero,\n            data: \"0x\"\n        }\n        return {\n            to: relayProtocol[chainId].lib,\n            data: libInterface.encodeFunctionData(\"enableModules\", [[relayProtocol[chainId].module]])\n        }\n    }\n\n    async createInitData(provider: ethers.providers.Provider, chainId: string, signers: string[], threshold: number, nonce: number, relaySupport?: boolean, l2?: boolean): Promise<{ proxyAddress: string, deploymentTx: PopulatedTransaction }> {\n        // If not provide use L2 if not on Ethereum Mainnet\n        const useL2 = l2 ?? chainId !== \"1\"\n        const singletonDeployment = useL2 ? getSafeL2SingletonDeployment({ network: chainId }) : getSafeSingletonDeployment({ network: chainId })\n        if (!singletonDeployment || !singletonDeployment.networkAddresses[chainId]) throw Error(\"No deployment available\")\n        const singletonAddress = singletonDeployment.networkAddresses[chainId]\n\n        const proxyFactoryDeployment = getProxyFactoryDeployment({ network: chainId })\n        if (!proxyFactoryDeployment || !proxyFactoryDeployment.networkAddresses[chainId]) throw Error(\"No factory available\")\n        const proxyFactoryAddress = proxyFactoryDeployment.networkAddresses[chainId]\n\n        const safeContract = new ethers.Contract(singletonAddress, singletonDeployment.abi)\n        const fallbackHandlerDeployment = getFallbackHandlerDeployment({ network: chainId })\n        const fallbackHandlerAddress = fallbackHandlerDeployment?.networkAddresses?.[chainId] ?? ethers.constants.AddressZero\n\n        const useRelaySupport = relaySupport ?? this.supportsRelaying(chainId)\n        const { to: initTo, data: initData } = this.createSetupInitData(chainId, useRelaySupport)\n\n        const setupData = (await safeContract.populateTransaction.setup(\n            signers, threshold, initTo, initData, fallbackHandlerAddress, ethers.constants.AddressZero, 0, ethers.constants.AddressZero\n        )).data\n        if (!setupData) throw Error(\"Could not generate setup data\")\n\n        const factoryContract = new ethers.Contract(proxyFactoryAddress, proxyFactoryDeployment.abi, provider)\n\n        const proxyAddress = await factoryContract.callStatic.createProxyWithNonce(\n            singletonAddress, setupData, nonce\n        )\n        const deploymentTx = await factoryContract.populateTransaction.createProxyWithNonce(\n            singletonAddress, setupData, nonce\n        )\n        return {\n            proxyAddress,\n            deploymentTx\n        }\n    }\n\n    async newAccount(provider: ethers.providers.Provider, chainId: number, signers: string[], threshold: number, nonce: number, relaySupport?: boolean, l2?: boolean): Promise<Account> {\n        const initializer = await this.createInitData(provider, chainId.toString(), signers, threshold, nonce, relaySupport, l2)\n        const caip2 = buildCaip2Addr(chainId, initializer.proxyAddress)\n        const account = parseAccount(caip2)\n        if (!account) throw Error(\"Could not create account\")\n        const intializer = {\n            ...account,\n            signers,\n            threshold,\n            salt: nonce.toString(),\n            version: \"1.3.0\",\n            initializerTo: initializer.deploymentTx.to!!,\n            initializerData: initializer.deploymentTx.data!!\n        }\n        await this.db.add(intializer)\n        console.log(intializer)\n        return intializer\n    }\n\n    async getSafeForAccount(account: Account, provider?: ethers.providers.Provider): Promise<Safe> {\n        // TODO refactor with proper fallback\n        try {\n            // Check if code is already available\n            const code = await provider?.getCode(account.address)\n            if (!code || code !== \"0x\") throw Error(\"Account might already be deployed\")\n            const initData = await this.db.get(account.id)\n            return new CounterfactualSafe(initData)\n        } catch {\n            return new DeployedSafe(account.address, provider)\n        }\n    }\n}","import React, { useContext, useMemo } from \"react\";\nimport { FactoryRepository } from \"../../logic/execution/FactoryRepository\";\n\n\nconst FactoryRepoContext = React.createContext<FactoryRepository | undefined>(undefined);\n\nexport const useFactoryRepo = () => {\n    const repo = useContext(FactoryRepoContext)\n    if (!repo) throw Error(\"FactoryRepository not available!\")\n    return repo\n}\n\nexport const FactoryRepositoryProvider: React.FC = ({ children }) => {\n\n    const repo = useMemo(() => {\n        return new FactoryRepository()\n    }, [])\n\n    return <FactoryRepoContext.Provider value={repo}>\n        { children }\n    </FactoryRepoContext.Provider>\n}\n\nexport default FactoryRepositoryProvider","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { QueueRepository } from \"../../logic/account/QueueRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\nimport { useFactoryRepo } from \"./FactoryRepositoryProvider\";\n\n\nconst QueueRepoContext = React.createContext<QueueRepository | undefined>(undefined);\n\nexport const useQueueRepo = () => {\n    const repo = useContext(QueueRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const QueueRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const factoryRepo = useFactoryRepo()\n    const { loadProvider } = useAppSettings()\n\n    const repo = useMemo(() => {\n        const provider = loadProvider(account.chainId)\n        return new QueueRepository(account, factoryRepo, provider)\n    }, [ account, factoryRepo, loadProvider ])\n\n    return <QueueRepoContext.Provider value={repo}>\n        { children }\n    </QueueRepoContext.Provider>\n}\n\nexport default QueueRepositoryProvider","import React from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\n\nexport interface Props {\n    transaction: QueuedSafeTransaction,\n    showDetails?: (id: string) => void\n}\nexport const QueuedTxSummary: React.FC<Props> = ({ transaction, showDetails }) => {\n    return <div onClick={() => showDetails?.(transaction.id)}>\n        {transaction.to}<br />\n        {transaction.nonce} - {transaction.version} - {transaction.id.slice(0, 10)}<br />\n    </div>\n}\n\nexport default QueuedTxSummary","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useState } from 'react'\nimport { parseSafeSignature } from '../../../logic/utils/signatures'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    safeTxHash?: string\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const AddSignatureDialog: React.FC<Props> = ({ safeTxHash, open, handleClose, handleNewSignature }) => {\n    const [signatureString, setSignatureString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n\n    const handleAdd = async () => {\n        if (!safeTxHash) return\n        try {\n            const signature = await parseSafeSignature(signatureString, safeTxHash)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n            setSignatureString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Add Signature</DialogTitle>\n        <DialogContent>\n            <TextField label=\"Signature\" onChange={(e) => setSignatureString(e.target.value)} value={signatureString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleAdd}>Add</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default AddSignatureDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { parseSafeSignature, signQueuedTx } from '../../../logic/utils/signatures'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const SignTransactionDialog: React.FC<Props> = ({ transaction, open, handleClose, handleNewSignature }) => {\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n    const { signer, safeSigner } = useAppSettings()\n\n    const handleSign = async () => {\n        if (!open || !transaction || !signer) return\n        try {\n            const { signerAddress } = await safeSigner.status()\n            if (!signerAddress) throw Error(\"No accounts available\")\n            const signature = await signQueuedTx(signer, account, transaction)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleSign()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Sign Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default SignTransactionDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleTxSubmitted?: (ethereumTxHash: string) => void\n}\n\nexport const ExecuteTxDialog: React.FC<Props> = ({ transaction, open, handleClose, handleTxSubmitted }) => {\n    const queuedRepo = useQueueRepo()\n    const { signer, safeSigner } = useAppSettings()\n\n    const handleExecution = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const { signerAddress } = await safeSigner.status()\n            if (!signerAddress) throw Error(\"No accounts available\")\n            const signatures = await queuedRepo.getSignatures(transaction.id)\n            const ethereumTxHash = await queuedRepo.submitTx(transaction, signer, signatures)\n            handleTxSubmitted?.(ethereumTxHash)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleExecution()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n    <DialogTitle>Execute Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ExecuteTxDialog","import axios from 'axios'\nimport { AccountInitializerDAO } from '../db/app'\nimport { Account } from '../utils/account'\n\nexport class RelayRepository {\n\n    db: AccountInitializerDAO\n\n    constructor(readonly relayUrl: string) {\n        this.db = new AccountInitializerDAO()\n    }\n\n    connected(): boolean {\n        return this.relayUrl.length > 0\n    }\n\n    async relayTransaction(account: Account, data: string) {\n        const executor = account.address\n        const chainId = account.chainId\n        const storedInitializer = await this.db.get(account.id)\n        const initializer = storedInitializer ? {\n            to: storedInitializer.initializerTo,\n            data: storedInitializer.initializerData\n        } : undefined\n        const resp = await axios.post(`${this.relayUrl}/relay`, {\n            chainId,\n            executor,\n            data,\n            initializer\n        })\n        return resp.data.id\n    }\n}","import React, { useContext, useMemo } from \"react\";\nimport { RelayRepository } from \"../../logic/execution/RelayRepository\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst RelayRepoContext = React.createContext<RelayRepository | undefined>(undefined);\n\nexport const useRelayRepo = () => {\n    const repo = useContext(RelayRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const RelayRepositoryProvider: React.FC = ({ children }) => {\n    const { relayService } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new RelayRepository(relayService)\n    }, [ relayService ])\n\n    return <RelayRepoContext.Provider value={repo}>\n        { children }\n    </RelayRepoContext.Provider>\n}\n\nexport default RelayRepositoryProvider","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useRelayRepo } from '../../provider/RelayRepositoryProvider'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleTxSubmitted?: (ethereumTxHash: string) => void\n}\n\nexport const RelayTxDialog: React.FC<Props> = ({ transaction, open, handleClose, handleTxSubmitted }) => {\n    const account = useAccount()\n    const queuedRepo = useQueueRepo()\n    const relayRepo = useRelayRepo()\n\n    const handleExecution = async () => {\n        if (!open || !transaction || !relayRepo.connected()) return\n        try {\n            const signatures = await queuedRepo.getSignatures(transaction.id)\n            const { to, data } = await queuedRepo.populateTx(transaction, signatures)\n            if (!to || to != account.address) throw Error(\"Missing/ invalid `to`\")\n            if (!data) throw Error(\"Missing `data`\")\n\n            const relayId = await relayRepo.relayTransaction(account, data)\n            \n            handleTxSubmitted?.(relayId)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n            handleClose()\n        }\n    }\n\n    useEffect(() => {\n        handleExecution()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n    <DialogTitle>Relay Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default RelayTxDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Entry, Group, Header, LongText } from '../../../styled/tables';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { SafeTransactionSignature } from '../../../logic/models/transactions';\nimport AddSignatureDialog from './AddSignatureDialog';\nimport SignTransactionDialog from './SignTransactionDialog';\nimport ExecuteTxDialog from './ExecuteTxDialog';\nimport { shareableSignatureString } from '../../../logic/utils/signatures';\nimport { copyToClipboard, useDektopLayout } from '../../utils/media';\nimport TxData from '../../utils/TxData';\nimport { useAccount } from '../Dashboard';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport { buildSignatureBytes, prepareSignatures } from '../../../logic/utils/execution';\nimport { PopulatedTransaction } from '@ethersproject/contracts';\nimport AddressInfo from '../../utils/AddressInfo';\nimport RelayTxDialog from './RelayTxDialog';\nimport { useFactoryRepo } from '../../provider/FactoryRepositoryProvider';\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst shareSignature = (sig: SafeTransactionSignature) => {\n    const shareText = shareableSignatureString(sig)\n    copyToClipboard(shareText, \"Signature copied to clipboard!\")\n}\n\nexport const QueuedTxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [simulateLink, setSimulateLink] = useState<string | undefined>(undefined)\n    const [showAddSignature, setShowAddSignature] = useState(false)\n    const [showSignTransaction, setShowSignTransaction] = useState(false)\n    const [showExecuteTransaction, setShowExecuteTransaction] = useState(false)\n    const [showRelayTransaction, setShowRelayTransaction] = useState(false)\n    const factory = useFactoryRepo()\n    const repo = useQueueRepo()\n    const account = useAccount()\n    const { signer } = useAppSettings()\n\n    const deleteTx = useCallback(async(id?: string) => {\n        if (!id) return\n        try {\n            await repo.deleteTx(id)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }, [repo, handleClose])\n\n    const [transaction, setTransaction] = useState<QueuedSafeTransaction | undefined>(undefined)\n    useEffect(() => {\n        setTransaction(undefined)\n        if (!id) return\n        const load = async () => {\n            try {\n                setTransaction(await repo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        load()\n    }, [id, repo, setTransaction, handleClose])\n\n    const [signatures, setSignatures] = useState<SafeTransactionSignature[] | undefined>(undefined)\n    const loadSignatures = useCallback(async () => {\n        console.log(\"Load Signatures\")\n        if (!id) return\n        try {\n            setSignatures(await repo.getSignatures(id))\n        } catch (e) {\n            console.error(e)\n        }\n    }, [id, repo, setSignatures])\n    useEffect(() => {\n        setSignatures(undefined)\n        loadSignatures()\n    }, [loadSignatures])\n    useEffect(() => {\n        if (!transaction || transaction.operation !== 0) {\n            setSimulateLink(undefined)\n            return\n        }\n        (async () => {\n            let populatedTx: PopulatedTransaction | undefined\n            if (signer && signatures) {\n                try {\n                    const submitterAddress = await signer.getAddress()\n                    const safe = await factory.getSafeForAccount(account, signer.provider)\n                    const status = await safe.status()\n                    const signatureBytes = buildSignatureBytes(await prepareSignatures(status, transaction, signatures, submitterAddress))\n                    populatedTx = await safe.populateTx({\n                        signatures: signatureBytes,\n                        ...transaction\n                    })\n                    populatedTx.from = submitterAddress\n                } catch (e) {\n                    console.error(e)\n                }\n            }\n            try {\n                let link = \"https://dashboard.tenderly.co/simulator/new?\"\n                link += \"network=\" + account.chainId + \"&\"\n                if (populatedTx) {\n                    link += \"from=\" + populatedTx.from + \"&\"\n                    link += \"contractAddress=\" + populatedTx.to + \"&\"\n                    link += \"rawFunctionInput=\" + populatedTx.data + \"&\"\n                    link += \"value=\" + BigNumber.from(populatedTx.value || \"0\").toString() + \"&\"\n                } else {\n                    link += \"from=\" + account.address + \"&\"\n                    link += \"contractAddress=\" + transaction.to + \"&\"\n                    link += \"rawFunctionInput=\" + transaction.data + \"&\"\n                    link += \"value=\" + BigNumber.from(transaction.value).toString() + \"&\"\n                }\n                setSimulateLink(link)\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [transaction, account, signer, repo, signatures])\n    return <>\n        <TxDialog open={!!id && !showAddSignature} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n            <DialogTitle>Transaction Details</DialogTitle>\n            <DialogContent>\n                {transaction ? (\n                    <Group>\n                        <Header>Id:</Header>\n                        <Entry>\n                            <LongText>{transaction.id}</LongText>\n                        </Entry>\n                        <Header>Operation:</Header>\n                        <Entry>\n                            <Typography>{transaction.operation}</Typography>\n                        </Entry>\n                        <Header>To:</Header>\n                        <Entry>\n                            <AddressInfo address={transaction.to} />\n                        </Entry>\n                        <Header>Value:</Header>\n                        <Entry>\n                            <Typography>{transaction.value}</Typography>\n                        </Entry>\n                        <Header>Data:</Header>\n                        <TxData data={transaction.data} />\n                        <Header>Nonce:</Header>\n                        <Entry>\n                            <LongText>{transaction.nonce}</LongText>\n                        </Entry>\n                        <Header>Signatures:</Header>\n                        {signatures?.map((sig) => (<Entry>\n                            <AddressInfo onClick={() => { shareSignature(sig) }} address={sig.signer} />\n                        </Entry>))}\n                        <Button onClick={() => setShowSignTransaction(true)}>Sign</Button>\n                        <Button onClick={() => setShowAddSignature(true)}>Add</Button>\n                        <Button onClick={() => setShowExecuteTransaction(true)}>Execute</Button>\n                        <Button onClick={() => setShowRelayTransaction(true)}>Relay</Button>\n                        <Button onClick={() => deleteTx(id)} color=\"error\">Delete Tx</Button>\n                    </Group>\n                ) : (\n                    <>\"Unknown details\"</>\n                )}\n            </DialogContent>\n            <DialogActions>\n                {simulateLink && (<Button onClick={() => { window.open(simulateLink, \"_blank\") }}>Simulate</Button>)}\n                <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </TxDialog>\n        <AddSignatureDialog open={showAddSignature} handleClose={() => setShowAddSignature(false)} handleNewSignature={loadSignatures} safeTxHash={id} />\n        <SignTransactionDialog open={showSignTransaction} handleClose={() => setShowSignTransaction(false)} handleNewSignature={loadSignatures} transaction={transaction} />\n        <ExecuteTxDialog open={showExecuteTransaction} handleClose={() => setShowExecuteTransaction(false)} handleTxSubmitted={handleClose} transaction={transaction} />\n        <RelayTxDialog open={showRelayTransaction} handleClose={() => setShowRelayTransaction(false)} handleTxSubmitted={handleClose} transaction={transaction} />\n    </>\n}\n\nexport default QueuedTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport { ethers, BigNumber } from 'ethers'\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { SafeTransaction, MetaTransaction } from '../../../logic/models/transactions'\nimport { buildTx } from '../../../logic/utils/proposing'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n    onConfirm: (tx: QueuedSafeTransaction, requestId?: string) => void\n    onReject?: (message: string, requestId?: string) => void\n    transactions?: MetaTransaction[]\n    requestId?: string\n}\n\nexport const ProposeTxs: React.FC<Props> = ({ open, handleClose, onConfirm, onReject, requestId, transactions }) => {\n    const [toString, setToString] = useState(\"\")\n    const [valueString, setValueString] = useState(\"\")\n    const [dataString, setDataString] = useState(\"\")\n    const [operationString, setOperationString] = useState(\"\")\n    const [nonceString, setNonceString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n\n    useEffect(() => {\n        if (!open) return\n        (async () => {\n            try {\n                setNonceString(await queuedRepo.getNextNonce())\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [queuedRepo, open])\n\n    useEffect(() => {\n        const defaultTx = buildTx(account, transactions)\n        setToString(defaultTx.to)\n        setValueString(defaultTx.value)\n        setDataString(defaultTx.data)\n        setOperationString(defaultTx.operation.toString())\n    }, [account, transactions])\n\n    const cancelCreation = () => {\n        onReject?.(\"Canceled\", requestId)\n        handleClose()\n    }\n\n    const handleCreate = async () => {\n        try {\n            if (dataString && !ethers.utils.isHexString(dataString)) throw Error(\"Invalid data\")\n            const tx: SafeTransaction = {\n                to: ethers.utils.getAddress(toString),\n                value: BigNumber.from(valueString).toString(),\n                data: dataString || \"0x\",\n                nonce: parseInt(nonceString),\n                operation: parseInt(operationString),\n                safeTxGas: \"0\",\n                baseGas: \"0\",\n                gasPrice: \"0\",\n                gasToken: ethers.constants.AddressZero,\n                refundReceiver: ethers.constants.AddressZero,\n            }\n            const queuedTx = await queuedRepo.addTx(tx)\n            onConfirm(queuedTx, requestId)\n            handleClose()\n            setToString(\"\")\n            setValueString(\"\")\n            setDataString(\"\")\n            setOperationString(\"\")\n            setNonceString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n    return <TxDialog open={open} onClose={cancelCreation} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Add Tx</DialogTitle>\n        <DialogContent>\n            <TextField label=\"To\" onChange={(e) => setToString(e.target.value)} value={toString} fullWidth /><br />\n            <TextField label=\"Value\" onChange={(e) => setValueString(e.target.value)} value={valueString} fullWidth /><br />\n            <TextField label=\"Data\" onChange={(e) => setDataString(e.target.value)} value={dataString} fullWidth /><br />\n            <TextField label=\"Operation\" onChange={(e) => setOperationString(e.target.value)} value={operationString} fullWidth /><br />\n            <TextField label=\"Nonce\" onChange={(e) => setNonceString(e.target.value)} value={nonceString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={cancelCreation}>Cancel</Button>\n          <Button onClick={handleCreate} color=\"primary\">Create</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ProposeTxs","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Button, styled } from '@mui/material';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider';\nimport QueuedTxSummary from './QueuedTxSummary';\nimport QueuedTxDetails from './QueuedTxDetails';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\nimport { Callback } from 'safe-indexer-ts';\nimport { QueueRepositoryUpdates } from '../../../logic/account/QueueRepository';\nimport ProposeTxs from './ProposeTxsDialog';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\"\n}))\n\nfunction Queue() {\n  const [showNewTxDialog, setShowNewTxDialog] = useState<boolean>(false)\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [ququedTxs, setQueuedTxs] = useState<QueuedSafeTransaction[]>([])\n  const queueRepo = useQueueRepo()\n  const txRepo = useTransactionRepo()\n\n  const loadQueuedTxs = useCallback(async () => {\n    try {\n      setQueuedTxs(await queueRepo.getQueuedTxs())\n    } catch (e) {\n      console.error(e)\n    }\n  }, [queueRepo, setQueuedTxs])\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: loadQueuedTxs\n    }\n    txRepo.registerCallback(callback)\n    return () => txRepo.unregisterCallback(callback)\n  }, [txRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    const callback: QueueRepositoryUpdates = {\n      onNewTx: loadQueuedTxs\n    }\n    queueRepo.registerCallback(callback)\n    return () => queueRepo.unregisterCallback(callback)\n  }, [queueRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    loadQueuedTxs()\n  }, [loadQueuedTxs])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={showNewTxDialog} handleClose={() => setShowNewTxDialog(false)} onConfirm={() => loadQueuedTxs() } />\n  }, [showNewTxDialog, setShowNewTxDialog])\n\n  const details = useMemo(() => {\n    return <QueuedTxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      <Button onClick={() => setShowNewTxDialog(true)}>Add Transaction</Button>\n      {ququedTxs.map((tx) => <QueuedTxSummary transaction={tx} showDetails={(id) => setSelectedId(id)} />)}\n      {creation}\n      {details}\n    </Root>\n  );\n}\n\nexport default Queue;\n","export const defaultApps: AppOption[] = [\n    {\n        title: \"Balances\",\n        url: \"https://rimeissner.dev/sapp-balances/\"\n    },\n    {\n        title: \"WalletConnect\",\n        url: \"https://apps.gnosis-safe.io/wallet-connect\"\n    },\n    {\n        title: \"ENS\",\n        url: \"https://app.ens.domains/\"\n    }\n].map((entry) => {return {\n    section: \"Default\",\n    ...entry\n}})\n\nexport interface AppOption {\n    section: string,\n    title: string,\n    url: string\n}","import React, { useState } from 'react'\nimport { grey } from '@mui/material/colors';\nimport { Group } from '../../styled/tables';\nimport { Box, styled } from '@mui/system';\nimport { SwipeableDrawer, Typography } from '@mui/material';\n\n\nconst Sidebar = styled(Group)(({ theme }) => ({\n    height: \"100vh\",\n    width: \"400px\",\n    overflowY: \"scroll\"\n}))\n\nconst StyledBox = styled(Box)(({ theme }) => ({\n    backgroundColor: theme.palette.mode === 'light' ? '#fff' : grey[800],\n}));\n\nconst Puller = styled(Box)(({ theme }) => ({\n    width: 30,\n    height: 6,\n    backgroundColor: theme.palette.mode === 'light' ? grey[300] : grey[900],\n    borderRadius: 3,\n    position: 'absolute',\n    top: 8,\n    left: 'calc(50% - 15px)',\n}));\n\nexport const drawerBleeding = 64\n\nexport const ResponsiveSidebar: React.FC<{ isDesktop: boolean, header?: (expanded: boolean) => React.ReactNode }> = ({ isDesktop, children, header }) => {\n    const [open, setOpen] = useState(true);\n\n    const toggleDrawer = (newOpen: boolean) => () => {\n        setOpen(newOpen);\n    };\n\n    if (!isDesktop) {\n        return (<SwipeableDrawer\n            id=\"transaction_drawer\"\n            anchor=\"bottom\"\n            open={open}\n            onClose={toggleDrawer(false)}\n            onOpen={toggleDrawer(true)}\n            swipeAreaWidth={drawerBleeding}\n            disableSwipeToOpen={false}\n            ModalProps={{\n                keepMounted: true,\n            }}\n            sx={{\n                '& > .MuiPaper-root': {\n                    height: `calc(90% - ${drawerBleeding}px)`,\n                    overflow: 'visible',\n                    },\n            }}\n        >\n            <StyledBox\n                sx={{\n                    position: 'absolute',\n                    top: -drawerBleeding,\n                    height: drawerBleeding,\n                    borderTopLeftRadius: 8,\n                    borderTopRightRadius: 8,\n                    visibility: 'visible',\n                    right: 0,\n                    left: 0,\n                    justifyContent: 'center',\n                    display: 'flex',\n                    alignItems: 'center'\n                }}\n            >\n                <Puller />\n                {header?.(open)}\n            </StyledBox>\n            <StyledBox\n                sx={{\n                    px: 2,\n                    pb: 2,\n                    height: '100%',\n                    overflow: 'auto',\n                }}\n            >\n                {children}\n            </StyledBox>\n        </SwipeableDrawer>)\n    }\n    return (<Sidebar>\n        {header?.(true)}\n        {children}\n    </Sidebar>)\n}","export const chainIdToNetwork: Record<number, string> = {\n    1: \"MAINNET\",\n    2: \"MORDEN\",\n    3: \"ROPSTEN\",\n    4: \"RINKEBY\",\n    5: \"GOERLI\",\n    42: \"KOVAN\",\n    56: \"BSC\",\n    100: \"XDAI\",\n    137: \"POLYGON\",\n    246: \"ENERGY_WEB_CHAIN\",\n    4447: \"LOCAL\",\n    73799: \"VOLTA\",\n}","import {\n    getSDKVersion,\n    SDKMessageEvent,\n    MethodToResponse,\n    Methods,\n    SafeInfo,\n    MessageFormatter,\n    RequestId,\n    BaseTransaction,\n    RPCPayload\n} from '@gnosis.pm/safe-apps-sdk'\nimport {\n    providers\n} from 'ethers'\nimport { Account } from '../utils/account'\nimport { chainIdToNetwork } from '../utils/chainIdToNetwork'\n\ntype LegacyMethods = 'getEnvInfo'\ntype SDKMethods = Methods | LegacyMethods\n\nexport interface MessageHandlers {\n    onTransactionProposal: (transactions: BaseTransaction[], requestId: RequestId) => void\n}\n\nexport class FrameCommunicator {\n    provider?: providers.JsonRpcProvider\n    constructor(\n        readonly frame: React.RefObject<HTMLIFrameElement>,\n        readonly appUrl: string,\n        readonly info: Account,\n        readonly handlers: MessageHandlers\n    ) { }\n\n    handleMessage(\n        method: SDKMethods,\n        params: unknown,\n        requestId: RequestId\n    ) {\n        if (!method) {\n            console.error('ThirdPartyApp: A message was received without message id.')\n            return\n        }\n        console.log(`Received ${method} with ${JSON.stringify(params)}`)\n\n        switch (method) {\n            case 'sendTransactions': {\n                if (params) {\n                    this.handlers.onTransactionProposal(\n                        // @ts-expect-error explore ways to fix this\n                        params.txs as Transaction[],\n                        requestId,\n                    )\n                }\n                break\n            }\n\n            case 'getEnvInfo': {\n                this.sendResponse({ txServiceUrl: \"\" }, requestId)\n                break\n            }\n\n            case 'getSafeInfo': {\n                this.sendResponse({\n                    safeAddress: this.info.address,\n                    chainId: this.info.chainId,\n                    network: chainIdToNetwork[this.info.chainId],\n                }, requestId)\n                break\n            }\n\n            case 'rpcCall': {\n                const payload = params as RPCPayload\n                const communicator = this\n                try {\n                    this.provider!!.send(payload.call, payload.params).then(\n                        (resp: any) => {\n                            communicator.sendResponse(resp, requestId)\n                        }, (err: any) => {\n                            communicator.sendError(err, requestId)\n                        }\n                    )\n                } catch (err: any) {\n                    communicator.sendError(err.toString(), requestId)\n                }\n                break\n            }\n\n            default: {\n                console.error(`ThirdPartyApp: A message was received with an unknown method ${method}.`)\n                this.sendError(`Unknown method ${method}.`, requestId)\n                break\n            }\n        }\n    }\n\n    onMessage(message: SDKMessageEvent) {\n        if (message.source === window) {\n            return\n        }\n        if (!this.appUrl.includes(message.origin)) {\n            console.error(`ThirdPartyApp: A message was received from an unknown origin ${message.origin}`)\n            return\n        }\n        this.handleMessage(message.data.method, message.data.params, message.data.id)\n    }\n\n    sendResponse(\n        data: MethodToResponse[Methods],\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeResponse(requestId, data, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    sendError(\n        error: string,\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    connect(defaultWindow?: Window): (() => void) | undefined {\n        const eventWindow = defaultWindow || this.frame.current?.contentWindow\n        if (!eventWindow) return\n        const callback = (ev: MessageEvent<any>) => { this.onMessage(ev) }\n        eventWindow.addEventListener('message', callback)\n        return () => {\n            eventWindow.removeEventListener('message', callback)\n        }\n    }\n}","import { useCallback, useEffect, useMemo, useState, useRef } from 'react';\nimport { CircularProgress, styled } from '@mui/material';\nimport { FrameCommunicator } from '../../../logic/apps/connector';\nimport {\n  RequestId,\n  BaseTransaction\n} from '@gnosis.pm/safe-apps-sdk'\nimport { useAccount } from '../Dashboard';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport ProposeTxs from '../queue/ProposeTxsDialog';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\n\nconst AppFrame = styled('iframe')(({ theme }) => ({\n  width: \"100%\",\n  height: \"100%\",\n  border: 0\n}))\n\ninterface ProposalParams {\n    transactions: BaseTransaction[]\n    requestId: RequestId\n}\n\nexport interface Props {\n  appUrl: string\n}\n\nconst AppWindow: React.FC<Props> = ({ appUrl }) =>  {\n  const account = useAccount()\n  const { loadProvider } = useAppSettings()\n  const [loading, setLoading] = useState<boolean>(false)\n  const [proposalParams, setProposalParams] = useState<ProposalParams | undefined>(undefined)\n  const appFrame = useRef<HTMLIFrameElement>(null)\n  const communicator: FrameCommunicator = useMemo(() => {\n    return new FrameCommunicator(appFrame, appUrl, account, {\n      onTransactionProposal: (transactions, requestId) => {\n        if (transactions.length == 0) return\n        if (document.hidden) {\n          window.alert(\"New transaction\")\n        }\n        setProposalParams({ transactions, requestId })\n      }\n    })\n  }, [account, appFrame, appUrl, setProposalParams])\n\n  useEffect(() => {\n    communicator.provider = loadProvider(account.chainId)\n  }, [communicator, account, loadProvider])\n\n  const handleTransactionConfirmation = useCallback(async (tx: QueuedSafeTransaction, requestId?: string) => {\n    console.log(\"handleTransactionConfirmation\", tx, requestId)\n    communicator.sendResponse({ safeTxHash: tx.id }, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  const handleTransactionRejection = useCallback(async (message: string, requestId?: string) => {\n    console.log(\"handleTransactionRejection\", message, requestId)\n    communicator.sendError(message, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  useEffect(() => {\n    return communicator.connect(window)\n  }, [communicator])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={!!proposalParams}\n      transactions={proposalParams?.transactions?.map((tx) => {\n        return {\n          ...tx,\n          operation: 0\n        }\n      })}\n      requestId={proposalParams?.requestId}\n      onReject={handleTransactionRejection}\n      onConfirm={handleTransactionConfirmation}\n      handleClose={() => setProposalParams(undefined) } />\n  }, [proposalParams, handleTransactionRejection, handleTransactionConfirmation])\n\n  if (loading) return (<CircularProgress />)\n  return (\n    <>\n      <AppFrame ref={appFrame} src={appUrl} />\n      {creation}\n    </>\n  );\n}\n\nexport default AppWindow;\n","import { Autocomplete, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport { useState, useMemo, useEffect } from 'react';\nimport { AppOption, defaultApps } from '../../../logic/apps/appList';\nimport { AppUrlsDAO } from '../../../logic/db/app';\nimport { Group, Row } from '../../../styled/tables';\nimport { useDektopLayout } from '../../utils/media';\nimport { drawerBleeding } from '../ResponsiveSidebar';\nimport AppWindow from './AppWindow';\n\nconst Root = styled(Group)(({ theme }) => ({\n}))\n\nfunction Apps() {\n  const appUrlsDao = useMemo(() => new AppUrlsDAO(), [])\n  const [appUrl, setAppUrl] = useState(defaultApps[0].url)\n  const [appUrlError, setAppUrlError] = useState(\"\")\n  const [appUrlInput, setAppUrlInput] = useState(appUrl)\n  const [appUrlsHistory, setAppUrlsHistory] = useState<AppOption[]>([])\n  const isDesktop = useDektopLayout()\n\n  useEffect(() => {\n    (async () => {\n      const appHistory = (await appUrlsDao.getAll()).map(appUrl => {\n        return {\n          section: \"History\",\n          title: appUrl.id,\n          url: appUrl.id\n        }\n      })\n      setAppUrlsHistory(defaultApps.concat(appHistory))\n    })()\n  }, [setAppUrlsHistory, appUrl])\n\n  const handleInputChange = (input: string | AppOption | null, openUrl?: boolean) => {\n    let newValue: string\n    if (!input) {\n      newValue = \"\"\n    } else if (typeof input === \"string\") {\n      newValue = input\n    } else {\n      newValue = input.url\n    }\n    setAppUrlInput(newValue)\n    setAppUrlError(\"\")\n\n    if (openUrl) {\n      openAppUrl(newValue)\n    }\n  }\n\n  const openAppUrl = async (appUrl: string) => {\n    let cleanUrl = appUrl.trim()\n    if (cleanUrl.length === 0) {\n      setAppUrlError(\"Empty App Url is not allowed\")\n      return\n    }\n    if (!cleanUrl.startsWith(\"http\")) {\n      cleanUrl = \"https://\" + cleanUrl\n    }\n    await appUrlsDao.add({ id: cleanUrl, timestamp: new Date().getTime() })\n    setAppUrl(cleanUrl)\n  }\n  const marginBottom = isDesktop ? 0 : drawerBleeding;\n  return (\n    <Root sx={{\n      textAlign: \"center\",\n      width: `100vw`,\n      height: `calc(100vh - ${marginBottom}px)`\n    }}>\n      <Row>\n        <Autocomplete\n          id=\"free-solo-demo\"\n          freeSolo\n          fullWidth\n          options={appUrlsHistory}\n          defaultValue={defaultApps[0]}\n          groupBy={(option) => option.section}\n          getOptionLabel={(option: AppOption | string) => {\n            if (typeof option === \"string\") return option\n            return option.title\n          }}\n          onChange={(e, newValue) => handleInputChange(newValue, !!newValue && newValue !== \"\")}\n          renderInput={(params) =>\n            <TextField\n              {...params}\n              label=\"App Url\"\n              value={appUrlInput}\n              error={!!appUrlError}\n              helperText={appUrlError}\n              variant=\"filled\"\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          }\n        />\n      </Row>\n      <AppWindow appUrl={appUrl} />\n    </Root>\n  );\n}\n\nexport default Apps;\n","import { Button, Dialog, DialogContent, DialogTitle, Switch, TextField, Typography } from '@mui/material'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Callback } from 'safe-indexer-ts'\nimport { Group, Row } from '../../styled/tables'\nimport { useAppSettings } from '../provider/AppSettingsProvider'\nimport { useTransactionRepo } from '../provider/TransactionRepositoryProvider'\n\nexport interface Props {\n    open: boolean,\n    handleClose: () => void,\n    reindex?: () => void,\n}\n\nexport const SettingsDialog: React.FC<Props> = ({ open, reindex, handleClose }) => {\n    const {\n        useCustomRpc, toggleCustomRpc,\n        customRpc, updateCustomRpc,\n        relayService, updateRelayService,\n        networkConfig, updateNetworkConfig,\n        infuraToken, updateInfuraToken\n    } = useAppSettings()\n    const [status, setStatus] = useState<string>(\"\")\n    const txRepo = useTransactionRepo()\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: () => { },\n            onStatusUpdate: (update) => {\n                switch (update.type) {\n                    case \"up_to_date\":\n                        setStatus(`Up to date with block ${update.latestBlock}`)\n                        break;\n                    case \"processing\":\n                        setStatus(`Indexing block ${update.fromBlock}/${update.latestBlock}`)\n                        break;\n                    case \"aborted\":\n                        setStatus(`Indexing aborted: ${update.reason}`)\n                        break;\n                    default:\n                        setStatus(\"\")\n                        break;\n                }\n            }\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, setStatus])\n\n    const updateStartingBlock = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: parseInt(value),\n                maxBlocks: networkConfig.maxBlocks\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    const updateMaxBlocks = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: networkConfig.startingBlock,\n                maxBlocks: parseInt(value)\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    return <Dialog open={open} onClose={handleClose} maxWidth=\"xs\" fullWidth>\n        <DialogTitle>Settings</DialogTitle>\n        <DialogContent>\n            <Group>\n                <Typography variant=\"caption\">Status</Typography>\n                {status}\n                <br /><br />\n                <Typography variant=\"caption\">App Settings</Typography>\n                <Row sx={{ alignItems: 'center' }}>\n                    Use custom prc endpoint <Switch checked={useCustomRpc} onChange={(_, checked) => toggleCustomRpc(checked)} /><br />\n                </Row>\n                <TextField label=\"Relay\" onChange={(e) => updateRelayService(e.target.value)} value={relayService} fullWidth /><br />\n                <TextField label=\"RPC\" onChange={(e) => updateCustomRpc(e.target.value)} value={customRpc} fullWidth /><br />\n                <TextField label=\"Infura Token\" onChange={(e) => updateInfuraToken(e.target.value)} value={infuraToken} fullWidth /><br />\n                <TextField label=\"Intital block\" onChange={(e) => updateStartingBlock(e.target.value)} value={networkConfig.startingBlock} fullWidth /><br />\n                <TextField label=\"Max blocks\" onChange={(e) => updateMaxBlocks(e.target.value)} value={networkConfig.maxBlocks} fullWidth /><br />\n                {\n                    !!reindex && (<>\n                        <Typography variant=\"caption\">Account Settings</Typography><br />\n                        <Button onClick={() => reindex()}>Reindex</Button><br />\n                    </>)\n                }\n            </Group>\n        </DialogContent>\n    </Dialog>\n}\n\nexport default SettingsDialog","import { Button, CircularProgress, Dialog, DialogActions, DialogContent, DialogTitle, TextField, Typography } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router'\nimport { Account } from '../../../logic/utils/account'\nimport { Safe, SafeStatus } from '../../../logic/utils/safe'\nimport { parseSafeSignature } from '../../../logic/utils/signatures'\nimport { Entry, Group, Header, LongText, Row } from '../../../styled/tables'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useFactoryRepo } from '../../provider/FactoryRepositoryProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport AddressInfo from '../../utils/AddressInfo'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n}\n\nconst renderInfo = (safeInfo: SafeStatus): React.ReactNode => {\n\n    return (<>\n        <Header>Signers</Header>\n        {safeInfo.owners.map((signer) => (<Entry>\n            <AddressInfo address={signer} />\n        </Entry>))}\n        <Header sx={{ paddingBottom: \"4px\"}}>Details</Header>\n        <Group sx={{alignItems: \"start\", paddingBottom: \"8px\"}}>\n            <Typography variant=\"caption\">Version</Typography>\n            {safeInfo.version.toString()}\n        </Group>\n        <Group sx={{alignItems: \"start\", paddingBottom: \"8px\"}}>\n            <Typography variant=\"caption\">Treshold</Typography>\n            {safeInfo.threshold.toString()}\n        </Group>\n        <Group sx={{alignItems: \"start\"}}>\n            <Typography variant=\"caption\">Nonce</Typography>\n            {safeInfo.nonce.toString()}\n        </Group>\n    </>)\n}\n\nexport const SafeInfoDialog: React.FC<Props> = ({ open, handleClose }) => {\n\n    const factoryRepo = useFactoryRepo()\n    const history = useHistory()\n    const { loadProvider } = useAppSettings()\n    const account = useAccount()\n\n    const [safeInfo, setSafeInfo] = useState<SafeStatus | undefined>(undefined)\n\n    const showSafeSelection = () => {\n        history.push(\"/\")\n    }\n\n    useEffect(() => {\n        (async () => {\n            try {\n                const provider = loadProvider(account.chainId)\n                const safe = await factoryRepo.getSafeForAccount(account, provider)\n                setSafeInfo(await safe.status())\n            } catch (e) {\n                // TODO show error\n                console.error(e)\n            }\n        })()\n    }, [account, factoryRepo])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Safe Info</DialogTitle>\n        <DialogContent>\n            <Button onClick={showSafeSelection}>Switch Safe</Button> \n            <Header>Active Safe</Header>\n            <Entry>\n                <AddressInfo address={account.address} />\n            </Entry>\n            {safeInfo ? renderInfo(safeInfo) : (<CircularProgress />)}\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default SafeInfoDialog","import { Typography } from \"@mui/material\"\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useAccount } from \"../Dashboard\"\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { Group, Row } from \"../../../styled/tables\";\nimport { shortAddress } from \"../../../logic/utils/address\";\nimport { Settings } from \"@mui/icons-material\";\nimport SettingsDialog from \"../../settings/SettingsDialog\";\nimport { useTransactionRepo } from \"../../provider/TransactionRepositoryProvider\";\nimport { useQueueRepo } from \"../../provider/QueueRepositoryProvider\";\nimport { Callback } from \"safe-indexer-ts\";\nimport { QueueRepositoryUpdates } from \"../../../logic/account/QueueRepository\";\nimport { useCopyAddress } from \"../../utils/media\";\nimport SafeInfoDialog from \"../info/SafeInfoDialog\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AccountHeader: React.FC<{ expanded: boolean }> = ({ expanded }) => {\n    const [showSettings, setShowSettings] = useState<boolean>(false)\n    const [showInfo, setShowInfo] = useState<boolean>(false)\n    const [queueSize, setQueueSize] = useState<number>(0)\n    const account = useAccount()\n    const iconSrc = useMemo(() => makeBlockie(account.address), [account]);\n    const txRepo = useTransactionRepo()\n    const queueRepo = useQueueRepo()\n\n    // TODO: we have this logic in multiple places. Should be extracted\n    const loadQueuedTxs = useCallback(async () => {\n        try {\n            setQueueSize((await queueRepo.getQueuedTxs()).length)\n        } catch (e) {\n            console.error(e)\n        }\n    }, [queueRepo, setQueueSize])\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: loadQueuedTxs\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, loadQueuedTxs])\n\n    useEffect(() => {\n        const callback: QueueRepositoryUpdates = {\n            onNewTx: loadQueuedTxs\n        }\n        queueRepo.registerCallback(callback)\n        return () => queueRepo.unregisterCallback(callback)\n    }, [queueRepo, loadQueuedTxs])\n\n    useEffect(() => {\n      loadQueuedTxs()\n    }, [loadQueuedTxs])\n\n    const reindex = useCallback(async () => {\n        txRepo.reindex()\n    }, [txRepo])\n\n    const copyAddress = useCopyAddress(account.address)\n\n    return <Row sx={{\n        paddingX: '16px',\n        width: `calc(100% - 32px)`,\n        justifyContent: 'space-between',\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" onClick={() => setShowInfo(true)} />\n        <Group sx={{ paddingX: '8px', textAlign: 'center' }} onClick={copyAddress} >\n            <Typography sx={{ fontFamily: 'Monospace' }} >{shortAddress(account.address)}</Typography>\n            Chain {account.chainId}\n        </Group>\n        {expanded ? (\n            <Settings onClick={() => setShowSettings(true)} />\n        ) : queueSize.toString()\n        }\n        <SettingsDialog open={showSettings} handleClose={() => setShowSettings(false)} reindex={reindex} />\n        <SafeInfoDialog open={showInfo} handleClose={() => setShowInfo(false)} />\n    </Row>\n}\n\nexport default AccountHeader","import { Button } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport { useAppSettings } from \"../../provider/AppSettingsProvider\";\nimport { useAccount } from \"../Dashboard\";\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport const SignerInfo: React.FC = () => {\n    const { chainId } = useAccount()\n    const { signer, safeSigner } = useAppSettings()\n    return <Root>\n        <hr />\n        { !!signer ? \n            <Button onClick={() => safeSigner.disconnect() }>Disconnect Signer</Button>  : \n            <Button onClick={() => safeSigner.connect(chainId) }>Connect Signer</Button> \n        }\n    </Root>\n}\n\nexport default SignerInfo","import React, { useContext, useEffect } from 'react'\nimport { useParams } from 'react-router'\nimport Transactions from './transaction/Transactions';\nimport TransactionRepositoryProvider from '../provider/TransactionRepositoryProvider';\nimport QueueRepositoryProvider from '../provider/QueueRepositoryProvider';\nimport Queue from './queue/Queue';\nimport { Row } from '../../styled/tables';\nimport Apps from './apps/Apps';\nimport { Account, parseAccount } from '../../logic/utils/account';\nimport { useDektopLayout } from '../utils/media';\nimport { ResponsiveSidebar } from './ResponsiveSidebar';\nimport { Typography } from '@mui/material';\nimport AccountHeader from './header/AccountHeader';\nimport { useAppSettings } from '../provider/AppSettingsProvider';\nimport SignerInfo from './signer/SignerInfo';\n\ninterface Path {\n    account: string\n}\n\nconst AccountContext = React.createContext<Account | undefined>(undefined);\n\nexport const useAccount = () => {\n    const account = useContext(AccountContext)\n    if (!account) throw Error(\"Account not available!\")\n    return account\n}\n\nexport const Dashboard: React.FC = () => {\n    const { account } = useParams<Path>()\n    const isDesktop = useDektopLayout();\n    const { safeSigner } = useAppSettings()\n    const value = parseAccount(account)\n\n    useEffect(() => {\n        if (!value) return\n        safeSigner.prepare(value.chainId)\n    }, [value?.chainId])\n\n    if (!value) return (<>\n        \"Invalid account\"\n    </>)\n\n    return <AccountContext.Provider value={value}>\n        <TransactionRepositoryProvider>\n            <QueueRepositoryProvider>\n                <Row>\n                    <ResponsiveSidebar isDesktop={isDesktop} header={(expanded) => <AccountHeader expanded={expanded} />}>\n                        <SignerInfo />\n                        <Queue />\n                        <Transactions />\n                    </ResponsiveSidebar>\n                    <Apps />\n                </Row>\n            </QueueRepositoryProvider>\n        </TransactionRepositoryProvider>\n    </AccountContext.Provider>\n}\n\nexport default Dashboard","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, InputLabel, Menu, MenuItem, Select, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport { ethers, BigNumber } from 'ethers'\nimport { getAddress, Indexed } from 'ethers/lib/utils'\nimport React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router'\nimport { ChainInfo, loadChains } from '../../logic/utils/chainInfo'\nimport { useAppSettings } from '../provider/AppSettingsProvider'\nimport { useFactoryRepo } from '../provider/FactoryRepositoryProvider'\nimport { useDektopLayout } from '../utils/media'\n\nconst InnerDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\ninterface ExtendedChainInfo extends ChainInfo {\n    supportsRelaying: boolean\n}\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n}\n\nexport const CreateAccountDialog: React.FC<Props> = ({ open, handleClose }) => {\n    const history = useHistory()\n    const factoryRepo = useFactoryRepo()\n    const [chains, setChains] = useState<ExtendedChainInfo[]>([])\n    const [selectedChainIndex, setSelectedChainIndex] = useState<number | undefined>(undefined)\n    const [nonce, setNonce] = useState((Math.round(Math.random() * 10000)).toString())\n    const [signerAddress, setSignerAddress] = useState(\"\")\n    const { loadProvider, signer, safeSigner } = useAppSettings()\n\n    const connect = async () => {\n        try {\n            if (open && selectedChainIndex !== undefined)\n                await safeSigner.connect(chains[selectedChainIndex].id)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        connect()\n    }, [open, selectedChainIndex, chains, safeSigner])\n\n    useEffect(() => {\n        (async () => {\n            try {\n                if (!signer || signerAddress.length > 0) return\n                setSignerAddress(await signer.getAddress())\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [signer, signerAddress, setSignerAddress])\n\n    useEffect(() => {\n        const chains = loadChains().map((chain) => {\n            return {\n                ...chain,\n                supportsRelaying: factoryRepo.supportsRelaying(chain.id.toString())\n            }\n        })\n        setSelectedChainIndex(undefined)\n        setChains(chains)\n    }, [])\n\n    const cancelCreation = () => {\n        handleClose()\n    }\n\n    const handleCreate = async () => {\n        try {\n            if (!selectedChainIndex) throw Error(\"No network selected\")\n            const network = chains[selectedChainIndex].id\n            const provider = loadProvider(network)\n            if (!provider) throw Error(\"No provider available\")\n            const account = await factoryRepo.newAccount(provider, network, [getAddress(signerAddress)], 1, parseInt(nonce))\n            history.push(\"/\" + account.id)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n    return <InnerDialog open={open} onClose={cancelCreation} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Create Account</DialogTitle>\n        <DialogContent>\n            {chains.length > 0 ? (<>\n                <FormControl sx={{ minWidth: 160, marginTop: \"8px\", marginBottom: \"8px\" }}>\n                    <InputLabel htmlFor=\"chain-select\">Selected Chain</InputLabel>\n                    <Select\n                        id=\"chain-select\"\n                        value={selectedChainIndex}\n                        label=\"Selected Chain\"\n                        onChange={(e) => setSelectedChainIndex(e.target.value as number)}\n                    >   \n                        {chains.map((chain, index) => (\n                            <MenuItem value={index}>{chain.name}</MenuItem>\n                        ))}\n                    </Select>\n                </FormControl>\n                { selectedChainIndex !== undefined && chains[selectedChainIndex].supportsRelaying && <p>Relay support enabled by default</p>}\n                <TextField sx={{ marginTop: \"8px\", marginBottom: \"8px\" }} label=\"Nonce\" onChange={(e) => setNonce(e.target.value)} value={nonce} fullWidth /><br />\n                <TextField sx={{ marginTop: \"8px\", marginBottom: \"8px\" }} label=\"Signer\" onChange={(e) => setSignerAddress(e.target.value)} value={signerAddress} fullWidth /><br />\n            </>) : <>Loading Information</>\n            }\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={cancelCreation}>Cancel</Button>\n            <Button onClick={handleCreate} color=\"primary\">Create</Button>\n        </DialogActions>\n    </InnerDialog>\n}\n\nexport default CreateAccountDialog","import { Button, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { useHistory } from 'react-router';\nimport { AccountsDAO, StoredAccount } from '../../logic/db/app';\nimport { parseAccount } from '../../logic/utils/account';\nimport { Entry, LongText } from '../../styled/tables';\nimport CreateAccountDialog from '../create/CreateAccountDialog';\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\",\n    padding: 16,\n}))\n\nexport const Welcome: React.FC = () => {\n    const [showCreateAccountDialog, setShowCreateAccountDialog] = useState(false)\n    const [addressInput, setAddressInput] = useState(\"\")\n    const [addressError, setAddressError] = useState(\"\")\n    const [accountHistory, setAccountHistory] = useState<StoredAccount[]>([])\n    const history = useHistory()\n    const accountsDao = useMemo(() => new AccountsDAO(), [])\n\n    const handleAddressInput = (address: string) => {\n        setAddressInput(address)\n        setAddressError(\"\")\n    }\n\n    useEffect(() => {\n        (async () => {\n            setAccountHistory(await accountsDao.getAll())\n        })()\n    }, [setAccountHistory])\n\n    const openAccount = async (address: string) => {\n        const account = parseAccount(address)\n        if (!account) {\n            setAddressError(\"Invalid account!\")\n            return\n        }\n        accountsDao.add({\n            ...account,\n            timestamp: new Date().getTime()\n        })\n        history.push(\"/\" + account.id)\n    }\n\n    return <Root>\n        Welcome!<br /><br />\n        <TextField label=\"Account address\" onChange={(e) => handleAddressInput(e.target.value)} value={addressInput} error={!!addressError} helperText={addressError} fullWidth /><br />\n        <Button onClick={() => openAccount(addressInput)}>Open</Button>\n        <Button onClick={() => setShowCreateAccountDialog(true)}>Create</Button>\n        {accountHistory.map((account) => {\n            return (\n                <Entry onClick={() => openAccount(account.id)}>\n                    <LongText>{account.id}</LongText>\n                </Entry>\n            )\n        })}\n        <CreateAccountDialog open={showCreateAccountDialog} handleClose={() => setShowCreateAccountDialog(false)}/>\n    </Root>\n}\n\nexport default Welcome","import React from 'react'\nimport { Route, Switch, HashRouter as Router } from \"react-router-dom\"\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Dashboard from './account/Dashboard';\nimport AppSettingsProvider from './provider/AppSettingsProvider';\nimport Welcome from './welcome/Welcome';\nimport RelayRepositoryProvider from './provider/RelayRepositoryProvider';\nimport FactoryRepositoryProvider from './provider/FactoryRepositoryProvider';\n\nconst theme = createTheme({})\n\nexport const Root: React.FC = () => {\n    return (\n        <AppSettingsProvider>\n            <FactoryRepositoryProvider>\n                <RelayRepositoryProvider>\n                    <ThemeProvider theme={theme}>\n                        <Router>\n                            <Switch>\n                                <Route path=\"/:account\">\n                                    <Dashboard />\n                                </Route>\n                                <Route path=\"/\">\n                                    <Welcome />\n                                </Route>\n                            </Switch>\n                        </Router>\n                    </ThemeProvider>\n                </RelayRepositoryProvider>\n            </FactoryRepositoryProvider>\n        </AppSettingsProvider>\n    )\n}\n\nexport default Root","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://cra.link/PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://cra.link/PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n// Ethers dependencies \n// TODO: move to separate repo\n__exportStar(require(\"./ethers/loader\"), exports);\n__exportStar(require(\"./ethers/parser\"), exports);\n__exportStar(require(\"./ethers/constants\"), exports);\n"],"sourceRoot":""}