(this.webpackJsonpdsafe=this.webpackJsonpdsafe||[]).push([[0],{126:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(130),t),o(n(131),t),o(n(132),t)},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},133:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SafeIndexer=void 0;var a=function(e){return new Promise((function(t){return setTimeout(t,e)}))},c=function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return e&&e>0?[4,a(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},s={maxBlocks:100,upToDateTimeout:1e4},u=function(){function e(e,t,n,o,i){this.indexing=!1,this.paused=!1,this.state=e,this.loader=t,this.parser=n,this.callback=o,console.log(i),this.config=r(r({},s),i),console.log(this.config)}return e.prototype.start=function(){var e,t,n;return o(this,void 0,void 0,(function(){var r,o,a;return i(this,(function(i){switch(i.label){case 0:this.indexing=!0,i.label=1;case 1:return this.indexing?this.paused?[4,c(this.config.upToDateTimeout)]:[3,3]:[3,13];case 2:return i.sent(),[3,1];case 3:return[4,this.loader.loadCurrentBlock()];case 4:return(r=i.sent())<=this.state.lastIndexedBlock?(null===(e=this.config.logger)||void 0===e||e.log("Up to date with current block!"),[4,c(this.config.upToDateTimeout)]):[3,6];case 5:return i.sent(),[3,1];case 6:o=Math.min(r,this.state.lastIndexedBlock+(this.config.maxBlocks||100)),null===(t=this.config.logger)||void 0===t||t.log("Process from block",this.state.lastIndexedBlock,"to block",o),i.label=7;case 7:return i.trys.push([7,10,,12]),[4,this.processBlocks(this.state.lastIndexedBlock,o)];case 8:return i.sent(),this.state.lastIndexedBlock=o,[4,c(this.config.syncTimeout)];case 9:return i.sent(),[3,12];case 10:return a=i.sent(),null===(n=this.config.logger)||void 0===n||n.error(a),[4,c(this.config.upToDateTimeout)];case 11:return i.sent(),[3,12];case 12:return[3,1];case 13:return[2]}}))}))},e.prototype.stop=function(){this.indexing=!1},e.prototype.pause=function(){this.paused=!0},e.prototype.resume=function(){this.paused=!1},e.prototype.processBlocks=function(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return[4,this.loader.loadEvents(e,t,this.config.safe)];case 1:return n=o.sent(),[4,this.parser.parse(n)];case 2:if((r=o.sent()).length>0)try{this.callback.onNewInteractions(r)}catch(i){}return[2]}}))}))},e}();t.SafeIndexer=u},134:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EthersLoader=void 0,i(n(135),t);var s=function(e,t){return void 0!==e&&(void 0===t||(e.blockNumber!=t.blockNumber?e.blockNumber<t.blockNumber:e.transactionIndex!=t.transactionIndex?e.transactionIndex<t.transactionIndex:e.logIndex!=t.logIndex&&e.logIndex<t.logIndex))},u=function(){function e(e,t){this.provider=e,this.sources=t}return e.prototype.loadCurrentBlock=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.provider.getBlockNumber()];case 1:return[2,e.sent()]}}))}))},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(this,void 0,void 0,(function(){var t,n,r,o,i,a,u,l,f;return c(this,(function(c){switch(c.label){case 0:return 0==(t=e.length)?[2,[]]:[4,Promise.all(e)];case 1:if(n=c.sent(),1==t)return[2,n[0]];for(r=new Array(t).fill(0),l=0;l<t;l++)r[l]=0;for(o=[],i=0;i<1e4*t;){for(a=0,u=n[0][r[0]],l=1;l<t;l++)f=n[l][r[l]],s(f,u)&&(a=l,u=f);if(r[a]++,!u)break;o.push(u),i++}return[2,o]}}))}))},e.prototype.toEvent=function(e){return r(r({},e),{eventId:e.logIndex.toString()})},e.prototype.loadEvents=function(e,t,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.merge.apply(this,this.sources.map((function(r){return r.loadEvents(e,t,n)})))];case 1:return[2,r.sent().reverse().map(this.toEvent)]}}))}))},e}();t.EthersLoader=u},135:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleTransactionEventSource=t.MultisigTransactionEventSource=void 0;var a=n(63),c=function(){function e(e,t,n){this.provider=n,this.topics=t,this.name=e}return e.prototype.loadEvents=function(e,t,n){return o(this,void 0,void 0,(function(){var r,o=this;return i(this,(function(i){return r={topics:[this.topics],address:n,fromBlock:e,toBlock:t},[2,this.provider.getLogs(r).then((function(e){return console.debug(o.name,"source loaded",e.length,"events"),e}))]}))}))},e}(),s=function(e){function t(t){return e.call(this,"MultiSig",[a.successTopic,a.failureTopic,a.multisigDetailsTopic],t)||this}return r(t,e),t}(c);t.MultisigTransactionEventSource=s;var u=function(e){function t(t){return e.call(this,"Module",[a.moduleSuccessTopic,a.moduleFailureTopic,a.moduleDetailsTopic],t)||this}return r(t,e),t}(c);t.ModuleTransactionEventSource=u},156:function(e,t){},165:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EthersParser=void 0;var i=n(63),a=n(166),c=n(167),s=function(){function e(e){this.groupIdFromEvent=function(e){return""+e.transactionHash},this.provider=e,this.multisigDecoder=new c.MultisigDecoder(e),this.moduleDecoder=new a.ModuleDecoder(e)}return e.prototype.updateGroupedLogs=function(e,t,n,r){n?e.push({parent:n,details:t,children:r}):r.length>0&&e.push.apply(e,r.map((function(e){return{parent:e,children:[]}})))},e.prototype.group=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,c,s,u,l,f,d,p;return o(this,(function(o){for(t=[],n=[],r=[],c=void 0,s=0,u=e;s<u.length;s++)l=u[s],f=this.groupIdFromEvent(l),d=i.parentTopics.indexOf(l.topics[0])>=0,p=i.detailsTopics.indexOf(l.topics[0])>=0,(c!==f||d&&a)&&(this.updateGroupedLogs(t,r.pop(),a,n),a=void 0,r=[],n=[],c=void 0),c||(c=f),d?a=l:p?r.push(l):n.push(l);return this.updateGroupedLogs(t,r.pop(),a,n),[2,t]}))}))},e.prototype.map=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(o){switch(o.label){case 0:switch(t=e.parent,n=e.children,r=e.details,t.topics[0]){case i.successTopic:return[3,1];case i.failureTopic:return[3,3];case i.moduleSuccessTopic:return[3,5];case i.moduleFailureTopic:return[3,7]}return[3,9];case 1:return a=i.safeInterface.decodeEventLog("ExecutionSuccess",t.data,t.topics),[4,this.multisigDecoder.decode(t.address,t,a.txHash,!0,n,r)];case 2:return[2,o.sent()];case 3:return a=i.safeInterface.decodeEventLog("ExecutionFailure",t.data,t.topics),[4,this.multisigDecoder.decode(t.address,t,a.txHash,!1,n,r)];case 4:return[2,o.sent()];case 5:return a=i.safeInterface.decodeEventLog("ExecutionFromModuleSuccess",t.data,t.topics),[4,this.moduleDecoder.decode(t.address,a.module,t,!0,n,r)];case 6:return[2,o.sent()];case 7:return a=i.safeInterface.decodeEventLog("ExecutionFromModuleFailure",t.data,t.topics),[4,this.moduleDecoder.decode(t.address,a.module,t,!1,n,r)];case 8:return[2,o.sent()];case 9:return console.error("Received unknown event",t),[2,void 0];case 10:return[2]}}))}))},e.prototype.parse=function(e){return r(this,void 0,void 0,(function(){var t,n,r=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.group(e)];case 1:return t=o.sent(),n=t.map((function(e){return r.map(e)})),[4,Promise.all(n)];case 2:return[2,o.sent().filter((function(e){return void 0!==e}))]}}))}))},e}();t.EthersParser=s},166:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDecoder=void 0;var a=n(63),c=function(){function e(e){this.provider=e}return e.prototype.decodeEthereumTx=function(e,t){},e.prototype.decodeModuleDetailsEvent=function(e){if(e){var t=a.safeInterface.decodeEventLog("SafeModuleTransaction",e.data,e.topics);return{safe:e.address,module:t.module,to:t.to,value:t.value.toString(),data:t.data,operation:t.operation}}},e.prototype.decode=function(e,t,n,a,c,s){return o(this,void 0,void 0,(function(){var o,u,l,f;return i(this,(function(i){switch(i.label){case 0:return u="module_"+n.transactionHash+"_"+n.eventId,(o=this.decodeModuleDetailsEvent(s))?[3,2]:(console.log("Fallback to transaction decoding"),[4,this.provider.getTransaction(n.transactionHash)]);case 1:l=i.sent(),o=this.decodeEthereumTx(e,l),i.label=2;case 2:return[4,this.provider.getBlock(n.blockHash)];case 3:return f=i.sent(),o?[2,r({type:"module_transaction",id:u,timestamp:f.timestamp,logs:c,txHash:n.transactionHash,success:a},o)]:[2,{type:"module_transaction_unknown",id:u,module:t,timestamp:f.timestamp,logs:c,txHash:n.transactionHash,success:a}]}}))}))},e}();t.ModuleDecoder=c},167:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigDecoder=void 0;var a=n(60),c=n(168),s=n(63),u=function(){function e(e){this.provider=e}return e.prototype.init=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this,[4,this.provider.getNetwork()];case 1:return e.chainId=t.sent().chainId,[2]}}))}))},e.prototype.calculateHash111=function(e,t){return a.ethers.utils._TypedDataEncoder.hash({verifyingContract:e.safe},c.EIP712_SAFE_TX_TYPE,r(r({},e),{nonce:t}))},e.prototype.map=function(e,t){return o(this,void 0,void 0,(function(){var n,o,u;return i(this,(function(i){switch(i.label){case 0:return this.chainId?[3,2]:[4,this.init()];case 1:i.sent(),i.label=2;case 2:return[4,(n=new a.ethers.Contract(t.safe,s.safeAbi,this.provider)).nonce()];case 3:for(o=i.sent().toNumber(),u=o;u>=0;u--){if(this.calculateHash111(t,u)===e)return[2,u];if(c.calculateSafeTransactionHash(n,r(r({},t),{nonce:u}),this.chainId)===e)return[2,u]}return[2,-1]}}))}))},e}(),l=function(){function e(e){this.provider=e,this.nonceMapper=new u(e)}return e.prototype.decodeEthereumTx=function(e,t){try{if(t.to!==e)return void console.log("Transaction is not to the Safe");var n=s.safeInterface.decodeFunctionData("execTransaction",t.data);return{safe:e,to:n.to,value:n.value.toString(),data:n.data,operation:n.operation,safeTxGas:n.safeTxGas.toString(),baseGas:n.baseGas.toString(),gasPrice:n.gasPrice.toString(),gasToken:n.gasToken,refundReceiver:n.refundReceiver,signatures:n.signatures}}catch(r){return void console.log("Unknown function",t.data.slice(0,10))}},e.prototype.decodeMultisigDetailsEvent=function(e){if(e){var t=s.safeInterface.decodeEventLog("SafeMultiSigTransaction",e.data,e.topics);return{safe:e.address,to:t.to,value:t.value.toString(),data:t.data,operation:t.operation,safeTxGas:t.safeTxGas.toString(),baseGas:t.baseGas.toString(),gasPrice:t.gasPrice.toString(),gasToken:t.gasToken,refundReceiver:t.refundReceiver,signatures:t.signatures,nonce:a.BigNumber.from(t.additionalInfo.slice(0,66)).toNumber()}}},e.prototype.decode=function(e,t,n,a,c,s){return o(this,void 0,void 0,(function(){var o,u,l,f,d,p,h;return i(this,(function(i){switch(i.label){case 0:return o=this.decodeMultisigDetailsEvent(s),u="multisig_"+n,o?[3,2]:(console.log("Fallback to transaction decoding"),[4,this.provider.getTransaction(t.transactionHash)]);case 1:l=i.sent(),o=this.decodeEthereumTx(e,l),i.label=2;case 2:return[4,this.provider.getBlock(t.blockHash)];case 3:return f=i.sent(),o?(d=[r({type:"multisig_transaction",id:u,timestamp:f.timestamp,logs:c,txHash:t.transactionHash,safeTxHash:n,success:a},o)],h={},(p=o.nonce)?[3,5]:[4,this.nonceMapper.map(n,o)]):[2,{type:"multisig_transaction_unknown",id:u,timestamp:f.timestamp,logs:c,txHash:t.transactionHash,safeTxHash:n,success:a}];case 4:p=i.sent(),i.label=5;case 5:return[2,r.apply(void 0,d.concat([(h.nonce=p,h)]))]}}))}))},e}();t.MultisigDecoder=l},175:function(e,t){},189:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n.n(r),i=n(21),a=n.n(i),c=(n(126),n(0)),s=n.n(c),u=n(35),l=n(75),f=(n(128),n(222)),d=n(223),p=n(4),h=n(5),v=n(9),b=n(8),g=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e,1,"interactions",(function(e,t){t<1&&e.createObjectStore(r.storeName,{keyPath:"id"}).createIndex(r.indexKey,r.indexKey,{unique:!1})}))).indexKey="timestamp",r}return Object(h.a)(n,[{key:"getAll",value:function(){return this.getAllByIndex(this.indexKey)}}]),n}(function(){function e(t,n,r,o){Object(p.a)(this,e),this.internalDb=void 0,this.indexedDB=window.indexedDB,this.dbKey=void 0,this.dbVersion=void 0,this.storeName=void 0,this.migration=void 0,this.dbKey=t,this.dbVersion=n,this.storeName=r,this.migration=o}return Object(h.a)(e,[{key:"open",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.internalDb){e.next=2;break}return e.abrupt("return",this.internalDb);case 2:return t=this,e.abrupt("return",new Promise((function(e,r){var o=n.indexedDB.open(n.dbKey,n.dbVersion);o.onerror=function(){r("Error: "+this.error)},o.onsuccess=function(){t.internalDb=this.result,e(this.result)},o.onupgradeneeded=function(e){t.migration(this.result,e.oldVersion,this.result.version)}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,o){var i=n.transaction([r.storeName],"readwrite");i.onerror=function(e){o(e)},i.objectStore(r.storeName).put(t).onsuccess=function(){e()}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,o){var i=n.transaction([r.storeName],"readwrite");i.onerror=function(e){o(e)},i.objectStore(r.storeName).get(t).onsuccess=function(){e(this.result)}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByIndex",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,o){var i=n.transaction([r.storeName],"readwrite");i.onerror=function(e){o(e)},i.objectStore(r.storeName).index(t).getAll().onsuccess=function(){e(this.result.reverse())}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"drop",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,r){var o=t.transaction([n.storeName],"readwrite");o.onerror=function(e){r(e)},o.objectStore(n.storeName).clear().onsuccess=function(){e()}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),y=n(112),m=n(50),w=function(){function e(t,n){Object(p.a)(this,e),this.safe=void 0,this.defaultBlock=void 0,this._lastIndexedBlock=void 0,this.safe=t,this.defaultBlock=n;var r=localStorage.getItem("indexer_state_safe_"+this.safe);this._lastIndexedBlock=r?parseInt(r):n}return Object(h.a)(e,[{key:"lastIndexedBlock",get:function(){return this._lastIndexedBlock},set:function(e){localStorage.setItem("indexer_state_safe_"+this.safe,e.toString()),this._lastIndexedBlock=e}},{key:"reset",value:function(){localStorage.removeItem("indexer_state_safe_"+this.safe),this._lastIndexedBlock=this.defaultBlock}}]),e}(),x=n(31);var _=function(){var e=Object(r.useMemo)((function(){return{}}),[]),t=Object(r.useState)([]),n=Object(l.a)(t,2),o=n[0],i=n[1],a=Object(r.useState)(localStorage.getItem("app_state_safe")||""),c=Object(l.a)(a,2),p=c[0],h=c[1],v=Object(r.useState)(localStorage.getItem("app_state_rpc")||""),b=Object(l.a)(v,2),_=b[0],k=b[1];Object(r.useEffect)((function(){return e.current={onNewInteractions:function(e){i(e.concat(o))}},function(){return e.current=void 0}}),[e,o,i]);var T=Object(r.useMemo)((function(){return new g(p)}),[p]),O=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,T.get(t);case 3:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[T]),j=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("app_state_safe",t),h(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h]),I=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("app_state_rpc",t),k(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k]),S=Object(r.useMemo)((function(){if(_&&0!=_.trim().length&&(p&&0!=p.trim().length))return function(e,t,n){var r=new y.a.providers.JsonRpcProvider(t),o=new m.EthersLoader(r,[new m.MultisigTransactionEventSource(r),new m.ModuleTransactionEventSource(r)]),i=new m.EthersParser(r),a={onNewInteractions:n},c=new w(e,5590754);return new m.SafeIndexer(c,o,i,a,{safe:e,maxBlocks:1e5,logger:console})}(p,_,(function(t){var n;console.log(t),null===e||void 0===e||null===(n=e.current)||void 0===n||n.onNewInteractions(t),t.forEach((function(e){T.add(e)}))}))}),[e,p,_,T]);Object(r.useEffect)((function(){return null===S||void 0===S||S.start(),function(){return null===S||void 0===S?void 0:S.stop()}}),[S]);var E=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return");case 2:return S.pause(),e.next=5,T.drop();case 5:S.state.reset(),T.getAll().then((function(e){return i(e)})),S.resume();case 8:case"end":return e.stop()}}),e)}))),[S,T]);return Object(r.useEffect)((function(){i([]),T.getAll().then((function(e){return i(e)}))}),[T,i]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,{label:"RPC",onChange:function(e){return I(e.target.value)},value:_}),Object(x.jsx)(f.a,{label:"Safe",onChange:function(e){return j(e.target.value)},value:p}),Object(x.jsx)(d.a,{onClick:function(){return E()},children:"Reindex"})]}),o.map((function(e){return Object(x.jsxs)("div",{onClick:function(){return O(e.id)},children:["".concat(e.type," - ").concat(e.id),Object(x.jsx)("br",{}),"".concat(new Date(1e3*e.timestamp)),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})}))]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,225)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};a.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(_,{})}),document.getElementById("root")),k()},50:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(129),t),o(n(133),t),o(n(134),t),o(n(165),t)},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailsTopics=t.parentTopics=t.etherReceivedTopic=t.moduleDetailsTopic=t.moduleFailureTopic=t.moduleSuccessTopic=t.multisigDetailsTopic=t.failureTopic=t.successTopic=t.safeInterface=t.safeAbi=t.transferTopic=t.erc721Interface=t.erc20OldInterface=t.erc20Interface=t.erc721InterfaceDefinition=t.erc20OldInterfaceDefinition=t.erc20InterfaceDefinition=void 0;var r=n(136),o=n(60);t.erc20InterfaceDefinition=["event Transfer(address indexed from, address indexed to, uint256 amount)"],t.erc20OldInterfaceDefinition=["event Transfer(address indexed from, address to, uint256 amount)"],t.erc721InterfaceDefinition=["event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"],t.erc20Interface=new o.ethers.utils.Interface(t.erc20InterfaceDefinition),t.erc20OldInterface=new o.ethers.utils.Interface(t.erc20OldInterfaceDefinition),t.erc721Interface=new o.ethers.utils.Interface(t.erc721InterfaceDefinition),t.transferTopic=t.erc20Interface.getEventTopic("Transfer"),t.safeAbi=r.getSafeL2SingletonDeployment({released:void 0}).abi,t.safeInterface=new o.ethers.utils.Interface(t.safeAbi),t.successTopic=t.safeInterface.getEventTopic("ExecutionSuccess"),t.failureTopic=t.safeInterface.getEventTopic("ExecutionFailure"),t.multisigDetailsTopic=t.safeInterface.getEventTopic("SafeMultiSigTransaction"),t.moduleSuccessTopic=t.safeInterface.getEventTopic("ExecutionFromModuleSuccess"),t.moduleFailureTopic=t.safeInterface.getEventTopic("ExecutionFromModuleFailure"),t.moduleDetailsTopic=t.safeInterface.getEventTopic("SafeModuleTransaction"),t.etherReceivedTopic=t.safeInterface.getEventTopic("SafeReceived"),t.parentTopics=[t.successTopic,t.moduleSuccessTopic,t.failureTopic,t.moduleFailureTopic],t.detailsTopics=[t.multisigDetailsTopic,t.moduleDetailsTopic]}},[[189,1,2]]]);
//# sourceMappingURL=main.ac7d114e.chunk.js.map