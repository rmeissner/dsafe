{"version":3,"sources":["../../simple-indexer/safe-indexer-ts/bin/types/index.js","../../simple-indexer/safe-indexer-ts/bin/types/ethereum.js","../../simple-indexer/safe-indexer-ts/bin/types/indexer.js","../../simple-indexer/safe-indexer-ts/bin/types/interactions.js","../../simple-indexer/safe-indexer-ts/bin/indexer.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/sources.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/module.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/multisig.js","logic/db/interactions.ts","logic/db/base.ts","logic/state/indexer.ts","App.tsx","logic/utils/indexer.ts","reportWebVitals.ts","index.tsx","../../simple-indexer/safe-indexer-ts/bin/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/constants.js"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","value","require","__assign","assign","t","s","i","n","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","SafeIndexer","sleep","timeout","cb","setTimeout","conditionalSleep","_a","configDefaults","maxBlocks","upToDateTimeout","state","loader","parser","callback","config","indexing","paused","console","log","start","_b","_c","currentBlock","targetBlock","e_1","_d","loadCurrentBlock","lastIndexedBlock","logger","Math","min","processBlocks","syncTimeout","error","stop","pause","resume","from","to","events","interactions","loadEvents","safe","parse","onNewInteractions","EthersLoader","isOlder","compare","base","blockNumber","transactionIndex","logIndex","provider","sources","getBlockNumber","merge","loaders","_i","loaderCount","logResults","currentLogIndex","out","runs","resultIndex","nextLog","candidate","all","Array","fill","toEvent","eventId","toString","map","l","reverse","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","ModuleTransactionEventSource","MultisigTransactionEventSource","constants_1","BaseEventSource","name","topics","fromBlock","toBlock","address","filter","_this","getLogs","debug","_super","successTopic","failureTopic","multisigDetailsTopic","moduleSuccessTopic","moduleFailureTopic","moduleDetailsTopic","EthersParser","module_1","multisig_1","groupIdFromEvent","event","transactionHash","multisigDecoder","MultisigDecoder","moduleDecoder","ModuleDecoder","updateGroupedLogs","groups","detailsCandidate","parentCandidate","currentChildren","parent","details","children","group","detailsCandidates","currentGroupId","events_1","groupId","isParentCandidate","isDetailsCandidate","parentTopics","indexOf","detailsTopics","safeInterface","decodeEventLog","data","decode","txHash","module","inter","decodeEthereumTx","tx","decodeModuleDetailsEvent","parsed","operation","success","subLogs","decodedTx","id","ethTx","block","getTransaction","getBlock","blockHash","type","timestamp","logs","ethers_1","safe_contracts_1","NonceMapper","init","getNetwork","chainId","calculateHash111","nonce","ethers","utils","_TypedDataEncoder","hash","verifyingContract","EIP712_SAFE_TX_TYPE","expectedHash","currentNonce","Contract","safeAbi","toNumber","calculateSafeTransactionHash","nonceMapper","decodeFunctionData","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","signatures","slice","decodeMultisigDetailsEvent","BigNumber","additionalInfo","safeTxHash","concat","InteractionsDB","db","oldVersion","createObjectStore","storeName","keyPath","createIndex","indexKey","unique","getAllByIndex","dbKey","dbVersion","migration","internalDb","indexedDB","window","a","dbStore","request","open","onerror","onsuccess","onupgradeneeded","version","entry","transaction","objectStore","put","index","getAll","clear","IndexerState","defaultBlock","_lastIndexedBlock","storedBlock","localStorage","getItem","parseInt","setItem","removeItem","App","callbackProxy","useMemo","useState","txs","setTxs","setSafe","rpc","setRpc","useEffect","current","newTxs","showDetails","useCallback","updateSafe","updateRpc","updatedRpc","indexer","trim","providers","JsonRpcProvider","getIndexer","forEach","add","reindex","drop","reset","loaded","className","TextField","onChange","target","Button","onClick","Date","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","etherReceivedTopic","transferTopic","erc721Interface","erc20OldInterface","erc20Interface","erc721InterfaceDefinition","erc20OldInterfaceDefinition","erc20InterfaceDefinition","safe_deployments_1","Interface","getEventTopic","getSafeL2SingletonDeployment","released","abi"],"mappings":"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","file":"static/js/main.ac7d114e.chunk.js","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ethereum\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./interactions\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeIndexer = void 0;\nvar sleep = function (timeout) { return new Promise(function (cb) { return setTimeout(cb, timeout); }); };\nvar conditionalSleep = function (timeout) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(timeout && timeout > 0)) return [3 /*break*/, 2];\n                return [4 /*yield*/, sleep(timeout)];\n            case 1:\n                _a.sent();\n                _a.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar configDefaults = {\n    maxBlocks: 100,\n    upToDateTimeout: 10000\n};\nvar SafeIndexer = /** @class */ (function () {\n    function SafeIndexer(state, loader, parser, callback, config) {\n        this.indexing = false;\n        this.paused = false;\n        this.state = state;\n        this.loader = loader;\n        this.parser = parser;\n        this.callback = callback;\n        console.log(config);\n        this.config = __assign(__assign({}, configDefaults), config);\n        console.log(this.config);\n    }\n    SafeIndexer.prototype.start = function () {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var currentBlock, targetBlock, e_1;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        this.indexing = true;\n                        _d.label = 1;\n                    case 1:\n                        if (!this.indexing) return [3 /*break*/, 13];\n                        if (!this.paused) return [3 /*break*/, 3];\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 2:\n                        _d.sent();\n                        return [3 /*break*/, 1];\n                    case 3: return [4 /*yield*/, this.loader.loadCurrentBlock()];\n                    case 4:\n                        currentBlock = _d.sent();\n                        if (!(currentBlock <= this.state.lastIndexedBlock)) return [3 /*break*/, 6];\n                        (_a = this.config.logger) === null || _a === void 0 ? void 0 : _a.log(\"Up to date with current block!\");\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 5:\n                        _d.sent();\n                        return [3 /*break*/, 1];\n                    case 6:\n                        targetBlock = Math.min(currentBlock, this.state.lastIndexedBlock + (this.config.maxBlocks || 100));\n                        (_b = this.config.logger) === null || _b === void 0 ? void 0 : _b.log(\"Process from block\", this.state.lastIndexedBlock, \"to block\", targetBlock);\n                        _d.label = 7;\n                    case 7:\n                        _d.trys.push([7, 10, , 12]);\n                        return [4 /*yield*/, this.processBlocks(this.state.lastIndexedBlock, targetBlock)];\n                    case 8:\n                        _d.sent();\n                        this.state.lastIndexedBlock = targetBlock;\n                        return [4 /*yield*/, conditionalSleep(this.config.syncTimeout)];\n                    case 9:\n                        _d.sent();\n                        return [3 /*break*/, 12];\n                    case 10:\n                        e_1 = _d.sent();\n                        (_c = this.config.logger) === null || _c === void 0 ? void 0 : _c.error(e_1);\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 11:\n                        _d.sent();\n                        return [3 /*break*/, 12];\n                    case 12: return [3 /*break*/, 1];\n                    case 13: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SafeIndexer.prototype.stop = function () {\n        this.indexing = false;\n    };\n    SafeIndexer.prototype.pause = function () {\n        this.paused = true;\n    };\n    SafeIndexer.prototype.resume = function () {\n        this.paused = false;\n    };\n    SafeIndexer.prototype.processBlocks = function (from, to) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, interactions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadEvents(from, to, this.config.safe)];\n                    case 1:\n                        events = _a.sent();\n                        return [4 /*yield*/, this.parser.parse(events)];\n                    case 2:\n                        interactions = _a.sent();\n                        if (interactions.length > 0)\n                            try {\n                                this.callback.onNewInteractions(interactions);\n                            }\n                            catch (_b) { }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SafeIndexer;\n}());\nexports.SafeIndexer = SafeIndexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersLoader = void 0;\n__exportStar(require(\"./sources\"), exports);\nvar isOlder = function (compare, base) {\n    if (compare === undefined)\n        return false;\n    if (base === undefined)\n        return true;\n    if (compare.blockNumber != base.blockNumber)\n        return compare.blockNumber < base.blockNumber;\n    if (compare.transactionIndex != base.transactionIndex)\n        return compare.transactionIndex < base.transactionIndex;\n    if (compare.logIndex != base.logIndex)\n        return compare.logIndex < base.logIndex;\n    return false; // Equal defaults to false\n};\nvar EthersLoader = /** @class */ (function () {\n    function EthersLoader(provider, sources) {\n        this.provider = provider;\n        this.sources = sources;\n    }\n    EthersLoader.prototype.loadCurrentBlock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getBlockNumber()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.merge = function () {\n        var loaders = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            loaders[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var loaderCount, logResults, currentLogIndex, i, out, runs, resultIndex, nextLog, i, candidate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        loaderCount = loaders.length;\n                        if (loaderCount == 0)\n                            return [2 /*return*/, []];\n                        return [4 /*yield*/, Promise.all(loaders)];\n                    case 1:\n                        logResults = _a.sent();\n                        if (loaderCount == 1)\n                            return [2 /*return*/, logResults[0]];\n                        currentLogIndex = new Array(loaderCount).fill(0);\n                        for (i = 0; i < loaderCount; i++)\n                            currentLogIndex[i] = 0;\n                        out = [];\n                        runs = 0;\n                        // Panic check against endless loop (10k is max amount of events, per loader)\n                        while (runs < 10000 * loaderCount) {\n                            resultIndex = 0;\n                            nextLog = logResults[0][currentLogIndex[0]];\n                            for (i = 1; i < loaderCount; i++) {\n                                candidate = logResults[i][currentLogIndex[i]];\n                                if (isOlder(candidate, nextLog)) {\n                                    resultIndex = i;\n                                    nextLog = candidate;\n                                }\n                            }\n                            currentLogIndex[resultIndex]++;\n                            if (nextLog)\n                                out.push(nextLog);\n                            else\n                                break;\n                            runs++;\n                        }\n                        return [2 /*return*/, out];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.toEvent = function (log) {\n        return __assign(__assign({}, log), { eventId: log.logIndex.toString() });\n    };\n    EthersLoader.prototype.loadEvents = function (from, to, safe) {\n        return __awaiter(this, void 0, void 0, function () {\n            var logs;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.merge.apply(this, this.sources.map(function (l) { return l.loadEvents(from, to, safe); }))];\n                    case 1:\n                        logs = _a.sent();\n                        return [2 /*return*/, logs.reverse().map(this.toEvent)];\n                }\n            });\n        });\n    };\n    return EthersLoader;\n}());\nexports.EthersLoader = EthersLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleTransactionEventSource = exports.MultisigTransactionEventSource = void 0;\nvar constants_1 = require(\"../constants\");\nvar BaseEventSource = /** @class */ (function () {\n    function BaseEventSource(name, topics, provider) {\n        this.provider = provider;\n        this.topics = topics;\n        this.name = name;\n    }\n    BaseEventSource.prototype.loadEvents = function (fromBlock, toBlock, address) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                filter = {\n                    topics: [this.topics],\n                    address: address,\n                    fromBlock: fromBlock,\n                    toBlock: toBlock,\n                };\n                return [2 /*return*/, this.provider.getLogs(filter).then(function (e) {\n                        console.debug(_this.name, \"source loaded\", e.length, \"events\");\n                        return e;\n                    })];\n            });\n        });\n    };\n    return BaseEventSource;\n}());\nvar MultisigTransactionEventSource = /** @class */ (function (_super) {\n    __extends(MultisigTransactionEventSource, _super);\n    function MultisigTransactionEventSource(provider) {\n        return _super.call(this, \"MultiSig\", [constants_1.successTopic, constants_1.failureTopic, constants_1.multisigDetailsTopic], provider) || this;\n    }\n    return MultisigTransactionEventSource;\n}(BaseEventSource));\nexports.MultisigTransactionEventSource = MultisigTransactionEventSource;\nvar ModuleTransactionEventSource = /** @class */ (function (_super) {\n    __extends(ModuleTransactionEventSource, _super);\n    function ModuleTransactionEventSource(provider) {\n        return _super.call(this, \"Module\", [constants_1.moduleSuccessTopic, constants_1.moduleFailureTopic, constants_1.moduleDetailsTopic], provider) || this;\n    }\n    return ModuleTransactionEventSource;\n}(BaseEventSource));\nexports.ModuleTransactionEventSource = ModuleTransactionEventSource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersParser = void 0;\nvar constants_1 = require(\"../constants\");\nvar module_1 = require(\"./module\");\nvar multisig_1 = require(\"./multisig\");\nvar EthersParser = /** @class */ (function () {\n    function EthersParser(provider) {\n        this.groupIdFromEvent = function (event) { return \"\" + event.transactionHash; };\n        this.provider = provider;\n        this.multisigDecoder = new multisig_1.MultisigDecoder(provider);\n        this.moduleDecoder = new module_1.ModuleDecoder(provider);\n    }\n    EthersParser.prototype.updateGroupedLogs = function (groups, detailsCandidate, parentCandidate, currentChildren) {\n        if (parentCandidate) {\n            groups.push({\n                parent: parentCandidate,\n                details: detailsCandidate,\n                children: currentChildren\n            });\n        }\n        else if (currentChildren.length > 0) {\n            groups.push.apply(groups, currentChildren.map(function (log) { return { parent: log, children: [] }; }));\n        }\n    };\n    EthersParser.prototype.group = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var out, currentChildren, detailsCandidates, parentCandidate, currentGroupId, _i, events_1, event, groupId, isParentCandidate, isDetailsCandidate;\n            return __generator(this, function (_a) {\n                out = [];\n                currentChildren = [];\n                detailsCandidates = [];\n                currentGroupId = undefined;\n                for (_i = 0, events_1 = events; _i < events_1.length; _i++) {\n                    event = events_1[_i];\n                    groupId = this.groupIdFromEvent(event);\n                    isParentCandidate = constants_1.parentTopics.indexOf(event.topics[0]) >= 0;\n                    isDetailsCandidate = constants_1.detailsTopics.indexOf(event.topics[0]) >= 0;\n                    if (currentGroupId !== groupId || (isParentCandidate && parentCandidate)) {\n                        this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                        parentCandidate = undefined;\n                        detailsCandidates = [];\n                        currentChildren = [];\n                        currentGroupId = undefined;\n                    }\n                    if (!currentGroupId)\n                        currentGroupId = groupId;\n                    if (isParentCandidate) {\n                        parentCandidate = event;\n                    }\n                    else if (isDetailsCandidate) {\n                        detailsCandidates.push(event);\n                    }\n                    else {\n                        currentChildren.push(event);\n                    }\n                }\n                this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                return [2 /*return*/, out];\n            });\n        });\n    };\n    EthersParser.prototype.map = function (group) {\n        return __awaiter(this, void 0, void 0, function () {\n            var parent, children, details, _a, event, event, event, event;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        parent = group.parent, children = group.children, details = group.details;\n                        _a = parent.topics[0];\n                        switch (_a) {\n                            case constants_1.successTopic: return [3 /*break*/, 1];\n                            case constants_1.failureTopic: return [3 /*break*/, 3];\n                            case constants_1.moduleSuccessTopic: return [3 /*break*/, 5];\n                            case constants_1.moduleFailureTopic: return [3 /*break*/, 7];\n                        }\n                        return [3 /*break*/, 9];\n                    case 1:\n                        event = constants_1.safeInterface.decodeEventLog(\"ExecutionSuccess\", parent.data, parent.topics);\n                        return [4 /*yield*/, this.multisigDecoder.decode(parent.address, parent, event.txHash, true, children, details)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        event = constants_1.safeInterface.decodeEventLog(\"ExecutionFailure\", parent.data, parent.topics);\n                        return [4 /*yield*/, this.multisigDecoder.decode(parent.address, parent, event.txHash, false, children, details)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        event = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleSuccess\", parent.data, parent.topics);\n                        return [4 /*yield*/, this.moduleDecoder.decode(parent.address, event.module, parent, true, children, details)];\n                    case 6: return [2 /*return*/, _b.sent()];\n                    case 7:\n                        event = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleFailure\", parent.data, parent.topics);\n                        return [4 /*yield*/, this.moduleDecoder.decode(parent.address, event.module, parent, false, children, details)];\n                    case 8: return [2 /*return*/, _b.sent()];\n                    case 9:\n                        {\n                            console.error(\"Received unknown event\", parent);\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 10;\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EthersParser.prototype.parse = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var groups, inter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.group(events)];\n                    case 1:\n                        groups = _a.sent();\n                        inter = groups.map(function (group) { return _this.map(group); });\n                        return [4 /*yield*/, Promise.all(inter)];\n                    case 2: return [2 /*return*/, (_a.sent()).filter(function (e) { return e !== undefined; })];\n                }\n            });\n        });\n    };\n    return EthersParser;\n}());\nexports.EthersParser = EthersParser;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar ModuleDecoder = /** @class */ (function () {\n    function ModuleDecoder(provider) {\n        this.provider = provider;\n    }\n    ModuleDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        // TODO: implement\n        return undefined;\n    };\n    ModuleDecoder.prototype.decodeModuleDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeModuleTransaction\", event.data, event.topics);\n        return {\n            safe: event.address,\n            module: parsed.module,\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n        };\n    };\n    ModuleDecoder.prototype.decode = function (safe, module, event, success, subLogs, details) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, ethTx, block;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"module_\" + event.transactionHash + \"_\" + event.eventId;\n                        decodedTx = this.decodeModuleDetailsEvent(details);\n                        if (!!decodedTx) return [3 /*break*/, 2];\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(event.transactionHash)];\n                    case 1:\n                        ethTx = _a.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _a.sent();\n                        if (!decodedTx)\n                            return [2 /*return*/, {\n                                    type: \"module_transaction_unknown\",\n                                    id: id,\n                                    module: module,\n                                    timestamp: block.timestamp,\n                                    logs: subLogs,\n                                    txHash: event.transactionHash,\n                                    success: success\n                                }];\n                        return [2 /*return*/, __assign({ type: \"module_transaction\", id: id, timestamp: block.timestamp, logs: subLogs, txHash: event.transactionHash, success: success }, decodedTx)];\n                }\n            });\n        });\n    };\n    return ModuleDecoder;\n}());\nexports.ModuleDecoder = ModuleDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultisigDecoder = void 0;\nvar ethers_1 = require(\"ethers\");\nvar safe_contracts_1 = require(\"@gnosis.pm/safe-contracts\");\nvar constants_1 = require(\"../constants\");\nvar NonceMapper = /** @class */ (function () {\n    function NonceMapper(provider) {\n        this.provider = provider;\n    }\n    NonceMapper.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        _a.chainId = (_b.sent()).chainId;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NonceMapper.prototype.calculateHash111 = function (tx, nonce) {\n        return ethers_1.ethers.utils._TypedDataEncoder.hash({ verifyingContract: tx.safe }, safe_contracts_1.EIP712_SAFE_TX_TYPE, __assign(__assign({}, tx), { nonce: nonce }));\n    };\n    NonceMapper.prototype.map = function (expectedHash, tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var safe, currentNonce, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.chainId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        safe = new ethers_1.ethers.Contract(tx.safe, constants_1.safeAbi, this.provider);\n                        return [4 /*yield*/, safe.nonce()];\n                    case 3:\n                        currentNonce = (_a.sent()).toNumber();\n                        for (nonce = currentNonce; nonce >= 0; nonce--) {\n                            if (this.calculateHash111(tx, nonce) === expectedHash)\n                                return [2 /*return*/, nonce];\n                            if (safe_contracts_1.calculateSafeTransactionHash(safe, __assign(__assign({}, tx), { nonce: nonce }), this.chainId) === expectedHash)\n                                return [2 /*return*/, nonce];\n                        }\n                        return [2 /*return*/, -1];\n                }\n            });\n        });\n    };\n    return NonceMapper;\n}());\nvar MultisigDecoder = /** @class */ (function () {\n    function MultisigDecoder(provider) {\n        this.provider = provider;\n        this.nonceMapper = new NonceMapper(provider);\n    }\n    MultisigDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        try {\n            if (tx.to !== safe) {\n                console.log(\"Transaction is not to the Safe\");\n                return undefined;\n            }\n            var result = constants_1.safeInterface.decodeFunctionData(\"execTransaction\", tx.data);\n            return {\n                safe: safe,\n                to: result.to,\n                value: result.value.toString(),\n                data: result.data,\n                operation: result.operation,\n                safeTxGas: result.safeTxGas.toString(),\n                baseGas: result.baseGas.toString(),\n                gasPrice: result.gasPrice.toString(),\n                gasToken: result.gasToken,\n                refundReceiver: result.refundReceiver,\n                signatures: result.signatures,\n            };\n        }\n        catch (e) {\n            // TODO: try to decode other ways \n            console.log(\"Unknown function\", tx.data.slice(0, 10));\n            return undefined;\n        }\n    };\n    MultisigDecoder.prototype.decodeMultisigDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeMultiSigTransaction\", event.data, event.topics);\n        return {\n            safe: event.address,\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n            safeTxGas: parsed.safeTxGas.toString(),\n            baseGas: parsed.baseGas.toString(),\n            gasPrice: parsed.gasPrice.toString(),\n            gasToken: parsed.gasToken,\n            refundReceiver: parsed.refundReceiver,\n            signatures: parsed.signatures,\n            nonce: ethers_1.BigNumber.from(parsed.additionalInfo.slice(0, 66)).toNumber()\n        };\n    };\n    MultisigDecoder.prototype.decode = function (safe, event, safeTxHash, success, subLogs, details) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, ethTx, block, _a, _b;\n            var _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        decodedTx = this.decodeMultisigDetailsEvent(details);\n                        id = \"multisig_\" + safeTxHash;\n                        if (!!decodedTx) return [3 /*break*/, 2];\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(event.transactionHash)];\n                    case 1:\n                        ethTx = _d.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        _d.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _d.sent();\n                        if (!decodedTx)\n                            return [2 /*return*/, {\n                                    type: \"multisig_transaction_unknown\",\n                                    id: id,\n                                    timestamp: block.timestamp,\n                                    logs: subLogs,\n                                    txHash: event.transactionHash,\n                                    safeTxHash: safeTxHash,\n                                    success: success\n                                }];\n                        _a = [__assign({ type: \"multisig_transaction\", id: id, timestamp: block.timestamp, logs: subLogs, txHash: event.transactionHash, safeTxHash: safeTxHash, success: success }, decodedTx)];\n                        _c = {};\n                        _b = decodedTx.nonce;\n                        if (_b) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.nonceMapper.map(safeTxHash, decodedTx)];\n                    case 4:\n                        _b = (_d.sent());\n                        _d.label = 5;\n                    case 5: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_c.nonce = _b, _c)]))];\n                }\n            });\n        });\n    };\n    return MultisigDecoder;\n}());\nexports.MultisigDecoder = MultisigDecoder;\n","import { SafeInteraction } from \"safe-indexer-ts\";\nimport { AbstractDB } from \"./base\";\n\n\nexport class InteractionsDB extends AbstractDB<SafeInteraction> {\n\n    readonly indexKey = \"timestamp\"\n\n    constructor(safe: string) {\n        super(safe, 1, \"interactions\", (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(this.storeName, { keyPath: \"id\" })\n                store.createIndex(this.indexKey, this.indexKey, { unique: false })\n            }\n        });\n    }\n\n    getAll(): Promise<SafeInteraction[]> {\n        return this.getAllByIndex(this.indexKey)\n    }\n\n}","export abstract class AbstractDB<T> {\n    private internalDb: IDBDatabase | undefined;\n    private indexedDB = window.indexedDB;\n    readonly dbKey: string;\n    readonly dbVersion: number;\n    readonly storeName: string;\n    readonly migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void;\n\n    constructor(dbKey: string, dbVersion: number, storeName: string, migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void) {\n        this.dbKey = dbKey;\n        this.dbVersion = dbVersion;\n        this.storeName = storeName;\n        this.migration = migration;\n    }\n\n    async open(): Promise<IDBDatabase> {\n        if (this.internalDb) return this.internalDb\n        const dbStore = this;\n        return new Promise((callback, reject) => {\n            const request = this.indexedDB.open(this.dbKey, this.dbVersion)\n            request.onerror = function () {\n                reject(\"Error: \" + this.error);\n            }\n            request.onsuccess = function () {\n                dbStore.internalDb = this.result;\n                callback(this.result);\n            }\n            request.onupgradeneeded = function (event) {\n                dbStore.migration(this.result, event.oldVersion, this.result.version)\n            }\n        })\n    }\n\n    async add(entry: T): Promise<void> {\n        const db = await this.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.put(entry).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async get(id: string): Promise<T> {\n        const db = await this.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.get(id).onsuccess = function () {\n                callback(this.result as T)\n            }\n        })\n    }\n\n    async getAllByIndex(index: string): Promise<T[]> {\n        const db = await this.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.index(index).getAll().onsuccess = function () {\n                callback(this.result.reverse() as T[])\n            }\n        })\n    }\n\n    async drop(): Promise<void> {\n        const db = await this.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            transaction.objectStore(this.storeName).clear().onsuccess = function () {\n                callback()\n            }\n        })\n    }\n}","import { State } from \"safe-indexer-ts\";\n\nexport class IndexerState implements State {\n    safe: string;\n    defaultBlock: number;\n    _lastIndexedBlock: number; // 8485873 is the Block of initial 1.3.0 deployment\n\n    constructor(safe: string, defaultBlock: number) {\n        this.safe = safe;\n        this.defaultBlock = defaultBlock;\n        const storedBlock = localStorage.getItem(\"indexer_state_safe_\" + this.safe);\n        this._lastIndexedBlock = storedBlock ? parseInt(storedBlock) : defaultBlock;\n    }\n\n    set lastIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_\" + this.safe, value.toString())\n        this._lastIndexedBlock = value;\n    }\n    get lastIndexedBlock() {\n        return this._lastIndexedBlock\n    }\n\n    reset() {\n        localStorage.removeItem(\"indexer_state_safe_\" + this.safe)\n        this._lastIndexedBlock = this.defaultBlock\n    }\n}","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport './App.css';\nimport { Callback, SafeInteraction } from 'safe-indexer-ts'\nimport { Button, TextField } from '@material-ui/core';\nimport { InteractionsDB } from './logic/db/interactions';\nimport { getIndexer } from './logic/utils/indexer';\nimport { IndexerState } from './logic/state/indexer';\n\nfunction App() {\n  const callbackProxy = useMemo<{ current?: Callback }>(() => { return {}}, [])\n  const [txs, setTxs] = useState<SafeInteraction[]>([])\n  const [safe, setSafe] = useState<string>(localStorage.getItem(\"app_state_safe\") || \"\") //0x969c350577B6CD3A8E963cBB8D9c728B840c459e\n  const [rpc, setRpc] = useState<string>(localStorage.getItem(\"app_state_rpc\") || \"\") //\"https://rinkeby.infura.io/v3/dfa033b2501f41459eb513a7b16e26b7\"\n\n  useEffect(() => {\n    callbackProxy.current = {\n      onNewInteractions: (newTxs) => {\n        setTxs(newTxs.concat(txs))\n      }\n    }\n    return () => callbackProxy.current = undefined\n  }, [callbackProxy, txs, setTxs])\n\n  const db = useMemo(() => { return new InteractionsDB(safe) }, [safe])\n\n  const showDetails = useCallback(async (id) => {\n    console.log(await db.get(id))\n  }, [db])\n\n  const updateSafe = useCallback(async (updateSafe) => {\n    localStorage.setItem(\"app_state_safe\", updateSafe)\n    setSafe(updateSafe)\n  }, [setSafe])\n\n  const updateRpc = useCallback(async (updatedRpc) => {\n    localStorage.setItem(\"app_state_rpc\", updatedRpc)\n    setRpc(updatedRpc)\n  }, [setRpc])\n\n  const indexer = useMemo(() => {\n    if (!rpc || rpc.trim().length == 0) return\n    if (!safe || safe.trim().length == 0) return\n    const indexer = getIndexer(safe, rpc, (e) => {\n      console.log(e)\n      callbackProxy?.current?.onNewInteractions(e)\n      e.forEach((i) => {\n        db.add(i)\n      })\n    })\n    return indexer\n  }, [callbackProxy, safe, rpc, db])\n\n  useEffect(() => {    \n    indexer?.start()\n    return () => indexer?.stop()\n  }, [indexer])\n\n  const reindex = useCallback(async () => {\n    if (!indexer) return;\n    indexer.pause();\n    await db.drop();\n    (indexer.state as IndexerState).reset();\n    db.getAll().then((loaded) => setTxs(loaded))\n    indexer.resume();\n  }, [indexer, db])\n\n  useEffect(() => {\n    setTxs([])\n    db.getAll().then((loaded) => setTxs(loaded))\n  }, [db, setTxs])\n  return (\n    <div className=\"App\">\n      <div>\n        <TextField label=\"RPC\" onChange={(e) => updateRpc(e.target.value)} value={rpc} />\n        <TextField label=\"Safe\" onChange={(e) => updateSafe(e.target.value)} value={safe} />\n        <Button onClick={() => reindex()}>Reindex</Button>\n      </div>\n      {txs.map((e) => <div onClick={() => showDetails(e.id)}>\n        {`${e.type} - ${e.id}`}<br />\n        {`${new Date(e.timestamp * 1000)}`}<br />\n        <br />\n      </div>)}\n    </div>\n  );\n}\n\nexport default App;\n","\nimport { ethers } from 'ethers';\nimport { EthersLoader, EthersParser, ModuleTransactionEventSource, MultisigTransactionEventSource, SafeIndexer, SafeInteraction } from 'safe-indexer-ts'\nimport { IndexerState } from '../state/indexer';\n\nexport const getIndexer = (safe: string, rpc: string, onNewInteractions: (interactions: SafeInteraction[]) => void): SafeIndexer => {\n    const provider = new ethers.providers.JsonRpcProvider(rpc); // \"https://bsc-dataseed1.ninicoin.io\"\n    const loader = new EthersLoader(provider, [new MultisigTransactionEventSource(provider), new ModuleTransactionEventSource(provider)])\n    const parser = new EthersParser(provider)\n    const callback = {\n        onNewInteractions\n    }\n    const state = new IndexerState(safe, 5590754)\n    return new SafeIndexer(state, loader, parser, callback, { safe, maxBlocks: 100000, logger: console })\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./ethers/loader\"), exports);\n__exportStar(require(\"./ethers/parser\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detailsTopics = exports.parentTopics = exports.etherReceivedTopic = exports.moduleDetailsTopic = exports.moduleFailureTopic = exports.moduleSuccessTopic = exports.multisigDetailsTopic = exports.failureTopic = exports.successTopic = exports.safeInterface = exports.safeAbi = exports.transferTopic = exports.erc721Interface = exports.erc20OldInterface = exports.erc20Interface = exports.erc721InterfaceDefinition = exports.erc20OldInterfaceDefinition = exports.erc20InterfaceDefinition = void 0;\nvar safe_deployments_1 = require(\"@gnosis.pm/safe-deployments\");\nvar ethers_1 = require(\"ethers\");\nexports.erc20InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 amount)\"\n];\nexports.erc20OldInterfaceDefinition = [\n    \"event Transfer(address indexed from, address to, uint256 amount)\"\n];\nexports.erc721InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\n];\nexports.erc20Interface = new ethers_1.ethers.utils.Interface(exports.erc20InterfaceDefinition);\nexports.erc20OldInterface = new ethers_1.ethers.utils.Interface(exports.erc20OldInterfaceDefinition);\nexports.erc721Interface = new ethers_1.ethers.utils.Interface(exports.erc721InterfaceDefinition);\n// The same for all interfaces as `indexed` has no impact on the topic\nexports.transferTopic = exports.erc20Interface.getEventTopic(\"Transfer\");\nexports.safeAbi = safe_deployments_1.getSafeL2SingletonDeployment({ released: undefined }).abi;\nexports.safeInterface = new ethers_1.ethers.utils.Interface(exports.safeAbi);\nexports.successTopic = exports.safeInterface.getEventTopic(\"ExecutionSuccess\");\nexports.failureTopic = exports.safeInterface.getEventTopic(\"ExecutionFailure\");\nexports.multisigDetailsTopic = exports.safeInterface.getEventTopic(\"SafeMultiSigTransaction\");\nexports.moduleSuccessTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleSuccess\");\nexports.moduleFailureTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleFailure\");\nexports.moduleDetailsTopic = exports.safeInterface.getEventTopic(\"SafeModuleTransaction\");\nexports.etherReceivedTopic = exports.safeInterface.getEventTopic(\"SafeReceived\");\n// Failure topics cannot generate sub events, we should remove them in the future\nexports.parentTopics = [exports.successTopic, exports.moduleSuccessTopic, exports.failureTopic, exports.moduleFailureTopic];\nexports.detailsTopics = [exports.multisigDetailsTopic, exports.moduleDetailsTopic];\n"],"sourceRoot":""}