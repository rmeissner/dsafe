{"version":3,"sources":["../../simple-indexer/safe-indexer-ts/bin/ethers/constants.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/utils.js","logic/utils/proposing.ts","../../simple-indexer/safe-indexer-ts/bin/types/index.js","../../simple-indexer/safe-indexer-ts/bin/types/ethereum.js","../../simple-indexer/safe-indexer-ts/bin/types/indexer.js","../../simple-indexer/safe-indexer-ts/bin/types/interactions.js","../../simple-indexer/safe-indexer-ts/bin/indexer.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/sources.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/module.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/multisig.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/settings.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/transfers.js","logic/db/base.ts","logic/db/safe.ts","logic/db/interactions.ts","logic/state/indexer.ts","logic/account/TransactionRepository.ts","logic/utils/indexer.ts","components/provider/AppSettingsProvider.tsx","components/provider/TransactionRepositoryProvider.tsx","logic/utils/account.ts","components/utils/media.ts","styled/tables.ts","logic/utils/address.ts","components/utils/AddressInfo.tsx","components/account/transaction/details/SettingsTxDetails.tsx","components/account/transaction/summary/SettingsTxSummary.tsx","components/account/transaction/summary/TransferTxSummary.tsx","components/account/transaction/TxSummary.tsx","components/account/transaction/details/TxEvents.tsx","components/utils/TxData.tsx","components/account/transaction/details/ModuleTxDetails.tsx","components/account/transaction/details/MultisigTxDetails.tsx","components/account/transaction/details/TransferTxDetails.tsx","components/account/transaction/TxDetails.tsx","components/account/transaction/Transactions.tsx","logic/utils/signatures.ts","logic/utils/execution.ts","logic/utils/safe.ts","logic/account/QueueRepository.ts","components/provider/QueueRepositoryProvider.tsx","components/account/queue/QueuedTxSummary.tsx","components/account/queue/AddSignatureDialog.tsx","components/account/queue/SignTransactionDialog.tsx","components/account/queue/ExecuteTxDialog.tsx","components/account/queue/QueuedTxDetails.tsx","components/account/queue/ProposeTxsDialog.tsx","components/account/queue/Queue.tsx","logic/apps/appList.ts","logic/db/app.ts","components/account/ResponsiveSidebar.tsx","logic/utils/chainIdToNetwork.ts","logic/apps/connector.ts","components/account/apps/AppWindow.tsx","components/account/apps/Apps.tsx","components/settings/SettingsDialog.tsx","components/account/header/AccountHeader.tsx","components/account/Dashboard.tsx","components/welcome/Welcome.tsx","components/App.tsx","reportWebVitals.ts","index.tsx","../../simple-indexer/safe-indexer-ts/bin/index.js"],"names":["Object","defineProperty","exports","value","detailsTopics","parentTopics","etherReceivedTopic","moduleDetailsTopic","moduleFailureTopic","moduleSuccessTopic","multisigDetailsTopic","failureTopic","successTopic","safeInterface","safeAbi","transferTopic","erc721Interface","erc20OldInterface","erc20Interface","erc721InterfaceDefinition","erc20OldInterfaceDefinition","erc20InterfaceDefinition","safe_deployments_1","require","ethers_1","ethers","utils","Interface","getEventTopic","getSafeL2SingletonDeployment","released","undefined","abi","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","mapEvents","mapEvent","decoder","event","_a","_b","_c","decode","interaction","logs","all","map","removeHexPrefix","input","toLowerCase","startsWith","slice","encodeData","operation","to","data","dataBuffer","Buffer","from","solidityPack","BigNumber","toHexString","buildTx","account","transactions","chainId","network","toString","multiSendDeployment","getMultiSendDeployment","Error","multiSendInterface","multiSendBytes","transaction","multiSendData","encodeFunctionData","networkAddresses","buildMultiSend","__createBinding","create","o","m","k","k2","enumerable","get","__exportStar","p","prototype","hasOwnProperty","__assign","assign","s","i","arguments","SafeIndexer","sleep","timeout","cb","setTimeout","conditionalSleep","configDefaults","earliestBlock","maxBlocks","upToDateTimeout","syncTimeout","reverse","state","loader","parser","callback","config","indexing","paused","updateConfig","update","postStatusUpdate","status","onStatusUpdate","console","error","getCurrentBlockInterval","latestBlock","log","earliestIndexedBlock","lastIndexedBlock","fromBlock","Math","max","toBlock","min","ensureBlockDefaults","start","_d","activeChainId","errorMsg","blockInterval","e_1","_e","loadChainId","logger","type","reason","code","loadCurrentBlock","processBlocks","stop","pause","resume","events","interactions","loadEvents","safe","parse","onNewInteractions","EthersLoader","isOlder","compare","base","blockNumber","transactionIndex","logIndex","provider","sources","getNetwork","getBlockNumber","merge","loaders","_i","loaderCount","logResults","currentLogIndex","out","runs","resultIndex","nextLog","candidate","Array","fill","toEvent","eventId","_this","l","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","OutgoingTransferEventSource","IncomingTransferEventSource","IncomingEthEventSource","SettingsChangeEventSource","ModuleTransactionEventSource","MultisigTransactionEventSource","StaticTopicEventSource","constants_1","BaseEventSource","name","address","filter","buildFilter","getLogs","_super","topics","defaultAbiCoder","encode","EthersParser","module_1","multisig_1","settings_1","transfers_1","groupIdFromEvent","transactionHash","decoders","MultisigDecoder","ModuleDecoder","TransferDecoder","SettingsDecoder","updateGroupedLogs","groups","detailsCandidate","parentCandidate","currentChildren","parent","details","children","group","detailsCandidates","currentGroupId","events_1","groupId","isParentCandidate","isDetailsCandidate","indexOf","subEvents","detailEvent","inter","utils_1","useFallbackDecoding","decodeEthereumTx","tx","decodeFromEthereumHash","txHash","ethTx","getTransaction","decodeModuleDetailsEvent","parsed","decodeEventLog","decodeInternal","module","success","subLogs","parentDecoder","decodedTx","id","block","getBlock","blockHash","number","timestamp","eventParams","safe_contracts_1","NonceMapper","init","calculateHash111","nonce","_TypedDataEncoder","hash","verifyingContract","EIP712_SAFE_TX_TYPE","expectedHash","currentNonce","Contract","toNumber","calculateSafeTransactionHash","nonceMapper","decodeFunctionData","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","signatures","safeTxHash","concat","decodeMultisigDetailsEvent","additionalInfo","setupTopic","addedOwnerTopic","removedOwnerTopic","changeThresholdTopic","enabledModuleTopic","disabledModuledTopic","changeFallbackHandlerTopic","changeGuardTopic","getSettingsDetails","component","change","owner","threshold","handler","guard","decodeSettingsChange","decodeTokenTransfer","eventInterface","tokenAddress","amount","tokenId","sender","receipient","direction","decodeEtherTransfer","AbstractDB","dbKey","dbVersion","migration","internalDb","indexedDB","window","a","dbStore","request","open","onerror","onsuccess","onupgradeneeded","oldVersion","version","AbstractDAO","db","storeName","entry","objectStore","put","delete","index","key","getAll","clear","INTERACTIONS_STORE","INTERACTIONS_INDEX","QUEUED_TX_STORE","QUEUED_TX_INDEX","TX_SIGNATURES_STORE","TX_SIGNATURES_INDEX","SafeDB","createObjectStore","keyPath","createIndex","unique","InteractionsDAO","getAllByIndex","QueuedInteractionsDAO","IDBKeyRange","lowerBound","TxSignaturesDAO","parseIntWithFallback","fallback","parseInt","Number","isNaN","IndexerState","defaultBlock","_lastIndexedBlock","_earliestIndexedBlock","_earliestBlock","storedEarliestIndexedBlock","localStorage","getItem","storedLastIndexedBlock","storedEarliestBlock","setItem","removeItem","TransactionRepository","networkConfig","callbacks","Set","currentStatus","indexer","startingBlock","disconnect","getIndexer","catch","add","postCurrentStatusUpdateToCallback","checkForCreation","forEach","handleNewInteraction","postCurrentStatusUpdate","drop","reset","defaultConfig","AppSettingsContext","React","createContext","useAppSettings","appSettings","useContext","AppSettingsProvider","useState","useCustomRpc","setUseCustomRpc","customRpc","setCustomRpc","storedConfig","JSON","setNetworkConfig","useMemo","providers","JsonRpcProvider","ethereum","Web3Provider","enable","Provider","signer","getSigner","toggleCustomRpc","updateCustomRpc","updateNetworkConfig","serialized","stringify","TransactionRepoContext","useTransactionRepo","repo","TransactionRepositoryProvider","useAccount","useEffect","connect","buildCaip2Addr","parseAddress","getAddress","parseAccount","shortName","accountParts","split","shortNames","networkParts","parseChainId","useDektopLayout","useMediaQuery","copyToClipboard","text","copyMessage","navigator","clipboard","writeText","alert","useCopyAddress","shareableText","Group","styled","theme","display","flexDirection","Row","Header","textAlign","Entry","alignItems","paddingBottom","LongText","Typography","width","wordWrap","shortAddress","visibleChars","identicon","size","xs","sm","md","lg","xl","xxl","StyledImg","height","borderRadius","AddressInfo","onClick","iconSrc","makeBlockie","copyAddress","sx","src","fontFamily","paddingX","IconButton","color","ContentCopy","fontSize","renderSettingsValue","SettingsTxDetails","Date","toUTCString","toUpperCase","Summary","SettingsTxSummary","settingsChange","hideDate","showDetails","TransferTxSummary","transfer","TxSummary","TxEvents","TxData","collapsed","setCollapsed","decodePossible","canCollapse","displayData","Link","textDecoration","Button","ModuleTxDetails","MultisigTxDetails","renderDetails","asset","subjectTitle","subject","TransferTxDetails","TxDialog","Dialog","TxDetails","handleClose","debugLink","setDebugLink","txRepo","setInteraction","getTx","loadInteraction","link","onClose","maxWidth","fullWidth","fullScreen","DialogTitle","DialogContent","DialogActions","Root","Transactions","selectedId","setSelectedId","txs","setTxs","accountRepo","getAllTxs","loaded","registerCallback","unregisterCallback","useCallback","recoverEthSign","signature","hashMessage","arrayify","recoverAddress","recoverEIP712","parseSafeSignature","signatureString","sigType","signatureParts","keccak256","getEIP712Domain","getEIP712TxType","SafeTx","signEip712","_signTypedData","signerAddress","recoveredAddress","signMessage","buildPreValidatedSignature","signQueuedTx","warn","prepareSignatures","submitterAddress","signatureMap","Map","owners","has","set","submitterIsOwner","requiredSigntures","sub","signatureArray","values","buildStaticPart","offset","buildDynamicPart","buildSignatureBytes","sort","left","right","localeCompare","staticParts","dynamicParts","sig","Safe","providerOrSigner","safeContract","WritableSafe","getOwners","getThreshold","VERSION","information","getTransactionHash","populateTransaction","execTransaction","QueueRepository","queueDao","signaturesDao","onNewTx","hashInfo","queuedTx","notifyNewTxs","remove","getQueuedTxs","queuedTxs","submitter","writableSafe","writable","signatureBytes","signedTx","executeTx","QueueRepoContext","useQueueRepo","QueueRepositoryProvider","QueuedTxSummary","AddSignatureDialog","handleNewSignature","signerString","setSignerString","setSignatureString","queuedRepo","handleAdd","addSignature","TextField","onChange","target","SignTransactionDialog","handleSign","ExecuteTxDialog","handleTxSubmitted","handleExecution","getSignatures","submitTx","ethereumTxHash","QueuedTxDetails","simulateLink","setSimulateLink","showAddSignature","setShowAddSignature","showSignTransaction","setShowSignTransaction","showExecuteTransaction","setShowExecuteTransaction","deleteTx","setTransaction","load","setSignatures","loadSignatures","populateTx","populatedTx","shareText","shareSignature","ProposeTxs","onConfirm","onReject","requestId","setToString","valueString","setValueString","dataString","setDataString","operationString","setOperationString","nonceString","setNonceString","getNextNonce","defaultTx","cancelCreation","handleCreate","isHexString","constants","AddressZero","addTx","Queue","showNewTxDialog","setShowNewTxDialog","ququedTxs","setQueuedTxs","queueRepo","loadQueuedTxs","creation","defaultApps","title","url","section","ACCOUNTS_STORE","ACCOUNTS_INDEX","APP_URLS_STORE","APP_URLS_INDEX","AppDB","AccountsDAO","AppUrlsDAO","Sidebar","overflowY","StyledBox","Box","backgroundColor","palette","mode","grey","Puller","position","top","ResponsiveSidebar","isDesktop","header","setOpen","toggleDrawer","newOpen","SwipeableDrawer","anchor","onOpen","swipeAreaWidth","disableSwipeToOpen","ModalProps","keepMounted","overflow","borderTopLeftRadius","borderTopRightRadius","visibility","justifyContent","px","pb","chainIdToNetwork","1","2","3","4","5","42","56","100","137","246","4447","73799","FrameCommunicator","frame","appUrl","info","handlers","method","params","onTransactionProposal","sendResponse","txServiceUrl","safeAddress","payload","communicator","send","resp","err","sendError","message","source","includes","origin","handleMessage","frameWindow","current","contentWindow","sdkVersion","getSDKVersion","msg","MessageFormatter","makeResponse","postMessage","makeErrorResponse","defaultWindow","eventWindow","ev","onMessage","addEventListener","removeEventListener","AppFrame","border","AppWindow","loading","proposalParams","setProposalParams","appFrame","useRef","document","hidden","handleTransactionConfirmation","handleTransactionRejection","CircularProgress","ref","Apps","appUrlsDao","setAppUrl","appUrlError","setAppUrlError","appUrlInput","setAppUrlInput","appUrlsHistory","setAppUrlsHistory","appHistory","handleInputChange","openUrl","newValue","openAppUrl","cleanUrl","trim","getTime","marginBottom","Autocomplete","freeSolo","options","defaultValue","groupBy","option","getOptionLabel","renderInput","helperText","variant","SettingsDialog","reindex","setStatus","updateStartingBlock","updateMaxBlocks","Switch","checked","AccountHeader","expanded","showSettings","setShowSettings","queueSize","setQueueSize","Settings","AccountContext","Dashboard","useParams","padding","Welcome","addressInput","setAddressInput","addressError","setAddressError","accountHistory","setAccountHistory","history","useHistory","accountsDao","openAccount","createTheme","ThemeProvider","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById"],"mappings":"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","file":"static/js/main.b1591590.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detailsTopics = exports.parentTopics = exports.etherReceivedTopic = exports.moduleDetailsTopic = exports.moduleFailureTopic = exports.moduleSuccessTopic = exports.multisigDetailsTopic = exports.failureTopic = exports.successTopic = exports.safeInterface = exports.safeAbi = exports.transferTopic = exports.erc721Interface = exports.erc20OldInterface = exports.erc20Interface = exports.erc721InterfaceDefinition = exports.erc20OldInterfaceDefinition = exports.erc20InterfaceDefinition = void 0;\nvar safe_deployments_1 = require(\"@gnosis.pm/safe-deployments\");\nvar ethers_1 = require(\"ethers\");\nexports.erc20InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 amount)\"\n];\nexports.erc20OldInterfaceDefinition = [\n    \"event Transfer(address indexed from, address to, uint256 amount)\"\n];\nexports.erc721InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\n];\nexports.erc20Interface = new ethers_1.ethers.utils.Interface(exports.erc20InterfaceDefinition);\nexports.erc20OldInterface = new ethers_1.ethers.utils.Interface(exports.erc20OldInterfaceDefinition);\nexports.erc721Interface = new ethers_1.ethers.utils.Interface(exports.erc721InterfaceDefinition);\n// The same for all interfaces as `indexed` has no impact on the topic\nexports.transferTopic = exports.erc20Interface.getEventTopic(\"Transfer\");\nexports.safeAbi = safe_deployments_1.getSafeL2SingletonDeployment({ released: undefined }).abi;\nexports.safeInterface = new ethers_1.ethers.utils.Interface(exports.safeAbi);\nexports.successTopic = exports.safeInterface.getEventTopic(\"ExecutionSuccess\");\nexports.failureTopic = exports.safeInterface.getEventTopic(\"ExecutionFailure\");\nexports.multisigDetailsTopic = exports.safeInterface.getEventTopic(\"SafeMultiSigTransaction\");\nexports.moduleSuccessTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleSuccess\");\nexports.moduleFailureTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleFailure\");\nexports.moduleDetailsTopic = exports.safeInterface.getEventTopic(\"SafeModuleTransaction\");\nexports.etherReceivedTopic = exports.safeInterface.getEventTopic(\"SafeReceived\");\n// Failure topics cannot generate sub events, we should remove them in the future\nexports.parentTopics = [exports.successTopic, exports.moduleSuccessTopic, exports.failureTopic, exports.moduleFailureTopic];\nexports.detailsTopics = [exports.multisigDetailsTopic, exports.moduleDetailsTopic];\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapEvents = exports.mapEvent = void 0;\nvar mapEvent = function (decoder, event) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a;\n    var _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _b = {\n                    event: event\n                };\n                if (!decoder) return [3 /*break*/, 2];\n                return [4 /*yield*/, decoder.decode(event)];\n            case 1:\n                _a = _c.sent();\n                return [3 /*break*/, 3];\n            case 2:\n                _a = undefined;\n                _c.label = 3;\n            case 3: return [2 /*return*/, (_b.interaction = _a,\n                    _b)];\n        }\n    });\n}); };\nexports.mapEvent = mapEvent;\nvar mapEvents = function (decoder, logs) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!logs)\n                    return [2 /*return*/, []];\n                return [4 /*yield*/, Promise.all(logs.map(function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            return [2 /*return*/, exports.mapEvent(decoder, e)];\n                        });\n                    }); }))];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n}); };\nexports.mapEvents = mapEvents;\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { utils } from \"ethers\";\nimport { MetaTransaction } from \"../models/transactions\"\nimport { getMultiSendDeployment } from \"@gnosis.pm/safe-deployments\"\nimport { Account } from \"./account\";\n\nexport const removeHexPrefix = (input: string) => input.toLowerCase().startsWith(\"0x\") ? input.slice(2) : input;\n\nconst encodeData = (operation: number, to: string, value: string, data: string) => {\n    let dataBuffer = Buffer.from(removeHexPrefix(data), \"hex\")\n    return removeHexPrefix(utils.solidityPack(\n        [\"uint8\", \"address\", \"uint256\", \"uint256\", \"bytes\"],\n        [operation, to, BigNumber.from(value).toHexString(), dataBuffer.length, dataBuffer]\n    ))\n}\n\nexport const buildMultiSend = (transactions: MetaTransaction[], chainId: number): MetaTransaction => {\n    const network = chainId.toString()\n    const multiSendDeployment = getMultiSendDeployment({ network })\n    if (!multiSendDeployment) throw Error(\"MultiSend not available on this network\")\n    const multiSendInterface = new utils.Interface(multiSendDeployment.abi)\n    let multiSendBytes = \"0x\"\n    for (let transaction of transactions) {\n        multiSendBytes += encodeData(0, transaction.to, transaction.value, transaction.data)\n    }\n    const multiSendData = multiSendInterface.encodeFunctionData(\"multiSend\", [multiSendBytes])\n    return {\n        to: multiSendDeployment.networkAddresses[network],\n        value: \"0x00\",\n        data: multiSendData,\n        operation: 1\n    }\n}\n\n\nexport const buildTx = (account: Account, transactions?: MetaTransaction[]): MetaTransaction => {\n    if (!transactions || transactions.length === 0) {\n        return {\n            to: \"\",\n            value: \"\",\n            data: \"\",\n            operation: 0\n        }\n    }\n    if (transactions.length === 1) {\n        return transactions[0]\n    }\n    return buildMultiSend(transactions, account.chainId)\n}","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ethereum\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./interactions\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeIndexer = void 0;\nvar sleep = function (timeout) { return new Promise(function (cb) { return setTimeout(cb, timeout); }); };\nvar conditionalSleep = function (timeout) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(timeout && timeout > 0)) return [3 /*break*/, 2];\n                return [4 /*yield*/, sleep(timeout)];\n            case 1:\n                _a.sent();\n                _a.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar configDefaults = {\n    earliestBlock: 0,\n    maxBlocks: 100,\n    upToDateTimeout: 10000,\n    syncTimeout: 100,\n    reverse: false\n};\nvar SafeIndexer = /** @class */ (function () {\n    function SafeIndexer(state, loader, parser, callback, config) {\n        this.indexing = false;\n        this.paused = false;\n        this.state = state;\n        this.loader = loader;\n        this.parser = parser;\n        this.callback = callback;\n        this.config = __assign(__assign({}, configDefaults), config);\n    }\n    SafeIndexer.prototype.updateConfig = function (update) {\n        this.config = __assign(__assign({}, this.config), update);\n    };\n    SafeIndexer.prototype.postStatusUpdate = function (status) {\n        var _a, _b;\n        try {\n            (_b = (_a = this.callback) === null || _a === void 0 ? void 0 : _a.onStatusUpdate) === null || _b === void 0 ? void 0 : _b.call(_a, status);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    SafeIndexer.prototype.getCurrentBlockInterval = function (earliestBlock, latestBlock, reverse) {\n        console.log(this.state);\n        var earliestIndexedBlock = this.state.earliestIndexedBlock;\n        var lastIndexedBlock = this.state.lastIndexedBlock;\n        var maxBlocks = this.config.maxBlocks;\n        if (reverse !== undefined ? reverse : this.config.reverse) {\n            if (earliestBlock >= earliestIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: Math.max(earliestBlock, earliestIndexedBlock - maxBlocks),\n                toBlock: earliestIndexedBlock - 1\n            };\n        }\n        else {\n            if (latestBlock <= lastIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: lastIndexedBlock + 1,\n                toBlock: Math.min(latestBlock, lastIndexedBlock + maxBlocks)\n            };\n        }\n    };\n    SafeIndexer.prototype.ensureBlockDefaults = function (latestBlock) {\n        if (this.config.earliestBlock < 0) {\n            this.config.earliestBlock = latestBlock;\n        }\n        if (this.state.earliestIndexedBlock < 0) {\n            this.state.earliestIndexedBlock = latestBlock + 1;\n        }\n        if (this.state.lastIndexedBlock < 0) {\n            this.state.lastIndexedBlock = latestBlock - 1;\n        }\n    };\n    SafeIndexer.prototype.start = function (reverse) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var activeChainId, errorMsg, latestBlock, earliestBlock, blockInterval, fromBlock, toBlock, e_1;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadChainId()];\n                    case 1:\n                        activeChainId = _e.sent();\n                        if (this.config.chainId && activeChainId != this.config.chainId) {\n                            errorMsg = \"Wrong chain! Expected \" + this.config.chainId + \" got \" + activeChainId;\n                            (_a = this.config.logger) === null || _a === void 0 ? void 0 : _a.error(errorMsg);\n                            this.postStatusUpdate({ type: \"aborted\", reason: errorMsg, code: 1 });\n                            return [2 /*return*/];\n                        }\n                        this.indexing = true;\n                        _e.label = 2;\n                    case 2:\n                        if (!this.indexing) return [3 /*break*/, 14];\n                        if (!this.paused) return [3 /*break*/, 4];\n                        return [4 /*yield*/, sleep(this.config.syncTimeout)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 4: return [4 /*yield*/, this.loader.loadCurrentBlock()];\n                    case 5:\n                        latestBlock = _e.sent();\n                        this.ensureBlockDefaults(latestBlock);\n                        earliestBlock = this.config.earliestBlock;\n                        blockInterval = this.getCurrentBlockInterval(earliestBlock, latestBlock, reverse);\n                        if (!!blockInterval) return [3 /*break*/, 7];\n                        (_b = this.config.logger) === null || _b === void 0 ? void 0 : _b.log(\"Up to date with current block!\");\n                        this.postStatusUpdate({ type: \"up_to_date\", latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 6:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 7:\n                        fromBlock = blockInterval.fromBlock, toBlock = blockInterval.toBlock;\n                        this.postStatusUpdate({ type: \"processing\", fromBlock: fromBlock, toBlock: toBlock, latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        (_c = this.config.logger) === null || _c === void 0 ? void 0 : _c.log(\"Process from block\", fromBlock, \"to block\", toBlock);\n                        _e.label = 8;\n                    case 8:\n                        _e.trys.push([8, 11, , 13]);\n                        return [4 /*yield*/, this.processBlocks(fromBlock, toBlock)];\n                    case 9:\n                        _e.sent();\n                        this.state.lastIndexedBlock = Math.max(toBlock, this.state.lastIndexedBlock);\n                        this.state.earliestIndexedBlock = Math.min(fromBlock, this.state.earliestIndexedBlock);\n                        return [4 /*yield*/, conditionalSleep(this.config.syncTimeout)];\n                    case 10:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 11:\n                        e_1 = _e.sent();\n                        (_d = this.config.logger) === null || _d === void 0 ? void 0 : _d.error(e_1);\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 12:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 13: return [3 /*break*/, 2];\n                    case 14: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SafeIndexer.prototype.stop = function () {\n        this.indexing = false;\n    };\n    SafeIndexer.prototype.pause = function () {\n        this.paused = true;\n    };\n    SafeIndexer.prototype.resume = function () {\n        this.paused = false;\n    };\n    SafeIndexer.prototype.processBlocks = function (from, to) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, interactions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadEvents(from, to, this.config.safe)];\n                    case 1:\n                        events = _a.sent();\n                        return [4 /*yield*/, this.parser.parse(events)];\n                    case 2:\n                        interactions = _a.sent();\n                        if (interactions.length > 0)\n                            try {\n                                this.callback.onNewInteractions(interactions);\n                            }\n                            catch (_b) { }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SafeIndexer;\n}());\nexports.SafeIndexer = SafeIndexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersLoader = void 0;\n__exportStar(require(\"./sources\"), exports);\nvar isOlder = function (compare, base) {\n    if (compare === undefined)\n        return false;\n    if (base === undefined)\n        return true;\n    if (compare.blockNumber != base.blockNumber)\n        return compare.blockNumber < base.blockNumber;\n    if (compare.transactionIndex != base.transactionIndex)\n        return compare.transactionIndex < base.transactionIndex;\n    if (compare.logIndex != base.logIndex)\n        return compare.logIndex < base.logIndex;\n    return false; // Equal defaults to false\n};\nvar EthersLoader = /** @class */ (function () {\n    function EthersLoader(provider, sources) {\n        this.provider = provider;\n        this.sources = sources;\n    }\n    EthersLoader.prototype.loadChainId = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var network;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        network = _a.sent();\n                        return [2 /*return*/, network.chainId];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.loadCurrentBlock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getBlockNumber()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.merge = function () {\n        var loaders = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            loaders[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var loaderCount, logResults, currentLogIndex, i, out, runs, resultIndex, nextLog, i, candidate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        loaderCount = loaders.length;\n                        if (loaderCount == 0)\n                            return [2 /*return*/, []];\n                        return [4 /*yield*/, Promise.all(loaders)];\n                    case 1:\n                        logResults = _a.sent();\n                        if (loaderCount == 1)\n                            return [2 /*return*/, logResults[0]];\n                        currentLogIndex = new Array(loaderCount).fill(0);\n                        for (i = 0; i < loaderCount; i++)\n                            currentLogIndex[i] = 0;\n                        out = [];\n                        runs = 0;\n                        // Panic check against endless loop (10k is max amount of events, per loader)\n                        while (runs < 10000 * loaderCount) {\n                            resultIndex = 0;\n                            nextLog = logResults[0][currentLogIndex[0]];\n                            for (i = 1; i < loaderCount; i++) {\n                                candidate = logResults[i][currentLogIndex[i]];\n                                if (isOlder(candidate, nextLog)) {\n                                    resultIndex = i;\n                                    nextLog = candidate;\n                                }\n                            }\n                            currentLogIndex[resultIndex]++;\n                            if (nextLog)\n                                out.push(nextLog);\n                            else\n                                break;\n                            runs++;\n                        }\n                        return [2 /*return*/, out];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.toEvent = function (log, safe) {\n        return __assign(__assign({}, log), { eventId: log.logIndex.toString(), account: safe });\n    };\n    EthersLoader.prototype.loadEvents = function (from, to, safe) {\n        return __awaiter(this, void 0, void 0, function () {\n            var logs;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.merge.apply(this, this.sources.map(function (l) { return l.loadEvents(from, to, safe); }))];\n                    case 1:\n                        logs = _a.sent();\n                        return [2 /*return*/, logs.reverse().map(function (e) { return _this.toEvent(e, safe); })];\n                }\n            });\n        });\n    };\n    return EthersLoader;\n}());\nexports.EthersLoader = EthersLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingTransferEventSource = exports.IncomingTransferEventSource = exports.IncomingEthEventSource = exports.SettingsChangeEventSource = exports.ModuleTransactionEventSource = exports.MultisigTransactionEventSource = exports.StaticTopicEventSource = void 0;\nvar ethers_1 = require(\"ethers\");\nvar constants_1 = require(\"../constants\");\nvar BaseEventSource = /** @class */ (function () {\n    function BaseEventSource(name, provider) {\n        this.provider = provider;\n        this.name = name;\n    }\n    BaseEventSource.prototype.loadEvents = function (fromBlock, toBlock, address) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filter;\n            return __generator(this, function (_a) {\n                filter = this.buildFilter(fromBlock, toBlock, address);\n                return [2 /*return*/, this.provider.getLogs(filter).then(function (e) {\n                        //console.debug(this.name, \"source loaded\", e.length, \"events\")\n                        return e;\n                    })];\n            });\n        });\n    };\n    return BaseEventSource;\n}());\nvar StaticTopicEventSource = /** @class */ (function (_super) {\n    __extends(StaticTopicEventSource, _super);\n    function StaticTopicEventSource(name, topics, provider) {\n        var _this = _super.call(this, name, provider) || this;\n        _this.topics = topics;\n        return _this;\n    }\n    StaticTopicEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        return {\n            topics: [this.topics],\n            address: address,\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return StaticTopicEventSource;\n}(BaseEventSource));\nexports.StaticTopicEventSource = StaticTopicEventSource;\nvar MultisigTransactionEventSource = /** @class */ (function (_super) {\n    __extends(MultisigTransactionEventSource, _super);\n    function MultisigTransactionEventSource(provider) {\n        return _super.call(this, \"MultiSig\", [constants_1.successTopic, constants_1.failureTopic, constants_1.multisigDetailsTopic], provider) || this;\n    }\n    return MultisigTransactionEventSource;\n}(StaticTopicEventSource));\nexports.MultisigTransactionEventSource = MultisigTransactionEventSource;\nvar ModuleTransactionEventSource = /** @class */ (function (_super) {\n    __extends(ModuleTransactionEventSource, _super);\n    function ModuleTransactionEventSource(provider) {\n        return _super.call(this, \"Module\", [constants_1.moduleSuccessTopic, constants_1.moduleFailureTopic, constants_1.moduleDetailsTopic], provider) || this;\n    }\n    return ModuleTransactionEventSource;\n}(StaticTopicEventSource));\nexports.ModuleTransactionEventSource = ModuleTransactionEventSource;\nvar SettingsChangeEventSource = /** @class */ (function (_super) {\n    __extends(SettingsChangeEventSource, _super);\n    function SettingsChangeEventSource(provider) {\n        return _super.call(this, \"Settings\", [\n            \"SafeSetup\",\n            \"AddedOwner\",\n            \"RemovedOwner\",\n            \"ChangedThreshold\",\n            \"EnabledModule\",\n            \"DisabledModule\",\n            \"ChangedFallbackHandler\",\n            \"ChangedGuard\",\n        ].map(function (name) { return constants_1.safeInterface.getEventTopic(name); }), provider) || this;\n    }\n    return SettingsChangeEventSource;\n}(StaticTopicEventSource));\nexports.SettingsChangeEventSource = SettingsChangeEventSource;\nvar IncomingEthEventSource = /** @class */ (function (_super) {\n    __extends(IncomingEthEventSource, _super);\n    function IncomingEthEventSource(provider) {\n        return _super.call(this, \"Incoming Ether\", [constants_1.etherReceivedTopic], provider) || this;\n    }\n    return IncomingEthEventSource;\n}(StaticTopicEventSource));\nexports.IncomingEthEventSource = IncomingEthEventSource;\nvar IncomingTransferEventSource = /** @class */ (function (_super) {\n    __extends(IncomingTransferEventSource, _super);\n    function IncomingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    IncomingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return IncomingTransferEventSource;\n}(BaseEventSource));\nexports.IncomingTransferEventSource = IncomingTransferEventSource;\nvar OutgoingTransferEventSource = /** @class */ (function (_super) {\n    __extends(OutgoingTransferEventSource, _super);\n    function OutgoingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    OutgoingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], null, [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return OutgoingTransferEventSource;\n}(BaseEventSource));\nexports.OutgoingTransferEventSource = OutgoingTransferEventSource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersParser = void 0;\nvar constants_1 = require(\"../constants\");\nvar module_1 = require(\"./module\");\nvar multisig_1 = require(\"./multisig\");\nvar settings_1 = require(\"./settings\");\nvar transfers_1 = require(\"./transfers\");\nvar EthersParser = /** @class */ (function () {\n    function EthersParser(provider) {\n        this.groupIdFromEvent = function (event) { return \"\" + event.transactionHash; };\n        this.provider = provider;\n        this.decoders = [\n            new multisig_1.MultisigDecoder(provider),\n            new module_1.ModuleDecoder(provider),\n            new transfers_1.TransferDecoder(provider),\n            new settings_1.SettingsDecoder(provider)\n        ];\n    }\n    EthersParser.prototype.updateGroupedLogs = function (groups, detailsCandidate, parentCandidate, currentChildren) {\n        if (parentCandidate) {\n            groups.push({\n                parent: parentCandidate,\n                details: detailsCandidate,\n                children: currentChildren\n            });\n        }\n        else if (currentChildren.length > 0) {\n            groups.push.apply(groups, currentChildren.map(function (log) { return { parent: log, children: [] }; }));\n        }\n    };\n    EthersParser.prototype.group = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var out, currentChildren, detailsCandidates, parentCandidate, currentGroupId, _i, events_1, event, groupId, isParentCandidate, isDetailsCandidate;\n            return __generator(this, function (_a) {\n                out = [];\n                currentChildren = [];\n                detailsCandidates = [];\n                currentGroupId = undefined;\n                for (_i = 0, events_1 = events; _i < events_1.length; _i++) {\n                    event = events_1[_i];\n                    groupId = this.groupIdFromEvent(event);\n                    isParentCandidate = constants_1.parentTopics.indexOf(event.topics[0]) >= 0;\n                    isDetailsCandidate = constants_1.detailsTopics.indexOf(event.topics[0]) >= 0;\n                    if (currentGroupId !== groupId || (isParentCandidate && parentCandidate)) {\n                        this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                        parentCandidate = undefined;\n                        detailsCandidates = [];\n                        currentChildren = [];\n                        currentGroupId = undefined;\n                    }\n                    if (!currentGroupId)\n                        currentGroupId = groupId;\n                    if (isParentCandidate) {\n                        parentCandidate = event;\n                    }\n                    else if (isDetailsCandidate) {\n                        detailsCandidates.push(event);\n                    }\n                    else {\n                        currentChildren.push(event);\n                    }\n                }\n                this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                return [2 /*return*/, out];\n            });\n        });\n    };\n    EthersParser.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, decoder, interaction;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _i = 0, _a = this.decoders;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        decoder = _a[_i];\n                        return [4 /*yield*/, decoder.decode(event, subEvents, detailEvent, this)];\n                    case 2:\n                        interaction = _b.sent();\n                        if (interaction)\n                            return [2 /*return*/, interaction];\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EthersParser.prototype.parse = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var groups, inter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.group(events)];\n                    case 1:\n                        groups = _a.sent();\n                        inter = groups.map(function (_a) {\n                            var parent = _a.parent, children = _a.children, details = _a.details;\n                            return _this.decode(parent, children, details);\n                        });\n                        return [4 /*yield*/, Promise.all(inter)];\n                    case 2: return [2 /*return*/, (_a.sent()).filter(function (e) { return e !== undefined; })];\n                }\n            });\n        });\n    };\n    return EthersParser;\n}());\nexports.EthersParser = EthersParser;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar ModuleDecoder = /** @class */ (function () {\n    function ModuleDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    ModuleDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        // TODO: implement\n        return undefined;\n    };\n    ModuleDecoder.prototype.decodeFromEthereumHash = function (safe, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _a.sent();\n                        return [2 /*return*/, this.decodeEthereumTx(safe, ethTx)];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decodeModuleDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeModuleTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n        };\n    };\n    ModuleDecoder.prototype.decodeInternal = function (safe, module, event, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"module_\" + event.transactionHash + \"_\" + event.eventId;\n                        decodedTx = this.decodeModuleDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"module_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.module = module,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.moduleSuccessTopic: return [3 /*break*/, 1];\n                            case constants_1.moduleFailureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ModuleDecoder;\n}());\nexports.ModuleDecoder = ModuleDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultisigDecoder = void 0;\nvar ethers_1 = require(\"ethers\");\nvar safe_contracts_1 = require(\"@gnosis.pm/safe-contracts\");\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar NonceMapper = /** @class */ (function () {\n    function NonceMapper(provider) {\n        this.provider = provider;\n    }\n    NonceMapper.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        _a.chainId = (_b.sent()).chainId;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NonceMapper.prototype.calculateHash111 = function (tx, nonce) {\n        return ethers_1.ethers.utils._TypedDataEncoder.hash({ verifyingContract: tx.safe }, safe_contracts_1.EIP712_SAFE_TX_TYPE, __assign(__assign({}, tx), { nonce: nonce }));\n    };\n    NonceMapper.prototype.map = function (expectedHash, tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var safe, currentNonce, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.chainId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        safe = new ethers_1.ethers.Contract(tx.safe, constants_1.safeAbi, this.provider);\n                        return [4 /*yield*/, safe.nonce()];\n                    case 3:\n                        currentNonce = (_a.sent()).toNumber();\n                        for (nonce = currentNonce; nonce >= 0; nonce--) {\n                            if (this.calculateHash111(tx, nonce) === expectedHash)\n                                return [2 /*return*/, nonce];\n                            if (safe_contracts_1.calculateSafeTransactionHash(safe, __assign(__assign({}, tx), { nonce: nonce }), this.chainId) === expectedHash)\n                                return [2 /*return*/, nonce];\n                        }\n                        return [2 /*return*/, -1];\n                }\n            });\n        });\n    };\n    return NonceMapper;\n}());\nvar MultisigDecoder = /** @class */ (function () {\n    function MultisigDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.nonceMapper = new NonceMapper(provider);\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    MultisigDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        try {\n            if (tx.to !== safe) {\n                console.log(\"Transaction is not to the Safe\");\n                return undefined;\n            }\n            var result = constants_1.safeInterface.decodeFunctionData(\"execTransaction\", tx.data);\n            return {\n                safe: safe,\n                to: result.to,\n                value: result.value.toString(),\n                data: result.data,\n                operation: result.operation,\n                safeTxGas: result.safeTxGas.toString(),\n                baseGas: result.baseGas.toString(),\n                gasPrice: result.gasPrice.toString(),\n                gasToken: result.gasToken,\n                refundReceiver: result.refundReceiver,\n                signatures: result.signatures,\n            };\n        }\n        catch (e) {\n            // TODO: try to decode other ways \n            console.log(\"Unknown function\", tx.data.slice(0, 10));\n            return undefined;\n        }\n    };\n    MultisigDecoder.prototype.decodeFromEthereumHash = function (safe, safeTxHash, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx, decodedTx, _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _c.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        if (!decodedTx)\n                            return [2 /*return*/, undefined];\n                        _a = [__assign({}, decodedTx)];\n                        _b = {};\n                        return [4 /*yield*/, this.nonceMapper.map(safeTxHash, decodedTx)];\n                    case 2: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_b.nonce = _c.sent(), _b)]))];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decodeMultisigDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeMultiSigTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n            safeTxGas: parsed.safeTxGas.toString(),\n            baseGas: parsed.baseGas.toString(),\n            gasPrice: parsed.gasPrice.toString(),\n            gasToken: parsed.gasToken,\n            refundReceiver: parsed.refundReceiver,\n            signatures: parsed.signatures,\n            nonce: ethers_1.BigNumber.from(parsed.additionalInfo.slice(0, 66)).toNumber()\n        };\n    };\n    MultisigDecoder.prototype.decodeInternal = function (safe, event, safeTxHash, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, decodedTx, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"multisig_\" + safeTxHash;\n                        decodedTx = this.decodeMultisigDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, safeTxHash, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"multisig_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.safeTxHash = safeTxHash,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.successTopic: return [3 /*break*/, 1];\n                            case constants_1.failureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return MultisigDecoder;\n}());\nexports.MultisigDecoder = MultisigDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingsDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar setupTopic = constants_1.safeInterface.getEventTopic(\"SafeSetup\");\nvar addedOwnerTopic = constants_1.safeInterface.getEventTopic(\"AddedOwner\");\nvar removedOwnerTopic = constants_1.safeInterface.getEventTopic(\"RemovedOwner\");\nvar changeThresholdTopic = constants_1.safeInterface.getEventTopic(\"ChangedThreshold\");\nvar enabledModuleTopic = constants_1.safeInterface.getEventTopic(\"EnabledModule\");\nvar disabledModuledTopic = constants_1.safeInterface.getEventTopic(\"DisabledModule\");\nvar changeFallbackHandlerTopic = constants_1.safeInterface.getEventTopic(\"ChangedFallbackHandler\");\nvar changeGuardTopic = constants_1.safeInterface.getEventTopic(\"ChangedGuard\");\nvar SettingsDecoder = /** @class */ (function () {\n    function SettingsDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    SettingsDecoder.prototype.getSettingsDetails = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventParams, eventParams, eventParams, eventParams, eventParams, eventParams, eventParams;\n            return __generator(this, function (_a) {\n                switch (event.topics[0]) {\n                    case addedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"AddedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'added',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case removedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"RemovedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'removed',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case changeThresholdTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedThreshold\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'threshold',\n                                change: 'set',\n                                value: eventParams.threshold.toString()\n                            }];\n                    }\n                    case enabledModuleTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"EnabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'added',\n                                value: eventParams.module\n                            }];\n                    }\n                    case disabledModuledTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"DisabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'removed',\n                                value: eventParams.module\n                            }];\n                    }\n                    case changeFallbackHandlerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedFallbackHandler\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'fallbackHandler',\n                                change: 'set',\n                                value: eventParams.handler\n                            }];\n                    }\n                    case changeGuardTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedGuard\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'guard',\n                                change: 'set',\n                                value: eventParams.guard\n                            }];\n                    }\n                    default: {\n                        return [2 /*return*/, undefined];\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    SettingsDecoder.prototype.decodeSettingsChange = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var details, block;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getSettingsDetails(event)];\n                    case 1:\n                        details = _a.sent();\n                        if (!details)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _a.sent();\n                        return [2 /*return*/, __assign({ type: \"settings\", id: \"settings_\" + event.transactionHash + \"_\" + event.eventId, block: block.number, timestamp: block.timestamp, txHash: event.transactionHash }, details)];\n                }\n            });\n        });\n    };\n    SettingsDecoder.prototype.decode = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, block;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case setupTopic: return [3 /*break*/, 1];\n                        }\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _b.sent();\n                        return [2 /*return*/, {\n                                type: \"setup\",\n                                id: \"setup_\" + event.transactionHash + \"_\" + event.eventId,\n                                block: block.number,\n                                timestamp: block.timestamp,\n                                txHash: event.transactionHash,\n                            }];\n                    case 3:\n                        {\n                            return [2 /*return*/, this.decodeSettingsChange(event)];\n                        }\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SettingsDecoder;\n}());\nexports.SettingsDecoder = SettingsDecoder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransferDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar TransferDecoder = /** @class */ (function () {\n    function TransferDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    TransferDecoder.prototype.decodeTokenTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, type, eventInterface, eventParams, details;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        type = \"\";\n                        if (event.topics.length === 4) {\n                            eventInterface = constants_1.erc721Interface;\n                            type = \"ERC721\";\n                        }\n                        else if (event.topics.length === 3) {\n                            eventInterface = constants_1.erc20Interface;\n                            type = \"ERC20\";\n                        }\n                        else if (event.topics.length === 2) {\n                            eventInterface = constants_1.erc20OldInterface;\n                            type = \"ERC20\";\n                        }\n                        else {\n                            return [2 /*return*/, undefined];\n                        }\n                        eventParams = eventInterface.decodeEventLog(\"Transfer\", event.data, event.topics);\n                        if (type === \"ERC20\") {\n                            details = {\n                                type: \"ERC20\",\n                                tokenAddress: event.address,\n                                value: eventParams.amount.toString()\n                            };\n                        }\n                        else {\n                            details = {\n                                type: \"ERC721\",\n                                tokenAddress: event.address,\n                                tokenId: eventParams.tokenId.toString()\n                            };\n                        }\n                        return [2 /*return*/, {\n                                type: \"transfer\",\n                                id: id,\n                                block: block.number,\n                                txHash: event.transactionHash,\n                                timestamp: block.timestamp,\n                                sender: eventParams.from,\n                                receipient: eventParams.to,\n                                direction: (eventParams.to.toLowerCase() === safe.toLowerCase() ? \"INCOMING\" : \"OUTGOING\"),\n                                details: details\n                            }];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decodeEtherTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, eventParams, details, transferMeta;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"SafeReceived\", event.data, event.topics);\n                        details = {\n                            type: \"ETHER\",\n                            value: eventParams.value.toString()\n                        };\n                        transferMeta = {\n                            type: \"transfer\",\n                            id: id,\n                            sender: eventParams.sender,\n                            receipient: safe,\n                            direction: \"INCOMING\",\n                            timestamp: block.timestamp,\n                            txHash: event.transactionHash,\n                            details: details\n                        };\n                        return [2 /*return*/, transferMeta];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.transferTopic: return [3 /*break*/, 1];\n                            case constants_1.etherReceivedTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        if (!event.account)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.decodeTokenTransfer(event.account, event)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        return [4 /*yield*/, this.decodeEtherTransfer(event.address, event)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return TransferDecoder;\n}());\nexports.TransferDecoder = TransferDecoder;\n","export abstract class AbstractDB {\n    private internalDb: IDBDatabase | undefined;\n    private indexedDB = window.indexedDB;\n    readonly dbKey: string;\n    readonly dbVersion: number;\n    readonly migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void;\n\n    constructor(dbKey: string, dbVersion: number, migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void) {\n        this.dbKey = dbKey;\n        this.dbVersion = dbVersion;\n        this.migration = migration;\n    }\n\n    async open(): Promise<IDBDatabase> {\n        console.log(\"open\")\n        if (this.internalDb) return this.internalDb\n        const dbStore = this;\n        return new Promise((callback, reject) => {\n            const request = this.indexedDB.open(this.dbKey, this.dbVersion)\n            request.onerror = function () {\n                reject(\"Error: \" + this.error);\n            }\n            request.onsuccess = function () {\n                dbStore.internalDb = this.result;\n                callback(this.result);\n            }\n            request.onupgradeneeded = function (event) {\n                console.log(\"onupgradeneeded\")\n                dbStore.migration(this.result, event.oldVersion, this.result.version)\n            }\n        })\n    }\n}\n\nexport abstract class AbstractDAO<T> {\n    readonly db: AbstractDB;\n    readonly storeName: string;\n\n    constructor(db: AbstractDB, storeName: string) {\n        this.db = db;\n        this.storeName = storeName;\n    }\n\n\n    async add(entry: T): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.put(entry).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async remove(id: string): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.delete(id).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async get(id: string): Promise<T> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.get(id).onsuccess = function () {\n                callback(this.result as T)\n            }\n        })\n    }\n\n    async getAllByIndex(index: string, key?: IDBKeyRange | IDBValidKey): Promise<T[]> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.index(index).getAll(key).onsuccess = function () {\n                callback(this.result.reverse() as T[])\n            }\n        })\n    }\n\n    async drop(): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            transaction.objectStore(this.storeName).clear().onsuccess = function () {\n                callback()\n            }\n        })\n    }\n}","import { AbstractDB } from \"./base\";\n\nexport const INTERACTIONS_STORE = \"interactions\"\nexport const INTERACTIONS_KEY = \"id\"\nexport const INTERACTIONS_INDEX = \"timestamp\"\n\nexport const QUEUED_TX_STORE = \"queued_tx\"\nexport const QUEUED_TX_KEY = \"id\"\nexport const QUEUED_TX_INDEX = \"nonce\"\n\nexport const TX_SIGNATURES_STORE = \"tx_signatures\"\nexport const TX_SIGNATURES_KEY = \"id\"\nexport const TX_SIGNATURES_INDEX = \"safeTxHash\"\n\nexport class SafeDB extends AbstractDB {\n    constructor(safe: string) {\n        super(safe, 3, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(INTERACTIONS_STORE, { keyPath: INTERACTIONS_KEY })\n                store.createIndex(INTERACTIONS_INDEX, INTERACTIONS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(QUEUED_TX_STORE, { keyPath: QUEUED_TX_KEY })\n                store.createIndex(QUEUED_TX_INDEX, QUEUED_TX_INDEX, { unique: false })\n            }\n            if (oldVersion < 3) {\n                const store = db.createObjectStore(TX_SIGNATURES_STORE, { keyPath: TX_SIGNATURES_KEY })\n                store.createIndex(TX_SIGNATURES_INDEX, TX_SIGNATURES_INDEX, { unique: false })\n            }\n        });\n    }\n}","import { SafeInteraction } from \"safe-indexer-ts\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { AbstractDAO } from \"./base\";\nimport { INTERACTIONS_INDEX, INTERACTIONS_STORE, QUEUED_TX_INDEX, QUEUED_TX_STORE, SafeDB, TX_SIGNATURES_INDEX, TX_SIGNATURES_STORE } from \"./safe\";\n\n\nexport class InteractionsDAO extends AbstractDAO<SafeInteraction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), INTERACTIONS_STORE)\n    }\n\n    getAll(): Promise<SafeInteraction[]> {\n        return this.getAllByIndex(INTERACTIONS_INDEX)\n    }\n\n}\n\nexport interface QueuedSafeTransaction extends SafeTransaction {\n    id: string\n    version: string\n}\n\nexport class QueuedInteractionsDAO extends AbstractDAO<QueuedSafeTransaction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), QUEUED_TX_STORE)\n    }\n\n    getAll(nonce: number): Promise<QueuedSafeTransaction[]> {\n        return this.getAllByIndex(QUEUED_TX_INDEX, IDBKeyRange.lowerBound(nonce))\n    }\n}\n\nexport class TxSignaturesDAO extends AbstractDAO<SafeTransactionSignature> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), TX_SIGNATURES_STORE)\n    }\n\n    getAll(safeTxHash: string): Promise<SafeTransactionSignature[]> {\n        return this.getAllByIndex(TX_SIGNATURES_INDEX, safeTxHash)\n    }\n}","import { State } from \"safe-indexer-ts\";\n\nconst parseIntWithFallback = (input: string | undefined | null, fallback: number): number => {\n    if (!input) return fallback\n    const value = parseInt(input)\n    if (Number.isNaN(value)) return fallback\n    return value\n}\n\nexport class IndexerState implements State {\n    safe: string;\n    defaultBlock: number;\n    private _lastIndexedBlock: number;\n    private _earliestIndexedBlock: number; // 8485873 is the Block of initial 1.3.0 deployment\n    private _earliestBlock: number;\n\n    constructor(safe: string, defaultBlock?: number) {\n        this.safe = safe;\n        this.defaultBlock = defaultBlock || -1;\n        const storedEarliestIndexedBlock = localStorage.getItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe);\n        this._earliestIndexedBlock = parseIntWithFallback(storedEarliestIndexedBlock, this.defaultBlock);\n        const storedLastIndexedBlock = localStorage.getItem(\"indexer_state_safe_last_indexed_block\" + this.safe);\n        this._lastIndexedBlock = parseIntWithFallback(storedLastIndexedBlock, this.defaultBlock);\n        const storedEarliestBlock = localStorage.getItem(\"indexer_state_safe_earliest_block\" + this.safe);\n        this._earliestBlock = parseIntWithFallback(storedEarliestBlock, 0);\n    }\n\n    set lastIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_last_indexed_block\" + this.safe, value.toString())\n        this._lastIndexedBlock = value;\n    }\n    get lastIndexedBlock() {\n        return this._lastIndexedBlock\n    }\n\n    set earliestIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe, value.toString())\n        this._earliestIndexedBlock = value;\n    }\n    get earliestIndexedBlock() {\n        return this._earliestIndexedBlock\n    }\n\n    set earliestBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_block\" + this.safe, value.toString())\n        this._earliestBlock = value;\n    }\n    get earliestBlock() {\n        return this._earliestBlock\n    }\n\n    reset() {\n        localStorage.removeItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_last_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_earliest_block\" + this.safe)\n        this._lastIndexedBlock = this.defaultBlock\n        this._earliestIndexedBlock = this.defaultBlock\n    }\n}","import { providers } from \"ethers\";\nimport { Callback, IndexerStatus, SafeIndexer, SafeInteraction } from \"safe-indexer-ts\";\nimport { NetworkConfig } from \"../../components/provider/AppSettingsProvider\";\nimport { InteractionsDAO } from \"../db/interactions\";\nimport { IndexerState } from \"../state/indexer\";\nimport { Account } from \"../utils/account\";\nimport { getIndexer } from \"../utils/indexer\";\n\n\nexport class TransactionRepository implements Callback {\n    callbacks: Set<Callback> = new Set()\n    currentStatus: IndexerStatus | undefined\n    indexer: SafeIndexer | undefined\n    state: IndexerState\n    db: InteractionsDAO\n    account: Account\n    networkConfig: NetworkConfig\n\n    constructor(account: Account, networkConfig: NetworkConfig) {\n        this.account = account\n        this.networkConfig = networkConfig\n        this.db = new InteractionsDAO(account.id)\n        this.state = new IndexerState(account.id, networkConfig.startingBlock)\n    }\n\n    connect(provider: providers.Provider): () => void {\n        this.disconnect()\n        console.log(\"connect\")\n        const indexer = getIndexer(this.account, provider, this.state, this.networkConfig, this)\n        this.indexer = indexer\n        indexer.start().catch((e) => console.error(e))\n        indexer.start(true).catch((e) => console.error(e))\n        return () => {\n            this.disconnect()\n        }\n    }\n\n    disconnect() {\n        console.log(\"disconnect\")\n        this.indexer?.stop()\n        this.currentStatus = undefined\n    }\n\n    registerCallback(callback: Callback) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: Callback) {\n        this.callbacks.delete(callback)\n        this.postCurrentStatusUpdateToCallback(callback)\n    }\n\n    private checkForCreation(interactions: SafeInteraction[]) {\n        for (const interaction of interactions) {\n            console.log(interaction)\n            if (interaction.type === \"setup\" || (\n                interaction.type === \"multisig_transaction\" && interaction.details?.nonce === 0\n            )) {\n                console.log(\"Found creation, stop reverse indexing\")\n                const earliestBlock = Math.max(0, interaction.block - this.networkConfig.maxBlocks)\n                this.state.earliestBlock = earliestBlock\n                this.indexer?.updateConfig({ earliestBlock })\n                return\n            }\n        }\n    }\n\n    private async handleNewInteraction(interaction: SafeInteraction) {\n        try {\n            await this.db.add(interaction)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    onNewInteractions(interactions: SafeInteraction[]) {\n        this.checkForCreation(interactions)\n        interactions.forEach((i) => { this.handleNewInteraction(i) })\n        this.callbacks.forEach((callback) => {\n            try {\n                callback.onNewInteractions(interactions)\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    onStatusUpdate(update: IndexerStatus) {\n        this.currentStatus = update\n        this.postCurrentStatusUpdate()\n    }\n\n    private postCurrentStatusUpdate() {\n        if (!this.currentStatus) return\n        this.callbacks.forEach((cb) => { this.postCurrentStatusUpdateToCallback(cb) })\n    }\n\n    private postCurrentStatusUpdateToCallback(callback: Callback) {\n        const currentStatus = this.currentStatus\n        if (!currentStatus) return\n        try {\n            callback.onStatusUpdate?.(currentStatus)\n        } catch (e) {\n            console.log(e)\n        }\n    }\n\n    async getTx(id: string): Promise<SafeInteraction> {\n        return this.db.get(id)\n    }\n\n    async getAllTxs(): Promise<SafeInteraction[]> {\n        return this.db.getAll()\n    }\n\n    async reindex(): Promise<boolean> {\n        this.currentStatus = undefined\n        const indexer = this.indexer\n        if (!indexer) return false;\n        indexer.pause();\n        await this.db.drop();\n        this.state.reset();\n        indexer.resume();\n        return true\n    }\n\n}","\nimport { providers } from 'ethers';\nimport { Callback, EthersLoader, EthersParser, IncomingEthEventSource, IncomingTransferEventSource, ModuleTransactionEventSource, MultisigTransactionEventSource, OutgoingTransferEventSource, SafeIndexer, SafeIndexerUserConfig, SettingsChangeEventSource } from 'safe-indexer-ts'\nimport { NetworkConfig } from '../../components/provider/AppSettingsProvider';\nimport { IndexerState } from '../state/indexer';\nimport { Account } from './account';\n\nexport const getIndexer = (account: Account, provider: providers.Provider, state: IndexerState, networkConfig: NetworkConfig, callback: Callback): SafeIndexer => {\n    const loader = new EthersLoader(provider, [\n        new MultisigTransactionEventSource(provider), \n        new ModuleTransactionEventSource(provider), \n        new IncomingTransferEventSource(provider), \n        new OutgoingTransferEventSource(provider), \n        new IncomingEthEventSource(provider), \n        new SettingsChangeEventSource(provider)\n    ])\n    const parser = new EthersParser(provider)\n    const config: SafeIndexerUserConfig = { chainId: account.chainId, safe: account.address, maxBlocks: networkConfig.maxBlocks, logger: console, earliestBlock: state.earliestBlock }\n    return new SafeIndexer(state, loader, parser, callback, config)\n}","import { ethers, providers, Signer } from \"ethers\";\nimport { TypedDataSigner } from \"@ethersproject/abstract-signer\"\nimport React, { useContext, useMemo, useState } from \"react\";\n\ndeclare let window: any;\n\nexport interface NetworkConfig {\n    maxBlocks: number,\n    startingBlock: number\n}\n\nconst defaultConfig: NetworkConfig = {\n    startingBlock: -1,\n    maxBlocks: 1000\n}\n\nexport interface AppSettings {\n    readonly customRpc: string,\n    readonly useCustomRpc: boolean,\n    readonly provider: providers.JsonRpcProvider | undefined,\n    readonly signer: Signer & TypedDataSigner | undefined,\n    readonly networkConfig: NetworkConfig,\n    toggleCustomRpc: (value: boolean) => void\n    updateCustomRpc: (value: string) => void\n    updateNetworkConfig: (value: NetworkConfig) => void\n    enable: () => Promise<string[]>\n}\n\nconst AppSettingsContext = React.createContext<AppSettings | undefined>(undefined);\n\nexport const useAppSettings = () => {\n    const appSettings = useContext(AppSettingsContext)\n    if (!appSettings) throw Error(\"App Settings not available!\")\n    return appSettings\n}\n\nexport const AppSettingsProvider: React.FC = ({ children }) => {\n    const [useCustomRpc, setUseCustomRpc] = useState(localStorage.getItem(\"app_state_use_rpc\") === \"true\")\n    const [customRpc, setCustomRpc] = useState(localStorage.getItem(\"app_state_rpc\") || \"\")\n    const storedConfig = localStorage.getItem(\"app_state_network_config\")\n    const [networkConfig, setNetworkConfig] = useState<NetworkConfig>(storedConfig ? JSON.parse(storedConfig) : defaultConfig)\n    const toggleCustomRpc = (value: boolean) => {\n        localStorage.setItem(\"app_state_use_rpc\", value ? \"true\" : \"false\")\n        setUseCustomRpc(value)\n    }\n    const updateCustomRpc = (value: string) => {\n        localStorage.setItem(\"app_state_rpc\", value)\n        setCustomRpc(value)\n    }\n    const updateNetworkConfig = (value: NetworkConfig) => {\n        const serialized = JSON.stringify({\n            maxBlocks: value.maxBlocks || 100,\n            startingBlock: value.startingBlock || -1\n        })\n        localStorage.setItem(\"app_state_network_config\", serialized)\n        setNetworkConfig(value)\n    }\n    const provider = useMemo(() => {\n        if (useCustomRpc) {\n            if (!customRpc) return undefined\n            return new ethers.providers.JsonRpcProvider(customRpc); // \"https://bsc-dataseed1.ninicoin.io\" \n        }\n        if (window.ethereum) {\n            return new ethers.providers.Web3Provider(window.ethereum)\n        }\n        return undefined\n    }, [useCustomRpc, customRpc])\n    const enable = async (): Promise<string[]> => {\n        if (window.ethereum) {\n            return window.ethereum.enable()\n        }\n        return []\n    }\n    return <AppSettingsContext.Provider value={{ customRpc, useCustomRpc, provider, signer: provider?.getSigner(), networkConfig, toggleCustomRpc, updateCustomRpc, updateNetworkConfig, enable }}>\n        {children}\n    </AppSettingsContext.Provider>\n}\n\nexport default AppSettingsProvider","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { TransactionRepository as TransactionRepository } from \"../../logic/account/TransactionRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst TransactionRepoContext = React.createContext<TransactionRepository | undefined>(undefined);\n\nexport const useTransactionRepo = () => {\n    const repo = useContext(TransactionRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const TransactionRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { provider, networkConfig } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new TransactionRepository(account, networkConfig)\n    }, [ account, networkConfig ])\n\n    useEffect(() => {\n        if (!provider) return\n        return repo.connect(provider)\n    }, [repo, provider])\n\n    useEffect(() => {\n        return () => repo.disconnect()\n    }, [repo])\n\n    return <TransactionRepoContext.Provider value={repo}>\n        { children }\n    </TransactionRepoContext.Provider>\n}\n\nexport default TransactionRepositoryProvider","import { ethers } from 'ethers'\nimport shortNames from './shotNameToChainId.json'\n\nexport interface Account {\n    id: string\n    chainId: number\n    address: string\n}\n\nexport const buildCaip2Addr = (chainId: number, address: string) => {\n    return `eip155:${chainId}:${address}`\n}\n\nexport const shortNameToChainId = (shortName: string): string | undefined => {\n    return (shortNames as Record<string, string>)[shortName]\n}\n\nexport const parseAddress = (address: string): string | undefined => {\n    try {\n        return ethers.utils.getAddress(address)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseChainId = (chainId: string): number | undefined => {\n    try {\n        return parseInt(chainId)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseAccount = (account: string): Account | undefined => {\n    const accountParts = account.split(\":\")\n    let network = undefined\n    let address = undefined\n    if (accountParts.length == 1) {\n        address = parseAddress(accountParts[0])\n        network = \"eip155:1\"\n    } else if (accountParts.length == 2) {\n        address = parseAddress(accountParts[1])\n        network = shortNameToChainId(accountParts[0])\n    } else if (accountParts.length == 3) {\n        address = parseAddress(accountParts[2])\n        network = `${accountParts[0]}:${accountParts[1]}`\n    }\n\n    if (!network || !address) return undefined\n    const networkParts = network.split(\":\")\n    if (networkParts.length != 2 || networkParts[0] !== \"eip155\") return undefined\n    const chainId = parseChainId(networkParts[1])\n    if (!chainId) return undefined\n    return {\n        address,\n        chainId: chainId,\n        id: buildCaip2Addr(chainId, address)\n    }\n}","import { useMediaQuery } from \"@mui/material\";\nimport { buildCaip2Addr } from \"../../logic/utils/account\";\nimport { useAccount } from \"../account/Dashboard\";\n\nexport const useDektopLayout = (): boolean => useMediaQuery('(min-width:600px)');\n\nexport const copyToClipboard = (text: string, copyMessage?: string) => {\n    try {\n        navigator.clipboard.writeText(text)\n        if (copyMessage) {\n            window.alert(copyMessage)\n        }\n    }  catch (e) {\n        console.log(e)\n    }\n}\n\nexport const useCopyAddress = (address: string): (() => void) => {\n    const account = useAccount()\n    const shareableText = buildCaip2Addr(account.chainId, address)\n    return () => { copyToClipboard(shareableText, \"Copied address to clipboard!\") }\n}","import { Typography } from \"@mui/material\"\nimport { styled } from \"@mui/system\"\n\nexport const Group = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const Row = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'row'\n}))\n\nexport const Header = styled('div')(({ theme }) => ({\n    textAlign: 'start'\n}))\n\nexport const Entry = styled('div')(({ theme }) => ({\n    display: 'flex',\n    alignItems: 'center',\n    paddingBottom: 16\n}))\n\nexport const LongText = styled(Typography)(({ theme }) => ({\n    width: '100%',\n    textAlign: 'start',\n    wordWrap: 'break-word'\n}))","export const shortAddress = (address: string, visibleChars: number = 4): string => {\n    const length = address.length\n    if (length <= 2 * visibleChars + 2) return address;\n    return \"0x\" + address.slice(2, 2 + visibleChars) + '...' + address.slice(address.length - visibleChars)\n}","import { IconButton, Typography } from \"@mui/material\"\nimport { useMemo } from \"react\";\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { ContentCopy } from \"@mui/icons-material\";\nimport { Row } from \"../../styled/tables\";\nimport { shortAddress } from \"../../logic/utils/address\";\nimport { copyToClipboard, useCopyAddress } from \"./media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AddressInfo: React.FC<{ address: string, onClick?: (address: string) => void  }> = ({ address, onClick }) => {\n    const iconSrc = useMemo(() => makeBlockie(address), [address]);\n    const copyAddress = useCopyAddress(address)\n    return <Row sx={{\n        width: `calc(100% - 32px)`,\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" onClick={() => onClick?.(address) } />\n        <Typography sx={{ fontFamily: 'Monospace', paddingX: '8px' }} onClick={() => onClick?.(address) } >{shortAddress(address)}</Typography>\n        <IconButton color=\"default\" component=\"span\" onClick={() => copyAddress() }>\n            <ContentCopy fontSize=\"small\" />\n        </IconButton>\n    </Row>\n}\n\nexport default AddressInfo","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { SettingsChangeTx, TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: SettingsChangeTx\n}\n\nexport const renderSettingsValue = (component: string, value: string): React.ReactNode => {\n    switch (component) {\n        case 'owners':\n        case 'modules':\n        case 'fallbackHandler':\n            return <AddressInfo address={value} />\n        default:\n            return <LongText>{value}</LongText>\n    }\n}\n\nconst capitalize = (value: string): string => {\n    if (value.length < 2) return value\n    return value.slice(0, 1).toUpperCase() + value.slice(1)\n}\n\nexport const SettingsTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>{capitalize(transaction.component)} {transaction.change}</Header>\n        <Entry>\n            {renderSettingsValue(transaction.component, transaction.value)}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group >\n}\n\nexport default SettingsTxDetails","import styled from '@emotion/styled';\nimport React from 'react'\nimport { SettingsChangeTx } from 'safe-indexer-ts'\nimport { Entry, Group, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\nimport { renderSettingsValue } from '../details/SettingsTxDetails';\n\nexport interface Props {\n    settingsChange: SettingsChangeTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'inline-block',\n    width: '100%',\n    wordWrap: 'break-word'\n}))\n\nexport const SettingsTxSummary: React.FC<Props> = ({ settingsChange, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(settingsChange.id)}>\n        {`${settingsChange.component} ${settingsChange.change}`}\n        {hideDate && renderSettingsValue(settingsChange.component, settingsChange.value)}\n        {!hideDate && (<>\n            <br />{new Date(settingsChange.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default SettingsTxSummary","import styled from '@emotion/styled';\nimport React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event, TransferTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    transfer: TransferTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const TransferTxSummary: React.FC<Props> = ({ transfer, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(transfer.id)}>\n        {`${transfer.direction} ${transfer.details.type} Transfer`}\n        {!hideDate && (<>\n            <br />{new Date(transfer.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default TransferTxSummary","import React from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\nimport TransferTxSummary from './summary/TransferTxSummary'\n\nexport interface Props {\n    interaction: SafeInteraction,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\nexport const TxSummary: React.FC<Props> = ({ interaction, showDetails, hideDate }) => {\n    switch (interaction.type) {\n        case \"multisig_transaction\":\n        case \"module_transaction\":\n        case \"setup\":\n            return <div onClick={() => showDetails?.(interaction.id)}>\n                {`${interaction.type}`}<br />\n                {!hideDate ? `${new Date(interaction.timestamp * 1000).toUTCString()}` : \"\"}<br />\n                <br />\n            </div>\n        case \"settings\":\n            return <SettingsTxSummary settingsChange={interaction} hideDate={hideDate} showDetails={showDetails} />\n        case \"transfer\":\n            return <TransferTxSummary transfer={interaction} hideDate={hideDate} showDetails={showDetails} />\n        default:\n            return <div>\n                Unknown Interaction\n            </div>\n    }\n}\n\nexport default TxSummary","import React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    interactions: SafeInteractionEvent[]\n}\n\nconst eventSummary = (event: Event): ReactElement => {\n    return <div>\n        {`Event - ${event.eventId}`}<br />\n        <br />\n    </div>\n}\n\nexport const TxEvents: React.FC<Props> = ({ interactions }) => {\n    if (interactions.length == 0) return <></>\n    return <>\n        <Header>Events:</Header>\n        <Group sx={{ textAlign: \"left\" }}>\n            {interactions.map((e) => (<Entry>\n                {e.interaction ? <TxSummary interaction={e.interaction} hideDate /> : eventSummary(e.event)}\n            </Entry>))}\n        </Group>\n    </>\n}\n\nexport default TxEvents","import React, { useState } from 'react'\nimport { Button, Link, Typography } from '@mui/material';\nimport { Group, LongText } from '../../styled/tables';\n\nexport interface Props {\n    data: string\n}\n\nexport const TxData: React.FC<Props> = ({ data }) => {\n    const [collapsed, setCollapsed] = useState<boolean>(true)\n    const decodePossible = data.length >= 10\n    const canCollapse = data.length >= 42\n    const displayData = canCollapse && collapsed ? data.slice(0, 24) + `...` : data\n    return <Group sx={{ paddingBottom: \"16px\" }}>\n        <LongText>{displayData} {canCollapse && (<Link onClick={() => { setCollapsed(!collapsed) }} sx={{ textDecoration: \"none\" }}>{collapsed ? \"Expand\" : \"Collapse\"}</Link>)}</LongText>\n        {decodePossible && (<Button onClick={() => { window.open('https://rimeissner.dev/transaction-decoder/#/?data=' + data, '_blank'); }}>Decode</Button>)}\n    </Group>\n}\n\nexport default TxData","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { ModuleTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport { Typography } from '@mui/material';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: ModuleTx\n}\n\nexport const ModuleTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Module:</Header>\n        <Entry>\n            <AddressInfo address={transaction.module} />\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default ModuleTxDetails","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { MultisigTx } from 'safe-indexer-ts'\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: MultisigTx\n}\n\nexport const MultisigTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        <Header>Id:</Header>\n        <Entry>\n            <LongText>{transaction.safeTxHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n                <Header>Nonce:</Header>\n                <Entry>\n                    <LongText>{transaction.details.nonce}</LongText>\n                </Entry>\n                <Header>Signatures:</Header>\n                <Entry>\n                    <LongText>{transaction.details.signatures}</LongText>\n                </Entry>\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default MultisigTxDetails","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: TransferTx\n}\n\nconst renderDetails = (details: TransferDetails): ReactElement => {\n    let asset: string = \"\"\n    let subjectTitle: string = \"\"\n    let subject: string = \"\"\n    switch (details.type) {\n        case \"ERC20\":\n            asset = \"ERC20 - \" + details.tokenAddress\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        case \"ERC721\":\n            asset = \"ERC721 - \" + details.tokenAddress\n            subjectTitle = \"ID\"\n            subject = details.tokenId\n            break\n        case \"ETHER\":\n            asset = \"Ether\"\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        default:\n            break\n    }\n    return (<>\n        <Header>Asset:</Header>\n        <Entry>\n            <Typography>{asset}</Typography>\n        </Entry>\n        <Header>{subjectTitle}</Header>\n        <Entry>\n            <Typography>{subject}</Typography>\n        </Entry>\n    </>)\n}\n\nexport const TransferTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>From:</Header>\n        <Entry>\n            <AddressInfo address={transaction.sender} />\n        </Entry>\n        <Header>To:</Header>\n        <Entry>\n            <AddressInfo address={transaction.receipient} />\n        </Entry>\n        {renderDetails(transaction.details)}\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group>\n}\n\nexport default TransferTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { ReactElement, useEffect, useState } from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\nimport ModuleTxDetails from './details/ModuleTxDetails'\nimport MultisigTxDetails from './details/MultisigTxDetails'\nimport SettingsTxDetails from './details/SettingsTxDetails'\nimport TransferTxDetails from './details/TransferTxDetails'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst renderDetails = (interaction?: SafeInteraction): ReactElement => {\n    switch (interaction?.type) {\n        case \"multisig_transaction\":\n            return (<MultisigTxDetails transaction={interaction} />)\n        case \"module_transaction\":\n            return (<ModuleTxDetails transaction={interaction} />)\n        case \"transfer\":\n            return (<TransferTxDetails transaction={interaction} />)\n        case \"settings\":\n            return <SettingsTxDetails transaction={interaction} />\n        default:\n            return (<>\"Unknown details\"</>)\n    }\n}\n\nexport const TxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [debugLink, setDebugLink] = useState<string | undefined>(undefined)\n    const txRepo = useTransactionRepo()\n    const account = useAccount()\n    const [interaction, setInteraction] = useState<SafeInteraction | undefined>(undefined)\n    useEffect(() => {\n        setInteraction(undefined)\n        if (!id) return\n        const loadInteraction = async () => {\n            try {\n                setInteraction(await txRepo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        loadInteraction()\n    }, [id, txRepo, setInteraction, handleClose])\n\n    useEffect(() => {\n        if (!interaction) {\n            setDebugLink(undefined)\n            return\n        }\n        let link = \"https://dashboard.tenderly.co/tx/\"\n        link += account.chainId + \"/\"\n        link += interaction?.txHash\n        setDebugLink(link)\n    }, [interaction, account])\n    return <TxDialog open={!!id} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Transaction Details</DialogTitle>\n        <DialogContent>\n            {renderDetails(interaction)}\n        </DialogContent>\n        <DialogActions>\n            {debugLink && (<Button onClick={() => { window.open(debugLink, \"_blank\") }}>Debug</Button>)}\n            <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default TxDetails","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Callback, SafeInteraction } from 'safe-indexer-ts';\nimport { Button, styled, Typography } from '@mui/material';\nimport { useAccount } from '../Dashboard';\nimport SettingsDialog from '../../settings/SettingsDialog';\nimport TxDetails from './TxDetails';\nimport TxSummary from './TxSummary';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\",\n}))\n\nfunction Transactions() {\n  const account = useAccount()\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [txs, setTxs] = useState<SafeInteraction[]>([])\n  const accountRepo = useTransactionRepo()\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: () => {\n        accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n      }\n    }\n    accountRepo.registerCallback(callback)\n    return () => accountRepo.unregisterCallback(callback)\n  }, [accountRepo, txs, setTxs])\n\n  useEffect(() => {\n    // Reset id if account changes\n    setSelectedId(undefined)\n  }, [account])\n\n  const showDetails = useCallback(async (id) => {\n    setSelectedId(id)\n  }, [setSelectedId])\n\n  useEffect(() => {\n    setTxs([])\n    accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n  }, [accountRepo, setTxs])\n\n  const details = useMemo(() => {\n    return <TxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      {txs.map((e) => <TxSummary interaction={e} showDetails={(id) => showDetails(id)} />)}\n      {details}\n    </Root>\n  );\n}\n\nexport default Transactions;\n","import { Signer, TypedDataSigner, TypedDataDomain, TypedDataField } from \"@ethersproject/abstract-signer\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"./account\";\n\nexport type SafeSignatureType = \"eip712\" | \"eth_sign\" | \"pre_validated\" | \"contract\"\n\nconst recoverEthSign = (safeTxHash: string, signature: string) => {\n    const hash = ethers.utils.hashMessage(ethers.utils.arrayify(safeTxHash))\n    // TODO: adjust v\n    return ethers.utils.recoverAddress(hash, signature)\n}\n\nconst recoverEIP712 = (safeTxHash: string, signature: string) => {\n    return ethers.utils.recoverAddress(safeTxHash, signature)\n}\n\nconst recoverPreValidated = async (signature: string) => {\n    // TODO: add on-chain check\n    return signature.slice(0, 66)\n}\n\nexport const checkSafeTransactionSignature = async (signature: SafeTransactionSignature) => {\n    let signer;\n    switch (signature.type) {\n        case \"eth_sign\": {\n            signer = recoverEthSign(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"eip712\": {\n            signer = recoverEIP712(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"pre_validated\": {\n            signer = recoverPreValidated(signature.data)\n            break\n        }\n        case \"contract\": {\n            throw Error(\"Contract signatures not supported yet\")\n        }\n        default: {\n            throw Error(\"Unknown signature type\")\n        }\n    }\n    if (signer !== signature.signer) throw Error(`Unexpected signer! Expected ${signature.signer} got ${signer}`)\n}\n\nexport const shareableSignatureString = (signature: SafeTransactionSignature): string => {\n    return `${signature.data}:${signature.signer}:${signature.safeTxHash}:${signature.type}`\n}\n\nexport const parseSafeSignature = async (signatureString: string, safeTxHash?: string, sigType?: SafeSignatureType): Promise<SafeTransactionSignature> => {\n    const signatureParts = signatureString.split(\":\")\n    if (\n        (signatureParts.length == 2 && !safeTxHash && !sigType) ||\n        (signatureParts.length == 3 && !sigType) ||\n        signatureParts.length != 4\n    ) {\n        throw Error(\"Missing Safe signature info\")\n    }\n    const data = signatureParts[0]\n    const signer = signatureParts[1]\n    const hash = safeTxHash || signatureParts[2]\n    // TODO: verify signature type\n    const type = sigType || signatureParts[3] as SafeSignatureType\n    const id = ethers.utils.keccak256(data + hash.slice(2))\n    return {\n        id,\n        type,\n        signer,\n        safeTxHash: hash,\n        data\n    }\n}\n\nexport const parseSignatureType = (signature: string): SafeSignatureType => {\n    const sigType = signature.slice(-2)\n    switch(sigType) {\n        case \"00\": {\n            return \"contract\" // contract signature (aka old eip 1271 version)\n        }\n        case \"01\": {\n            return \"pre_validated\" // pre-validated signature\n        }\n        case \"1b\": \n        case \"1c\": {\n            return \"eip712\" // Typed Data based signature\n        }\n        case \"1f\": \n        case \"20\": {\n            return \"eth_sign\" // eth_sign based signature\n        }\n        default: \n            throw Error(\"Unknown signature type\")\n    }\n}\n\nconst getEIP712Domain = (version: string, account: Account): TypedDataDomain => {\n    switch (version) {\n        case \"1.3.0\": {\n            return {\n                verifyingContract: account.address,\n                chainId: account.chainId\n            }\n        }\n        default: {\n            return { verifyingContract: account.address }\n        }\n    }\n}\n\nconst getEIP712TxType = (version: string): Record<string, TypedDataField[]> => {\n    switch (version) {\n        case \"0.1.0\": {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"dataGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n        default: {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"baseGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n    }\n}\n\nconst signEip712 = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer._signTypedData(\n        getEIP712Domain(transaction.version, account),\n        getEIP712TxType(transaction.version),\n        transaction\n    )\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEIP712(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    return {\n        type: \"eip712\",\n        id: signatureString,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nconst signMessage = async (signer: Signer & TypedDataSigner, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer.signMessage(arrayify(transaction.id))\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEthSign(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    return {\n        type: \"eth_sign\",\n        id: signatureString,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nexport const buildPreValidatedSignature = async (signerAddress: string, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signature = \"0x000000000000000000000000\" + signerAddress.slice(2) + \"0000000000000000000000000000000000000000000000000000000000000000\" + \"01\"\n    return {\n        id: signature + transaction.id,\n        safeTxHash: transaction.id,\n        type: \"pre_validated\",\n        signer: signerAddress,\n        data: signature,\n    }\n}\n\nexport const signQueuedTx = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    try {\n        return await signEip712(signer, account, transaction)\n    } catch (e: any) {\n        if (e.code && e.code === 4001) {\n            console.warn(\"User canceled signing\")\n            throw e\n        }\n        console.warn(\"Could not sign with EIP-712\")\n    }\n    return await signMessage(signer, transaction) \n}","import { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { SafeStatus } from \"./safe\";\nimport { buildPreValidatedSignature } from \"./signatures\";\n\nexport const prepareSignatures = async (status: SafeStatus, tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[], submitterAddress?: string): Promise<SafeTransactionSignature[]> => {\n    const signatureMap = new Map<String, SafeTransactionSignature>()\n    for (const signature of signatures) {\n        if (status.owners.indexOf(signature.signer) < 0) continue\n        if (submitterAddress === signature.signer || signatureMap.has(signature.signer)) continue\n        signatureMap.set(signature.signer, signature)\n    }\n    const submitterIsOwner = submitterAddress && status.owners.indexOf(submitterAddress) >= 0\n    const requiredSigntures = submitterIsOwner ? status.threshold.sub(1) : status.threshold\n    if (requiredSigntures.toNumber() > signatureMap.size) throw Error(`Not enough signatures (${signatureMap.size} of ${requiredSigntures})`)\n    const signatureArray = []\n    if (submitterIsOwner) {\n        signatureArray.push(await buildPreValidatedSignature(submitterAddress, tx))\n    }\n    return signatureArray.concat(Array.from(signatureMap.values()).slice(0, requiredSigntures.toNumber()))\n}\n\nconst buildStaticPart = (signature: SafeTransactionSignature, offset: number): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return \"\" +\n                ethers.utils.defaultAbiCoder.encode([\"address\"], [signature.signer]).slice(2) +\n                ethers.utils.defaultAbiCoder.encode([\"uint256\"], [offset]).slice(2) +\n                \"00\"\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return signature.data.slice(2)\n    }\n}\n\nconst buildDynamicPart = (signature: SafeTransactionSignature): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return ethers.utils.defaultAbiCoder.encode([\"bytes\"], [arrayify(signature.data)]).slice(2)\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return \"\"\n    }\n}\n\nexport const buildSignatureBytes = (signatures: SafeTransactionSignature[]): string => {\n    signatures.sort((left, right) => left.signer.toLowerCase().localeCompare(right.signer.toLowerCase()))\n    let staticParts = \"\"\n    let dynamicParts = \"\"\n    for (const sig of signatures) {\n        staticParts += buildStaticPart(sig, dynamicParts.length / 2)\n        dynamicParts += buildDynamicPart(sig)\n    }\n    return \"0x\" + staticParts + dynamicParts\n}","import { Contract, PopulatedTransaction } from \"@ethersproject/contracts\";\nimport { safeInterface, SignedSafeTransaction } from \"safe-indexer-ts\";\nimport { ethers, BigNumber, Signer } from \"ethers\";\nimport { SafeTransaction } from \"../models/transactions\";\n\nexport interface SafeStatus {\n    nonce: BigNumber,\n    threshold: BigNumber,\n    owners: string[],\n    version: string\n}\n\nexport class Safe {\n    protected readonly safeContract: Contract\n\n    constructor(address: string, providerOrSigner?: ethers.providers.Provider | Signer) {\n        this.safeContract = new Contract(address, safeInterface, providerOrSigner)\n    }\n\n    writable(signer: Signer): WritableSafe {\n        return new WritableSafe(this.safeContract.address, signer)\n    }\n\n    nonce(): Promise<BigNumber> {\n        return this.safeContract.nonce()\n    }\n\n    owners(): Promise<string> {\n        return this.safeContract.getOwners()\n    }\n\n    async status(): Promise<SafeStatus> {\n        const information = await Promise.all([\n            this.safeContract.nonce(),\n            this.safeContract.getThreshold(),\n            this.safeContract.getOwners(),\n            this.safeContract.VERSION(),\n        ])\n        return {\n            nonce: information[0],\n            threshold: information[1],\n            owners: information[2],\n            version: information[3]\n        }\n    }\n\n    async getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }> {\n        const hash: string = await this.safeContract.getTransactionHash(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.nonce\n        )\n        const version: string = await this.safeContract.VERSION()\n        return { hash, version }\n    }\n\n    populateTx(tx: SignedSafeTransaction): Promise<PopulatedTransaction> {\n        return this.safeContract.populateTransaction.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}\n\nexport class WritableSafe extends Safe {\n    constructor(address: string, signer: Signer) {\n        super(address, signer)\n    }\n\n    executeTx(tx: SignedSafeTransaction): Promise<string> {\n        return this.safeContract.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}","import { providers, Signer, BigNumber } from \"ethers\";\nimport { QueuedInteractionsDAO, QueuedSafeTransaction, TxSignaturesDAO } from \"../db/interactions\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"../utils/account\";\nimport { buildSignatureBytes, prepareSignatures } from \"../utils/execution\";\nimport { Safe } from \"../utils/safe\";\n\nexport interface QueueRepositoryUpdates {\n    onNewTx: () => void\n}\n\nexport class QueueRepository {\n    callbacks: Set<QueueRepositoryUpdates> = new Set()\n    queueDao: QueuedInteractionsDAO\n    signaturesDao: TxSignaturesDAO\n    account: Account\n    safe: Safe\n\n    constructor(account: Account, provider?: providers.Provider) {\n        this.account = account\n        this.queueDao = new QueuedInteractionsDAO(account.id)\n        this.signaturesDao = new TxSignaturesDAO(account.id)\n        this.safe = new Safe(account.address, provider)\n    }\n\n    registerCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.delete(callback)\n    }\n\n    private notifyNewTxs() {\n        this.callbacks.forEach((callback) => { \n            try {\n                callback.onNewTx()\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    async addTx(tx: SafeTransaction): Promise<QueuedSafeTransaction> {\n        const hashInfo = await this.safe.getTransactionHash(tx)\n        const queuedTx = {\n            id: hashInfo.hash,\n            version: hashInfo.version,\n            ...tx\n        }\n        await this.queueDao.add(queuedTx)\n        this.notifyNewTxs()\n        return queuedTx\n    }\n\n    async deleteTx(id: string): Promise<void> {\n        await this.queueDao.remove(id)\n        this.notifyNewTxs()\n    }\n\n    async getTx(hash: string): Promise<QueuedSafeTransaction> {\n        return this.queueDao.get(hash)\n    }\n\n    async getQueuedTxs(): Promise<QueuedSafeTransaction[]> {\n        const nonce = await this.safe.nonce()\n        return this.queueDao.getAll(nonce.toNumber())\n    }\n\n    async getNextNonce(): Promise<string> {\n        const queuedTxs = await this.getQueuedTxs()\n        if (queuedTxs.length > 0) {\n            return BigNumber.from(queuedTxs[queuedTxs.length - 1].nonce).add(1).toString()\n        }\n        return (await this.safe.nonce()).toString()\n    }\n\n    async getSignatures(hash: string): Promise<SafeTransactionSignature[]> {\n        return this.signaturesDao.getAll(hash)\n    }\n\n    async addSignature(signature: SafeTransactionSignature): Promise<void> {\n        await this.signaturesDao.add(signature)\n    }\n\n    async submitTx(tx: QueuedSafeTransaction, submitter: Signer, signatures: SafeTransactionSignature[]): Promise<string> {\n        const writableSafe = this.safe.writable(submitter)\n        const status = await this.safe.status()\n        if (status.nonce.toNumber() !== tx.nonce) throw Error(`Unexpected nonce! Expected ${status.nonce} got ${tx.nonce}`)\n        const submitterAddress = await submitter.getAddress()\n        const signatureBytes = buildSignatureBytes(await prepareSignatures(status, tx, signatures, submitterAddress))\n        const signedTx = {\n            signatures: signatureBytes,\n            ...tx\n        }\n        return writableSafe.executeTx(signedTx)\n    }\n\n}","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { QueueRepository } from \"../../logic/account/QueueRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst QueueRepoContext = React.createContext<QueueRepository | undefined>(undefined);\n\nexport const useQueueRepo = () => {\n    const repo = useContext(QueueRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const QueueRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { provider } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new QueueRepository(account, provider)\n    }, [ account, provider ])\n\n    return <QueueRepoContext.Provider value={repo}>\n        { children }\n    </QueueRepoContext.Provider>\n}\n\nexport default QueueRepositoryProvider","import React from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\n\nexport interface Props {\n    transaction: QueuedSafeTransaction,\n    showDetails?: (id: string) => void\n}\nexport const QueuedTxSummary: React.FC<Props> = ({ transaction, showDetails }) => {\n    return <div onClick={() => showDetails?.(transaction.id)}>\n        {transaction.to}<br />\n        {transaction.nonce} - {transaction.version} - {transaction.id.slice(0, 10)}<br />\n    </div>\n}\n\nexport default QueuedTxSummary","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useState } from 'react'\nimport { parseSafeSignature } from '../../../logic/utils/signatures'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    safeTxHash?: string\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const AddSignatureDialog: React.FC<Props> = ({ safeTxHash, open, handleClose, handleNewSignature }) => {\n    const [signerString, setSignerString] = useState(\"\")\n    const [signatureString, setSignatureString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n\n    const handleAdd = async () => {\n        if (!safeTxHash) return\n        try {\n            const signature = await parseSafeSignature(signatureString, safeTxHash)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n            setSignerString(\"\")\n            setSignatureString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Add Signature</DialogTitle>\n        <DialogContent>\n            <TextField label=\"Signature\" onChange={(e) => setSignatureString(e.target.value)} value={signatureString} fullWidth /><br />\n            <TextField label=\"Signer (optional)\" onChange={(e) => setSignerString(e.target.value)} value={signerString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleAdd}>Add</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default AddSignatureDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { parseSafeSignature, signQueuedTx } from '../../../logic/utils/signatures'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const SignTransactionDialog: React.FC<Props> = ({ transaction, open, handleClose, handleNewSignature }) => {\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n    const { signer, enable } = useAppSettings()\n\n    const handleSign = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const accounts = await enable()\n            if (accounts.length === 0) throw Error(\"No accounts available\")\n            const signature = await signQueuedTx(signer, account, transaction)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleSign()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Sign Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default SignTransactionDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleTxSubmitted?: (ethereumTxHash: string) => void\n}\n\nexport const ExecuteTxDialog: React.FC<Props> = ({ transaction, open, handleClose, handleTxSubmitted }) => {\n    const queuedRepo = useQueueRepo()\n    const { signer, enable } = useAppSettings()\n\n    const handleExecution = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const accounts = await enable()\n            if (accounts.length === 0) throw Error(\"No accounts available\")\n            const signatures = await queuedRepo.getSignatures(transaction.id)\n            const ethereumTxHash = await queuedRepo.submitTx(transaction, signer, signatures)\n            handleTxSubmitted?.(ethereumTxHash)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleExecution()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n    <DialogTitle>Execute Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ExecuteTxDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Entry, Group, Header, LongText } from '../../../styled/tables';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { SafeTransactionSignature } from '../../../logic/models/transactions';\nimport AddSignatureDialog from './AddSignatureDialog';\nimport SignTransactionDialog from './SignTransactionDialog';\nimport ExecuteTxDialog from './ExecuteTxDialog';\nimport { shareableSignatureString } from '../../../logic/utils/signatures';\nimport { copyToClipboard, useDektopLayout } from '../../utils/media';\nimport TxData from '../../utils/TxData';\nimport { useAccount } from '../Dashboard';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport { Safe } from '../../../logic/utils/safe';\nimport { buildSignatureBytes, prepareSignatures } from '../../../logic/utils/execution';\nimport { PopulatedTransaction } from '@ethersproject/contracts';\nimport AddressInfo from '../../utils/AddressInfo';\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst shareSignature = (sig: SafeTransactionSignature) => {\n    const shareText = shareableSignatureString(sig)\n    copyToClipboard(shareText, \"Signature copied to clipboard!\")\n}\n\nexport const QueuedTxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [simulateLink, setSimulateLink] = useState<string | undefined>(undefined)\n    const [showAddSignature, setShowAddSignature] = useState(false)\n    const [showSignTransaction, setShowSignTransaction] = useState(false)\n    const [showExecuteTransaction, setShowExecuteTransaction] = useState(false)\n    const repo = useQueueRepo()\n    const account = useAccount()\n    const { signer } = useAppSettings()\n\n    const deleteTx = useCallback(async(id?: string) => {\n        if (!id) return\n        try {\n            await repo.deleteTx(id)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }, [repo, handleClose])\n\n    const [transaction, setTransaction] = useState<QueuedSafeTransaction | undefined>(undefined)\n    useEffect(() => {\n        setTransaction(undefined)\n        if (!id) return\n        const load = async () => {\n            try {\n                setTransaction(await repo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        load()\n    }, [id, repo, setTransaction, handleClose])\n\n    const [signatures, setSignatures] = useState<SafeTransactionSignature[] | undefined>(undefined)\n    const loadSignatures = useCallback(async () => {\n        console.log(\"Load Signatures\")\n        if (!id) return\n        try {\n            setSignatures(await repo.getSignatures(id))\n        } catch (e) {\n            console.error(e)\n        }\n    }, [id, repo, setSignatures])\n    useEffect(() => {\n        setSignatures(undefined)\n        loadSignatures()\n    }, [loadSignatures])\n    useEffect(() => {\n        if (!transaction || transaction.operation !== 0) {\n            setSimulateLink(undefined)\n            return\n        }\n        (async () => {\n            let populatedTx: PopulatedTransaction | undefined\n            if (signer && signatures) {\n                try {\n                    const submitterAddress = await signer.getAddress()\n                    const safe = new Safe(account.address, signer)\n                    const status = await safe.status()\n                    const signatureBytes = buildSignatureBytes(await prepareSignatures(status, transaction, signatures, submitterAddress))\n                    populatedTx = await safe.populateTx({\n                        signatures: signatureBytes,\n                        ...transaction\n                    })\n                    populatedTx.from = submitterAddress\n                } catch (e) {\n                    console.error(e)\n                }\n            }\n            try {\n                let link = \"https://dashboard.tenderly.co/simulator/new?\"\n                link += \"network=\" + account.chainId + \"&\"\n                console.log(populatedTx)\n                if (populatedTx) {\n                    link += \"from=\" + populatedTx.from + \"&\"\n                    link += \"contractAddress=\" + populatedTx.to + \"&\"\n                    link += \"rawFunctionInput=\" + populatedTx.data + \"&\"\n                    link += \"value=\" + BigNumber.from(populatedTx.value || \"0\").toString() + \"&\"\n                } else {\n                    link += \"from=\" + account.address + \"&\"\n                    link += \"contractAddress=\" + transaction.to + \"&\"\n                    link += \"rawFunctionInput=\" + transaction.data + \"&\"\n                    link += \"value=\" + BigNumber.from(transaction.value).toString() + \"&\"\n                }\n                setSimulateLink(link)\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [transaction, account, signer, repo, signatures])\n    return <>\n        <TxDialog open={!!id && !showAddSignature} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n            <DialogTitle>Transaction Details</DialogTitle>\n            <DialogContent>\n                {transaction ? (\n                    <Group>\n                        <Header>Id:</Header>\n                        <Entry>\n                            <LongText>{transaction.id}</LongText>\n                        </Entry>\n                        <Header>Operation:</Header>\n                        <Entry>\n                            <Typography>{transaction.operation}</Typography>\n                        </Entry>\n                        <Header>To:</Header>\n                        <Entry>\n                            <AddressInfo address={transaction.to} />\n                        </Entry>\n                        <Header>Value:</Header>\n                        <Entry>\n                            <Typography>{transaction.value}</Typography>\n                        </Entry>\n                        <Header>Data:</Header>\n                        <TxData data={transaction.data} />\n                        <Header>Nonce:</Header>\n                        <Entry>\n                            <LongText>{transaction.nonce}</LongText>\n                        </Entry>\n                        <Header>Signatures:</Header>\n                        {signatures?.map((sig) => (<Entry>\n                            <AddressInfo onClick={() => { shareSignature(sig) }} address={sig.signer} />\n                        </Entry>))}\n                        <Button onClick={() => setShowSignTransaction(true)}>Sign</Button>\n                        <Button onClick={() => setShowAddSignature(true)}>Add</Button>\n                        <Button onClick={() => setShowExecuteTransaction(true)}>Execute</Button>\n                        <Button onClick={() => deleteTx(id)} color=\"error\">Delete Tx</Button>\n                    </Group>\n                ) : (\n                    <>\"Unknown details\"</>\n                )}\n            </DialogContent>\n            <DialogActions>\n                {simulateLink && (<Button onClick={() => { window.open(simulateLink, \"_blank\") }}>Simulate</Button>)}\n                <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </TxDialog>\n        <AddSignatureDialog open={showAddSignature} handleClose={() => setShowAddSignature(false)} handleNewSignature={loadSignatures} safeTxHash={id} />\n        <SignTransactionDialog open={showSignTransaction} handleClose={() => setShowSignTransaction(false)} handleNewSignature={loadSignatures} transaction={transaction} />\n        <ExecuteTxDialog open={showExecuteTransaction} handleClose={() => setShowExecuteTransaction(false)} handleTxSubmitted={handleClose} transaction={transaction} />\n    </>\n}\n\nexport default QueuedTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport { ethers, BigNumber } from 'ethers'\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { SafeTransaction, MetaTransaction } from '../../../logic/models/transactions'\nimport { buildTx } from '../../../logic/utils/proposing'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n    onConfirm: (tx: QueuedSafeTransaction, requestId?: string) => void\n    onReject?: (message: string, requestId?: string) => void\n    transactions?: MetaTransaction[]\n    requestId?: string\n}\n\nexport const ProposeTxs: React.FC<Props> = ({ open, handleClose, onConfirm, onReject, requestId, transactions }) => {\n    const [toString, setToString] = useState(\"\")\n    const [valueString, setValueString] = useState(\"\")\n    const [dataString, setDataString] = useState(\"\")\n    const [operationString, setOperationString] = useState(\"\")\n    const [nonceString, setNonceString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n\n    useEffect(() => {\n        if (!open) return\n        (async () => {\n            try {\n                setNonceString(await queuedRepo.getNextNonce())\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [queuedRepo, open])\n\n    useEffect(() => {\n        const defaultTx = buildTx(account, transactions)\n        setToString(defaultTx.to)\n        setValueString(defaultTx.value)\n        setDataString(defaultTx.data)\n        setOperationString(defaultTx.operation.toString())\n    }, [account, transactions])\n\n    const cancelCreation = () => {\n        onReject?.(\"Canceled\", requestId)\n        handleClose()\n    }\n\n    const handleCreate = async () => {\n        try {\n            if (dataString && !ethers.utils.isHexString(dataString)) throw Error(\"Invalid data\")\n            const tx: SafeTransaction = {\n                to: ethers.utils.getAddress(toString),\n                value: BigNumber.from(valueString).toString(),\n                data: dataString || \"0x\",\n                nonce: parseInt(nonceString),\n                operation: parseInt(operationString),\n                safeTxGas: \"0\",\n                baseGas: \"0\",\n                gasPrice: \"0\",\n                gasToken: ethers.constants.AddressZero,\n                refundReceiver: ethers.constants.AddressZero,\n            }\n            const queuedTx = await queuedRepo.addTx(tx)\n            onConfirm(queuedTx, requestId)\n            handleClose()\n            setToString(\"\")\n            setValueString(\"\")\n            setDataString(\"\")\n            setOperationString(\"\")\n            setNonceString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n    return <TxDialog open={open} onClose={cancelCreation} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Add Tx</DialogTitle>\n        <DialogContent>\n            <TextField label=\"To\" onChange={(e) => setToString(e.target.value)} value={toString} fullWidth /><br />\n            <TextField label=\"Value\" onChange={(e) => setValueString(e.target.value)} value={valueString} fullWidth /><br />\n            <TextField label=\"Data\" onChange={(e) => setDataString(e.target.value)} value={dataString} fullWidth /><br />\n            <TextField label=\"Operation\" onChange={(e) => setOperationString(e.target.value)} value={operationString} fullWidth /><br />\n            <TextField label=\"Nonce\" onChange={(e) => setNonceString(e.target.value)} value={nonceString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={cancelCreation}>Cancel</Button>\n          <Button onClick={handleCreate} color=\"primary\">Create</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ProposeTxs","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Button, styled } from '@mui/material';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider';\nimport QueuedTxSummary from './QueuedTxSummary';\nimport QueuedTxDetails from './QueuedTxDetails';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\nimport { Callback } from 'safe-indexer-ts';\nimport { QueueRepositoryUpdates } from '../../../logic/account/QueueRepository';\nimport ProposeTxs from './ProposeTxsDialog';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\"\n}))\n\nfunction Queue() {\n  const [showNewTxDialog, setShowNewTxDialog] = useState<boolean>(false)\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [ququedTxs, setQueuedTxs] = useState<QueuedSafeTransaction[]>([])\n  const queueRepo = useQueueRepo()\n  const txRepo = useTransactionRepo()\n\n  const loadQueuedTxs = useCallback(async () => {\n    try {\n      setQueuedTxs(await queueRepo.getQueuedTxs())\n    } catch (e) {\n      console.error(e)\n    }\n  }, [queueRepo, setQueuedTxs])\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: loadQueuedTxs\n    }\n    txRepo.registerCallback(callback)\n    return () => txRepo.unregisterCallback(callback)\n  }, [txRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    const callback: QueueRepositoryUpdates = {\n      onNewTx: loadQueuedTxs\n    }\n    queueRepo.registerCallback(callback)\n    return () => queueRepo.unregisterCallback(callback)\n  }, [queueRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    loadQueuedTxs()\n  }, [loadQueuedTxs])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={showNewTxDialog} handleClose={() => setShowNewTxDialog(false)} onConfirm={() => loadQueuedTxs() } />\n  }, [showNewTxDialog, setShowNewTxDialog])\n\n  const details = useMemo(() => {\n    return <QueuedTxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      <Button onClick={() => setShowNewTxDialog(true)}>Add Transaction</Button>\n      {ququedTxs.map((tx) => <QueuedTxSummary transaction={tx} showDetails={(id) => setSelectedId(id)} />)}\n      {creation}\n      {details}\n    </Root>\n  );\n}\n\nexport default Queue;\n","export const defaultApps: AppOption[] = [\n    {\n        title: \"WalletConnect\",\n        url: \"https://apps.gnosis-safe.io/wallet-connect\"\n    },\n    {\n        title: \"ENS\",\n        url: \"https://app.ens.domains/\"\n    }\n].map((entry) => {return {\n    section: \"Default\",\n    ...entry\n}})\n\nexport interface AppOption {\n    section: string,\n    title: string,\n    url: string\n}","import { Account } from \"../utils/account\";\nimport { AbstractDAO, AbstractDB } from \"./base\";\n\nexport const ACCOUNTS_STORE = \"accounts\"\nexport const ACCOUNTS_KEY = \"id\"\nexport const ACCOUNTS_INDEX = \"timestamp\"\n\nexport const APP_URLS_STORE = \"app_urls\"\nexport const APP_URLS_KEY = \"id\"\nexport const APP_URLS_INDEX = \"timestamp\"\n\nexport interface StoredAccount extends Account {\n    timestamp: number\n}\n\nexport interface StoredAppUrls {\n    id: string,\n    timestamp: number\n}\n\nexport class AppDB extends AbstractDB {\n    constructor() {\n        super(\"app_state\", 2, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(ACCOUNTS_STORE, { keyPath: ACCOUNTS_KEY })\n                store.createIndex(ACCOUNTS_INDEX, ACCOUNTS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(APP_URLS_STORE, { keyPath: APP_URLS_KEY })\n                store.createIndex(APP_URLS_INDEX, APP_URLS_INDEX, { unique: false })\n            }\n        });\n    }\n}\n\nexport class AccountsDAO extends AbstractDAO<StoredAccount> {\n    constructor() {\n        super(new AppDB(), ACCOUNTS_STORE)\n    }\n\n    getAll(): Promise<StoredAccount[]> {\n        return this.getAllByIndex(ACCOUNTS_INDEX)\n    }\n}\n\nexport class AppUrlsDAO extends AbstractDAO<StoredAppUrls> {\n    constructor() {\n        super(new AppDB(), APP_URLS_STORE)\n    }\n\n    getAll(): Promise<StoredAppUrls[]> {\n        return this.getAllByIndex(APP_URLS_INDEX)\n    }\n}\n","import React, { useState } from 'react'\nimport { grey } from '@mui/material/colors';\nimport { Group } from '../../styled/tables';\nimport { Box, styled } from '@mui/system';\nimport { SwipeableDrawer, Typography } from '@mui/material';\n\n\nconst Sidebar = styled(Group)(({ theme }) => ({\n    height: \"100vh\",\n    width: \"400px\",\n    overflowY: \"scroll\"\n}))\n\nconst StyledBox = styled(Box)(({ theme }) => ({\n    backgroundColor: theme.palette.mode === 'light' ? '#fff' : grey[800],\n}));\n\nconst Puller = styled(Box)(({ theme }) => ({\n    width: 30,\n    height: 6,\n    backgroundColor: theme.palette.mode === 'light' ? grey[300] : grey[900],\n    borderRadius: 3,\n    position: 'absolute',\n    top: 8,\n    left: 'calc(50% - 15px)',\n}));\n\nexport const drawerBleeding = 64\n\nexport const ResponsiveSidebar: React.FC<{ isDesktop: boolean, header?: (expanded: boolean) => React.ReactNode }> = ({ isDesktop, children, header }) => {\n    const [open, setOpen] = useState(true);\n\n    const toggleDrawer = (newOpen: boolean) => () => {\n        setOpen(newOpen);\n    };\n\n    if (!isDesktop) {\n        return (<SwipeableDrawer\n            id=\"transaction_drawer\"\n            anchor=\"bottom\"\n            open={open}\n            onClose={toggleDrawer(false)}\n            onOpen={toggleDrawer(true)}\n            swipeAreaWidth={drawerBleeding}\n            disableSwipeToOpen={false}\n            ModalProps={{\n                keepMounted: true,\n            }}\n            sx={{\n                '& > .MuiPaper-root': {\n                    height: `calc(90% - ${drawerBleeding}px)`,\n                    overflow: 'visible',\n                    },\n            }}\n        >\n            <StyledBox\n                sx={{\n                    position: 'absolute',\n                    top: -drawerBleeding,\n                    height: drawerBleeding,\n                    borderTopLeftRadius: 8,\n                    borderTopRightRadius: 8,\n                    visibility: 'visible',\n                    right: 0,\n                    left: 0,\n                    justifyContent: 'center',\n                    display: 'flex',\n                    alignItems: 'center'\n                }}\n            >\n                <Puller />\n                {header?.(open)}\n            </StyledBox>\n            <StyledBox\n                sx={{\n                    px: 2,\n                    pb: 2,\n                    height: '100%',\n                    overflow: 'auto',\n                }}\n            >\n                {children}\n            </StyledBox>\n        </SwipeableDrawer>)\n    }\n    return (<Sidebar>\n        {header?.(true)}\n        {children}\n    </Sidebar>)\n}","export const chainIdToNetwork: Record<number, string> = {\n    1: \"MAINNET\",\n    2: \"MORDEN\",\n    3: \"ROPSTEN\",\n    4: \"RINKEBY\",\n    5: \"GOERLI\",\n    42: \"KOVAN\",\n    56: \"BSC\",\n    100: \"XDAI\",\n    137: \"POLYGON\",\n    246: \"ENERGY_WEB_CHAIN\",\n    4447: \"LOCAL\",\n    73799: \"VOLTA\",\n}","import {\n    getSDKVersion,\n    SDKMessageEvent,\n    MethodToResponse,\n    Methods,\n    SafeInfo,\n    MessageFormatter,\n    RequestId,\n    BaseTransaction,\n    RPCPayload\n} from '@gnosis.pm/safe-apps-sdk'\nimport {\n    providers\n} from 'ethers'\nimport { Account } from '../utils/account'\nimport { chainIdToNetwork } from '../utils/chainIdToNetwork'\n\ntype LegacyMethods = 'getEnvInfo'\ntype SDKMethods = Methods | LegacyMethods\n\nexport interface MessageHandlers {\n    onTransactionProposal: (transactions: BaseTransaction[], requestId: RequestId) => void\n}\n\nexport class FrameCommunicator {\n    provider?: providers.JsonRpcProvider\n    constructor(\n        readonly frame: React.RefObject<HTMLIFrameElement>,\n        readonly appUrl: string,\n        readonly info: Account,\n        readonly handlers: MessageHandlers\n    ) { }\n\n    handleMessage(\n        method: SDKMethods,\n        params: unknown,\n        requestId: RequestId\n    ) {\n        if (!method) {\n            console.error('ThirdPartyApp: A message was received without message id.')\n            return\n        }\n        console.log(`Received ${method} with ${JSON.stringify(params)}`)\n\n        switch (method) {\n            case 'sendTransactions': {\n                if (params) {\n                    this.handlers.onTransactionProposal(\n                        // @ts-expect-error explore ways to fix this\n                        params.txs as Transaction[],\n                        requestId,\n                    )\n                }\n                break\n            }\n\n            case 'getEnvInfo': {\n                this.sendResponse({ txServiceUrl: \"\" }, requestId)\n                break\n            }\n\n            case 'getSafeInfo': {\n                this.sendResponse({\n                    safeAddress: this.info.address,\n                    chainId: this.info.chainId,\n                    network: chainIdToNetwork[this.info.chainId],\n                }, requestId)\n                break\n            }\n\n            case 'rpcCall': {\n                const payload = params as RPCPayload\n                const communicator = this\n                try {\n                    this.provider!!.send(payload.call, payload.params).then(\n                        (resp: any) => {\n                            communicator.sendResponse(resp, requestId)\n                        }, (err: any) => {\n                            communicator.sendError(err, requestId)\n                        }\n                    )\n                } catch (err: any) {\n                    communicator.sendError(err.toString(), requestId)\n                }\n                break\n            }\n\n            default: {\n                console.error(`ThirdPartyApp: A message was received with an unknown method ${method}.`)\n                this.sendError(`Unknown method ${method}.`, requestId)\n                break\n            }\n        }\n    }\n\n    onMessage(message: SDKMessageEvent) {\n        if (message.source === window) {\n            return\n        }\n        if (!this.appUrl.includes(message.origin)) {\n            console.error(`ThirdPartyApp: A message was received from an unknown origin ${message.origin}`)\n            return\n        }\n        this.handleMessage(message.data.method, message.data.params, message.data.id)\n    }\n\n    sendResponse(\n        data: MethodToResponse[Methods],\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeResponse(requestId, data, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    sendError(\n        error: string,\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    connect(defaultWindow?: Window): (() => void) | undefined {\n        const eventWindow = defaultWindow || this.frame.current?.contentWindow\n        if (!eventWindow) return\n        const callback = (ev: MessageEvent<any>) => { this.onMessage(ev) }\n        eventWindow.addEventListener('message', callback)\n        return () => {\n            eventWindow.removeEventListener('message', callback)\n        }\n    }\n}","import { useCallback, useEffect, useMemo, useState, useRef } from 'react';\nimport { CircularProgress, styled } from '@mui/material';\nimport { FrameCommunicator } from '../../../logic/apps/connector';\nimport {\n  RequestId,\n  BaseTransaction\n} from '@gnosis.pm/safe-apps-sdk'\nimport { useAccount } from '../Dashboard';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport ProposeTxs from '../queue/ProposeTxsDialog';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\n\nconst AppFrame = styled('iframe')(({ theme }) => ({\n  width: \"100%\",\n  height: \"100%\",\n  border: 0\n}))\n\ninterface ProposalParams {\n    transactions: BaseTransaction[]\n    requestId: RequestId\n}\n\nexport interface Props {\n  appUrl: string\n}\n\nconst AppWindow: React.FC<Props> = ({ appUrl }) =>  {\n  const account = useAccount()\n  const { provider } = useAppSettings()\n  const [loading, setLoading] = useState<boolean>(false)\n  const [proposalParams, setProposalParams] = useState<ProposalParams | undefined>(undefined)\n  const appFrame = useRef<HTMLIFrameElement>(null)\n  const communicator: FrameCommunicator = useMemo(() => {\n    return new FrameCommunicator(appFrame, appUrl, account, {\n      onTransactionProposal: (transactions, requestId) => {\n        if (transactions.length == 0) return\n        if (document.hidden) {\n          window.alert(\"New transaction\")\n        }\n        setProposalParams({ transactions, requestId })\n      }\n    })\n  }, [account, appFrame, appUrl, setProposalParams])\n\n  useEffect(() => {\n    communicator.provider = provider\n  }, [communicator, provider])\n\n  const handleTransactionConfirmation = useCallback(async (tx: QueuedSafeTransaction, requestId?: string) => {\n    console.log(\"handleTransactionConfirmation\", tx, requestId)\n    communicator.sendResponse({ safeTxHash: tx.id }, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  const handleTransactionRejection = useCallback(async (message: string, requestId?: string) => {\n    console.log(\"handleTransactionRejection\", message, requestId)\n    communicator.sendError(message, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  useEffect(() => {\n    return communicator.connect(window)\n  }, [communicator])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={!!proposalParams}\n      transactions={proposalParams?.transactions?.map((tx) => {\n        return {\n          ...tx,\n          operation: 0\n        }\n      })}\n      requestId={proposalParams?.requestId}\n      onReject={handleTransactionRejection}\n      onConfirm={handleTransactionConfirmation}\n      handleClose={() => setProposalParams(undefined) } />\n  }, [proposalParams, handleTransactionRejection, handleTransactionConfirmation])\n\n  if (loading) return (<CircularProgress />)\n  return (\n    <>\n      <AppFrame ref={appFrame} src={appUrl} />\n      {creation}\n    </>\n  );\n}\n\nexport default AppWindow;\n","import { Autocomplete, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport { useState, useMemo, useEffect } from 'react';\nimport { AppOption, defaultApps } from '../../../logic/apps/appList';\nimport { AppUrlsDAO } from '../../../logic/db/app';\nimport { Group, Row } from '../../../styled/tables';\nimport { useDektopLayout } from '../../utils/media';\nimport { drawerBleeding } from '../ResponsiveSidebar';\nimport AppWindow from './AppWindow';\n\nconst Root = styled(Group)(({ theme }) => ({\n}))\n\nfunction Apps() {\n  const appUrlsDao = useMemo(() => new AppUrlsDAO(), [])\n  const [appUrl, setAppUrl] = useState(defaultApps[0].url)\n  const [appUrlError, setAppUrlError] = useState(\"\")\n  const [appUrlInput, setAppUrlInput] = useState(appUrl)\n  const [appUrlsHistory, setAppUrlsHistory] = useState<AppOption[]>([])\n  const isDesktop = useDektopLayout()\n\n  useEffect(() => {\n    (async () => {\n      const appHistory = (await appUrlsDao.getAll()).map(appUrl => {\n        return {\n          section: \"History\",\n          title: appUrl.id,\n          url: appUrl.id\n        }\n      })\n      setAppUrlsHistory(defaultApps.concat(appHistory))\n    })()\n  }, [setAppUrlsHistory, appUrl])\n\n  const handleInputChange = (input: string | AppOption | null, openUrl?: boolean) => {\n    let newValue: string\n    if (!input) {\n      newValue = \"\"\n    } else if (typeof input === \"string\") {\n      newValue = input\n    } else {\n      newValue = input.url\n    }\n    setAppUrlInput(newValue)\n    setAppUrlError(\"\")\n\n    if (openUrl) {\n      openAppUrl(newValue)\n    }\n  }\n\n  const openAppUrl = async (appUrl: string) => {\n    let cleanUrl = appUrl.trim()\n    if (cleanUrl.length === 0) {\n      setAppUrlError(\"Empty App Url is not allowed\")\n      return\n    }\n    if (!cleanUrl.startsWith(\"http\")) {\n      cleanUrl = \"https://\" + cleanUrl\n    }\n    await appUrlsDao.add({ id: cleanUrl, timestamp: new Date().getTime() })\n    setAppUrl(cleanUrl)\n  }\n  const marginBottom = isDesktop ? 0 : drawerBleeding;\n  return (\n    <Root sx={{\n      textAlign: \"center\",\n      width: `100vw`,\n      height: `calc(100vh - ${marginBottom}px)`\n    }}>\n      <Row>\n        <Autocomplete\n          id=\"free-solo-demo\"\n          freeSolo\n          fullWidth\n          options={appUrlsHistory}\n          defaultValue={defaultApps[0]}\n          groupBy={(option) => option.section}\n          getOptionLabel={(option: AppOption | string) => {\n            if (typeof option === \"string\") return option\n            return option.title\n          }}\n          onChange={(e, newValue) => handleInputChange(newValue, !!newValue && newValue !== \"\")}\n          renderInput={(params) =>\n            <TextField\n              {...params}\n              label=\"App Url\"\n              value={appUrlInput}\n              error={!!appUrlError}\n              helperText={appUrlError}\n              variant=\"filled\"\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          }\n        />\n      </Row>\n      <AppWindow appUrl={appUrl} />\n    </Root>\n  );\n}\n\nexport default Apps;\n","import { Button, Dialog, DialogContent, DialogTitle, Switch, TextField, Typography } from '@mui/material'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Callback } from 'safe-indexer-ts'\nimport { Group, Row } from '../../styled/tables'\nimport { useAppSettings } from '../provider/AppSettingsProvider'\nimport { useTransactionRepo } from '../provider/TransactionRepositoryProvider'\n\nexport interface Props {\n    open: boolean,\n    handleClose: () => void,\n    reindex?: () => void,\n}\n\nexport const SettingsDialog: React.FC<Props> = ({ open, reindex, handleClose }) => {\n    const { useCustomRpc, toggleCustomRpc, customRpc, updateCustomRpc, networkConfig, updateNetworkConfig } = useAppSettings()\n    const [status, setStatus] = useState<string>(\"\")\n    const txRepo = useTransactionRepo()\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: () => { },\n            onStatusUpdate: (update) => {\n                switch (update.type) {\n                    case \"up_to_date\":\n                        setStatus(`Up to date with block ${update.latestBlock}`)\n                        break;\n                    case \"processing\":\n                        setStatus(`Indexing block ${update.fromBlock}/${update.latestBlock}`)\n                        break;\n                    case \"aborted\":\n                        setStatus(`Indexing aborted: ${update.reason}`)\n                        break;\n                    default:\n                        setStatus(\"\")\n                        break;\n                }\n            }\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, setStatus])\n\n    const updateStartingBlock = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: parseInt(value),\n                maxBlocks: networkConfig.maxBlocks\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    const updateMaxBlocks = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: networkConfig.startingBlock,\n                maxBlocks: parseInt(value)\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    return <Dialog open={open} onClose={handleClose} maxWidth=\"xs\" fullWidth>\n        <DialogTitle>Settings</DialogTitle>\n        <DialogContent>\n            <Group>\n                <Typography variant=\"caption\">Status</Typography>\n                {status}\n                <br /><br />\n                <Typography variant=\"caption\">App Settings</Typography>\n                <Row sx={{ alignItems: 'center' }}>\n                    Use custom prc endpoint <Switch checked={useCustomRpc} onChange={(_, checked) => toggleCustomRpc(checked)} /><br />\n                </Row>\n                <TextField label=\"RPC\" onChange={(e) => updateCustomRpc(e.target.value)} value={customRpc} fullWidth /><br />\n                <TextField label=\"Intital block\" onChange={(e) => updateStartingBlock(e.target.value)} value={networkConfig.startingBlock} fullWidth /><br />\n                <TextField label=\"Max blocks\" onChange={(e) => updateMaxBlocks(e.target.value)} value={networkConfig.maxBlocks} fullWidth /><br />\n                {\n                    !!reindex && (<>\n                        <Typography variant=\"caption\">Account Settings</Typography><br />\n                        <Button onClick={() => reindex()}>Reindex</Button><br />\n                    </>)\n                }\n            </Group>\n        </DialogContent>\n    </Dialog>\n}\n\nexport default SettingsDialog","import { Typography } from \"@mui/material\"\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useAccount } from \"../Dashboard\"\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { Group, Row } from \"../../../styled/tables\";\nimport { shortAddress } from \"../../../logic/utils/address\";\nimport { Settings } from \"@mui/icons-material\";\nimport SettingsDialog from \"../../settings/SettingsDialog\";\nimport { useTransactionRepo } from \"../../provider/TransactionRepositoryProvider\";\nimport { useQueueRepo } from \"../../provider/QueueRepositoryProvider\";\nimport { Callback } from \"safe-indexer-ts\";\nimport { QueueRepositoryUpdates } from \"../../../logic/account/QueueRepository\";\nimport { useCopyAddress } from \"../../utils/media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AccountHeader: React.FC<{ expanded: boolean }> = ({ expanded }) => {\n    const [showSettings, setShowSettings] = useState<boolean>(false)\n    const [queueSize, setQueueSize] = useState<number>(0)\n    const account = useAccount()\n    const iconSrc = useMemo(() => makeBlockie(account.address), [account]);\n    const txRepo = useTransactionRepo()\n    const queueRepo = useQueueRepo()\n\n    // TODO: we have this logic in multiple places. Should be extracted\n    const loadQueuedTxs = useCallback(async () => {\n        try {\n            setQueueSize((await queueRepo.getQueuedTxs()).length)\n        } catch (e) {\n            console.error(e)\n        }\n    }, [queueRepo, setQueueSize])\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: loadQueuedTxs\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, loadQueuedTxs])\n\n    useEffect(() => {\n        const callback: QueueRepositoryUpdates = {\n            onNewTx: loadQueuedTxs\n        }\n        queueRepo.registerCallback(callback)\n        return () => queueRepo.unregisterCallback(callback)\n    }, [queueRepo, loadQueuedTxs])\n\n    useEffect(() => {\n      loadQueuedTxs()\n    }, [loadQueuedTxs])\n\n    const reindex = useCallback(async () => {\n        txRepo.reindex()\n    }, [txRepo])\n\n    const copyAddress = useCopyAddress(account.address)\n\n    return <Row sx={{\n        paddingX: '16px',\n        width: `calc(100% - 32px)`,\n        justifyContent: 'space-between',\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" />\n        <Group sx={{ paddingX: '8px', textAlign: 'center' }} onClick={copyAddress} >\n            <Typography sx={{ fontFamily: 'Monospace' }} >{shortAddress(account.address)}</Typography>\n            Chain {account.chainId}\n        </Group>\n        {expanded ? (\n            <Settings onClick={() => setShowSettings(true)} />\n        ) : queueSize.toString()\n        }\n        <SettingsDialog open={showSettings} handleClose={() => setShowSettings(false)} reindex={reindex} />\n    </Row>\n}\n\nexport default AccountHeader","import React, { useContext } from 'react'\nimport { useParams } from 'react-router'\nimport Transactions from './transaction/Transactions';\nimport TransactionRepositoryProvider from '../provider/TransactionRepositoryProvider';\nimport QueueRepositoryProvider from '../provider/QueueRepositoryProvider';\nimport Queue from './queue/Queue';\nimport { Row } from '../../styled/tables';\nimport Apps from './apps/Apps';\nimport { Account, parseAccount } from '../../logic/utils/account';\nimport { useDektopLayout } from '../utils/media';\nimport { ResponsiveSidebar } from './ResponsiveSidebar';\nimport { Typography } from '@mui/material';\nimport AccountHeader from './header/AccountHeader';\n\ninterface Path {\n    account: string\n}\n\nconst AccountContext = React.createContext<Account | undefined>(undefined);\n\nexport const useAccount = () => {\n    const account = useContext(AccountContext)\n    if (!account) throw Error(\"Account not available!\")\n    return account\n}\n\nexport const Dashboard: React.FC = () => {\n    const { account } = useParams<Path>() //0x969c350577B6CD3A8E963cBB8D9c728B840c459e\n    const isDesktop = useDektopLayout();\n    const value = parseAccount(account)\n    if (!value) return (<>\n        \"Invalid account\"\n    </>)\n    return <AccountContext.Provider value={value}>\n        <TransactionRepositoryProvider>\n            <QueueRepositoryProvider>\n                <Row>\n                    <ResponsiveSidebar isDesktop={isDesktop} header={(expanded) => <AccountHeader expanded={expanded} />}>\n                        <Queue />\n                        <Transactions />\n                    </ResponsiveSidebar>\n                    <Apps />\n                </Row>\n            </QueueRepositoryProvider>\n        </TransactionRepositoryProvider>\n    </AccountContext.Provider>\n}\n\nexport default Dashboard","import { Button, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { useHistory } from 'react-router';\nimport { AccountsDAO, StoredAccount } from '../../logic/db/app';\nimport { parseAccount } from '../../logic/utils/account';\nimport { Entry, Group, LongText, Row } from '../../styled/tables';\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\",\n    padding: 16,\n}))\n\nexport const Welcome: React.FC = () => {\n    const [addressInput, setAddressInput] = useState(\"\")\n    const [addressError, setAddressError] = useState(\"\")\n    const [accountHistory, setAccountHistory] = useState<StoredAccount[]>([])\n    const history = useHistory()\n    const accountsDao = useMemo(() => new AccountsDAO(), [])\n\n    const handleAddressInput = (address: string) => {\n        setAddressInput(address)\n        setAddressError(\"\")\n    }\n\n    useEffect(() => {\n        (async () => {\n            setAccountHistory(await accountsDao.getAll())\n        })()\n    }, [setAccountHistory])\n\n    const openAccount = async (address: string) => {\n        const account = parseAccount(address)\n        if (!account) {\n            setAddressError(\"Invalid account!\")\n            return\n        }\n        accountsDao.add({\n            ...account,\n            timestamp: new Date().getTime()\n        })\n        history.push(\"/\" + account.id)\n    }\n\n    return <Root>\n        Welcome!<br /><br />\n        <TextField label=\"Account address\" onChange={(e) => handleAddressInput(e.target.value)} value={addressInput} error={!!addressError} helperText={addressError} fullWidth /><br />\n        <Button onClick={() => openAccount(addressInput)}>Open</Button>\n        {accountHistory.map((account) => {\n            return (\n                <Entry onClick={() => openAccount(account.id)}>\n                    <LongText>{account.id}</LongText>\n                </Entry>\n            )\n        })}\n    </Root>\n}\n\nexport default Welcome","import React from 'react'\nimport { Route, Switch, HashRouter as Router } from \"react-router-dom\"\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Dashboard from './account/Dashboard';\nimport AppSettingsProvider from './provider/AppSettingsProvider';\nimport Welcome from './welcome/Welcome';\n\nconst theme = createTheme({})\n\nexport const Root: React.FC = () => {\n    return (\n        <AppSettingsProvider>\n            <ThemeProvider theme={theme}>\n                <Router>\n                    <Switch>\n                        <Route path=\"/:account\">\n                            <Dashboard />\n                        </Route>\n                        <Route path=\"/\">\n                            <Welcome />\n                        </Route>\n                    </Switch>\n                </Router>\n            </ThemeProvider>\n        </AppSettingsProvider>\n    )\n}\n\nexport default Root","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n// Ethers dependencies \n// TODO: move to separate repo\n__exportStar(require(\"./ethers/loader\"), exports);\n__exportStar(require(\"./ethers/parser\"), exports);\n__exportStar(require(\"./ethers/constants\"), exports);\n"],"sourceRoot":""}