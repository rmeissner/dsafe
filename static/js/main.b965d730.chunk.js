(this.webpackJsonpdsafe=this.webpackJsonpdsafe||[]).push([[0],{101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailsTopics=t.parentTopics=t.etherReceivedTopic=t.moduleDetailsTopic=t.moduleFailureTopic=t.moduleSuccessTopic=t.multisigDetailsTopic=t.failureTopic=t.successTopic=t.safeInterface=t.safeAbi=t.transferTopic=t.erc721Interface=t.erc20OldInterface=t.erc20Interface=t.erc721InterfaceDefinition=t.erc20OldInterfaceDefinition=t.erc20InterfaceDefinition=void 0;var r=n(275),a=n(109);t.erc20InterfaceDefinition=["event Transfer(address indexed from, address indexed to, uint256 amount)"],t.erc20OldInterfaceDefinition=["event Transfer(address indexed from, address to, uint256 amount)"],t.erc721InterfaceDefinition=["event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"],t.erc20Interface=new a.ethers.utils.Interface(t.erc20InterfaceDefinition),t.erc20OldInterface=new a.ethers.utils.Interface(t.erc20OldInterfaceDefinition),t.erc721Interface=new a.ethers.utils.Interface(t.erc721InterfaceDefinition),t.transferTopic=t.erc20Interface.getEventTopic("Transfer"),t.safeAbi=r.getSafeL2SingletonDeployment({released:void 0}).abi,t.safeInterface=new a.ethers.utils.Interface(t.safeAbi),t.successTopic=t.safeInterface.getEventTopic("ExecutionSuccess"),t.failureTopic=t.safeInterface.getEventTopic("ExecutionFailure"),t.multisigDetailsTopic=t.safeInterface.getEventTopic("SafeMultiSigTransaction"),t.moduleSuccessTopic=t.safeInterface.getEventTopic("ExecutionFromModuleSuccess"),t.moduleFailureTopic=t.safeInterface.getEventTopic("ExecutionFromModuleFailure"),t.moduleDetailsTopic=t.safeInterface.getEventTopic("SafeModuleTransaction"),t.etherReceivedTopic=t.safeInterface.getEventTopic("SafeReceived"),t.parentTopics=[t.successTopic,t.moduleSuccessTopic,t.failureTopic,t.moduleFailureTopic],t.detailsTopics=[t.multisigDetailsTopic,t.moduleDetailsTopic]},195:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapEvents=t.mapEvent=void 0;t.mapEvent=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return r={event:t},e?[4,e.decode(t)]:[3,2];case 1:return n=a.sent(),[3,3];case 2:n=void 0,a.label=3;case 3:return[2,(r.interaction=n,r)]}}))}))};t.mapEvents=function(e,n){return r(void 0,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return n?[4,Promise.all(n.map((function(n){return r(void 0,void 0,void 0,(function(){return a(this,(function(r){return[2,t.mapEvent(e,n)]}))}))})))]:[2,[]];case 1:return[2,i.sent()]}}))}))}},224:function(e){e.exports=JSON.parse('{"420":"eip155:2020","eth":"eip155:1","exp":"eip155:2","rop":"eip155:3","rin":"eip155:4","gor":"eip155:5","kot":"eip155:6","tch":"eip155:7","ubq":"eip155:8","tubq":"eip155:9","oeth":"eip155:10","meta":"eip155:11","kal":"eip155:12","dstg":"eip155:13","flr":"eip155:14","diode":"eip155:15","cflr":"eip155:16","tfi":"eip155:17","TST":"eip155:18","sgb":"eip155:19","elaeth":"eip155:20","elaetht":"eip155:21","eladid":"eip155:22","eladidt":"eip155:23","rsk":"eip155:30","trsk":"eip155:31","GooDT":"eip155:32","GooD":"eip155:33","tbwg":"eip155:35","val":"eip155:38","Telos EVM":"eip155:40","Telos EVM Testnet":"eip155:41","kov":"eip155:42","darwinia":"eip155:43","crab":"eip155:44","xdc":"eip155:50","TXDC":"eip155:51","cet":"eip155:52","tcet":"eip155:53","bnb":"eip155:56","sys":"eip155:57","Ontology Mainnet":"eip155:58","EOS Mainnet":"eip155:59","go":"eip155:60","etc":"eip155:61","tetc":"eip155:62","metc":"eip155:63","ella":"eip155:64","tokt":"eip155:65","okt":"eip155:66","dbm":"eip155:67","SO1":"eip155:68","okov":"eip155:69","mix":"eip155:76","poa":"eip155:77","primuschain":"eip155:78","GeneChain":"eip155:80","Meter":"eip155:82","gttest":"eip155:85","gt":"eip155:86","tomo":"eip155:88","Kylin Testnet":"eip155:95","bnbt":"eip155:97","skl":"eip155:99","xdai":"eip155:100","eti":"eip155:101","w3g":"eip155:102","TT":"eip155:108","xpr":"eip155:110","ETL":"eip155:111","fuse":"eip155:122","dwu":"eip155:124","feth":"eip155:127","heco":"eip155:128","matic":"eip155:137","dax":"eip155:142","tpht":"eip155:162","pht":"eip155:163","hoosmartchain":"eip155:170","resil":"eip155:172","aox":"eip155:200","EDI":"eip155:211","ewt":"eip155:246","ftm":"eip155:250","hecot":"eip155:256","hpb":"eip155:269","kcs":"eip155:321","kcst":"eip155:322","theta-mainnet":"eip155:361","theta-sapphire":"eip155:363","theta-amber":"eip155:364","theta-testnet":"eip155:365","lisinski":"eip155:385","ogor":"eip155:420","rupx":"eip155:499","tao":"eip155:558","maca":"eip155:595","kar":"eip155:686","tfeth":"eip155:721","cth":"eip155:777","aca":"eip155:787","haic":"eip155:803","clo":"eip155:820","tclo":"eip155:821","wan":"eip155:888","yeti":"eip155:977","twan":"eip155:999","Baobab":"eip155:1001","tnew":"eip155:1007","EVC":"eip155:1010","new":"eip155:1012","sku":"eip155:1022","tclv":"eip155:1023","clv":"eip155:1024","MATH":"eip155:1139","tMATH":"eip155:1140","mbeam":"eip155:1284","mriver":"eip155:1285","mrock":"eip155:1286","mbase":"eip155:1287","mshadow":"eip155:1288","cate":"eip155:1618","ath":"eip155:1620","tsf":"eip155:1856","egem":"eip155:1987","edg":"eip155:2021","edgt":"eip155:2022","ktoc":"eip155:2559","iotex-mainnet":"eip155:4689","iotex-testnet":"eip155:4690","es":"eip155:5197","tsys":"eip155:5700","Ontology Testnet":"eip155:5851","rbd":"eip155:5869","mdgl":"eip155:8029","GeneChainAdn":"eip155:8080","Cypress":"eip155:8217","Kortho":"eip155:8285","olo":"eip155:8723","tolo":"eip155:8724","berg":"eip155:8995","smartbch":"eip155:10000","smartbchtest":"eip155:10001","GEN":"eip155:10101","mtt":"eip155:16000","mtttest":"eip155:16001","web":"eip155:24484","mintme":"eip155:24734","esn":"eip155:31102","got":"eip155:31337","fsn":"eip155:32659","nrg":"eip155:39797","PC":"eip155:42069","arb1":"eip155:42161","CELO":"eip155:42220","avaeth":"eip155:43110","Fuji":"eip155:43113","Avalanche":"eip155:43114","ALFA":"eip155:44787","tnrg":"eip155:49797","BKLV":"eip155:62320","ckb":"eip155:71393","vt":"eip155:73799","firenze":"eip155:78110","maticmum":"eip155:80001","qkc-r":"eip155:100000","qkc-s0":"eip155:100001","qkc-s1":"eip155:100002","qkc-s2":"eip155:100003","qkc-s3":"eip155:100004","qkc-s4":"eip155:100005","qkc-s5":"eip155:100006","qkc-s6":"eip155:100007","qkc-s7":"eip155:100008","qkc-d-r":"eip155:110000","qkc-d-s0":"eip155:110001","qkc-d-s1":"eip155:110002","qkc-d-s2":"eip155:110003","qkc-d-s3":"eip155:110004","qkc-d-s4":"eip155:110005","qkc-d-s5":"eip155:110006","qkc-d-s6":"eip155:110007","qkc-d-s7":"eip155:110008","aka":"eip155:200625","ats":"eip155:246529","atstau":"eip155:246785","sparta":"eip155:333888","olympus":"eip155:333999","arb-rinkeby":"eip155:421611","etho":"eip155:1313114","xero":"eip155:1313500","music":"eip155:7762959","tpep":"eip155:13371337","ilt":"eip155:18289463","qki":"eip155:20181205","auxi":"eip155:28945486","JOYS":"eip155:35855456","aqua":"eip155:61717561","TOYS":"eip155:99415706","oneledger":"eip155:311752642","ipos":"eip155:1122334455","aurora":"eip155:1313161554","aurora-testnet":"eip155:1313161555","aurora-betanet":"eip155:1313161556","hmy-s0":"eip155:1666600000","hmy-s1":"eip155:1666600001","hmy-s2":"eip155:1666600002","hmy-s3":"eip155:1666600003","hmy-b-s0":"eip155:1666700000","hmy-b-s1":"eip155:1666700001","hmy-b-s2":"eip155:1666700002","hmy-b-s3":"eip155:1666700003","pirl":"eip155:3125659152","frankenstein":"eip155:4216137055","tpalm":"eip155:11297108099","palm":"eip155:11297108109"}')},226:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(103),a=n(36),i=n(83),c=n(227),o=function(e){return e.toLowerCase().startsWith("0x")?e.slice(2):e},s=function(t,n,r,c){var s=e.from(o(c),"hex");return o(i.utils.solidityPack(["uint8","address","uint256","uint256","bytes"],[t,n,a.a.from(r).toHexString(),s.length,s]))},u=function(e,t){return t&&0!==t.length?1===t.length?t[0]:function(e,t){var n=t.toString(),a=Object(c.getMultiSendDeployment)({network:n});if(!a)throw Error("MultiSend not available on this network");var o,u=new i.utils.Interface(a.abi),l="0x",d=Object(r.a)(e);try{for(d.s();!(o=d.n()).done;){var f=o.value;l+=s(0,f.to,f.value,f.data)}}catch(p){d.e(p)}finally{d.f()}var h=u.encodeFunctionData("multiSend",[l]);return{to:a.networkAddresses[n],value:"0x00",data:h,operation:1}}(t,e.chainId):{to:"",value:"",data:"",operation:0}}}).call(this,n(324).Buffer)},257:function(e,t,n){},259:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(260),t),a(n(261),t),a(n(262),t)},260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},263:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SafeIndexer=void 0;var c=function(e){return new Promise((function(t){return setTimeout(t,e)}))},o=function(e){return a(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return e&&e>0?[4,c(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},s={earliestBlock:0,maxBlocks:100,upToDateTimeout:1e4,syncTimeout:100,reverse:!1},u=function(){function e(e,t,n,a,i){this.indexing=!1,this.paused=!1,this.state=e,this.loader=t,this.parser=n,this.callback=a,this.config=r(r({},s),i)}return e.prototype.updateConfig=function(e){this.config=r(r({},this.config),e)},e.prototype.postStatusUpdate=function(e){var t,n;try{null===(n=null===(t=this.callback)||void 0===t?void 0:t.onStatusUpdate)||void 0===n||n.call(t,e)}catch(r){console.error(r)}},e.prototype.getCurrentBlockInterval=function(e,t,n){console.log(this.state);var r=this.state.earliestIndexedBlock,a=this.state.lastIndexedBlock,i=this.config.maxBlocks;if(void 0!==n?n:this.config.reverse){if(e>=r)return;return{fromBlock:Math.max(e,r-i),toBlock:r-1}}if(!(t<=a))return{fromBlock:a+1,toBlock:Math.min(t,a+i)}},e.prototype.ensureBlockDefaults=function(e){this.config.earliestBlock<0&&(this.config.earliestBlock=e),this.state.earliestIndexedBlock<0&&(this.state.earliestIndexedBlock=e+1),this.state.lastIndexedBlock<0&&(this.state.lastIndexedBlock=e-1)},e.prototype.start=function(e){var t,n,r,s;return a(this,void 0,void 0,(function(){var a,u,l,d,f,h,p,b;return i(this,(function(i){switch(i.label){case 0:return[4,this.loader.loadChainId()];case 1:if(a=i.sent(),this.config.chainId&&a!=this.config.chainId)return u="Wrong chain! Expected "+this.config.chainId+" got "+a,null===(t=this.config.logger)||void 0===t||t.error(u),this.postStatusUpdate({type:"aborted",reason:u,code:1}),[2];this.indexing=!0,i.label=2;case 2:return this.indexing?this.paused?[4,c(this.config.syncTimeout)]:[3,4]:[3,14];case 3:return i.sent(),[3,2];case 4:return[4,this.loader.loadCurrentBlock()];case 5:return l=i.sent(),this.ensureBlockDefaults(l),d=this.config.earliestBlock,(f=this.getCurrentBlockInterval(d,l,e))?[3,7]:(null===(n=this.config.logger)||void 0===n||n.log("Up to date with current block!"),this.postStatusUpdate({type:"up_to_date",latestBlock:l,earliestBlock:d}),[4,o(this.config.upToDateTimeout)]);case 6:return i.sent(),[3,2];case 7:h=f.fromBlock,p=f.toBlock,this.postStatusUpdate({type:"processing",fromBlock:h,toBlock:p,latestBlock:l,earliestBlock:d}),null===(r=this.config.logger)||void 0===r||r.log("Process from block",h,"to block",p),i.label=8;case 8:return i.trys.push([8,11,,13]),[4,this.processBlocks(h,p)];case 9:return i.sent(),this.state.lastIndexedBlock=Math.max(p,this.state.lastIndexedBlock),this.state.earliestIndexedBlock=Math.min(h,this.state.earliestIndexedBlock),[4,o(this.config.syncTimeout)];case 10:return i.sent(),[3,13];case 11:return b=i.sent(),null===(s=this.config.logger)||void 0===s||s.error(b),[4,o(this.config.upToDateTimeout)];case 12:return i.sent(),[3,13];case 13:return[3,2];case 14:return[2]}}))}))},e.prototype.stop=function(){this.indexing=!1},e.prototype.pause=function(){this.paused=!0},e.prototype.resume=function(){this.paused=!1},e.prototype.processBlocks=function(e,t){return a(this,void 0,void 0,(function(){var n,r;return i(this,(function(a){switch(a.label){case 0:return[4,this.loader.loadEvents(e,t,this.config.safe)];case 1:return n=a.sent(),[4,this.parser.parse(n)];case 2:if((r=a.sent()).length>0)try{this.callback.onNewInteractions(r)}catch(i){}return[2]}}))}))},e}();t.SafeIndexer=u},264:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EthersLoader=void 0,i(n(265),t);var s=function(e,t){return void 0!==e&&(void 0===t||(e.blockNumber!=t.blockNumber?e.blockNumber<t.blockNumber:e.transactionIndex!=t.transactionIndex?e.transactionIndex<t.transactionIndex:e.logIndex!=t.logIndex&&e.logIndex<t.logIndex))},u=function(){function e(e,t){this.provider=e,this.sources=t}return e.prototype.loadChainId=function(){return c(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.provider.getNetwork()];case 1:return[2,e.sent().chainId]}}))}))},e.prototype.loadCurrentBlock=function(){return c(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.provider.getBlockNumber()];case 1:return[2,e.sent()]}}))}))},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c(this,void 0,void 0,(function(){var t,n,r,a,i,c,u,l,d;return o(this,(function(o){switch(o.label){case 0:return 0==(t=e.length)?[2,[]]:[4,Promise.all(e)];case 1:if(n=o.sent(),1==t)return[2,n[0]];for(r=new Array(t).fill(0),l=0;l<t;l++)r[l]=0;for(a=[],i=0;i<1e4*t;){for(c=0,u=n[0][r[0]],l=1;l<t;l++)d=n[l][r[l]],s(d,u)&&(c=l,u=d);if(r[c]++,!u)break;a.push(u),i++}return[2,a]}}))}))},e.prototype.toEvent=function(e,t){return r(r({},e),{eventId:e.logIndex.toString(),account:t})},e.prototype.loadEvents=function(e,t,n){return c(this,void 0,void 0,(function(){var r=this;return o(this,(function(a){switch(a.label){case 0:return[4,this.merge.apply(this,this.sources.map((function(r){return r.loadEvents(e,t,n)})))];case 1:return[2,a.sent().reverse().map((function(e){return r.toEvent(e,n)}))]}}))}))},e}();t.EthersLoader=u},265:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OutgoingTransferEventSource=t.IncomingTransferEventSource=t.IncomingEthEventSource=t.SettingsChangeEventSource=t.ModuleTransactionEventSource=t.MultisigTransactionEventSource=t.StaticTopicEventSource=void 0;var c=n(109),o=n(101),s=function(){function e(e,t){this.provider=t,this.name=e}return e.prototype.loadEvents=function(e,t,n){return a(this,void 0,void 0,(function(){var r;return i(this,(function(a){return r=this.buildFilter(e,t,n),[2,this.provider.getLogs(r).then((function(e){return e}))]}))}))},e}(),u=function(e){function t(t,n,r){var a=e.call(this,t,r)||this;return a.topics=n,a}return r(t,e),t.prototype.buildFilter=function(e,t,n){return{topics:[this.topics],address:n,fromBlock:e,toBlock:t}},t}(s);t.StaticTopicEventSource=u;var l=function(e){function t(t){return e.call(this,"MultiSig",[o.successTopic,o.failureTopic,o.multisigDetailsTopic],t)||this}return r(t,e),t}(u);t.MultisigTransactionEventSource=l;var d=function(e){function t(t){return e.call(this,"Module",[o.moduleSuccessTopic,o.moduleFailureTopic,o.moduleDetailsTopic],t)||this}return r(t,e),t}(u);t.ModuleTransactionEventSource=d;var f=function(e){function t(t){return e.call(this,"Settings",["SafeSetup","AddedOwner","RemovedOwner","ChangedThreshold","EnabledModule","DisabledModule","ChangedFallbackHandler","ChangedGuard"].map((function(e){return o.safeInterface.getEventTopic(e)})),t)||this}return r(t,e),t}(u);t.SettingsChangeEventSource=f;var h=function(e){function t(t){return e.call(this,"Incoming Ether",[o.etherReceivedTopic],t)||this}return r(t,e),t}(u);t.IncomingEthEventSource=h;var p=function(e){function t(t){return e.call(this,"Incoming transfers",t)||this}return r(t,e),t.prototype.buildFilter=function(e,t,n){if(!n)throw Error("Transfer event source requires an address");return{topics:[[o.transferTopic],[c.ethers.utils.defaultAbiCoder.encode(["address"],[n])]],fromBlock:e,toBlock:t}},t}(s);t.IncomingTransferEventSource=p;var b=function(e){function t(t){return e.call(this,"Incoming transfers",t)||this}return r(t,e),t.prototype.buildFilter=function(e,t,n){if(!n)throw Error("Transfer event source requires an address");return{topics:[[o.transferTopic],null,[c.ethers.utils.defaultAbiCoder.encode(["address"],[n])]],fromBlock:e,toBlock:t}},t}(s);t.OutgoingTransferEventSource=b},266:function(e,t){},295:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EthersParser=void 0;var i=n(101),c=n(296),o=n(297),s=n(303),u=n(304),l=function(){function e(e){this.groupIdFromEvent=function(e){return""+e.transactionHash},this.provider=e,this.decoders=[new o.MultisigDecoder(e),new c.ModuleDecoder(e),new u.TransferDecoder(e),new s.SettingsDecoder(e)]}return e.prototype.updateGroupedLogs=function(e,t,n,r){n?e.push({parent:n,details:t,children:r}):r.length>0&&e.push.apply(e,r.map((function(e){return{parent:e,children:[]}})))},e.prototype.group=function(e){return r(this,void 0,void 0,(function(){var t,n,r,c,o,s,u,l,d,f,h;return a(this,(function(a){for(t=[],n=[],r=[],o=void 0,s=0,u=e;s<u.length;s++)l=u[s],d=this.groupIdFromEvent(l),f=i.parentTopics.indexOf(l.topics[0])>=0,h=i.detailsTopics.indexOf(l.topics[0])>=0,(o!==d||f&&c)&&(this.updateGroupedLogs(t,r.pop(),c,n),c=void 0,r=[],n=[],o=void 0),o||(o=d),f?c=l:h?r.push(l):n.push(l);return this.updateGroupedLogs(t,r.pop(),c,n),[2,t]}))}))},e.prototype.decode=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,c;return a(this,(function(a){switch(a.label){case 0:r=0,i=this.decoders,a.label=1;case 1:return r<i.length?[4,i[r].decode(e,t,n,this)]:[3,4];case 2:if(c=a.sent())return[2,c];a.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.parse=function(e){return r(this,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.group(e)];case 1:return t=a.sent(),n=t.map((function(e){var t=e.parent,n=e.children,a=e.details;return r.decode(t,n,a)})),[4,Promise.all(n)];case 2:return[2,a.sent().filter((function(e){return void 0!==e}))]}}))}))},e}();t.EthersParser=l},296:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDecoder=void 0;var i=n(101),c=n(195),o=function(){function e(e,t){this.provider=e,this.useFallbackDecoding=t||!0}return e.prototype.decodeEthereumTx=function(e,t){},e.prototype.decodeFromEthereumHash=function(e,t){return r(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return console.log("Fallback to transaction decoding"),[4,this.provider.getTransaction(t)];case 1:return n=r.sent(),[2,this.decodeEthereumTx(e,n)]}}))}))},e.prototype.decodeModuleDetailsEvent=function(e){if(e){var t=i.safeInterface.decodeEventLog("SafeModuleTransaction",e.data,e.topics);return{to:t.to,value:t.value.toString(),data:t.data,operation:t.operation}}},e.prototype.decodeInternal=function(e,t,n,i,o,s,u){return r(this,void 0,void 0,(function(){var r,l,d,f;return a(this,(function(a){switch(a.label){case 0:return l="module_"+n.transactionHash+"_"+n.eventId,(r=this.decodeModuleDetailsEvent(s))||!this.useFallbackDecoding?[3,2]:[4,this.decodeFromEthereumHash(e,n.transactionHash)];case 1:r=a.sent(),a.label=2;case 2:return[4,this.provider.getBlock(n.blockHash)];case 3:return d=a.sent(),f={type:"module_transaction",id:l,block:d.number,timestamp:d.timestamp},[4,c.mapEvents(u,o)];case 4:return f.logs=a.sent(),f.txHash=n.transactionHash,f.module=t,f.success=i,f.details=r,[2,f]}}))}))},e.prototype.decode=function(e,t,n,c){return r(this,void 0,void 0,(function(){var r;return a(this,(function(a){switch(a.label){case 0:switch(e.topics[0]){case i.moduleSuccessTopic:return[3,1];case i.moduleFailureTopic:return[3,3]}return[3,5];case 1:return r=i.safeInterface.decodeEventLog("ExecutionFromModuleSuccess",e.data,e.topics),[4,this.decodeInternal(e.address,r.module,e,!0,t,n,c)];case 2:return[2,a.sent()];case 3:return r=i.safeInterface.decodeEventLog("ExecutionFromModuleFailure",e.data,e.topics),[4,this.decodeInternal(e.address,r.module,e,!1,t,n,c)];case 4:return[2,a.sent()];case 5:return[2,void 0];case 6:return[2]}}))}))},e}();t.ModuleDecoder=o},297:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigDecoder=void 0;var c=n(109),o=n(298),s=n(101),u=n(195),l=function(){function e(e){this.provider=e}return e.prototype.init=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this,[4,this.provider.getNetwork()];case 1:return e.chainId=t.sent().chainId,[2]}}))}))},e.prototype.calculateHash111=function(e,t){return c.ethers.utils._TypedDataEncoder.hash({verifyingContract:e.safe},o.EIP712_SAFE_TX_TYPE,r(r({},e),{nonce:t}))},e.prototype.map=function(e,t){return a(this,void 0,void 0,(function(){var n,a,u;return i(this,(function(i){switch(i.label){case 0:return this.chainId?[3,2]:[4,this.init()];case 1:i.sent(),i.label=2;case 2:return[4,(n=new c.ethers.Contract(t.safe,s.safeAbi,this.provider)).nonce()];case 3:for(a=i.sent().toNumber(),u=a;u>=0;u--){if(this.calculateHash111(t,u)===e)return[2,u];if(o.calculateSafeTransactionHash(n,r(r({},t),{nonce:u}),this.chainId)===e)return[2,u]}return[2,-1]}}))}))},e}(),d=function(){function e(e,t){this.provider=e,this.nonceMapper=new l(e),this.useFallbackDecoding=t||!0}return e.prototype.decodeEthereumTx=function(e,t){try{if(t.to!==e)return void console.log("Transaction is not to the Safe");var n=s.safeInterface.decodeFunctionData("execTransaction",t.data);return{safe:e,to:n.to,value:n.value.toString(),data:n.data,operation:n.operation,safeTxGas:n.safeTxGas.toString(),baseGas:n.baseGas.toString(),gasPrice:n.gasPrice.toString(),gasToken:n.gasToken,refundReceiver:n.refundReceiver,signatures:n.signatures}}catch(r){return void console.log("Unknown function",t.data.slice(0,10))}},e.prototype.decodeFromEthereumHash=function(e,t,n){return a(this,void 0,void 0,(function(){var a,c,o,s;return i(this,(function(i){switch(i.label){case 0:return console.log("Fallback to transaction decoding"),[4,this.provider.getTransaction(n)];case 1:return a=i.sent(),(c=this.decodeEthereumTx(e,a))?(o=[r({},c)],s={},[4,this.nonceMapper.map(t,c)]):[2,void 0];case 2:return[2,r.apply(void 0,o.concat([(s.nonce=i.sent(),s)]))]}}))}))},e.prototype.decodeMultisigDetailsEvent=function(e){if(e){var t=s.safeInterface.decodeEventLog("SafeMultiSigTransaction",e.data,e.topics);return{to:t.to,value:t.value.toString(),data:t.data,operation:t.operation,safeTxGas:t.safeTxGas.toString(),baseGas:t.baseGas.toString(),gasPrice:t.gasPrice.toString(),gasToken:t.gasToken,refundReceiver:t.refundReceiver,signatures:t.signatures,nonce:c.BigNumber.from(t.additionalInfo.slice(0,66)).toNumber()}}},e.prototype.decodeInternal=function(e,t,n,r,c,o,s){return a(this,void 0,void 0,(function(){var a,l,d,f;return i(this,(function(i){switch(i.label){case 0:return a="multisig_"+n,(l=this.decodeMultisigDetailsEvent(o))||!this.useFallbackDecoding?[3,2]:[4,this.decodeFromEthereumHash(e,n,t.transactionHash)];case 1:l=i.sent(),i.label=2;case 2:return[4,this.provider.getBlock(t.blockHash)];case 3:return d=i.sent(),f={type:"multisig_transaction",id:a,block:d.number,timestamp:d.timestamp},[4,u.mapEvents(s,c)];case 4:return f.logs=i.sent(),f.txHash=t.transactionHash,f.safeTxHash=n,f.success=r,f.details=l,[2,f]}}))}))},e.prototype.decode=function(e,t,n,r){return a(this,void 0,void 0,(function(){var a;return i(this,(function(i){switch(i.label){case 0:switch(e.topics[0]){case s.successTopic:return[3,1];case s.failureTopic:return[3,3]}return[3,5];case 1:return a=s.safeInterface.decodeEventLog("ExecutionSuccess",e.data,e.topics),[4,this.decodeInternal(e.address,e,a.txHash,!0,t,n,r)];case 2:return[2,i.sent()];case 3:return a=s.safeInterface.decodeEventLog("ExecutionFailure",e.data,e.topics),[4,this.decodeInternal(e.address,e,a.txHash,!1,t,n,r)];case 4:return[2,i.sent()];case 5:return[2,void 0];case 6:return[2]}}))}))},e}();t.MultisigDecoder=d},303:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsDecoder=void 0;var c=n(101),o=c.safeInterface.getEventTopic("SafeSetup"),s=c.safeInterface.getEventTopic("AddedOwner"),u=c.safeInterface.getEventTopic("RemovedOwner"),l=c.safeInterface.getEventTopic("ChangedThreshold"),d=c.safeInterface.getEventTopic("EnabledModule"),f=c.safeInterface.getEventTopic("DisabledModule"),h=c.safeInterface.getEventTopic("ChangedFallbackHandler"),p=c.safeInterface.getEventTopic("ChangedGuard"),b=function(){function e(e,t){this.provider=e,this.useFallbackDecoding=t||!0}return e.prototype.getSettingsDetails=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(e.topics[0]){case s:return[2,{component:"owners",change:"added",value:c.safeInterface.decodeEventLog("AddedOwner",e.data,e.topics).owner}];case u:return[2,{component:"owners",change:"removed",value:c.safeInterface.decodeEventLog("RemovedOwner",e.data,e.topics).owner}];case l:return[2,{component:"threshold",change:"set",value:c.safeInterface.decodeEventLog("ChangedThreshold",e.data,e.topics).threshold.toString()}];case d:return[2,{component:"modules",change:"added",value:c.safeInterface.decodeEventLog("EnabledModule",e.data,e.topics).module}];case f:return[2,{component:"modules",change:"removed",value:c.safeInterface.decodeEventLog("DisabledModule",e.data,e.topics).module}];case h:return[2,{component:"fallbackHandler",change:"set",value:c.safeInterface.decodeEventLog("ChangedFallbackHandler",e.data,e.topics).handler}];case p:return[2,{component:"guard",change:"set",value:c.safeInterface.decodeEventLog("ChangedGuard",e.data,e.topics).guard}];default:return[2,void 0]}return[2]}))}))},e.prototype.decodeSettingsChange=function(e){return a(this,void 0,void 0,(function(){var t,n;return i(this,(function(a){switch(a.label){case 0:return[4,this.getSettingsDetails(e)];case 1:return(t=a.sent())?[4,this.provider.getBlock(e.blockHash)]:[2,void 0];case 2:return n=a.sent(),[2,r({type:"settings",id:"settings_"+e.transactionHash+"_"+e.eventId,block:n.number,timestamp:n.timestamp,txHash:e.transactionHash},t)]}}))}))},e.prototype.decode=function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:switch(e.topics[0]){case o:return[3,1]}return[3,3];case 1:return[4,this.provider.getBlock(e.blockHash)];case 2:return t=n.sent(),[2,{type:"setup",id:"setup_"+e.transactionHash+"_"+e.eventId,block:t.number,timestamp:t.timestamp,txHash:e.transactionHash}];case 3:return[2,this.decodeSettingsChange(e)];case 4:return[2]}}))}))},e}();t.SettingsDecoder=b},304:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransferDecoder=void 0;var i=n(101),c=function(){function e(e,t){this.provider=e,this.useFallbackDecoding=t||!0}return e.prototype.decodeTokenTransfer=function(e,t){return r(this,void 0,void 0,(function(){var n,r,c,o,s,u;return a(this,(function(a){switch(a.label){case 0:return n="transfer_"+t.transactionHash+"_"+t.eventId,[4,this.provider.getBlock(t.blockHash)];case 1:if(r=a.sent(),c="",4===t.topics.length)o=i.erc721Interface,c="ERC721";else if(3===t.topics.length)o=i.erc20Interface,c="ERC20";else{if(2!==t.topics.length)return[2,void 0];o=i.erc20OldInterface,c="ERC20"}return s=o.decodeEventLog("Transfer",t.data,t.topics),u="ERC20"===c?{type:"ERC20",tokenAddress:t.address,value:s.amount.toString()}:{type:"ERC721",tokenAddress:t.address,tokenId:s.tokenId.toString()},[2,{type:"transfer",id:n,block:r.number,txHash:t.transactionHash,timestamp:r.timestamp,sender:s.from,receipient:s.to,direction:s.to.toLowerCase()===e.toLowerCase()?"INCOMING":"OUTGOING",details:u}]}}))}))},e.prototype.decodeEtherTransfer=function(e,t){return r(this,void 0,void 0,(function(){var n,r,c,o;return a(this,(function(a){switch(a.label){case 0:return n="transfer_"+t.transactionHash+"_"+t.eventId,[4,this.provider.getBlock(t.blockHash)];case 1:return r=a.sent(),c=i.safeInterface.decodeEventLog("SafeReceived",t.data,t.topics),o={type:"ETHER",value:c.value.toString()},[2,{type:"transfer",id:n,sender:c.sender,receipient:e,direction:"INCOMING",timestamp:r.timestamp,txHash:t.transactionHash,details:o}]}}))}))},e.prototype.decode=function(e,t,n){return r(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:switch(e.topics[0]){case i.transferTopic:return[3,1];case i.etherReceivedTopic:return[3,3]}return[3,5];case 1:return t&&t.length>0&&console.error("Sub logs for transfer entry!",e,t),e.account?[4,this.decodeTokenTransfer(e.account,e)]:[2,void 0];case 2:return[2,n.sent()];case 3:return t&&t.length>0&&console.error("Sub logs for transfer entry!",e,t),[4,this.decodeEtherTransfer(e.address,e)];case 4:return[2,n.sent()];case 5:return[2,void 0];case 6:return[2]}}))}))},e}();t.TransferDecoder=c},306:function(e,t){},359:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(99),c=n.n(i),o=(n(257),n(229)),s=n(39),u=n(230),l=n(431),d=n(2),f=n.n(d),h=n(22),p=n(18),b=n(15),v=n(436),j=n(438),x=n(439),g=n(440),O=n(435),m=n(411),k=n(103),w=n(6),y=n(7),S=n(12),T=n(11),C=function(){function e(t,n,r){Object(w.a)(this,e),this.internalDb=void 0,this.indexedDB=window.indexedDB,this.dbKey=void 0,this.dbVersion=void 0,this.migration=void 0,this.dbKey=t,this.dbVersion=n,this.migration=r}return Object(y.a)(e,[{key:"open",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("open"),!this.internalDb){e.next=3;break}return e.abrupt("return",this.internalDb);case 3:return t=this,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(n.dbKey,n.dbVersion);a.onerror=function(){r("Error: "+this.error)},a.onsuccess=function(){t.internalDb=this.result,e(this.result)},a.onupgradeneeded=function(e){console.log("onupgradeneeded"),t.migration(this.result,e.oldVersion,this.result.version)}})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),I=function(){function e(t,n){Object(w.a)(this,e),this.db=void 0,this.storeName=void 0,this.db=t,this.storeName=n}return Object(y.a)(e,[{key:"add",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,a){var i=n.transaction([r.storeName],"readwrite");i.onerror=function(e){a(e)},i.objectStore(r.storeName).put(t).onsuccess=function(){e()}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,a){var i=n.transaction([r.storeName],"readwrite");i.onerror=function(e){a(e)},i.objectStore(r.storeName).delete(t).onsuccess=function(){e()}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,a){var i=n.transaction([r.storeName],"readwrite");i.onerror=function(e){a(e)},i.objectStore(r.storeName).get(t).onsuccess=function(){e(this.result)}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByIndex",value:function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:return r=e.sent,e.abrupt("return",new Promise((function(e,i){var c=r.transaction([a.storeName],"readwrite");c.onerror=function(e){i(e)},c.objectStore(a.storeName).index(t).getAll(n).onsuccess=function(){e(this.result.reverse())}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"drop",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,r){var a=t.transaction([n.storeName],"readwrite");a.onerror=function(e){r(e)},a.objectStore(n.storeName).clear().onsuccess=function(){e()}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E="interactions",_="timestamp",D="queued_tx",B="nonce",A="tx_signatures",M="safeTxHash",P=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){return Object(w.a)(this,n),t.call(this,e,3,(function(e,t){t<1&&e.createObjectStore(E,{keyPath:"id"}).createIndex(_,_,{unique:!1});t<2&&e.createObjectStore(D,{keyPath:"id"}).createIndex(B,B,{unique:!1});t<3&&e.createObjectStore(A,{keyPath:"id"}).createIndex(M,M,{unique:!1})}))}return n}(C),N=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){return Object(w.a)(this,n),t.call(this,new P(e),E)}return Object(y.a)(n,[{key:"getAll",value:function(){return this.getAllByIndex(_)}}]),n}(I),R=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){return Object(w.a)(this,n),t.call(this,new P(e),D)}return Object(y.a)(n,[{key:"getAll",value:function(e){return this.getAllByIndex(B,IDBKeyRange.lowerBound(e))}}]),n}(I),F=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){return Object(w.a)(this,n),t.call(this,new P(e),A)}return Object(y.a)(n,[{key:"getAll",value:function(e){return this.getAllByIndex(M,e)}}]),n}(I),H=function(e,t){if(!e)return t;var n=parseInt(e);return Number.isNaN(n)?t:n},G=function(){function e(t,n){Object(w.a)(this,e),this.safe=void 0,this.defaultBlock=void 0,this._lastIndexedBlock=void 0,this._earliestIndexedBlock=void 0,this._earliestBlock=void 0,this.safe=t,this.defaultBlock=n||-1;var r=localStorage.getItem("indexer_state_safe_earliest_indexed_block"+this.safe);this._earliestIndexedBlock=H(r,this.defaultBlock);var a=localStorage.getItem("indexer_state_safe_last_indexed_block"+this.safe);this._lastIndexedBlock=H(a,this.defaultBlock);var i=localStorage.getItem("indexer_state_safe_earliest_block"+this.safe);this._earliestBlock=H(i,0)}return Object(y.a)(e,[{key:"lastIndexedBlock",get:function(){return this._lastIndexedBlock},set:function(e){localStorage.setItem("indexer_state_safe_last_indexed_block"+this.safe,e.toString()),this._lastIndexedBlock=e}},{key:"earliestIndexedBlock",get:function(){return this._earliestIndexedBlock},set:function(e){localStorage.setItem("indexer_state_safe_earliest_indexed_block"+this.safe,e.toString()),this._earliestIndexedBlock=e}},{key:"earliestBlock",get:function(){return this._earliestBlock},set:function(e){localStorage.setItem("indexer_state_safe_earliest_block"+this.safe,e.toString()),this._earliestBlock=e}},{key:"reset",value:function(){localStorage.removeItem("indexer_state_safe_earliest_indexed_block"+this.safe),localStorage.removeItem("indexer_state_safe_last_indexed_block"+this.safe),localStorage.removeItem("indexer_state_safe_earliest_block"+this.safe),this._lastIndexedBlock=this.defaultBlock,this._earliestIndexedBlock=this.defaultBlock}}]),e}(),L=n(74),U=function(){function e(t,n){Object(w.a)(this,e),this.callbacks=new Set,this.currentStatus=void 0,this.indexer=void 0,this.state=void 0,this.db=void 0,this.account=void 0,this.networkConfig=void 0,this.account=t,this.networkConfig=n,this.db=new N(t.id),this.state=new G(t.id,n.startingBlock)}return Object(y.a)(e,[{key:"connect",value:function(e){var t=this;this.disconnect(),console.log("connect");var n=function(e,t,n,r,a){var i=new L.EthersLoader(t,[new L.MultisigTransactionEventSource(t),new L.ModuleTransactionEventSource(t),new L.IncomingTransferEventSource(t),new L.OutgoingTransferEventSource(t),new L.IncomingEthEventSource(t),new L.SettingsChangeEventSource(t)]),c=new L.EthersParser(t),o={chainId:e.chainId,safe:e.address,maxBlocks:r.maxBlocks,logger:console,earliestBlock:n.earliestBlock};return new L.SafeIndexer(n,i,c,a,o)}(this.account,e,this.state,this.networkConfig,this);return this.indexer=n,n.start().catch((function(e){return console.error(e)})),n.start(!0).catch((function(e){return console.error(e)})),function(){t.disconnect()}}},{key:"disconnect",value:function(){var e;console.log("disconnect"),null===(e=this.indexer)||void 0===e||e.stop(),this.currentStatus=void 0}},{key:"registerCallback",value:function(e){this.callbacks.add(e)}},{key:"unregisterCallback",value:function(e){this.callbacks.delete(e),this.postCurrentStatusUpdateToCallback(e)}},{key:"checkForCreation",value:function(e){var t,n=Object(k.a)(e);try{for(n.s();!(t=n.n()).done;){var r,a=t.value;if(console.log(a),"setup"===a.type||"multisig_transaction"===a.type&&0===(null===(r=a.details)||void 0===r?void 0:r.nonce)){var i;console.log("Found creation, stop reverse indexing");var c=Math.max(0,a.block-this.networkConfig.maxBlocks);return this.state.earliestBlock=c,void(null===(i=this.indexer)||void 0===i||i.updateConfig({earliestBlock:c}))}}}catch(o){n.e(o)}finally{n.f()}}},{key:"handleNewInteraction",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.add(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onNewInteractions",value:function(e){var t=this;this.checkForCreation(e),e.forEach((function(e){t.handleNewInteraction(e)})),this.callbacks.forEach((function(t){try{t.onNewInteractions(e)}catch(n){console.log(n)}}))}},{key:"onStatusUpdate",value:function(e){this.currentStatus=e,this.postCurrentStatusUpdate()}},{key:"postCurrentStatusUpdate",value:function(){var e=this;this.currentStatus&&this.callbacks.forEach((function(t){e.postCurrentStatusUpdateToCallback(t)}))}},{key:"postCurrentStatusUpdateToCallback",value:function(e){var t=this.currentStatus;if(t)try{var n;null===(n=e.onStatusUpdate)||void 0===n||n.call(e,t)}catch(r){console.log(r)}}},{key:"getTx",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTxs",value:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.getAll());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reindex",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentStatus=void 0,t=this.indexer){e.next=4;break}return e.abrupt("return",!1);case 4:return t.pause(),e.next=7,this.db.drop();case 7:return this.state.reset(),t.resume(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q=n(43),W=n(0),V={startingBlock:-1,maxBlocks:1e3},z=a.a.createContext(void 0),K=function(){var e=Object(r.useContext)(z);if(!e)throw Error("App Settings not available!");return e},J=function(e){var t=e.children,n=Object(r.useState)("true"===localStorage.getItem("app_state_use_rpc")),a=Object(p.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(localStorage.getItem("app_state_rpc")||""),s=Object(p.a)(o,2),u=s[0],l=s[1],d=localStorage.getItem("app_state_network_config"),b=Object(r.useState)(d?JSON.parse(d):V),v=Object(p.a)(b,2),j=v[0],x=v[1],g=Object(r.useMemo)((function(){if(i){if(!u)return;return new q.a.providers.JsonRpcProvider(u)}if(window.ethereum)return new q.a.providers.Web3Provider(window.ethereum)}),[i,u]),O=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=2;break}return e.abrupt("return",window.ethereum.enable());case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsx)(z.Provider,{value:{customRpc:u,useCustomRpc:i,provider:g,signer:null===g||void 0===g?void 0:g.getSigner(),networkConfig:j,toggleCustomRpc:function(e){localStorage.setItem("app_state_use_rpc",e?"true":"false"),c(e)},updateCustomRpc:function(e){localStorage.setItem("app_state_rpc",e),l(e)},updateNetworkConfig:function(e){var t=JSON.stringify({maxBlocks:e.maxBlocks||100,startingBlock:e.startingBlock||-1});localStorage.setItem("app_state_network_config",t),x(e)},enable:O},children:t})},Y=a.a.createContext(void 0),X=function(){var e=Object(r.useContext)(Y);if(!e)throw Error("AccountInfoRepository not available!");return e},Q=function(e){var t=e.children,n=cn(),a=K(),i=a.provider,c=a.networkConfig,o=Object(r.useMemo)((function(){return new U(n,c)}),[n,c]);return Object(r.useEffect)((function(){if(i)return o.connect(i)}),[o,i]),Object(r.useEffect)((function(){return function(){return o.disconnect()}}),[o]),Object(W.jsx)(Y.Provider,{value:o,children:t})},Z=n(410),$=n(224),ee=function(e,t){return"eip155:".concat(e,":").concat(t)},te=function(e){try{return q.a.utils.getAddress(e)}catch(t){return}},ne=function(e){var t,n=e.split(":"),r=void 0,a=void 0;if(1==n.length?(a=te(n[0]),r="eip155:1"):2==n.length?(a=te(n[1]),t=n[0],r=$[t]):3==n.length&&(a=te(n[2]),r="".concat(n[0],":").concat(n[1])),r&&a){var i=r.split(":");if(2==i.length&&"eip155"===i[0]){var c=function(e){try{return parseInt(e)}catch(t){return}}(i[1]);if(c)return{address:a,chainId:c,id:ee(c,a)}}}},re=function(){return Object(Z.a)("(min-width:600px)")},ae=function(e,t){try{navigator.clipboard.writeText(e),t&&window.alert(t)}catch(n){console.log(n)}},ie=function(e){var t=cn(),n=ee(t.chainId,e);return function(){ae(n,"Copied address to clipboard!")}},ce=n(150),oe=n.n(ce),se=n(151),ue=n.n(se),le=n(432),de=Object(m.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column"}})),fe=Object(m.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"row"}})),he=Object(m.a)("div")((function(e){e.theme;return{textAlign:"start"}})),pe=Object(m.a)("div")((function(e){e.theme;return{display:"flex",alignItems:"center",paddingBottom:16}})),be=Object(m.a)(le.a)((function(e){e.theme;return{width:"100%",textAlign:"start",wordWrap:"break-word"}})),ve=n(115),je=n(433),xe=n(148),ge=n.n(xe),Oe=n(417),me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.length;return n<=2*t+2?e:"0x"+e.slice(2,2+t)+"..."+e.slice(e.length-t)},ke={identicon:{size:{xs:"10px",sm:"16px",md:"32px",lg:"40px",xl:"48px",xxl:"60px"}}},we=Object(m.a)("img")((function(e){e.theme;var t=e.size;return{height:ke.identicon.size[t],width:ke.identicon.size[t],borderRadius:"50%"}})),ye=function(e){var t=e.address,n=e.onClick,a=Object(r.useMemo)((function(){return ge()(t)}),[t]),i=ie(t);return Object(W.jsxs)(fe,{sx:{width:"calc(100% - 32px)",textAlign:"left",alignItems:"center"},children:[Object(W.jsx)(we,{src:a,size:"md",onClick:function(){return null===n||void 0===n?void 0:n(t)}}),Object(W.jsx)(le.a,{sx:{fontFamily:"Monospace",paddingX:"8px"},onClick:function(){return null===n||void 0===n?void 0:n(t)},children:me(t)}),Object(W.jsx)(je.a,{color:"default",component:"span",onClick:function(){return i()},children:Object(W.jsx)(Oe.a,{fontSize:"small"})})]})},Se=function(e,t){switch(e){case"owners":case"modules":case"fallbackHandler":return Object(W.jsx)(ye,{address:t});default:return Object(W.jsx)(be,{children:t})}},Te=function(e){var t,n=e.transaction;return Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Date:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:new Date(1e3*n.timestamp).toUTCString()})}),Object(W.jsxs)(he,{children:[(t=n.component,t.length<2?t:t.slice(0,1).toUpperCase()+t.slice(1))," ",n.change]}),Object(W.jsx)(pe,{children:Se(n.component,n.value)}),Object(W.jsx)(he,{children:"Ethereum Transaction:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:n.txHash})})]})},Ce=Object(ve.a)(pe)((function(e){e.theme;return{display:"inline-block",width:"100%",wordWrap:"break-word"}})),Ie=function(e){var t=e.settingsChange,n=e.hideDate,r=e.showDetails;return Object(W.jsxs)(Ce,{onClick:function(){return null===r||void 0===r?void 0:r(t.id)},children:["".concat(t.component," ").concat(t.change),n&&Se(t.component,t.value),!n&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),new Date(1e3*t.timestamp).toUTCString()]})]})},Ee=Object(ve.a)(pe)((function(e){e.theme;return{display:"flex",flexDirection:"column"}})),_e=function(e){var t=e.transfer,n=e.hideDate,r=e.showDetails;return Object(W.jsxs)(Ee,{onClick:function(){return null===r||void 0===r?void 0:r(t.id)},children:["".concat(t.direction," ").concat(t.details.type," Transfer"),!n&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),new Date(1e3*t.timestamp).toUTCString()]})]})},De=function(e){var t=e.interaction,n=e.showDetails,r=e.hideDate;switch(t.type){case"multisig_transaction":case"module_transaction":case"setup":return Object(W.jsxs)("div",{onClick:function(){return null===n||void 0===n?void 0:n(t.id)},children:["".concat(t.type),Object(W.jsx)("br",{}),r?"":"".concat(new Date(1e3*t.timestamp).toUTCString()),Object(W.jsx)("br",{}),Object(W.jsx)("br",{})]});case"settings":return Object(W.jsx)(Ie,{settingsChange:t,hideDate:r,showDetails:n});case"transfer":return Object(W.jsx)(_e,{transfer:t,hideDate:r,showDetails:n});default:return Object(W.jsx)("div",{children:"Unknown Interaction"})}},Be=function(e){var t=e.interactions;return 0==t.length?Object(W.jsx)(W.Fragment,{}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(he,{children:"Events:"}),Object(W.jsx)(de,{sx:{textAlign:"left"},children:t.map((function(e){return Object(W.jsx)(pe,{children:e.interaction?Object(W.jsx)(De,{interaction:e.interaction,hideDate:!0}):(t=e.event,Object(W.jsxs)("div",{children:["Event - ".concat(t.eventId),Object(W.jsx)("br",{}),Object(W.jsx)("br",{})]}))});var t}))})]})},Ae=n(434),Me=function(e){var t=e.data,n=Object(r.useState)(!0),a=Object(p.a)(n,2),i=a[0],c=a[1],o=t.length>=10,s=t.length>=42,u=s&&i?t.slice(0,24)+"...":t;return Object(W.jsxs)(de,{sx:{paddingBottom:"16px"},children:[Object(W.jsxs)(be,{children:[u," ",s&&Object(W.jsx)(Ae.a,{onClick:function(){c(!i)},sx:{textDecoration:"none"},children:i?"Expand":"Collapse"})]}),o&&Object(W.jsx)(O.a,{onClick:function(){window.open("https://rimeissner.dev/transaction-decoder/#/?data="+t,"_blank")},children:"Decode"})]})},Pe=function(e){var t=e.transaction;return Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Date:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:new Date(1e3*t.timestamp).toUTCString()})}),Object(W.jsx)(he,{children:"Status:"}),Object(W.jsx)(pe,{children:t.success?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(le.a,{children:"Success"}),Object(W.jsx)(oe.a,{color:"success"})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(le.a,{children:"Error"}),Object(W.jsx)(ue.a,{color:"error"})]})}),Object(W.jsx)(he,{children:"Module:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{address:t.module})}),Object(W.jsx)(he,{children:"Ethereum Transaction:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:t.txHash})}),t.details?Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Operation:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:t.details.operation})}),Object(W.jsx)(he,{children:"To:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{address:t.details.to})}),Object(W.jsx)(he,{children:"Value:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:t.details.value})}),Object(W.jsx)(he,{children:"Data:"}),Object(W.jsx)(Me,{data:t.details.data})]}):Object(W.jsx)(pe,{children:"No details available"}),Object(W.jsx)(Be,{interactions:t.logs})]})},Ne=function(e){var t=e.transaction;return Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Date:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:new Date(1e3*t.timestamp).toUTCString()})}),Object(W.jsx)(he,{children:"Status:"}),Object(W.jsx)(pe,{children:t.success?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(le.a,{children:"Success"}),Object(W.jsx)(oe.a,{color:"success"})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(le.a,{children:"Error"}),Object(W.jsx)(ue.a,{color:"error"})]})}),Object(W.jsx)(he,{children:"Ethereum Transaction:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:t.txHash})}),Object(W.jsx)(he,{children:"Id:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:t.safeTxHash})}),t.details?Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Operation:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:t.details.operation})}),Object(W.jsx)(he,{children:"To:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{address:t.details.to})}),Object(W.jsx)(he,{children:"Value:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:t.details.value})}),Object(W.jsx)(he,{children:"Data:"}),Object(W.jsx)(Me,{data:t.details.data}),Object(W.jsx)(he,{children:"Nonce:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:t.details.nonce})}),Object(W.jsx)(he,{children:"Signatures:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:t.details.signatures})})]}):Object(W.jsx)(pe,{children:"No details available"}),Object(W.jsx)(Be,{interactions:t.logs})]})},Re=function(e){var t="",n="",r="";switch(e.type){case"ERC20":t="ERC20 - "+e.tokenAddress,n="Value",r=e.value;break;case"ERC721":t="ERC721 - "+e.tokenAddress,n="ID",r=e.tokenId;break;case"ETHER":t="Ether",n="Value",r=e.value}return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(he,{children:"Asset:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:t})}),Object(W.jsx)(he,{children:n}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:r})})]})},Fe=function(e){var t=e.transaction;return Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Date:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:new Date(1e3*t.timestamp).toUTCString()})}),Object(W.jsx)(he,{children:"From:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{address:t.sender})}),Object(W.jsx)(he,{children:"To:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{address:t.receipient})}),Re(t.details),Object(W.jsx)(he,{children:"Ethereum Transaction:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:t.txHash})})]})},He=Object(m.a)(v.a)((function(e){e.theme;return{textAlign:"center"}})),Ge=function(e){switch(null===e||void 0===e?void 0:e.type){case"multisig_transaction":return Object(W.jsx)(Ne,{transaction:e});case"module_transaction":return Object(W.jsx)(Pe,{transaction:e});case"transfer":return Object(W.jsx)(Fe,{transaction:e});case"settings":return Object(W.jsx)(Te,{transaction:e});default:return Object(W.jsx)(W.Fragment,{children:'"Unknown details"'})}},Le=function(e){var t=e.id,n=e.handleClose,a=Object(r.useState)(void 0),i=Object(p.a)(a,2),c=i[0],o=i[1],s=X(),u=cn(),l=Object(r.useState)(void 0),d=Object(p.a)(l,2),b=d[0],v=d[1];return Object(r.useEffect)((function(){(v(void 0),t)&&function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=v,e.next=4,s.getTx(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),n();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[t,s,v,n]),Object(r.useEffect)((function(){if(b){var e="https://dashboard.tenderly.co/tx/";e+=u.chainId+"/",e+=null===b||void 0===b?void 0:b.txHash,o(e)}else o(void 0)}),[b,u]),Object(W.jsxs)(He,{open:!!t,onClose:n,maxWidth:"md",fullWidth:!0,fullScreen:!re(),children:[Object(W.jsx)(j.a,{children:"Transaction Details"}),Object(W.jsx)(x.a,{children:Ge(b)}),Object(W.jsxs)(g.a,{children:[c&&Object(W.jsx)(O.a,{onClick:function(){window.open(c,"_blank")},children:"Debug"}),Object(W.jsx)(O.a,{onClick:n,children:"Close"})]})]})},Ue=Object(b.a)("div")((function(e){e.theme;return{textAlign:"center"}}));var qe=function(){var e=cn(),t=Object(r.useState)(void 0),n=Object(p.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)([]),o=Object(p.a)(c,2),s=o[0],u=o[1],l=X();Object(r.useEffect)((function(){var e={onNewInteractions:function(){l.getAllTxs().then((function(e){return u(e)}))}};return l.registerCallback(e),function(){return l.unregisterCallback(e)}}),[l,s,u]),Object(r.useEffect)((function(){i(void 0)}),[e]);var d=Object(r.useCallback)(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);Object(r.useEffect)((function(){u([]),l.getAllTxs().then((function(e){return u(e)}))}),[l,u]);var b=Object(r.useMemo)((function(){return Object(W.jsx)(Le,{id:a,handleClose:function(){return i(void 0)}})}),[a,i]);return Object(W.jsxs)(Ue,{children:[Object(W.jsx)("hr",{}),s.map((function(e){return Object(W.jsx)(De,{interaction:e,showDetails:function(e){return d(e)}})})),b]})},We=n(57),Ve=n(36),ze=n(3),Ke=function(e,t){var n=q.a.utils.hashMessage(q.a.utils.arrayify(e));return q.a.utils.recoverAddress(n,t)},Je=function(e,t){return q.a.utils.recoverAddress(e,t)},Ye=function(){var e=Object(h.a)(f.a.mark((function e(t,n,r){var a,i,c,o,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((2!=(a=t.split(":")).length||n||r)&&(3!=a.length||r)&&4==a.length){e.next=3;break}throw Error("Missing Safe signature info");case 3:return i=a[0],c=a[1],o=n||a[2],s=r||a[3],u=q.a.utils.keccak256(i+o.slice(2)),e.abrupt("return",{id:u,type:s,signer:c,safeTxHash:o,data:i});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Xe=function(e,t){switch(e){case"1.3.0":return{verifyingContract:t.address,chainId:t.chainId};default:return{verifyingContract:t.address}}},Qe=function(e){switch(e){case"0.1.0":return{SafeTx:[{type:"address",name:"to"},{type:"uint256",name:"value"},{type:"bytes",name:"data"},{type:"uint8",name:"operation"},{type:"uint256",name:"safeTxGas"},{type:"uint256",name:"dataGas"},{type:"uint256",name:"gasPrice"},{type:"address",name:"gasToken"},{type:"address",name:"refundReceiver"},{type:"uint256",name:"nonce"}]};default:return{SafeTx:[{type:"address",name:"to"},{type:"uint256",name:"value"},{type:"bytes",name:"data"},{type:"uint8",name:"operation"},{type:"uint256",name:"safeTxGas"},{type:"uint256",name:"baseGas"},{type:"uint256",name:"gasPrice"},{type:"address",name:"gasToken"},{type:"address",name:"refundReceiver"},{type:"uint256",name:"nonce"}]}}},Ze=function(){var e=Object(h.a)(f.a.mark((function e(t,n,r){var a,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._signTypedData(Xe(r.version,n),Qe(r.version),r);case 2:return a=e.sent,e.next=5,t.getAddress();case 5:if(i=e.sent,(c=Je(r.id,a))===i){e.next=9;break}throw Error("Unexpected signer! Expected ".concat(i," got ").concat(c));case 9:return e.abrupt("return",{type:"eip712",id:a,signer:i,data:a,safeTxHash:r.id});case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$e=function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signMessage(Object(ze.a)(n.id));case 2:return r=e.sent,e.next=5,t.getAddress();case 5:if(a=e.sent,(i=Ke(n.id,r))===a){e.next=9;break}throw Error("Unexpected signer! Expected ".concat(a," got ").concat(i));case 9:return e.abrupt("return",{type:"eth_sign",id:r,signer:a,data:r,safeTxHash:n.id});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),et=function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="0x000000000000000000000000"+t.slice(2)+"000000000000000000000000000000000000000000000000000000000000000001",e.abrupt("return",{id:r+n.id,safeTxHash:n.id,type:"pre_validated",signer:t,data:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tt=function(){var e=Object(h.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ze(t,n,r);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0.code||4001!==e.t0.code){e.next=11;break}throw console.warn("User canceled signing"),e.t0;case 11:console.warn("Could not sign with EIP-712");case 12:return e.next=14,$e(t,r);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),nt=function(){var e=Object(h.a)(f.a.mark((function e(t,n,r,a){var i,c,o,s,u,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Map,c=Object(k.a)(r),e.prev=2,c.s();case 4:if((o=c.n()).done){e.next=13;break}if(s=o.value,!(t.owners.indexOf(s.signer)<0)){e.next=8;break}return e.abrupt("continue",11);case 8:if(a!==s.signer&&!i.has(s.signer)){e.next=10;break}return e.abrupt("continue",11);case 10:i.set(s.signer,s);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:if(u=a&&t.owners.indexOf(a)>=0,!((l=u?t.threshold.sub(1):t.threshold).toNumber()>i.size)){e.next=25;break}throw Error("Not enough signatures (".concat(i.size," of ").concat(l,")"));case 25:if(d=[],!u){e.next=32;break}return e.t1=d,e.next=30,et(a,n);case 30:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 32:return e.abrupt("return",d.concat(Array.from(i.values()).slice(0,l.toNumber())));case 33:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),rt=function(e,t){switch(e.type){case"contract":return""+q.a.utils.defaultAbiCoder.encode(["address"],[e.signer]).slice(2)+q.a.utils.defaultAbiCoder.encode(["uint256"],[t]).slice(2)+"00";case"eip712":case"pre_validated":case"eth_sign":return e.data.slice(2)}},at=function(e){switch(e.type){case"contract":return q.a.utils.defaultAbiCoder.encode(["bytes"],[Object(ze.a)(e.data)]).slice(2);case"eip712":case"pre_validated":case"eth_sign":return""}},it=function(e){e.sort((function(e,t){return e.signer.toLowerCase().localeCompare(t.signer.toLowerCase())}));var t,n="",r="",a=Object(k.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n+=rt(i,r.length/2),r+=at(i)}}catch(c){a.e(c)}finally{a.f()}return"0x"+n+r},ct=n(67),ot=function(){function e(t,n){Object(w.a)(this,e),this.safeContract=void 0,this.safeContract=new ct.b(t,L.safeInterface,n)}return Object(y.a)(e,[{key:"writable",value:function(e){return new st(this.safeContract.address,e)}},{key:"nonce",value:function(){return this.safeContract.nonce()}},{key:"owners",value:function(){return this.safeContract.getOwners()}},{key:"status",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.safeContract.nonce(),this.safeContract.getThreshold(),this.safeContract.getOwners(),this.safeContract.VERSION()]);case 2:return t=e.sent,e.abrupt("return",{nonce:t[0],threshold:t[1],owners:t[2],version:t[3]});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTransactionHash",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safeContract.getTransactionHash(t.to,t.value,t.data,t.operation,t.safeTxGas,t.baseGas,t.gasPrice,t.gasToken,t.refundReceiver,t.nonce);case 2:return n=e.sent,e.next=5,this.safeContract.VERSION();case 5:return r=e.sent,e.abrupt("return",{hash:n,version:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"populateTx",value:function(e){return this.safeContract.populateTransaction.execTransaction(e.to,e.value,e.data,e.operation,e.safeTxGas,e.baseGas,e.gasPrice,e.gasToken,e.refundReceiver,e.signatures)}}]),e}(),st=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e,r){return Object(w.a)(this,n),t.call(this,e,r)}return Object(y.a)(n,[{key:"executeTx",value:function(e){return this.safeContract.execTransaction(e.to,e.value,e.data,e.operation,e.safeTxGas,e.baseGas,e.gasPrice,e.gasToken,e.refundReceiver,e.signatures)}}]),n}(ot),ut=function(){function e(t,n){Object(w.a)(this,e),this.callbacks=new Set,this.queueDao=void 0,this.signaturesDao=void 0,this.account=void 0,this.safe=void 0,this.account=t,this.queueDao=new R(t.id),this.signaturesDao=new F(t.id),this.safe=new ot(t.address,n)}return Object(y.a)(e,[{key:"registerCallback",value:function(e){this.callbacks.add(e)}},{key:"unregisterCallback",value:function(e){this.callbacks.delete(e)}},{key:"notifyNewTxs",value:function(){this.callbacks.forEach((function(e){try{e.onNewTx()}catch(t){console.log(t)}}))}},{key:"addTx",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safe.getTransactionHash(t);case 2:return n=e.sent,r=Object(We.a)({id:n.hash,version:n.version},t),e.next=6,this.queueDao.add(r);case 6:return this.notifyNewTxs(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTx",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queueDao.remove(t);case 2:this.notifyNewTxs();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTx",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.queueDao.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueuedTxs",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safe.nonce();case 2:return t=e.sent,e.abrupt("return",this.queueDao.getAll(t.toNumber()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNextNonce",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getQueuedTxs();case 2:if(!((t=e.sent).length>0)){e.next=5;break}return e.abrupt("return",Ve.a.from(t[t.length-1].nonce).add(1).toString());case 5:return e.next=7,this.safe.nonce();case 7:return e.abrupt("return",e.sent.toString());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSignatures",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signaturesDao.getAll(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSignature",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signaturesDao.add(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitTx",value:function(){var e=Object(h.a)(f.a.mark((function e(t,n,r){var a,i,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.safe.writable(n),e.next=3,this.safe.status();case 3:if((i=e.sent).nonce.toNumber()===t.nonce){e.next=6;break}throw Error("Unexpected nonce! Expected ".concat(i.nonce," got ").concat(t.nonce));case 6:return e.next=8,n.getAddress();case 8:return c=e.sent,e.t0=it,e.next=12,nt(i,t,r,c);case 12:return e.t1=e.sent,o=(0,e.t0)(e.t1),s=Object(We.a)({signatures:o},t),e.abrupt("return",a.executeTx(s));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),lt=a.a.createContext(void 0),dt=function(){var e=Object(r.useContext)(lt);if(!e)throw Error("AccountInfoRepository not available!");return e},ft=function(e){var t=e.children,n=cn(),a=K().provider,i=Object(r.useMemo)((function(){return new ut(n,a)}),[n,a]);return Object(W.jsx)(lt.Provider,{value:i,children:t})},ht=function(e){var t=e.transaction,n=e.showDetails;return Object(W.jsxs)("div",{onClick:function(){return null===n||void 0===n?void 0:n(t.id)},children:[t.to,Object(W.jsx)("br",{}),t.nonce," - ",t.version," - ",t.id.slice(0,10),Object(W.jsx)("br",{})]})},pt=n(425),bt=Object(m.a)(v.a)((function(e){e.theme;return{textAlign:"center"}})),vt=function(e){var t=e.safeTxHash,n=e.open,a=e.handleClose,i=e.handleNewSignature,c=Object(r.useState)(""),o=Object(p.a)(c,2),s=o[0],u=o[1],l=Object(r.useState)(""),d=Object(p.a)(l,2),b=d[0],v=d[1],m=dt(),k=function(){var e=Object(h.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Ye(b,t);case 5:return n=e.sent,e.next=8,m.addSignature(n);case 8:null===i||void 0===i||i(),a(),u(""),v(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(bt,{open:n,onClose:a,maxWidth:"md",fullWidth:!0,children:[Object(W.jsx)(j.a,{children:"Add Signature"}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(pt.a,{label:"Signature",onChange:function(e){return v(e.target.value)},value:b,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Signer (optional)",onChange:function(e){return u(e.target.value)},value:s,fullWidth:!0}),Object(W.jsx)("br",{})]}),Object(W.jsxs)(g.a,{children:[Object(W.jsx)(O.a,{onClick:a,children:"Cancel"}),Object(W.jsx)(O.a,{onClick:k,children:"Add"})]})]})},jt=Object(m.a)(v.a)((function(e){e.theme;return{textAlign:"center"}})),xt=function(e){var t=e.transaction,n=e.open,a=e.handleClose,i=e.handleNewSignature,c=dt(),o=cn(),s=K(),u=s.signer,l=s.enable,d=function(){var e=Object(h.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l();case 5:if(0!==e.sent.length){e.next=8;break}throw Error("No accounts available");case 8:return e.next=10,tt(u,o,t);case 10:return r=e.sent,e.next=13,c.addSignature(r);case 13:null===i||void 0===i||i(),a(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){d()}),[n,t]),Object(W.jsxs)(jt,{open:n,onClose:a,maxWidth:"md",fullWidth:!0,children:[Object(W.jsx)(j.a,{children:"Sign Transaction"}),Object(W.jsx)(x.a,{children:"Check for wallet for signing information"}),Object(W.jsx)(g.a,{children:Object(W.jsx)(O.a,{onClick:a,children:"Cancel"})})]})},gt=Object(m.a)(v.a)((function(e){e.theme;return{textAlign:"center"}})),Ot=function(e){var t=e.transaction,n=e.open,a=e.handleClose,i=e.handleTxSubmitted,c=dt(),o=K(),s=o.signer,u=o.enable,l=function(){var e=Object(h.a)(f.a.mark((function e(){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u();case 5:if(0!==e.sent.length){e.next=8;break}throw Error("No accounts available");case 8:return e.next=10,c.getSignatures(t.id);case 10:return r=e.sent,e.next=13,c.submitTx(t,s,r);case 13:o=e.sent,null===i||void 0===i||i(o),a(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l()}),[n,t]),Object(W.jsxs)(gt,{open:n,onClose:a,maxWidth:"md",fullWidth:!0,children:[Object(W.jsx)(j.a,{children:"Execute Transaction"}),Object(W.jsx)(x.a,{children:"Check for wallet for signing information"}),Object(W.jsx)(g.a,{children:Object(W.jsx)(O.a,{onClick:a,children:"Close"})})]})},mt=Object(m.a)(v.a)((function(e){e.theme;return{textAlign:"center"}})),kt=function(e){var t=e.id,n=e.handleClose,a=Object(r.useState)(void 0),i=Object(p.a)(a,2),c=i[0],o=i[1],s=Object(r.useState)(!1),u=Object(p.a)(s,2),l=u[0],d=u[1],b=Object(r.useState)(!1),v=Object(p.a)(b,2),m=v[0],k=v[1],w=Object(r.useState)(!1),y=Object(p.a)(w,2),S=y[0],T=y[1],C=dt(),I=cn(),E=K().signer,_=Object(r.useCallback)(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C.deleteTx(t);case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[C,n]),D=Object(r.useState)(void 0),B=Object(p.a)(D,2),A=B[0],M=B[1];Object(r.useEffect)((function(){(M(void 0),t)&&function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=M,e.next=4,C.getTx(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),n();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[t,C,M,n]);var P=Object(r.useState)(void 0),N=Object(p.a)(P,2),R=N[0],F=N[1],H=Object(r.useCallback)(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Load Signatures"),t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.t0=F,e.next=7,C.getSignatures(t);case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(3),console.error(e.t2);case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),[t,C,F]);return Object(r.useEffect)((function(){F(void 0),H()}),[H]),Object(r.useEffect)((function(){A&&0===A.operation?Object(h.a)(f.a.mark((function e(){var t,n,r,a,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E||!R){e.next=23;break}return e.prev=1,e.next=4,E.getAddress();case 4:return n=e.sent,r=new ot(I.address,E),e.next=8,r.status();case 8:return a=e.sent,e.t0=it,e.next=12,nt(a,A,R,n);case 12:return e.t1=e.sent,i=(0,e.t0)(e.t1),e.next=16,r.populateTx(Object(We.a)({signatures:i},A));case 16:(t=e.sent).from=n,e.next=23;break;case 20:e.prev=20,e.t2=e.catch(1),console.error(e.t2);case 23:try{c="https://dashboard.tenderly.co/simulator/new?",c+="network="+I.chainId+"&",console.log(t),t?(c+="from="+t.from+"&",c+="contractAddress="+t.to+"&",c+="rawFunctionInput="+t.data+"&",c+="value="+Ve.a.from(t.value||"0").toString()+"&"):(c+="from="+I.address+"&",c+="contractAddress="+A.to+"&",c+="rawFunctionInput="+A.data+"&",c+="value="+Ve.a.from(A.value).toString()+"&"),o(c)}catch(s){console.error(s)}case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))():o(void 0)}),[A,I,E,C,R]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(mt,{open:!!t&&!l,onClose:n,maxWidth:"md",fullWidth:!0,fullScreen:!re(),children:[Object(W.jsx)(j.a,{children:"Transaction Details"}),Object(W.jsx)(x.a,{children:A?Object(W.jsxs)(de,{children:[Object(W.jsx)(he,{children:"Id:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:A.id})}),Object(W.jsx)(he,{children:"Operation:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:A.operation})}),Object(W.jsx)(he,{children:"To:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{address:A.to})}),Object(W.jsx)(he,{children:"Value:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(le.a,{children:A.value})}),Object(W.jsx)(he,{children:"Data:"}),Object(W.jsx)(Me,{data:A.data}),Object(W.jsx)(he,{children:"Nonce:"}),Object(W.jsx)(pe,{children:Object(W.jsx)(be,{children:A.nonce})}),Object(W.jsx)(he,{children:"Signatures:"}),null===R||void 0===R?void 0:R.map((function(e){return Object(W.jsx)(pe,{children:Object(W.jsx)(ye,{onClick:function(){!function(e){var t,n="".concat((t=e).data,":").concat(t.signer,":").concat(t.safeTxHash,":").concat(t.type);ae(n,"Signature copied to clipboard!")}(e)},address:e.signer})})})),Object(W.jsx)(O.a,{onClick:function(){return k(!0)},children:"Sign"}),Object(W.jsx)(O.a,{onClick:function(){return d(!0)},children:"Add"}),Object(W.jsx)(O.a,{onClick:function(){return T(!0)},children:"Execute"}),Object(W.jsx)(O.a,{onClick:function(){return _(t)},color:"error",children:"Delete Tx"})]}):Object(W.jsx)(W.Fragment,{children:'"Unknown details"'})}),Object(W.jsxs)(g.a,{children:[c&&Object(W.jsx)(O.a,{onClick:function(){window.open(c,"_blank")},children:"Simulate"}),Object(W.jsx)(O.a,{onClick:n,children:"Close"})]})]}),Object(W.jsx)(vt,{open:l,handleClose:function(){return d(!1)},handleNewSignature:H,safeTxHash:t}),Object(W.jsx)(xt,{open:m,handleClose:function(){return k(!1)},handleNewSignature:H,transaction:A}),Object(W.jsx)(Ot,{open:S,handleClose:function(){return T(!1)},handleTxSubmitted:n,transaction:A})]})},wt=n(226),yt=Object(m.a)(v.a)((function(e){e.theme;return{textAlign:"center"}})),St=function(e){var t=e.open,n=e.handleClose,a=e.onConfirm,i=e.onReject,c=e.requestId,o=e.transactions,s=Object(r.useState)(""),u=Object(p.a)(s,2),l=u[0],d=u[1],b=Object(r.useState)(""),v=Object(p.a)(b,2),m=v[0],k=v[1],w=Object(r.useState)(""),y=Object(p.a)(w,2),S=y[0],T=y[1],C=Object(r.useState)(""),I=Object(p.a)(C,2),E=I[0],_=I[1],D=Object(r.useState)(""),B=Object(p.a)(D,2),A=B[0],M=B[1],P=dt(),N=cn();Object(r.useEffect)((function(){t&&Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=M,e.next=4,P.getNextNonce();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[P,t]),Object(r.useEffect)((function(){var e=Object(wt.a)(N,o);d(e.to),k(e.value),T(e.data),_(e.operation.toString())}),[N,o]);var R=function(){null===i||void 0===i||i("Canceled",c),n()},F=function(){var e=Object(h.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!S||q.a.utils.isHexString(S)){e.next=3;break}throw Error("Invalid data");case 3:return t={to:q.a.utils.getAddress(l),value:Ve.a.from(m).toString(),data:S||"0x",nonce:parseInt(A),operation:parseInt(E),safeTxGas:"0",baseGas:"0",gasPrice:"0",gasToken:q.a.constants.AddressZero,refundReceiver:q.a.constants.AddressZero},e.next=6,P.addTx(t);case 6:r=e.sent,a(r,c),n(),d(""),k(""),T(""),_(""),M(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(yt,{open:t,onClose:R,maxWidth:"md",fullWidth:!0,fullScreen:!re(),children:[Object(W.jsx)(j.a,{children:"Add Tx"}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(pt.a,{label:"To",onChange:function(e){return d(e.target.value)},value:l,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Value",onChange:function(e){return k(e.target.value)},value:m,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Data",onChange:function(e){return T(e.target.value)},value:S,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Operation",onChange:function(e){return _(e.target.value)},value:E,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Nonce",onChange:function(e){return M(e.target.value)},value:A,fullWidth:!0}),Object(W.jsx)("br",{})]}),Object(W.jsxs)(g.a,{children:[Object(W.jsx)(O.a,{onClick:R,children:"Cancel"}),Object(W.jsx)(O.a,{onClick:F,color:"primary",children:"Create"})]})]})},Tt=Object(b.a)("div")((function(e){e.theme;return{textAlign:"center"}}));var Ct=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(void 0),c=Object(p.a)(i,2),o=c[0],s=c[1],u=Object(r.useState)([]),l=Object(p.a)(u,2),d=l[0],b=l[1],v=dt(),j=X(),x=Object(r.useCallback)(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=b,e.next=4,v.getQueuedTxs();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[v,b]);Object(r.useEffect)((function(){var e={onNewInteractions:x};return j.registerCallback(e),function(){return j.unregisterCallback(e)}}),[j,x]),Object(r.useEffect)((function(){var e={onNewTx:x};return v.registerCallback(e),function(){return v.unregisterCallback(e)}}),[v,x]),Object(r.useEffect)((function(){x()}),[x]);var g=Object(r.useMemo)((function(){return Object(W.jsx)(St,{open:n,handleClose:function(){return a(!1)},onConfirm:function(){return x()}})}),[n,a]),m=Object(r.useMemo)((function(){return Object(W.jsx)(kt,{id:o,handleClose:function(){return s(void 0)}})}),[o,s]);return Object(W.jsxs)(Tt,{children:[Object(W.jsx)("hr",{}),Object(W.jsx)(O.a,{onClick:function(){return a(!0)},children:"Add Transaction"}),d.map((function(e){return Object(W.jsx)(ht,{transaction:e,showDetails:function(e){return s(e)}})})),g,m]})},It=n(424),Et=[{title:"Balances",url:"https://rimeissner.dev/sapp-balances/"},{title:"WalletConnect",url:"https://apps.gnosis-safe.io/wallet-connect"},{title:"ENS",url:"https://app.ens.domains/"}].map((function(e){return Object(We.a)({section:"Default"},e)})),_t="accounts",Dt="timestamp",Bt="app_urls",At="timestamp",Mt=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(w.a)(this,n),t.call(this,"app_state",2,(function(e,t){t<1&&e.createObjectStore(_t,{keyPath:"id"}).createIndex(Dt,Dt,{unique:!1});t<2&&e.createObjectStore(Bt,{keyPath:"id"}).createIndex(At,At,{unique:!1})}))}return n}(C),Pt=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(w.a)(this,n),t.call(this,new Mt,_t)}return Object(y.a)(n,[{key:"getAll",value:function(){return this.getAllByIndex(Dt)}}]),n}(I),Nt=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(w.a)(this,n),t.call(this,new Mt,Bt)}return Object(y.a)(n,[{key:"getAll",value:function(){return this.getAllByIndex(At)}}]),n}(I),Rt=n(225),Ft=n(441),Ht=n(427),Gt=Object(m.a)(de)((function(e){e.theme;return{height:"100vh",width:"400px",overflowY:"scroll"}})),Lt=Object(m.a)(Ft.a)((function(e){return{backgroundColor:"light"===e.theme.palette.mode?"#fff":Rt.a[800]}})),Ut=Object(m.a)(Ft.a)((function(e){return{width:30,height:6,backgroundColor:"light"===e.theme.palette.mode?Rt.a[300]:Rt.a[900],borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}})),qt=function(e){var t=e.isDesktop,n=e.children,a=e.header,i=Object(r.useState)(!0),c=Object(p.a)(i,2),o=c[0],s=c[1],u=function(e){return function(){s(e)}};return t?Object(W.jsxs)(Gt,{children:[null===a||void 0===a?void 0:a(!0),n]}):Object(W.jsxs)(Ht.a,{id:"transaction_drawer",anchor:"bottom",open:o,onClose:u(!1),onOpen:u(!0),swipeAreaWidth:64,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},sx:{"& > .MuiPaper-root":{height:"calc(90% - ".concat(64,"px)"),overflow:"visible"}},children:[Object(W.jsxs)(Lt,{sx:{position:"absolute",top:-64,height:64,borderTopLeftRadius:8,borderTopRightRadius:8,visibility:"visible",right:0,left:0,justifyContent:"center",display:"flex",alignItems:"center"},children:[Object(W.jsx)(Ut,{}),null===a||void 0===a?void 0:a(o)]}),Object(W.jsx)(Lt,{sx:{px:2,pb:2,height:"100%",overflow:"auto"},children:n})]})},Wt=n(442),Vt=n(135),zt={1:"MAINNET",2:"MORDEN",3:"ROPSTEN",4:"RINKEBY",5:"GOERLI",42:"KOVAN",56:"BSC",100:"XDAI",137:"POLYGON",246:"ENERGY_WEB_CHAIN",4447:"LOCAL",73799:"VOLTA"},Kt=function(){function e(t,n,r,a){Object(w.a)(this,e),this.frame=t,this.appUrl=n,this.info=r,this.handlers=a,this.provider=void 0}return Object(y.a)(e,[{key:"handleMessage",value:function(e,t,n){if(e)switch(console.log("Received ".concat(e," with ").concat(JSON.stringify(t))),e){case"sendTransactions":t&&this.handlers.onTransactionProposal(t.txs,n);break;case"getEnvInfo":this.sendResponse({txServiceUrl:""},n);break;case"getSafeInfo":this.sendResponse({safeAddress:this.info.address,chainId:this.info.chainId,network:zt[this.info.chainId]},n);break;case"rpcCall":var r=t,a=this;try{this.provider.send(r.call,r.params).then((function(e){a.sendResponse(e,n)}),(function(e){a.sendError(e,n)}))}catch(i){a.sendError(i.toString(),n)}break;default:console.error("ThirdPartyApp: A message was received with an unknown method ".concat(e,".")),this.sendError("Unknown method ".concat(e,"."),n)}else console.error("ThirdPartyApp: A message was received without message id.")}},{key:"onMessage",value:function(e){e.source!==window&&(this.appUrl.includes(e.origin)?this.handleMessage(e.data.method,e.data.params,e.data.id):console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(e.origin)))}},{key:"sendResponse",value:function(e,t){var n,r=null===(n=this.frame.current)||void 0===n?void 0:n.contentWindow;if(r){var a=Object(Vt.getSDKVersion)(),i=Vt.MessageFormatter.makeResponse(t,e,a);r.postMessage(i,this.appUrl)}}},{key:"sendError",value:function(e,t){var n,r=null===(n=this.frame.current)||void 0===n?void 0:n.contentWindow;if(r){var a=Object(Vt.getSDKVersion)(),i=Vt.MessageFormatter.makeErrorResponse(t,e,a);r.postMessage(i,this.appUrl)}}},{key:"connect",value:function(e){var t,n=this,r=e||(null===(t=this.frame.current)||void 0===t?void 0:t.contentWindow);if(r){var a=function(e){n.onMessage(e)};return r.addEventListener("message",a),function(){r.removeEventListener("message",a)}}}}]),e}(),Jt=Object(b.a)("iframe")((function(e){e.theme;return{width:"100%",height:"100%",border:0}})),Yt=function(e){var t=e.appUrl,n=cn(),a=K().provider,i=Object(r.useState)(!1),c=Object(p.a)(i,2),o=c[0],s=(c[1],Object(r.useState)(void 0)),u=Object(p.a)(s,2),l=u[0],d=u[1],b=Object(r.useRef)(null),v=Object(r.useMemo)((function(){return new Kt(b,t,n,{onTransactionProposal:function(e,t){0!=e.length&&(document.hidden&&window.alert("New transaction"),d({transactions:e,requestId:t}))}})}),[n,b,t,d]);Object(r.useEffect)((function(){v.provider=a}),[v,a]);var j=Object(r.useCallback)(function(){var e=Object(h.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleTransactionConfirmation",t,n),v.sendResponse({safeTxHash:t.id},n||"");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,d]),x=Object(r.useCallback)(function(){var e=Object(h.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleTransactionRejection",t,n),v.sendError(t,n||"");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,d]);Object(r.useEffect)((function(){return v.connect(window)}),[v]);var g=Object(r.useMemo)((function(){var e;return Object(W.jsx)(St,{open:!!l,transactions:null===l||void 0===l||null===(e=l.transactions)||void 0===e?void 0:e.map((function(e){return Object(We.a)(Object(We.a)({},e),{},{operation:0})})),requestId:null===l||void 0===l?void 0:l.requestId,onReject:x,onConfirm:j,handleClose:function(){return d(void 0)}})}),[l,x,j]);return o?Object(W.jsx)(Wt.a,{}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Jt,{ref:b,src:t}),g]})},Xt=Object(m.a)(de)((function(e){e.theme;return{}}));var Qt=function(){var e=Object(r.useMemo)((function(){return new Nt}),[]),t=Object(r.useState)(Et[0].url),n=Object(p.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(""),o=Object(p.a)(c,2),s=o[0],u=o[1],l=Object(r.useState)(a),d=Object(p.a)(l,2),b=d[0],v=d[1],j=Object(r.useState)([]),x=Object(p.a)(j,2),g=x[0],O=x[1],m=re();Object(r.useEffect)((function(){Object(h.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAll();case 2:n=t.sent.map((function(e){return{section:"History",title:e.id,url:e.id}})),O(Et.concat(n));case 4:case"end":return t.stop()}}),t)})))()}),[O,a]);var k=function(e,t){var n;n=e?"string"===typeof e?e:e.url:"",v(n),u(""),t&&w(n)},w=function(){var t=Object(h.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(r=n.trim()).length){t.next=4;break}return u("Empty App Url is not allowed"),t.abrupt("return");case 4:return r.startsWith("http")||(r="https://"+r),t.next=7,e.add({id:r,timestamp:(new Date).getTime()});case 7:i(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=m?0:64;return Object(W.jsxs)(Xt,{sx:{textAlign:"center",width:"100vw",height:"calc(100vh - ".concat(y,"px)")},children:[Object(W.jsx)(fe,{children:Object(W.jsx)(It.a,{id:"free-solo-demo",freeSolo:!0,fullWidth:!0,options:g,defaultValue:Et[0],groupBy:function(e){return e.section},getOptionLabel:function(e){return"string"===typeof e?e:e.title},onChange:function(e,t){return k(t,!!t&&""!==t)},renderInput:function(e){return Object(W.jsx)(pt.a,Object(We.a)(Object(We.a)({},e),{},{label:"App Url",value:b,error:!!s,helperText:s,variant:"filled",onChange:function(e){return k(e.target.value)}}))}})}),Object(W.jsx)(Yt,{appUrl:a})]})},Zt=n(423),$t=n(429),en=function(e){var t=e.open,n=e.reindex,a=e.handleClose,i=K(),c=i.useCustomRpc,o=i.toggleCustomRpc,s=i.customRpc,u=i.updateCustomRpc,l=i.networkConfig,d=i.updateNetworkConfig,f=Object(r.useState)(""),h=Object(p.a)(f,2),b=h[0],g=h[1],m=X();Object(r.useEffect)((function(){var e={onNewInteractions:function(){},onStatusUpdate:function(e){switch(e.type){case"up_to_date":g("Up to date with block ".concat(e.latestBlock));break;case"processing":g("Indexing block ".concat(e.fromBlock,"/").concat(e.latestBlock));break;case"aborted":g("Indexing aborted: ".concat(e.reason));break;default:g("")}}};return m.registerCallback(e),function(){return m.unregisterCallback(e)}}),[m,g]);var k=Object(r.useCallback)((function(e){try{d({startingBlock:parseInt(e),maxBlocks:l.maxBlocks})}catch(t){console.error(t)}}),[l,d]),w=Object(r.useCallback)((function(e){try{d({startingBlock:l.startingBlock,maxBlocks:parseInt(e)})}catch(t){console.error(t)}}),[l,d]);return Object(W.jsxs)(v.a,{open:t,onClose:a,maxWidth:"xs",fullWidth:!0,children:[Object(W.jsx)(j.a,{children:"Settings"}),Object(W.jsx)(x.a,{children:Object(W.jsxs)(de,{children:[Object(W.jsx)(le.a,{variant:"caption",children:"Status"}),b,Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)(le.a,{variant:"caption",children:"App Settings"}),Object(W.jsxs)(fe,{sx:{alignItems:"center"},children:["Use custom prc endpoint ",Object(W.jsx)($t.a,{checked:c,onChange:function(e,t){return o(t)}}),Object(W.jsx)("br",{})]}),Object(W.jsx)(pt.a,{label:"RPC",onChange:function(e){return u(e.target.value)},value:s,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Intital block",onChange:function(e){return k(e.target.value)},value:l.startingBlock,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Max blocks",onChange:function(e){return w(e.target.value)},value:l.maxBlocks,fullWidth:!0}),Object(W.jsx)("br",{}),!!n&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(le.a,{variant:"caption",children:"Account Settings"}),Object(W.jsx)("br",{}),Object(W.jsx)(O.a,{onClick:function(){return n()},children:"Reindex"}),Object(W.jsx)("br",{})]})]})})]})},tn={identicon:{size:{xs:"10px",sm:"16px",md:"32px",lg:"40px",xl:"48px",xxl:"60px"}}},nn=Object(m.a)("img")((function(e){e.theme;var t=e.size;return{height:tn.identicon.size[t],width:tn.identicon.size[t],borderRadius:"50%"}})),rn=function(e){var t=e.expanded,n=Object(r.useState)(!1),a=Object(p.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(0),s=Object(p.a)(o,2),u=s[0],l=s[1],d=cn(),b=Object(r.useMemo)((function(){return ge()(d.address)}),[d]),v=X(),j=dt(),x=Object(r.useCallback)(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=l,e.next=4,j.getQueuedTxs();case 4:e.t1=e.sent.length,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[j,l]);Object(r.useEffect)((function(){var e={onNewInteractions:x};return v.registerCallback(e),function(){return v.unregisterCallback(e)}}),[v,x]),Object(r.useEffect)((function(){var e={onNewTx:x};return j.registerCallback(e),function(){return j.unregisterCallback(e)}}),[j,x]),Object(r.useEffect)((function(){x()}),[x]);var g=Object(r.useCallback)(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.reindex();case 1:case"end":return e.stop()}}),e)}))),[v]),O=ie(d.address);return Object(W.jsxs)(fe,{sx:{paddingX:"16px",width:"calc(100% - 32px)",justifyContent:"space-between",textAlign:"left",alignItems:"center"},children:[Object(W.jsx)(nn,{src:b,size:"md"}),Object(W.jsxs)(de,{sx:{paddingX:"8px",textAlign:"center"},onClick:O,children:[Object(W.jsx)(le.a,{sx:{fontFamily:"Monospace"},children:me(d.address)}),"Chain ",d.chainId]}),t?Object(W.jsx)(Zt.a,{onClick:function(){return c(!0)}}):u.toString(),Object(W.jsx)(en,{open:i,handleClose:function(){return c(!1)},reindex:g})]})},an=a.a.createContext(void 0),cn=function(){var e=Object(r.useContext)(an);if(!e)throw Error("Account not available!");return e},on=function(){var e=Object(s.g)().account,t=re(),n=ne(e);return n?Object(W.jsx)(an.Provider,{value:n,children:Object(W.jsx)(Q,{children:Object(W.jsx)(ft,{children:Object(W.jsxs)(fe,{children:[Object(W.jsxs)(qt,{isDesktop:t,header:function(e){return Object(W.jsx)(rn,{expanded:e})},children:[Object(W.jsx)(Ct,{}),Object(W.jsx)(qe,{})]}),Object(W.jsx)(Qt,{})]})})})}):Object(W.jsx)(W.Fragment,{children:'"Invalid account"'})},sn=Object(m.a)("div")((function(e){e.theme;return{textAlign:"center",padding:16}})),un=function(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),c=Object(p.a)(i,2),o=c[0],u=c[1],l=Object(r.useState)([]),d=Object(p.a)(l,2),b=d[0],v=d[1],j=Object(s.f)(),x=Object(r.useMemo)((function(){return new Pt}),[]);Object(r.useEffect)((function(){Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,x.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[v]);var g=function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ne(t)){e.next=4;break}return u("Invalid account!"),e.abrupt("return");case 4:x.add(Object(We.a)(Object(We.a)({},n),{},{timestamp:(new Date).getTime()})),j.push("/"+n.id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsxs)(sn,{children:["Welcome!",Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)(pt.a,{label:"Account address",onChange:function(e){return t=e.target.value,a(t),void u("");var t},value:n,error:!!o,helperText:o,fullWidth:!0}),Object(W.jsx)("br",{}),Object(W.jsx)(O.a,{onClick:function(){return g(n)},children:"Open"}),b.map((function(e){return Object(W.jsx)(pe,{onClick:function(){return g(e.id)},children:Object(W.jsx)(be,{children:e.id})})}))]})},ln=Object(u.a)({}),dn=function(){return Object(W.jsx)(J,{children:Object(W.jsx)(l.a,{theme:ln,children:Object(W.jsx)(o.a,{children:Object(W.jsxs)(s.c,{children:[Object(W.jsx)(s.a,{path:"/:account",children:Object(W.jsx)(on,{})}),Object(W.jsx)(s.a,{path:"/",children:Object(W.jsx)(un,{})})]})})})})},fn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,443)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(dn,{})}),document.getElementById("root")),fn()},74:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(259),t),a(n(263),t),a(n(264),t),a(n(295),t),a(n(101),t)}},[[359,1,2]]]);
//# sourceMappingURL=main.b965d730.chunk.js.map