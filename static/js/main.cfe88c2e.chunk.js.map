{"version":3,"sources":["../../simple-indexer/safe-indexer-ts/bin/ethers/parser/utils.js","logic/utils/proposing.ts","../../simple-indexer/safe-indexer-ts/bin/types/index.js","../../simple-indexer/safe-indexer-ts/bin/types/ethereum.js","../../simple-indexer/safe-indexer-ts/bin/types/indexer.js","../../simple-indexer/safe-indexer-ts/bin/types/interactions.js","../../simple-indexer/safe-indexer-ts/bin/indexer.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/sources.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/module.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/multisig.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/settings.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/transfers.js","logic/db/base.ts","logic/db/safe.ts","logic/db/interactions.ts","logic/state/indexer.ts","logic/account/TransactionRepository.ts","logic/utils/indexer.ts","logic/account/SafeSigner.ts","components/provider/AppSettingsProvider.tsx","components/provider/TransactionRepositoryProvider.tsx","logic/utils/account.ts","components/utils/media.ts","styled/tables.ts","logic/utils/address.ts","components/utils/AddressInfo.tsx","components/account/transaction/details/SettingsTxDetails.tsx","components/account/transaction/summary/SettingsTxSummary.tsx","components/account/transaction/summary/TransferTxSummary.tsx","components/account/transaction/TxSummary.tsx","components/account/transaction/details/TxEvents.tsx","components/utils/TxData.tsx","components/account/transaction/details/ModuleTxDetails.tsx","components/account/transaction/details/MultisigTxDetails.tsx","components/account/transaction/details/TransferTxDetails.tsx","components/account/transaction/TxDetails.tsx","components/account/transaction/Transactions.tsx","logic/utils/signatures.ts","logic/utils/execution.ts","logic/utils/safe.ts","logic/account/QueueRepository.ts","components/provider/QueueRepositoryProvider.tsx","components/account/queue/QueuedTxSummary.tsx","components/account/queue/AddSignatureDialog.tsx","components/account/queue/SignTransactionDialog.tsx","components/account/queue/ExecuteTxDialog.tsx","components/account/queue/QueuedTxDetails.tsx","components/account/queue/ProposeTxsDialog.tsx","components/account/queue/Queue.tsx","logic/apps/appList.ts","logic/db/app.ts","components/account/ResponsiveSidebar.tsx","logic/utils/chainIdToNetwork.ts","logic/apps/connector.ts","components/account/apps/AppWindow.tsx","components/account/apps/Apps.tsx","components/settings/SettingsDialog.tsx","components/account/header/AccountHeader.tsx","components/account/signer/SignerInfo.tsx","components/account/Dashboard.tsx","components/welcome/Welcome.tsx","components/App.tsx","reportWebVitals.ts","index.tsx","../../simple-indexer/safe-indexer-ts/bin/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/constants.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","mapEvents","mapEvent","decoder","event","_a","_b","_c","decode","undefined","interaction","logs","all","map","removeHexPrefix","input","toLowerCase","startsWith","slice","encodeData","operation","to","data","dataBuffer","Buffer","from","utils","solidityPack","BigNumber","toHexString","buildTx","account","transactions","chainId","network","toString","multiSendDeployment","getMultiSendDeployment","Error","multiSendInterface","Interface","abi","multiSendBytes","transaction","multiSendData","encodeFunctionData","networkAddresses","buildMultiSend","__createBinding","create","o","m","k","k2","enumerable","get","__exportStar","p","prototype","hasOwnProperty","require","__assign","assign","s","i","arguments","SafeIndexer","sleep","timeout","cb","setTimeout","conditionalSleep","configDefaults","earliestBlock","maxBlocks","upToDateTimeout","syncTimeout","reverse","state","loader","parser","callback","config","indexing","paused","updateConfig","update","postStatusUpdate","status","onStatusUpdate","console","error","getCurrentBlockInterval","latestBlock","log","earliestIndexedBlock","lastIndexedBlock","fromBlock","Math","max","toBlock","min","ensureBlockDefaults","start","_d","activeChainId","errorMsg","blockInterval","e_1","_e","loadChainId","logger","type","reason","code","loadCurrentBlock","processBlocks","stop","pause","resume","events","interactions","loadEvents","safe","parse","onNewInteractions","EthersLoader","isOlder","compare","base","blockNumber","transactionIndex","logIndex","provider","sources","getNetwork","getBlockNumber","merge","loaders","_i","loaderCount","logResults","currentLogIndex","out","runs","resultIndex","nextLog","candidate","Array","fill","toEvent","eventId","_this","l","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","OutgoingTransferEventSource","IncomingTransferEventSource","IncomingEthEventSource","SettingsChangeEventSource","ModuleTransactionEventSource","MultisigTransactionEventSource","StaticTopicEventSource","ethers_1","constants_1","BaseEventSource","name","address","filter","buildFilter","getLogs","_super","topics","successTopic","failureTopic","multisigDetailsTopic","moduleSuccessTopic","moduleFailureTopic","moduleDetailsTopic","safeInterface","getEventTopic","etherReceivedTopic","transferTopic","ethers","defaultAbiCoder","encode","EthersParser","module_1","multisig_1","settings_1","transfers_1","groupIdFromEvent","transactionHash","decoders","MultisigDecoder","ModuleDecoder","TransferDecoder","SettingsDecoder","updateGroupedLogs","groups","detailsCandidate","parentCandidate","currentChildren","parent","details","children","group","detailsCandidates","currentGroupId","events_1","groupId","isParentCandidate","isDetailsCandidate","parentTopics","indexOf","detailsTopics","subEvents","detailEvent","inter","utils_1","useFallbackDecoding","decodeEthereumTx","tx","decodeFromEthereumHash","txHash","ethTx","getTransaction","decodeModuleDetailsEvent","parsed","decodeEventLog","decodeInternal","module","success","subLogs","parentDecoder","decodedTx","id","block","getBlock","blockHash","number","timestamp","eventParams","safe_contracts_1","NonceMapper","init","calculateHash111","nonce","_TypedDataEncoder","hash","verifyingContract","EIP712_SAFE_TX_TYPE","expectedHash","currentNonce","Contract","safeAbi","toNumber","calculateSafeTransactionHash","nonceMapper","decodeFunctionData","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","signatures","safeTxHash","concat","decodeMultisigDetailsEvent","additionalInfo","setupTopic","addedOwnerTopic","removedOwnerTopic","changeThresholdTopic","enabledModuleTopic","disabledModuledTopic","changeFallbackHandlerTopic","changeGuardTopic","getSettingsDetails","component","change","owner","threshold","handler","guard","decodeSettingsChange","decodeTokenTransfer","eventInterface","erc721Interface","erc20Interface","erc20OldInterface","tokenAddress","amount","tokenId","sender","receipient","direction","decodeEtherTransfer","AbstractDB","dbKey","dbVersion","migration","internalDb","indexedDB","window","a","dbStore","request","open","onerror","onsuccess","onupgradeneeded","oldVersion","version","AbstractDAO","db","storeName","entry","objectStore","put","delete","index","key","getAll","clear","INTERACTIONS_STORE","INTERACTIONS_INDEX","QUEUED_TX_STORE","QUEUED_TX_INDEX","TX_SIGNATURES_STORE","TX_SIGNATURES_INDEX","SafeDB","createObjectStore","keyPath","createIndex","unique","InteractionsDAO","getAllByIndex","QueuedInteractionsDAO","IDBKeyRange","lowerBound","TxSignaturesDAO","parseIntWithFallback","fallback","parseInt","Number","isNaN","IndexerState","defaultBlock","_lastIndexedBlock","_earliestIndexedBlock","_earliestBlock","storedEarliestIndexedBlock","localStorage","getItem","storedLastIndexedBlock","storedEarliestBlock","setItem","removeItem","TransactionRepository","networkConfig","callbacks","Set","currentStatus","indexer","startingBlock","disconnect","getIndexer","catch","add","postCurrentStatusUpdateToCallback","checkForCreation","forEach","handleNewInteraction","postCurrentStatusUpdate","drop","reset","findRpc","networkId","chain","chains","find","rpc","includes","SafeSigner","onboard","providerChangeListener","listener","showSelection","wallets","walletName","bridge","rpcUrl","Onboard","subscriptions","wallet","walletSelect","description","walletCheck","checkName","lastSelectedWallet","prepare","walletReset","getState","signerAddress","defaultConfig","AppSettingsContext","React","createContext","useAppSettings","appSettings","useContext","AppSettingsProvider","useState","useCustomRpc","setUseCustomRpc","customRpc","setCustomRpc","connectedProvider","setConnectedProvider","storedConfig","JSON","setNetworkConfig","useMemo","providers","JsonRpcProvider","Web3Provider","signer","signerProvider","getSigner","safeSigner","useEffect","onProviderChange","Provider","toggleCustomRpc","updateCustomRpc","updateNetworkConfig","serialized","stringify","TransactionRepoContext","useTransactionRepo","repo","TransactionRepositoryProvider","useAccount","connect","buildCaip2Addr","parseAddress","getAddress","parseAccount","shortName","accountParts","split","shortNames","networkParts","parseChainId","useDektopLayout","useMediaQuery","copyToClipboard","text","copyMessage","navigator","clipboard","writeText","alert","useCopyAddress","shareableText","Group","styled","theme","display","flexDirection","Row","Header","textAlign","Entry","alignItems","paddingBottom","LongText","Typography","width","wordWrap","shortAddress","visibleChars","identicon","size","xs","sm","md","lg","xl","xxl","StyledImg","height","borderRadius","AddressInfo","onClick","iconSrc","makeBlockie","copyAddress","sx","src","fontFamily","paddingX","IconButton","color","ContentCopy","fontSize","renderSettingsValue","SettingsTxDetails","Date","toUTCString","toUpperCase","Summary","SettingsTxSummary","settingsChange","hideDate","showDetails","TransferTxSummary","transfer","TxSummary","TxEvents","TxData","collapsed","setCollapsed","decodePossible","canCollapse","displayData","Link","textDecoration","Button","ModuleTxDetails","MultisigTxDetails","renderDetails","asset","subjectTitle","subject","TransferTxDetails","TxDialog","Dialog","TxDetails","handleClose","debugLink","setDebugLink","txRepo","setInteraction","loadInteraction","getTx","link","onClose","maxWidth","fullWidth","fullScreen","DialogTitle","DialogContent","DialogActions","Root","Transactions","selectedId","setSelectedId","txs","setTxs","accountRepo","getAllTxs","loaded","registerCallback","unregisterCallback","useCallback","recoverEthSign","signature","hashMessage","arrayify","recoverAddress","recoverEIP712","signatureId","signatureData","keccak256","parseSafeSignature","signatureString","sigType","signatureParts","getEIP712Domain","signEip712","_signTypedData","SafeTx","recoveredAddress","signMessage","buildPreValidatedSignature","signQueuedTx","warn","prepareSignatures","submitterAddress","signatureMap","Map","owners","has","set","submitterIsOwner","requiredSigntures","sub","signatureArray","values","buildStaticPart","offset","buildDynamicPart","buildSignatureBytes","sort","left","right","localeCompare","staticParts","dynamicParts","sig","Safe","providerOrSigner","safeContract","WritableSafe","getOwners","getThreshold","VERSION","information","getTransactionHash","populateTransaction","execTransaction","QueueRepository","queueDao","signaturesDao","onNewTx","hashInfo","queuedTx","notifyNewTxs","remove","getQueuedTxs","queuedTxs","submitter","writableSafe","writable","signatureBytes","signedTx","executeTx","QueueRepoContext","useQueueRepo","QueueRepositoryProvider","QueuedTxSummary","AddSignatureDialog","handleNewSignature","setSignatureString","queuedRepo","handleAdd","addSignature","TextField","onChange","target","SignTransactionDialog","handleSign","ExecuteTxDialog","handleTxSubmitted","handleExecution","getSignatures","submitTx","ethereumTxHash","QueuedTxDetails","simulateLink","setSimulateLink","showAddSignature","setShowAddSignature","showSignTransaction","setShowSignTransaction","showExecuteTransaction","setShowExecuteTransaction","deleteTx","setTransaction","load","setSignatures","loadSignatures","populateTx","populatedTx","shareText","shareSignature","ProposeTxs","onConfirm","onReject","requestId","setToString","valueString","setValueString","dataString","setDataString","operationString","setOperationString","nonceString","setNonceString","getNextNonce","defaultTx","cancelCreation","handleCreate","isHexString","constants","AddressZero","addTx","Queue","showNewTxDialog","setShowNewTxDialog","ququedTxs","setQueuedTxs","queueRepo","loadQueuedTxs","creation","defaultApps","title","url","section","ACCOUNTS_STORE","ACCOUNTS_INDEX","APP_URLS_STORE","APP_URLS_INDEX","AppDB","AccountsDAO","AppUrlsDAO","Sidebar","overflowY","StyledBox","Box","backgroundColor","palette","mode","grey","Puller","position","top","ResponsiveSidebar","isDesktop","header","setOpen","toggleDrawer","newOpen","SwipeableDrawer","anchor","onOpen","swipeAreaWidth","disableSwipeToOpen","ModalProps","keepMounted","overflow","borderTopLeftRadius","borderTopRightRadius","visibility","justifyContent","px","pb","chainIdToNetwork","FrameCommunicator","frame","appUrl","info","handlers","method","params","onTransactionProposal","sendResponse","txServiceUrl","safeAddress","payload","communicator","send","resp","err","sendError","message","source","origin","handleMessage","frameWindow","current","contentWindow","sdkVersion","getSDKVersion","msg","MessageFormatter","makeResponse","postMessage","makeErrorResponse","defaultWindow","eventWindow","ev","onMessage","addEventListener","removeEventListener","AppFrame","border","AppWindow","loading","proposalParams","setProposalParams","appFrame","useRef","document","hidden","handleTransactionConfirmation","handleTransactionRejection","CircularProgress","ref","Apps","appUrlsDao","setAppUrl","appUrlError","setAppUrlError","appUrlInput","setAppUrlInput","appUrlsHistory","setAppUrlsHistory","appHistory","handleInputChange","openUrl","newValue","openAppUrl","cleanUrl","trim","getTime","marginBottom","Autocomplete","freeSolo","options","defaultValue","groupBy","option","getOptionLabel","renderInput","helperText","variant","SettingsDialog","reindex","setStatus","updateStartingBlock","updateMaxBlocks","Switch","checked","AccountHeader","expanded","showSettings","setShowSettings","queueSize","setQueueSize","Settings","SignerInfo","AccountContext","Dashboard","useParams","padding","Welcome","addressInput","setAddressInput","addressError","setAddressError","accountHistory","setAccountHistory","history","useHistory","accountsDao","openAccount","createTheme","ThemeProvider","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById","erc721InterfaceDefinition","erc20OldInterfaceDefinition","erc20InterfaceDefinition","safe_deployments_1","getSafeL2SingletonDeployment","released"],"mappings":"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","file":"static/js/main.cfe88c2e.chunk.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapEvents = exports.mapEvent = void 0;\nvar mapEvent = function (decoder, event) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a;\n    var _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _b = {\n                    event: event\n                };\n                if (!decoder) return [3 /*break*/, 2];\n                return [4 /*yield*/, decoder.decode(event)];\n            case 1:\n                _a = _c.sent();\n                return [3 /*break*/, 3];\n            case 2:\n                _a = undefined;\n                _c.label = 3;\n            case 3: return [2 /*return*/, (_b.interaction = _a,\n                    _b)];\n        }\n    });\n}); };\nexports.mapEvent = mapEvent;\nvar mapEvents = function (decoder, logs) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!logs)\n                    return [2 /*return*/, []];\n                return [4 /*yield*/, Promise.all(logs.map(function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            return [2 /*return*/, exports.mapEvent(decoder, e)];\n                        });\n                    }); }))];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n}); };\nexports.mapEvents = mapEvents;\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { utils } from \"ethers\";\nimport { MetaTransaction } from \"../models/transactions\"\nimport { getMultiSendDeployment } from \"@gnosis.pm/safe-deployments\"\nimport { Account } from \"./account\";\n\nexport const removeHexPrefix = (input: string) => input.toLowerCase().startsWith(\"0x\") ? input.slice(2) : input;\n\nconst encodeData = (operation: number, to: string, value: string, data: string) => {\n    let dataBuffer = Buffer.from(removeHexPrefix(data), \"hex\")\n    return removeHexPrefix(utils.solidityPack(\n        [\"uint8\", \"address\", \"uint256\", \"uint256\", \"bytes\"],\n        [operation, to, BigNumber.from(value).toHexString(), dataBuffer.length, dataBuffer]\n    ))\n}\n\nexport const buildMultiSend = (transactions: MetaTransaction[], chainId: number): MetaTransaction => {\n    const network = chainId.toString()\n    const multiSendDeployment = getMultiSendDeployment({ network })\n    if (!multiSendDeployment) throw Error(\"MultiSend not available on this network\")\n    const multiSendInterface = new utils.Interface(multiSendDeployment.abi)\n    let multiSendBytes = \"0x\"\n    for (let transaction of transactions) {\n        multiSendBytes += encodeData(0, transaction.to, transaction.value, transaction.data)\n    }\n    const multiSendData = multiSendInterface.encodeFunctionData(\"multiSend\", [multiSendBytes])\n    return {\n        to: multiSendDeployment.networkAddresses[network],\n        value: \"0x00\",\n        data: multiSendData,\n        operation: 1\n    }\n}\n\n\nexport const buildTx = (account: Account, transactions?: MetaTransaction[]): MetaTransaction => {\n    if (!transactions || transactions.length === 0) {\n        return {\n            to: \"\",\n            value: \"\",\n            data: \"\",\n            operation: 0\n        }\n    }\n    if (transactions.length === 1) {\n        return transactions[0]\n    }\n    return buildMultiSend(transactions, account.chainId)\n}","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ethereum\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./interactions\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeIndexer = void 0;\nvar sleep = function (timeout) { return new Promise(function (cb) { return setTimeout(cb, timeout); }); };\nvar conditionalSleep = function (timeout) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(timeout && timeout > 0)) return [3 /*break*/, 2];\n                return [4 /*yield*/, sleep(timeout)];\n            case 1:\n                _a.sent();\n                _a.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar configDefaults = {\n    earliestBlock: 0,\n    maxBlocks: 100,\n    upToDateTimeout: 10000,\n    syncTimeout: 100,\n    reverse: false\n};\nvar SafeIndexer = /** @class */ (function () {\n    function SafeIndexer(state, loader, parser, callback, config) {\n        this.indexing = false;\n        this.paused = false;\n        this.state = state;\n        this.loader = loader;\n        this.parser = parser;\n        this.callback = callback;\n        this.config = __assign(__assign({}, configDefaults), config);\n    }\n    SafeIndexer.prototype.updateConfig = function (update) {\n        this.config = __assign(__assign({}, this.config), update);\n    };\n    SafeIndexer.prototype.postStatusUpdate = function (status) {\n        var _a, _b;\n        try {\n            (_b = (_a = this.callback) === null || _a === void 0 ? void 0 : _a.onStatusUpdate) === null || _b === void 0 ? void 0 : _b.call(_a, status);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    SafeIndexer.prototype.getCurrentBlockInterval = function (earliestBlock, latestBlock, reverse) {\n        console.log(this.state);\n        var earliestIndexedBlock = this.state.earliestIndexedBlock;\n        var lastIndexedBlock = this.state.lastIndexedBlock;\n        var maxBlocks = this.config.maxBlocks;\n        if (reverse !== undefined ? reverse : this.config.reverse) {\n            if (earliestBlock >= earliestIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: Math.max(earliestBlock, earliestIndexedBlock - maxBlocks),\n                toBlock: earliestIndexedBlock - 1\n            };\n        }\n        else {\n            if (latestBlock <= lastIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: lastIndexedBlock + 1,\n                toBlock: Math.min(latestBlock, lastIndexedBlock + maxBlocks)\n            };\n        }\n    };\n    SafeIndexer.prototype.ensureBlockDefaults = function (latestBlock) {\n        if (this.config.earliestBlock < 0) {\n            this.config.earliestBlock = latestBlock;\n        }\n        if (this.state.earliestIndexedBlock < 0) {\n            this.state.earliestIndexedBlock = latestBlock + 1;\n        }\n        if (this.state.lastIndexedBlock < 0) {\n            this.state.lastIndexedBlock = latestBlock - 1;\n        }\n    };\n    SafeIndexer.prototype.start = function (reverse) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var activeChainId, errorMsg, latestBlock, earliestBlock, blockInterval, fromBlock, toBlock, e_1;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadChainId()];\n                    case 1:\n                        activeChainId = _e.sent();\n                        if (this.config.chainId && activeChainId != this.config.chainId) {\n                            errorMsg = \"Wrong chain! Expected \" + this.config.chainId + \" got \" + activeChainId;\n                            (_a = this.config.logger) === null || _a === void 0 ? void 0 : _a.error(errorMsg);\n                            this.postStatusUpdate({ type: \"aborted\", reason: errorMsg, code: 1 });\n                            return [2 /*return*/];\n                        }\n                        this.indexing = true;\n                        _e.label = 2;\n                    case 2:\n                        if (!this.indexing) return [3 /*break*/, 14];\n                        if (!this.paused) return [3 /*break*/, 4];\n                        return [4 /*yield*/, sleep(this.config.syncTimeout)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 4: return [4 /*yield*/, this.loader.loadCurrentBlock()];\n                    case 5:\n                        latestBlock = _e.sent();\n                        this.ensureBlockDefaults(latestBlock);\n                        earliestBlock = this.config.earliestBlock;\n                        blockInterval = this.getCurrentBlockInterval(earliestBlock, latestBlock, reverse);\n                        if (!!blockInterval) return [3 /*break*/, 7];\n                        (_b = this.config.logger) === null || _b === void 0 ? void 0 : _b.log(\"Up to date with current block!\");\n                        this.postStatusUpdate({ type: \"up_to_date\", latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 6:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 7:\n                        fromBlock = blockInterval.fromBlock, toBlock = blockInterval.toBlock;\n                        this.postStatusUpdate({ type: \"processing\", fromBlock: fromBlock, toBlock: toBlock, latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        (_c = this.config.logger) === null || _c === void 0 ? void 0 : _c.log(\"Process from block\", fromBlock, \"to block\", toBlock);\n                        _e.label = 8;\n                    case 8:\n                        _e.trys.push([8, 11, , 13]);\n                        return [4 /*yield*/, this.processBlocks(fromBlock, toBlock)];\n                    case 9:\n                        _e.sent();\n                        this.state.lastIndexedBlock = Math.max(toBlock, this.state.lastIndexedBlock);\n                        this.state.earliestIndexedBlock = Math.min(fromBlock, this.state.earliestIndexedBlock);\n                        return [4 /*yield*/, conditionalSleep(this.config.syncTimeout)];\n                    case 10:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 11:\n                        e_1 = _e.sent();\n                        (_d = this.config.logger) === null || _d === void 0 ? void 0 : _d.error(e_1);\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 12:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 13: return [3 /*break*/, 2];\n                    case 14: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SafeIndexer.prototype.stop = function () {\n        this.indexing = false;\n    };\n    SafeIndexer.prototype.pause = function () {\n        this.paused = true;\n    };\n    SafeIndexer.prototype.resume = function () {\n        this.paused = false;\n    };\n    SafeIndexer.prototype.processBlocks = function (from, to) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, interactions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadEvents(from, to, this.config.safe)];\n                    case 1:\n                        events = _a.sent();\n                        return [4 /*yield*/, this.parser.parse(events)];\n                    case 2:\n                        interactions = _a.sent();\n                        if (interactions.length > 0)\n                            try {\n                                this.callback.onNewInteractions(interactions);\n                            }\n                            catch (_b) { }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SafeIndexer;\n}());\nexports.SafeIndexer = SafeIndexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersLoader = void 0;\n__exportStar(require(\"./sources\"), exports);\nvar isOlder = function (compare, base) {\n    if (compare === undefined)\n        return false;\n    if (base === undefined)\n        return true;\n    if (compare.blockNumber != base.blockNumber)\n        return compare.blockNumber < base.blockNumber;\n    if (compare.transactionIndex != base.transactionIndex)\n        return compare.transactionIndex < base.transactionIndex;\n    if (compare.logIndex != base.logIndex)\n        return compare.logIndex < base.logIndex;\n    return false; // Equal defaults to false\n};\nvar EthersLoader = /** @class */ (function () {\n    function EthersLoader(provider, sources) {\n        this.provider = provider;\n        this.sources = sources;\n    }\n    EthersLoader.prototype.loadChainId = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var network;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        network = _a.sent();\n                        return [2 /*return*/, network.chainId];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.loadCurrentBlock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getBlockNumber()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.merge = function () {\n        var loaders = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            loaders[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var loaderCount, logResults, currentLogIndex, i, out, runs, resultIndex, nextLog, i, candidate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        loaderCount = loaders.length;\n                        if (loaderCount == 0)\n                            return [2 /*return*/, []];\n                        return [4 /*yield*/, Promise.all(loaders)];\n                    case 1:\n                        logResults = _a.sent();\n                        if (loaderCount == 1)\n                            return [2 /*return*/, logResults[0]];\n                        currentLogIndex = new Array(loaderCount).fill(0);\n                        for (i = 0; i < loaderCount; i++)\n                            currentLogIndex[i] = 0;\n                        out = [];\n                        runs = 0;\n                        // Panic check against endless loop (10k is max amount of events, per loader)\n                        while (runs < 10000 * loaderCount) {\n                            resultIndex = 0;\n                            nextLog = logResults[0][currentLogIndex[0]];\n                            for (i = 1; i < loaderCount; i++) {\n                                candidate = logResults[i][currentLogIndex[i]];\n                                if (isOlder(candidate, nextLog)) {\n                                    resultIndex = i;\n                                    nextLog = candidate;\n                                }\n                            }\n                            currentLogIndex[resultIndex]++;\n                            if (nextLog)\n                                out.push(nextLog);\n                            else\n                                break;\n                            runs++;\n                        }\n                        return [2 /*return*/, out];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.toEvent = function (log, safe) {\n        return __assign(__assign({}, log), { eventId: log.logIndex.toString(), account: safe });\n    };\n    EthersLoader.prototype.loadEvents = function (from, to, safe) {\n        return __awaiter(this, void 0, void 0, function () {\n            var logs;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.merge.apply(this, this.sources.map(function (l) { return l.loadEvents(from, to, safe); }))];\n                    case 1:\n                        logs = _a.sent();\n                        return [2 /*return*/, logs.reverse().map(function (e) { return _this.toEvent(e, safe); })];\n                }\n            });\n        });\n    };\n    return EthersLoader;\n}());\nexports.EthersLoader = EthersLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingTransferEventSource = exports.IncomingTransferEventSource = exports.IncomingEthEventSource = exports.SettingsChangeEventSource = exports.ModuleTransactionEventSource = exports.MultisigTransactionEventSource = exports.StaticTopicEventSource = void 0;\nvar ethers_1 = require(\"ethers\");\nvar constants_1 = require(\"../constants\");\nvar BaseEventSource = /** @class */ (function () {\n    function BaseEventSource(name, provider) {\n        this.provider = provider;\n        this.name = name;\n    }\n    BaseEventSource.prototype.loadEvents = function (fromBlock, toBlock, address) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filter;\n            return __generator(this, function (_a) {\n                filter = this.buildFilter(fromBlock, toBlock, address);\n                return [2 /*return*/, this.provider.getLogs(filter).then(function (e) {\n                        //console.debug(this.name, \"source loaded\", e.length, \"events\")\n                        return e;\n                    })];\n            });\n        });\n    };\n    return BaseEventSource;\n}());\nvar StaticTopicEventSource = /** @class */ (function (_super) {\n    __extends(StaticTopicEventSource, _super);\n    function StaticTopicEventSource(name, topics, provider) {\n        var _this = _super.call(this, name, provider) || this;\n        _this.topics = topics;\n        return _this;\n    }\n    StaticTopicEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        return {\n            topics: [this.topics],\n            address: address,\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return StaticTopicEventSource;\n}(BaseEventSource));\nexports.StaticTopicEventSource = StaticTopicEventSource;\nvar MultisigTransactionEventSource = /** @class */ (function (_super) {\n    __extends(MultisigTransactionEventSource, _super);\n    function MultisigTransactionEventSource(provider) {\n        return _super.call(this, \"MultiSig\", [constants_1.successTopic, constants_1.failureTopic, constants_1.multisigDetailsTopic], provider) || this;\n    }\n    return MultisigTransactionEventSource;\n}(StaticTopicEventSource));\nexports.MultisigTransactionEventSource = MultisigTransactionEventSource;\nvar ModuleTransactionEventSource = /** @class */ (function (_super) {\n    __extends(ModuleTransactionEventSource, _super);\n    function ModuleTransactionEventSource(provider) {\n        return _super.call(this, \"Module\", [constants_1.moduleSuccessTopic, constants_1.moduleFailureTopic, constants_1.moduleDetailsTopic], provider) || this;\n    }\n    return ModuleTransactionEventSource;\n}(StaticTopicEventSource));\nexports.ModuleTransactionEventSource = ModuleTransactionEventSource;\nvar SettingsChangeEventSource = /** @class */ (function (_super) {\n    __extends(SettingsChangeEventSource, _super);\n    function SettingsChangeEventSource(provider) {\n        return _super.call(this, \"Settings\", [\n            \"SafeSetup\",\n            \"AddedOwner\",\n            \"RemovedOwner\",\n            \"ChangedThreshold\",\n            \"EnabledModule\",\n            \"DisabledModule\",\n            \"ChangedFallbackHandler\",\n            \"ChangedGuard\",\n        ].map(function (name) { return constants_1.safeInterface.getEventTopic(name); }), provider) || this;\n    }\n    return SettingsChangeEventSource;\n}(StaticTopicEventSource));\nexports.SettingsChangeEventSource = SettingsChangeEventSource;\nvar IncomingEthEventSource = /** @class */ (function (_super) {\n    __extends(IncomingEthEventSource, _super);\n    function IncomingEthEventSource(provider) {\n        return _super.call(this, \"Incoming Ether\", [constants_1.etherReceivedTopic], provider) || this;\n    }\n    return IncomingEthEventSource;\n}(StaticTopicEventSource));\nexports.IncomingEthEventSource = IncomingEthEventSource;\nvar IncomingTransferEventSource = /** @class */ (function (_super) {\n    __extends(IncomingTransferEventSource, _super);\n    function IncomingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    IncomingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return IncomingTransferEventSource;\n}(BaseEventSource));\nexports.IncomingTransferEventSource = IncomingTransferEventSource;\nvar OutgoingTransferEventSource = /** @class */ (function (_super) {\n    __extends(OutgoingTransferEventSource, _super);\n    function OutgoingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    OutgoingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], null, [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return OutgoingTransferEventSource;\n}(BaseEventSource));\nexports.OutgoingTransferEventSource = OutgoingTransferEventSource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersParser = void 0;\nvar constants_1 = require(\"../constants\");\nvar module_1 = require(\"./module\");\nvar multisig_1 = require(\"./multisig\");\nvar settings_1 = require(\"./settings\");\nvar transfers_1 = require(\"./transfers\");\nvar EthersParser = /** @class */ (function () {\n    function EthersParser(provider) {\n        this.groupIdFromEvent = function (event) { return \"\" + event.transactionHash; };\n        this.provider = provider;\n        this.decoders = [\n            new multisig_1.MultisigDecoder(provider),\n            new module_1.ModuleDecoder(provider),\n            new transfers_1.TransferDecoder(provider),\n            new settings_1.SettingsDecoder(provider)\n        ];\n    }\n    EthersParser.prototype.updateGroupedLogs = function (groups, detailsCandidate, parentCandidate, currentChildren) {\n        if (parentCandidate) {\n            groups.push({\n                parent: parentCandidate,\n                details: detailsCandidate,\n                children: currentChildren\n            });\n        }\n        else if (currentChildren.length > 0) {\n            groups.push.apply(groups, currentChildren.map(function (log) { return { parent: log, children: [] }; }));\n        }\n    };\n    EthersParser.prototype.group = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var out, currentChildren, detailsCandidates, parentCandidate, currentGroupId, _i, events_1, event, groupId, isParentCandidate, isDetailsCandidate;\n            return __generator(this, function (_a) {\n                out = [];\n                currentChildren = [];\n                detailsCandidates = [];\n                currentGroupId = undefined;\n                for (_i = 0, events_1 = events; _i < events_1.length; _i++) {\n                    event = events_1[_i];\n                    groupId = this.groupIdFromEvent(event);\n                    isParentCandidate = constants_1.parentTopics.indexOf(event.topics[0]) >= 0;\n                    isDetailsCandidate = constants_1.detailsTopics.indexOf(event.topics[0]) >= 0;\n                    if (currentGroupId !== groupId || (isParentCandidate && parentCandidate)) {\n                        this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                        parentCandidate = undefined;\n                        detailsCandidates = [];\n                        currentChildren = [];\n                        currentGroupId = undefined;\n                    }\n                    if (!currentGroupId)\n                        currentGroupId = groupId;\n                    if (isParentCandidate) {\n                        parentCandidate = event;\n                    }\n                    else if (isDetailsCandidate) {\n                        detailsCandidates.push(event);\n                    }\n                    else {\n                        currentChildren.push(event);\n                    }\n                }\n                this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                return [2 /*return*/, out];\n            });\n        });\n    };\n    EthersParser.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, decoder, interaction;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _i = 0, _a = this.decoders;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        decoder = _a[_i];\n                        return [4 /*yield*/, decoder.decode(event, subEvents, detailEvent, this)];\n                    case 2:\n                        interaction = _b.sent();\n                        if (interaction)\n                            return [2 /*return*/, interaction];\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EthersParser.prototype.parse = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var groups, inter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.group(events)];\n                    case 1:\n                        groups = _a.sent();\n                        inter = groups.map(function (_a) {\n                            var parent = _a.parent, children = _a.children, details = _a.details;\n                            return _this.decode(parent, children, details);\n                        });\n                        return [4 /*yield*/, Promise.all(inter)];\n                    case 2: return [2 /*return*/, (_a.sent()).filter(function (e) { return e !== undefined; })];\n                }\n            });\n        });\n    };\n    return EthersParser;\n}());\nexports.EthersParser = EthersParser;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar ModuleDecoder = /** @class */ (function () {\n    function ModuleDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    ModuleDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        // TODO: implement\n        return undefined;\n    };\n    ModuleDecoder.prototype.decodeFromEthereumHash = function (safe, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _a.sent();\n                        return [2 /*return*/, this.decodeEthereumTx(safe, ethTx)];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decodeModuleDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeModuleTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n        };\n    };\n    ModuleDecoder.prototype.decodeInternal = function (safe, module, event, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"module_\" + event.transactionHash + \"_\" + event.eventId;\n                        decodedTx = this.decodeModuleDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"module_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.module = module,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.moduleSuccessTopic: return [3 /*break*/, 1];\n                            case constants_1.moduleFailureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ModuleDecoder;\n}());\nexports.ModuleDecoder = ModuleDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultisigDecoder = void 0;\nvar ethers_1 = require(\"ethers\");\nvar safe_contracts_1 = require(\"@gnosis.pm/safe-contracts\");\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar NonceMapper = /** @class */ (function () {\n    function NonceMapper(provider) {\n        this.provider = provider;\n    }\n    NonceMapper.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        _a.chainId = (_b.sent()).chainId;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NonceMapper.prototype.calculateHash111 = function (tx, nonce) {\n        return ethers_1.ethers.utils._TypedDataEncoder.hash({ verifyingContract: tx.safe }, safe_contracts_1.EIP712_SAFE_TX_TYPE, __assign(__assign({}, tx), { nonce: nonce }));\n    };\n    NonceMapper.prototype.map = function (expectedHash, tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var safe, currentNonce, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.chainId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        safe = new ethers_1.ethers.Contract(tx.safe, constants_1.safeAbi, this.provider);\n                        return [4 /*yield*/, safe.nonce()];\n                    case 3:\n                        currentNonce = (_a.sent()).toNumber();\n                        for (nonce = currentNonce; nonce >= 0; nonce--) {\n                            if (this.calculateHash111(tx, nonce) === expectedHash)\n                                return [2 /*return*/, nonce];\n                            if (safe_contracts_1.calculateSafeTransactionHash(safe, __assign(__assign({}, tx), { nonce: nonce }), this.chainId) === expectedHash)\n                                return [2 /*return*/, nonce];\n                        }\n                        return [2 /*return*/, -1];\n                }\n            });\n        });\n    };\n    return NonceMapper;\n}());\nvar MultisigDecoder = /** @class */ (function () {\n    function MultisigDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.nonceMapper = new NonceMapper(provider);\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    MultisigDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        try {\n            if (tx.to !== safe) {\n                console.log(\"Transaction is not to the Safe\");\n                return undefined;\n            }\n            var result = constants_1.safeInterface.decodeFunctionData(\"execTransaction\", tx.data);\n            return {\n                safe: safe,\n                to: result.to,\n                value: result.value.toString(),\n                data: result.data,\n                operation: result.operation,\n                safeTxGas: result.safeTxGas.toString(),\n                baseGas: result.baseGas.toString(),\n                gasPrice: result.gasPrice.toString(),\n                gasToken: result.gasToken,\n                refundReceiver: result.refundReceiver,\n                signatures: result.signatures,\n            };\n        }\n        catch (e) {\n            // TODO: try to decode other ways \n            console.log(\"Unknown function\", tx.data.slice(0, 10));\n            return undefined;\n        }\n    };\n    MultisigDecoder.prototype.decodeFromEthereumHash = function (safe, safeTxHash, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx, decodedTx, _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _c.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        if (!decodedTx)\n                            return [2 /*return*/, undefined];\n                        _a = [__assign({}, decodedTx)];\n                        _b = {};\n                        return [4 /*yield*/, this.nonceMapper.map(safeTxHash, decodedTx)];\n                    case 2: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_b.nonce = _c.sent(), _b)]))];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decodeMultisigDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeMultiSigTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n            safeTxGas: parsed.safeTxGas.toString(),\n            baseGas: parsed.baseGas.toString(),\n            gasPrice: parsed.gasPrice.toString(),\n            gasToken: parsed.gasToken,\n            refundReceiver: parsed.refundReceiver,\n            signatures: parsed.signatures,\n            nonce: ethers_1.BigNumber.from(parsed.additionalInfo.slice(0, 66)).toNumber()\n        };\n    };\n    MultisigDecoder.prototype.decodeInternal = function (safe, event, safeTxHash, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, decodedTx, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"multisig_\" + safeTxHash;\n                        decodedTx = this.decodeMultisigDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, safeTxHash, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"multisig_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.safeTxHash = safeTxHash,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.successTopic: return [3 /*break*/, 1];\n                            case constants_1.failureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return MultisigDecoder;\n}());\nexports.MultisigDecoder = MultisigDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingsDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar setupTopic = constants_1.safeInterface.getEventTopic(\"SafeSetup\");\nvar addedOwnerTopic = constants_1.safeInterface.getEventTopic(\"AddedOwner\");\nvar removedOwnerTopic = constants_1.safeInterface.getEventTopic(\"RemovedOwner\");\nvar changeThresholdTopic = constants_1.safeInterface.getEventTopic(\"ChangedThreshold\");\nvar enabledModuleTopic = constants_1.safeInterface.getEventTopic(\"EnabledModule\");\nvar disabledModuledTopic = constants_1.safeInterface.getEventTopic(\"DisabledModule\");\nvar changeFallbackHandlerTopic = constants_1.safeInterface.getEventTopic(\"ChangedFallbackHandler\");\nvar changeGuardTopic = constants_1.safeInterface.getEventTopic(\"ChangedGuard\");\nvar SettingsDecoder = /** @class */ (function () {\n    function SettingsDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    SettingsDecoder.prototype.getSettingsDetails = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventParams, eventParams, eventParams, eventParams, eventParams, eventParams, eventParams;\n            return __generator(this, function (_a) {\n                switch (event.topics[0]) {\n                    case addedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"AddedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'added',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case removedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"RemovedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'removed',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case changeThresholdTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedThreshold\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'threshold',\n                                change: 'set',\n                                value: eventParams.threshold.toString()\n                            }];\n                    }\n                    case enabledModuleTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"EnabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'added',\n                                value: eventParams.module\n                            }];\n                    }\n                    case disabledModuledTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"DisabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'removed',\n                                value: eventParams.module\n                            }];\n                    }\n                    case changeFallbackHandlerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedFallbackHandler\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'fallbackHandler',\n                                change: 'set',\n                                value: eventParams.handler\n                            }];\n                    }\n                    case changeGuardTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedGuard\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'guard',\n                                change: 'set',\n                                value: eventParams.guard\n                            }];\n                    }\n                    default: {\n                        return [2 /*return*/, undefined];\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    SettingsDecoder.prototype.decodeSettingsChange = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var details, block;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getSettingsDetails(event)];\n                    case 1:\n                        details = _a.sent();\n                        if (!details)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _a.sent();\n                        return [2 /*return*/, __assign({ type: \"settings\", id: \"settings_\" + event.transactionHash + \"_\" + event.eventId, block: block.number, timestamp: block.timestamp, txHash: event.transactionHash }, details)];\n                }\n            });\n        });\n    };\n    SettingsDecoder.prototype.decode = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, block;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case setupTopic: return [3 /*break*/, 1];\n                        }\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _b.sent();\n                        return [2 /*return*/, {\n                                type: \"setup\",\n                                id: \"setup_\" + event.transactionHash + \"_\" + event.eventId,\n                                block: block.number,\n                                timestamp: block.timestamp,\n                                txHash: event.transactionHash,\n                            }];\n                    case 3:\n                        {\n                            return [2 /*return*/, this.decodeSettingsChange(event)];\n                        }\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SettingsDecoder;\n}());\nexports.SettingsDecoder = SettingsDecoder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransferDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar TransferDecoder = /** @class */ (function () {\n    function TransferDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    TransferDecoder.prototype.decodeTokenTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, type, eventInterface, eventParams, details;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        type = \"\";\n                        if (event.topics.length === 4) {\n                            eventInterface = constants_1.erc721Interface;\n                            type = \"ERC721\";\n                        }\n                        else if (event.topics.length === 3) {\n                            eventInterface = constants_1.erc20Interface;\n                            type = \"ERC20\";\n                        }\n                        else if (event.topics.length === 2) {\n                            eventInterface = constants_1.erc20OldInterface;\n                            type = \"ERC20\";\n                        }\n                        else {\n                            return [2 /*return*/, undefined];\n                        }\n                        eventParams = eventInterface.decodeEventLog(\"Transfer\", event.data, event.topics);\n                        if (type === \"ERC20\") {\n                            details = {\n                                type: \"ERC20\",\n                                tokenAddress: event.address,\n                                value: eventParams.amount.toString()\n                            };\n                        }\n                        else {\n                            details = {\n                                type: \"ERC721\",\n                                tokenAddress: event.address,\n                                tokenId: eventParams.tokenId.toString()\n                            };\n                        }\n                        return [2 /*return*/, {\n                                type: \"transfer\",\n                                id: id,\n                                block: block.number,\n                                txHash: event.transactionHash,\n                                timestamp: block.timestamp,\n                                sender: eventParams.from,\n                                receipient: eventParams.to,\n                                direction: (eventParams.to.toLowerCase() === safe.toLowerCase() ? \"INCOMING\" : \"OUTGOING\"),\n                                details: details\n                            }];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decodeEtherTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, eventParams, details, transferMeta;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"SafeReceived\", event.data, event.topics);\n                        details = {\n                            type: \"ETHER\",\n                            value: eventParams.value.toString()\n                        };\n                        transferMeta = {\n                            type: \"transfer\",\n                            id: id,\n                            sender: eventParams.sender,\n                            receipient: safe,\n                            direction: \"INCOMING\",\n                            timestamp: block.timestamp,\n                            txHash: event.transactionHash,\n                            details: details\n                        };\n                        return [2 /*return*/, transferMeta];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.transferTopic: return [3 /*break*/, 1];\n                            case constants_1.etherReceivedTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        if (!event.account)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.decodeTokenTransfer(event.account, event)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        return [4 /*yield*/, this.decodeEtherTransfer(event.address, event)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return TransferDecoder;\n}());\nexports.TransferDecoder = TransferDecoder;\n","export abstract class AbstractDB {\n    private internalDb: IDBDatabase | undefined;\n    private indexedDB = window.indexedDB;\n    readonly dbKey: string;\n    readonly dbVersion: number;\n    readonly migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void;\n\n    constructor(dbKey: string, dbVersion: number, migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void) {\n        this.dbKey = dbKey;\n        this.dbVersion = dbVersion;\n        this.migration = migration;\n    }\n\n    async open(): Promise<IDBDatabase> {\n        if (this.internalDb) return this.internalDb\n        const dbStore = this;\n        return new Promise((callback, reject) => {\n            const request = this.indexedDB.open(this.dbKey, this.dbVersion)\n            request.onerror = function () {\n                reject(\"Error: \" + this.error);\n            }\n            request.onsuccess = function () {\n                dbStore.internalDb = this.result;\n                callback(this.result);\n            }\n            request.onupgradeneeded = function (event) {\n                dbStore.migration(this.result, event.oldVersion, this.result.version)\n            }\n        })\n    }\n}\n\nexport abstract class AbstractDAO<T> {\n    readonly db: AbstractDB;\n    readonly storeName: string;\n\n    constructor(db: AbstractDB, storeName: string) {\n        this.db = db;\n        this.storeName = storeName;\n    }\n\n\n    async add(entry: T): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.put(entry).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async remove(id: string): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.delete(id).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async get(id: string): Promise<T> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.get(id).onsuccess = function () {\n                callback(this.result as T)\n            }\n        })\n    }\n\n    async getAllByIndex(index: string, key?: IDBKeyRange | IDBValidKey): Promise<T[]> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.index(index).getAll(key).onsuccess = function () {\n                callback(this.result.reverse() as T[])\n            }\n        })\n    }\n\n    async drop(): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            transaction.objectStore(this.storeName).clear().onsuccess = function () {\n                callback()\n            }\n        })\n    }\n}","import { AbstractDB } from \"./base\";\n\nexport const INTERACTIONS_STORE = \"interactions\"\nexport const INTERACTIONS_KEY = \"id\"\nexport const INTERACTIONS_INDEX = \"timestamp\"\n\nexport const QUEUED_TX_STORE = \"queued_tx\"\nexport const QUEUED_TX_KEY = \"id\"\nexport const QUEUED_TX_INDEX = \"nonce\"\n\nexport const TX_SIGNATURES_STORE = \"tx_signatures\"\nexport const TX_SIGNATURES_KEY = \"id\"\nexport const TX_SIGNATURES_INDEX = \"safeTxHash\"\n\nexport class SafeDB extends AbstractDB {\n    constructor(safe: string) {\n        super(safe, 3, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(INTERACTIONS_STORE, { keyPath: INTERACTIONS_KEY })\n                store.createIndex(INTERACTIONS_INDEX, INTERACTIONS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(QUEUED_TX_STORE, { keyPath: QUEUED_TX_KEY })\n                store.createIndex(QUEUED_TX_INDEX, QUEUED_TX_INDEX, { unique: false })\n            }\n            if (oldVersion < 3) {\n                const store = db.createObjectStore(TX_SIGNATURES_STORE, { keyPath: TX_SIGNATURES_KEY })\n                store.createIndex(TX_SIGNATURES_INDEX, TX_SIGNATURES_INDEX, { unique: false })\n            }\n        });\n    }\n}","import { SafeInteraction } from \"safe-indexer-ts\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { AbstractDAO } from \"./base\";\nimport { INTERACTIONS_INDEX, INTERACTIONS_STORE, QUEUED_TX_INDEX, QUEUED_TX_STORE, SafeDB, TX_SIGNATURES_INDEX, TX_SIGNATURES_STORE } from \"./safe\";\n\n\nexport class InteractionsDAO extends AbstractDAO<SafeInteraction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), INTERACTIONS_STORE)\n    }\n\n    getAll(): Promise<SafeInteraction[]> {\n        return this.getAllByIndex(INTERACTIONS_INDEX)\n    }\n\n}\n\nexport interface QueuedSafeTransaction extends SafeTransaction {\n    id: string\n    version: string\n}\n\nexport class QueuedInteractionsDAO extends AbstractDAO<QueuedSafeTransaction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), QUEUED_TX_STORE)\n    }\n\n    getAll(nonce: number): Promise<QueuedSafeTransaction[]> {\n        return this.getAllByIndex(QUEUED_TX_INDEX, IDBKeyRange.lowerBound(nonce))\n    }\n}\n\nexport class TxSignaturesDAO extends AbstractDAO<SafeTransactionSignature> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), TX_SIGNATURES_STORE)\n    }\n\n    getAll(safeTxHash: string): Promise<SafeTransactionSignature[]> {\n        return this.getAllByIndex(TX_SIGNATURES_INDEX, safeTxHash)\n    }\n}","import { State } from \"safe-indexer-ts\";\n\nconst parseIntWithFallback = (input: string | undefined | null, fallback: number): number => {\n    if (!input) return fallback\n    const value = parseInt(input)\n    if (Number.isNaN(value)) return fallback\n    return value\n}\n\nexport class IndexerState implements State {\n    safe: string;\n    defaultBlock: number;\n    private _lastIndexedBlock: number;\n    private _earliestIndexedBlock: number; // 8485873 is the Block of initial 1.3.0 deployment\n    private _earliestBlock: number;\n\n    constructor(safe: string, defaultBlock?: number) {\n        this.safe = safe;\n        this.defaultBlock = defaultBlock || -1;\n        const storedEarliestIndexedBlock = localStorage.getItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe);\n        this._earliestIndexedBlock = parseIntWithFallback(storedEarliestIndexedBlock, this.defaultBlock);\n        const storedLastIndexedBlock = localStorage.getItem(\"indexer_state_safe_last_indexed_block\" + this.safe);\n        this._lastIndexedBlock = parseIntWithFallback(storedLastIndexedBlock, this.defaultBlock);\n        const storedEarliestBlock = localStorage.getItem(\"indexer_state_safe_earliest_block\" + this.safe);\n        this._earliestBlock = parseIntWithFallback(storedEarliestBlock, 0);\n    }\n\n    set lastIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_last_indexed_block\" + this.safe, value.toString())\n        this._lastIndexedBlock = value;\n    }\n    get lastIndexedBlock() {\n        return this._lastIndexedBlock\n    }\n\n    set earliestIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe, value.toString())\n        this._earliestIndexedBlock = value;\n    }\n    get earliestIndexedBlock() {\n        return this._earliestIndexedBlock\n    }\n\n    set earliestBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_block\" + this.safe, value.toString())\n        this._earliestBlock = value;\n    }\n    get earliestBlock() {\n        return this._earliestBlock\n    }\n\n    reset() {\n        localStorage.removeItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_last_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_earliest_block\" + this.safe)\n        this._lastIndexedBlock = this.defaultBlock\n        this._earliestIndexedBlock = this.defaultBlock\n    }\n}","import { providers } from \"ethers\";\nimport { Callback, IndexerStatus, SafeIndexer, SafeInteraction } from \"safe-indexer-ts\";\nimport { NetworkConfig } from \"../../components/provider/AppSettingsProvider\";\nimport { InteractionsDAO } from \"../db/interactions\";\nimport { IndexerState } from \"../state/indexer\";\nimport { Account } from \"../utils/account\";\nimport { getIndexer } from \"../utils/indexer\";\n\n\nexport class TransactionRepository implements Callback {\n    callbacks: Set<Callback> = new Set()\n    currentStatus: IndexerStatus | undefined\n    indexer: SafeIndexer | undefined\n    state: IndexerState\n    db: InteractionsDAO\n    account: Account\n    networkConfig: NetworkConfig\n\n    constructor(account: Account, networkConfig: NetworkConfig) {\n        this.account = account\n        this.networkConfig = networkConfig\n        this.db = new InteractionsDAO(account.id)\n        this.state = new IndexerState(account.id, networkConfig.startingBlock)\n    }\n\n    connect(provider: providers.Provider): () => void {\n        this.disconnect()\n        console.log(\"connect\")\n        const indexer = getIndexer(this.account, provider, this.state, this.networkConfig, this)\n        this.indexer = indexer\n        indexer.start().catch((e) => console.error(e))\n        indexer.start(true).catch((e) => console.error(e))\n        return () => {\n            this.disconnect()\n        }\n    }\n\n    disconnect() {\n        console.log(\"disconnect\")\n        this.indexer?.stop()\n        this.currentStatus = undefined\n    }\n\n    registerCallback(callback: Callback) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: Callback) {\n        this.callbacks.delete(callback)\n        this.postCurrentStatusUpdateToCallback(callback)\n    }\n\n    private checkForCreation(interactions: SafeInteraction[]) {\n        for (const interaction of interactions) {\n            if (interaction.type === \"setup\" || (\n                interaction.type === \"multisig_transaction\" && interaction.details?.nonce === 0\n            )) {\n                console.log(\"Found creation, stop reverse indexing\")\n                const earliestBlock = Math.max(0, interaction.block - this.networkConfig.maxBlocks)\n                this.state.earliestBlock = earliestBlock\n                this.indexer?.updateConfig({ earliestBlock })\n                return\n            }\n        }\n    }\n\n    private async handleNewInteraction(interaction: SafeInteraction) {\n        try {\n            await this.db.add(interaction)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    onNewInteractions(interactions: SafeInteraction[]) {\n        this.checkForCreation(interactions)\n        interactions.forEach((i) => { this.handleNewInteraction(i) })\n        this.callbacks.forEach((callback) => {\n            try {\n                callback.onNewInteractions(interactions)\n            } catch (e) {\n                console.error(e)\n            }\n        })\n    }\n\n    onStatusUpdate(update: IndexerStatus) {\n        this.currentStatus = update\n        this.postCurrentStatusUpdate()\n    }\n\n    private postCurrentStatusUpdate() {\n        if (!this.currentStatus) return\n        this.callbacks.forEach((cb) => { this.postCurrentStatusUpdateToCallback(cb) })\n    }\n\n    private postCurrentStatusUpdateToCallback(callback: Callback) {\n        const currentStatus = this.currentStatus\n        if (!currentStatus) return\n        try {\n            callback.onStatusUpdate?.(currentStatus)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    async getTx(id: string): Promise<SafeInteraction> {\n        return this.db.get(id)\n    }\n\n    async getAllTxs(): Promise<SafeInteraction[]> {\n        return this.db.getAll()\n    }\n\n    async reindex(): Promise<boolean> {\n        this.currentStatus = undefined\n        const indexer = this.indexer\n        if (!indexer) return false;\n        indexer.pause();\n        await this.db.drop();\n        this.state.reset();\n        indexer.resume();\n        return true\n    }\n\n}","\nimport { providers } from 'ethers';\nimport { Callback, EthersLoader, EthersParser, IncomingEthEventSource, IncomingTransferEventSource, ModuleTransactionEventSource, MultisigTransactionEventSource, OutgoingTransferEventSource, SafeIndexer, SafeIndexerUserConfig, SettingsChangeEventSource } from 'safe-indexer-ts'\nimport { NetworkConfig } from '../../components/provider/AppSettingsProvider';\nimport { IndexerState } from '../state/indexer';\nimport { Account } from './account';\n\nexport const getIndexer = (account: Account, provider: providers.Provider, state: IndexerState, networkConfig: NetworkConfig, callback: Callback): SafeIndexer => {\n    const loader = new EthersLoader(provider, [\n        new MultisigTransactionEventSource(provider), \n        new ModuleTransactionEventSource(provider), \n        new IncomingTransferEventSource(provider), \n        new OutgoingTransferEventSource(provider), \n        new IncomingEthEventSource(provider), \n        new SettingsChangeEventSource(provider)\n    ])\n    const parser = new EthersParser(provider)\n    const config: SafeIndexerUserConfig = { chainId: account.chainId, safe: account.address, maxBlocks: networkConfig.maxBlocks, logger: console, earliestBlock: state.earliestBlock }\n    return new SafeIndexer(state, loader, parser, callback, config)\n}","import Onboard from 'bnc-onboard'\nimport { API, WalletInitOptions } from \"bnc-onboard/dist/src/interfaces\";\nimport chains from '../../logic/utils/chains.json'\n\nexport interface SignerInfo {\n    signerAddress?: string\n}\n\nconst findRpc = (networkId: number): string | undefined => {\n    const chain = chains.find(\n        (chain) => { \n            return chain.chainId === networkId\n        }\n    )\n    return chain?.rpc?.find(\n        (rpc) => {\n            return !rpc.startsWith(\"ws\") && !rpc.includes(\"INFURA_API_KEY\")\n        }\n    )\n}\n\nexport class SafeSigner {\n\n    private onboard?: API\n    private providerChangeListener?: (provider: any | null) => void\n\n    onProviderChange(listener?: (provider: any) => void) {\n        this.providerChangeListener = listener\n    }\n\n    async prepare(networkId: number, showSelection?: boolean): Promise<boolean> {\n        this.clear()\n        const wallets: WalletInitOptions[] = [\n            { walletName: \"metamask\" },\n        ]\n        const rpc = findRpc(networkId)\n        if (rpc) {\n            wallets.push(\n                {\n                    walletName: 'walletConnect',\n                    rpc: {\n                        [networkId.toString()]: rpc\n                    },\n                    bridge: 'https://safe-walletconnect.gnosis.io/',\n                }\n            )\n            wallets.push(\n                {\n                    walletName: 'walletConnect',\n                    rpc: {\n                        [networkId.toString()]: rpc\n                    },\n                    bridge: 'https://safe-walletconnect.gnosis.io/',\n                },\n                {\n                  walletName: 'ledger',\n                  rpcUrl: rpc\n                }\n            )\n        }\n        const onboard = Onboard({\n            networkId,\n            subscriptions: {\n                wallet: wallet => {\n                    if (wallet.name) localStorage.setItem(\"last_selected_wallet_name\", wallet.name)\n                    try {\n                        this.providerChangeListener?.(wallet.provider)\n                    } catch (e) {\n                        console.error(e)\n                    }\n                }\n            },\n            walletSelect: {\n                description: 'Please select a Signer',\n                wallets\n            },\n            walletCheck: [\n                { checkName: 'derivationPath' },\n                { checkName: 'connect' },\n                { checkName: 'accounts' },\n                { checkName: 'network' }\n            ],\n        })\n        this.onboard = onboard\n        const lastSelectedWallet = localStorage.getItem(\"last_selected_wallet_name\") || undefined\n        if (!lastSelectedWallet && showSelection != true) return false\n        if (await onboard.walletSelect(lastSelectedWallet))\n            return await onboard.walletCheck();\n        return false\n    }\n\n    async connect(networkId: number): Promise<boolean> {\n        return this.prepare(networkId, true)\n    }\n\n    async disconnect(): Promise<void> {\n        localStorage.removeItem(\"last_selected_wallet_name\")\n        this.clear()\n    }\n\n    async clear() {\n        this.onboard?.walletReset()\n        this.onboard = undefined\n    }\n\n    status(): SignerInfo {\n        try {\n            const state = this.onboard?.getState()\n            return {\n                signerAddress: state?.address\n            }\n        } catch (e) {\n            return {}\n        }\n    }\n}","import { ethers, providers, Signer } from \"ethers\";\nimport { TypedDataSigner } from \"@ethersproject/abstract-signer\"\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\nimport { SafeSigner } from \"../../logic/account/SafeSigner\";\n\nexport interface NetworkConfig {\n    maxBlocks: number,\n    startingBlock: number\n}\n\nconst defaultConfig: NetworkConfig = {\n    startingBlock: -1,\n    maxBlocks: 1000\n}\n\nexport interface AppSettings {\n    readonly customRpc: string,\n    readonly useCustomRpc: boolean,\n    readonly provider: providers.JsonRpcProvider | undefined,\n    readonly signer: Signer & TypedDataSigner | undefined,\n    readonly safeSigner: SafeSigner,\n    readonly networkConfig: NetworkConfig,\n    toggleCustomRpc: (value: boolean) => void\n    updateCustomRpc: (value: string) => void\n    updateNetworkConfig: (value: NetworkConfig) => void\n}\n\nconst AppSettingsContext = React.createContext<AppSettings | undefined>(undefined);\n\nexport const useAppSettings = () => {\n    const appSettings = useContext(AppSettingsContext)\n    if (!appSettings) throw Error(\"App Settings not available!\")\n    return appSettings\n}\n\nexport const AppSettingsProvider: React.FC = ({ children }) => {\n    const [useCustomRpc, setUseCustomRpc] = useState(localStorage.getItem(\"app_state_use_rpc\") === \"true\")\n    const [customRpc, setCustomRpc] = useState(localStorage.getItem(\"app_state_rpc\") || \"\")\n    const [connectedProvider, setConnectedProvider] = useState<any | null>(undefined)\n    const storedConfig = localStorage.getItem(\"app_state_network_config\")\n    const [networkConfig, setNetworkConfig] = useState<NetworkConfig>(storedConfig ? JSON.parse(storedConfig) : defaultConfig)\n    const toggleCustomRpc = (value: boolean) => {\n        localStorage.setItem(\"app_state_use_rpc\", value ? \"true\" : \"false\")\n        setUseCustomRpc(value)\n    }\n    const updateCustomRpc = (value: string) => {\n        localStorage.setItem(\"app_state_rpc\", value)\n        setCustomRpc(value)\n    }\n    const updateNetworkConfig = (value: NetworkConfig) => {\n        const serialized = JSON.stringify({\n            maxBlocks: value.maxBlocks || 100,\n            startingBlock: value.startingBlock || -1\n        })\n        localStorage.setItem(\"app_state_network_config\", serialized)\n        setNetworkConfig(value)\n    }\n    const provider = useMemo(() => {\n        if (useCustomRpc) {\n            if (!customRpc) return undefined\n            return new ethers.providers.JsonRpcProvider(customRpc); \n        }\n        if (connectedProvider) {\n            return new ethers.providers.Web3Provider(connectedProvider)\n        }\n        return undefined\n    }, [useCustomRpc, customRpc, connectedProvider])\n\n    const signer = useMemo(() => {\n        let signerProvider = provider\n        if (useCustomRpc && connectedProvider) {\n            signerProvider = new ethers.providers.Web3Provider(connectedProvider)\n        }\n        return signerProvider?.getSigner()\n    }, [provider])\n\n    const safeSigner = useMemo(() => {\n        return new SafeSigner();\n    }, [])\n\n    useEffect(() => {\n        safeSigner.onProviderChange(setConnectedProvider)\n    }, [safeSigner, setConnectedProvider])\n\n    return <AppSettingsContext.Provider value={{ customRpc, useCustomRpc, provider, signer, networkConfig, toggleCustomRpc, updateCustomRpc, updateNetworkConfig, safeSigner }}>\n        {children}\n    </AppSettingsContext.Provider>\n}\n\nexport default AppSettingsProvider","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { TransactionRepository as TransactionRepository } from \"../../logic/account/TransactionRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst TransactionRepoContext = React.createContext<TransactionRepository | undefined>(undefined);\n\nexport const useTransactionRepo = () => {\n    const repo = useContext(TransactionRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const TransactionRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { provider, networkConfig } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new TransactionRepository(account, networkConfig)\n    }, [ account, networkConfig ])\n\n    console.log({provider})\n    useEffect(() => {\n        if (!provider) return\n        return repo.connect(provider)\n    }, [repo, provider])\n\n    useEffect(() => {\n        return () => repo.disconnect()\n    }, [repo])\n\n    return <TransactionRepoContext.Provider value={repo}>\n        { children }\n    </TransactionRepoContext.Provider>\n}\n\nexport default TransactionRepositoryProvider","import { ethers } from 'ethers'\nimport shortNames from './shortNameToChainId.json'\n\nexport interface Account {\n    id: string\n    chainId: number\n    address: string\n}\n\nexport const buildCaip2Addr = (chainId: number, address: string) => {\n    return `eip155:${chainId}:${address}`\n}\n\nexport const shortNameToChainId = (shortName: string): string | undefined => {\n    return (shortNames as Record<string, string>)[shortName]\n}\n\nexport const parseAddress = (address: string): string | undefined => {\n    try {\n        return ethers.utils.getAddress(address)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseChainId = (chainId: string): number | undefined => {\n    try {\n        return parseInt(chainId)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseAccount = (account: string): Account | undefined => {\n    const accountParts = account.split(\":\")\n    let network = undefined\n    let address = undefined\n    if (accountParts.length == 1) {\n        address = parseAddress(accountParts[0])\n        network = \"eip155:1\"\n    } else if (accountParts.length == 2) {\n        address = parseAddress(accountParts[1])\n        network = shortNameToChainId(accountParts[0])\n    } else if (accountParts.length == 3) {\n        address = parseAddress(accountParts[2])\n        network = `${accountParts[0]}:${accountParts[1]}`\n    }\n\n    if (!network || !address) return undefined\n    const networkParts = network.split(\":\")\n    if (networkParts.length != 2 || networkParts[0] !== \"eip155\") return undefined\n    const chainId = parseChainId(networkParts[1])\n    if (!chainId) return undefined\n    return {\n        address,\n        chainId: chainId,\n        id: buildCaip2Addr(chainId, address)\n    }\n}","import { useMediaQuery } from \"@mui/material\";\nimport { buildCaip2Addr } from \"../../logic/utils/account\";\nimport { useAccount } from \"../account/Dashboard\";\n\nexport const useDektopLayout = (): boolean => useMediaQuery('(min-width:600px)');\n\nexport const copyToClipboard = (text: string, copyMessage?: string) => {\n    try {\n        navigator.clipboard.writeText(text)\n        if (copyMessage) {\n            window.alert(copyMessage)\n        }\n    }  catch (e) {\n        console.log(e)\n    }\n}\n\nexport const useCopyAddress = (address: string): (() => void) => {\n    const account = useAccount()\n    const shareableText = buildCaip2Addr(account.chainId, address)\n    return () => { copyToClipboard(shareableText, \"Copied address to clipboard!\") }\n}","import { Typography } from \"@mui/material\"\nimport { styled } from \"@mui/system\"\n\nexport const Group = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const Row = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'row'\n}))\n\nexport const Header = styled('div')(({ theme }) => ({\n    textAlign: 'start'\n}))\n\nexport const Entry = styled('div')(({ theme }) => ({\n    display: 'flex',\n    alignItems: 'center',\n    paddingBottom: 16\n}))\n\nexport const LongText = styled(Typography)(({ theme }) => ({\n    width: '100%',\n    textAlign: 'start',\n    wordWrap: 'break-word'\n}))","export const shortAddress = (address: string, visibleChars: number = 4): string => {\n    const length = address.length\n    if (length <= 2 * visibleChars + 2) return address;\n    return \"0x\" + address.slice(2, 2 + visibleChars) + '...' + address.slice(address.length - visibleChars)\n}","import { IconButton, Typography } from \"@mui/material\"\nimport { useMemo } from \"react\";\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { ContentCopy } from \"@mui/icons-material\";\nimport { Row } from \"../../styled/tables\";\nimport { shortAddress } from \"../../logic/utils/address\";\nimport { copyToClipboard, useCopyAddress } from \"./media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AddressInfo: React.FC<{ address: string, onClick?: (address: string) => void  }> = ({ address, onClick }) => {\n    const iconSrc = useMemo(() => makeBlockie(address), [address]);\n    const copyAddress = useCopyAddress(address)\n    return <Row sx={{\n        width: `calc(100% - 32px)`,\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" onClick={() => onClick?.(address) } />\n        <Typography sx={{ fontFamily: 'Monospace', paddingX: '8px' }} onClick={() => onClick?.(address) } >{shortAddress(address)}</Typography>\n        <IconButton color=\"default\" component=\"span\" onClick={() => copyAddress() }>\n            <ContentCopy fontSize=\"small\" />\n        </IconButton>\n    </Row>\n}\n\nexport default AddressInfo","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { SettingsChangeTx, TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: SettingsChangeTx\n}\n\nexport const renderSettingsValue = (component: string, value: string): React.ReactNode => {\n    switch (component) {\n        case 'owners':\n        case 'modules':\n        case 'fallbackHandler':\n            return <AddressInfo address={value} />\n        default:\n            return <LongText>{value}</LongText>\n    }\n}\n\nconst capitalize = (value: string): string => {\n    if (value.length < 2) return value\n    return value.slice(0, 1).toUpperCase() + value.slice(1)\n}\n\nexport const SettingsTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>{capitalize(transaction.component)} {transaction.change}</Header>\n        <Entry>\n            {renderSettingsValue(transaction.component, transaction.value)}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group >\n}\n\nexport default SettingsTxDetails","import styled from '@emotion/styled';\nimport React from 'react'\nimport { SettingsChangeTx } from 'safe-indexer-ts'\nimport { Entry, Group, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\nimport { renderSettingsValue } from '../details/SettingsTxDetails';\n\nexport interface Props {\n    settingsChange: SettingsChangeTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'inline-block',\n    width: '100%',\n    wordWrap: 'break-word'\n}))\n\nexport const SettingsTxSummary: React.FC<Props> = ({ settingsChange, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(settingsChange.id)}>\n        {`${settingsChange.component} ${settingsChange.change}`}\n        {hideDate && renderSettingsValue(settingsChange.component, settingsChange.value)}\n        {!hideDate && (<>\n            <br />{new Date(settingsChange.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default SettingsTxSummary","import styled from '@emotion/styled';\nimport React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event, TransferTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    transfer: TransferTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const TransferTxSummary: React.FC<Props> = ({ transfer, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(transfer.id)}>\n        {`${transfer.direction} ${transfer.details.type} Transfer`}\n        {!hideDate && (<>\n            <br />{new Date(transfer.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default TransferTxSummary","import React from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\nimport TransferTxSummary from './summary/TransferTxSummary'\n\nexport interface Props {\n    interaction: SafeInteraction,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\nexport const TxSummary: React.FC<Props> = ({ interaction, showDetails, hideDate }) => {\n    switch (interaction.type) {\n        case \"multisig_transaction\":\n        case \"module_transaction\":\n        case \"setup\":\n            return <div onClick={() => showDetails?.(interaction.id)}>\n                {`${interaction.type}`}<br />\n                {!hideDate ? `${new Date(interaction.timestamp * 1000).toUTCString()}` : \"\"}<br />\n                <br />\n            </div>\n        case \"settings\":\n            return <SettingsTxSummary settingsChange={interaction} hideDate={hideDate} showDetails={showDetails} />\n        case \"transfer\":\n            return <TransferTxSummary transfer={interaction} hideDate={hideDate} showDetails={showDetails} />\n        default:\n            return <div>\n                Unknown Interaction\n            </div>\n    }\n}\n\nexport default TxSummary","import React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    interactions: SafeInteractionEvent[]\n}\n\nconst eventSummary = (event: Event): ReactElement => {\n    return <div>\n        {`Event - ${event.eventId}`}<br />\n        <br />\n    </div>\n}\n\nexport const TxEvents: React.FC<Props> = ({ interactions }) => {\n    if (interactions.length == 0) return <></>\n    return <>\n        <Header>Events:</Header>\n        <Group sx={{ textAlign: \"left\" }}>\n            {interactions.map((e) => (<Entry>\n                {e.interaction ? <TxSummary interaction={e.interaction} hideDate /> : eventSummary(e.event)}\n            </Entry>))}\n        </Group>\n    </>\n}\n\nexport default TxEvents","import React, { useState } from 'react'\nimport { Button, Link, Typography } from '@mui/material';\nimport { Group, LongText } from '../../styled/tables';\n\nexport interface Props {\n    data: string\n}\n\nexport const TxData: React.FC<Props> = ({ data }) => {\n    const [collapsed, setCollapsed] = useState<boolean>(true)\n    const decodePossible = data.length >= 10\n    const canCollapse = data.length >= 42\n    const displayData = canCollapse && collapsed ? data.slice(0, 24) + `...` : data\n    return <Group sx={{ paddingBottom: \"16px\" }}>\n        <LongText>{displayData} {canCollapse && (<Link onClick={() => { setCollapsed(!collapsed) }} sx={{ textDecoration: \"none\" }}>{collapsed ? \"Expand\" : \"Collapse\"}</Link>)}</LongText>\n        {decodePossible && (<Button onClick={() => { window.open('https://rimeissner.dev/transaction-decoder/#/?data=' + data, '_blank'); }}>Decode</Button>)}\n    </Group>\n}\n\nexport default TxData","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { ModuleTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport { Typography } from '@mui/material';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: ModuleTx\n}\n\nexport const ModuleTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Module:</Header>\n        <Entry>\n            <AddressInfo address={transaction.module} />\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default ModuleTxDetails","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { MultisigTx } from 'safe-indexer-ts'\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: MultisigTx\n}\n\nexport const MultisigTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        <Header>Id:</Header>\n        <Entry>\n            <LongText>{transaction.safeTxHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n                <Header>Nonce:</Header>\n                <Entry>\n                    <LongText>{transaction.details.nonce}</LongText>\n                </Entry>\n                <Header>Signatures:</Header>\n                <Entry>\n                    <LongText>{transaction.details.signatures}</LongText>\n                </Entry>\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default MultisigTxDetails","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: TransferTx\n}\n\nconst renderDetails = (details: TransferDetails): ReactElement => {\n    let asset: string = \"\"\n    let subjectTitle: string = \"\"\n    let subject: string = \"\"\n    switch (details.type) {\n        case \"ERC20\":\n            asset = \"ERC20 - \" + details.tokenAddress\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        case \"ERC721\":\n            asset = \"ERC721 - \" + details.tokenAddress\n            subjectTitle = \"ID\"\n            subject = details.tokenId\n            break\n        case \"ETHER\":\n            asset = \"Ether\"\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        default:\n            break\n    }\n    return (<>\n        <Header>Asset:</Header>\n        <Entry>\n            <Typography>{asset}</Typography>\n        </Entry>\n        <Header>{subjectTitle}</Header>\n        <Entry>\n            <Typography>{subject}</Typography>\n        </Entry>\n    </>)\n}\n\nexport const TransferTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>From:</Header>\n        <Entry>\n            <AddressInfo address={transaction.sender} />\n        </Entry>\n        <Header>To:</Header>\n        <Entry>\n            <AddressInfo address={transaction.receipient} />\n        </Entry>\n        {renderDetails(transaction.details)}\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group>\n}\n\nexport default TransferTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { ReactElement, useEffect, useState } from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\nimport ModuleTxDetails from './details/ModuleTxDetails'\nimport MultisigTxDetails from './details/MultisigTxDetails'\nimport SettingsTxDetails from './details/SettingsTxDetails'\nimport TransferTxDetails from './details/TransferTxDetails'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst renderDetails = (interaction?: SafeInteraction): ReactElement => {\n    switch (interaction?.type) {\n        case \"multisig_transaction\":\n            return (<MultisigTxDetails transaction={interaction} />)\n        case \"module_transaction\":\n            return (<ModuleTxDetails transaction={interaction} />)\n        case \"transfer\":\n            return (<TransferTxDetails transaction={interaction} />)\n        case \"settings\":\n            return <SettingsTxDetails transaction={interaction} />\n        default:\n            return (<>\"Unknown details\"</>)\n    }\n}\n\nexport const TxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [debugLink, setDebugLink] = useState<string | undefined>(undefined)\n    const txRepo = useTransactionRepo()\n    const account = useAccount()\n    const [interaction, setInteraction] = useState<SafeInteraction | undefined>(undefined)\n    useEffect(() => {\n        setInteraction(undefined)\n        if (!id) return\n        const loadInteraction = async () => {\n            try {\n                setInteraction(await txRepo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        loadInteraction()\n    }, [id, txRepo, setInteraction, handleClose])\n\n    useEffect(() => {\n        if (!interaction) {\n            setDebugLink(undefined)\n            return\n        }\n        let link = \"https://dashboard.tenderly.co/tx/\"\n        link += account.chainId + \"/\"\n        link += interaction?.txHash\n        setDebugLink(link)\n    }, [interaction, account])\n    return <TxDialog open={!!id} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Transaction Details</DialogTitle>\n        <DialogContent>\n            {renderDetails(interaction)}\n        </DialogContent>\n        <DialogActions>\n            {debugLink && (<Button onClick={() => { window.open(debugLink, \"_blank\") }}>Debug</Button>)}\n            <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default TxDetails","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Callback, SafeInteraction } from 'safe-indexer-ts';\nimport { Button, styled, Typography } from '@mui/material';\nimport { useAccount } from '../Dashboard';\nimport SettingsDialog from '../../settings/SettingsDialog';\nimport TxDetails from './TxDetails';\nimport TxSummary from './TxSummary';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\",\n}))\n\nfunction Transactions() {\n  const account = useAccount()\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [txs, setTxs] = useState<SafeInteraction[]>([])\n  const accountRepo = useTransactionRepo()\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: () => {\n        accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n      }\n    }\n    accountRepo.registerCallback(callback)\n    return () => accountRepo.unregisterCallback(callback)\n  }, [accountRepo, txs, setTxs])\n\n  useEffect(() => {\n    // Reset id if account changes\n    setSelectedId(undefined)\n  }, [account])\n\n  const showDetails = useCallback(async (id) => {\n    setSelectedId(id)\n  }, [setSelectedId])\n\n  useEffect(() => {\n    setTxs([])\n    accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n  }, [accountRepo, setTxs])\n\n  const details = useMemo(() => {\n    return <TxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      {txs.map((e) => <TxSummary interaction={e} showDetails={(id) => showDetails(id)} />)}\n      {details}\n    </Root>\n  );\n}\n\nexport default Transactions;\n","import { Signer, TypedDataSigner, TypedDataDomain, TypedDataField } from \"@ethersproject/abstract-signer\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"./account\";\n\nexport type SafeSignatureType = \"eip712\" | \"eth_sign\" | \"pre_validated\" | \"contract\"\n\nconst recoverEthSign = (safeTxHash: string, signature: string) => {\n    const hash = ethers.utils.hashMessage(ethers.utils.arrayify(safeTxHash))\n    // TODO: adjust v\n    return ethers.utils.recoverAddress(hash, signature)\n}\n\nconst recoverEIP712 = (safeTxHash: string, signature: string) => {\n    return ethers.utils.recoverAddress(safeTxHash, signature)\n}\n\nconst recoverPreValidated = async (signature: string) => {\n    // TODO: add on-chain check\n    return signature.slice(0, 66)\n}\n\nexport const checkSafeTransactionSignature = async (signature: SafeTransactionSignature) => {\n    let signer;\n    switch (signature.type) {\n        case \"eth_sign\": {\n            signer = recoverEthSign(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"eip712\": {\n            signer = recoverEIP712(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"pre_validated\": {\n            signer = recoverPreValidated(signature.data)\n            break\n        }\n        case \"contract\": {\n            throw Error(\"Contract signatures not supported yet\")\n        }\n        default: {\n            throw Error(\"Unknown signature type\")\n        }\n    }\n    if (signer !== signature.signer) throw Error(`Unexpected signer! Expected ${signature.signer} got ${signer}`)\n}\n\nexport const shareableSignatureString = (signature: SafeTransactionSignature): string => {\n    return `${signature.data}:${signature.signer}:${signature.safeTxHash}:${signature.type}`\n}\n\nconst signatureId = (signatureData: string, safeTxHash: string): string => ethers.utils.keccak256(signatureData + safeTxHash.slice(2))\n\nexport const parseSafeSignature = async (signatureString: string, safeTxHash?: string, sigType?: SafeSignatureType): Promise<SafeTransactionSignature> => {\n    const signatureParts = signatureString.split(\":\")\n    if (\n        (signatureParts.length == 2 && !safeTxHash && !sigType) ||\n        (signatureParts.length == 3 && !sigType) ||\n        signatureParts.length != 4\n    ) {\n        throw Error(\"Missing Safe signature info\")\n    }\n    const data = signatureParts[0]\n    const signer = signatureParts[1]\n    const hash = safeTxHash || signatureParts[2]\n    // TODO: verify signature type\n    const type = sigType || signatureParts[3] as SafeSignatureType\n    const id = signatureId(data, hash)\n    return {\n        id,\n        type,\n        signer,\n        safeTxHash: hash,\n        data\n    }\n}\n\nexport const parseSignatureType = (signature: string): SafeSignatureType => {\n    const sigType = signature.slice(-2)\n    switch(sigType) {\n        case \"00\": {\n            return \"contract\" // contract signature (aka old eip 1271 version)\n        }\n        case \"01\": {\n            return \"pre_validated\" // pre-validated signature\n        }\n        case \"1b\": \n        case \"1c\": {\n            return \"eip712\" // Typed Data based signature\n        }\n        case \"1f\": \n        case \"20\": {\n            return \"eth_sign\" // eth_sign based signature\n        }\n        default: \n            throw Error(\"Unknown signature type\")\n    }\n}\n\nconst getEIP712Domain = (version: string, account: Account): TypedDataDomain => {\n    switch (version) {\n        case \"1.3.0\": {\n            return {\n                verifyingContract: account.address,\n                chainId: account.chainId\n            }\n        }\n        default: {\n            return { verifyingContract: account.address }\n        }\n    }\n}\n\nconst getEIP712TxType = (version: string): Record<string, TypedDataField[]> => {\n    switch (version) {\n        case \"0.1.0\": {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"dataGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n        default: {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"baseGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n    }\n}\n\nconst signEip712 = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer._signTypedData(\n        getEIP712Domain(transaction.version, account),\n        getEIP712TxType(transaction.version),\n        transaction\n    )\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEIP712(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    const id = signatureId(signatureString, transaction.id)\n    return {\n        type: \"eip712\",\n        id,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nconst signMessage = async (signer: Signer & TypedDataSigner, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer.signMessage(arrayify(transaction.id))\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEthSign(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    const id = signatureId(signatureString, transaction.id)\n    return {\n        type: \"eth_sign\",\n        id,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nexport const buildPreValidatedSignature = async (signerAddress: string, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signature = \"0x000000000000000000000000\" + signerAddress.slice(2) + \"0000000000000000000000000000000000000000000000000000000000000000\" + \"01\"\n    const id = signatureId(signature, transaction.id)\n    return {\n        id,\n        safeTxHash: transaction.id,\n        type: \"pre_validated\",\n        signer: signerAddress,\n        data: signature,\n    }\n}\n\nexport const signQueuedTx = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    try {\n        return await signEip712(signer, account, transaction)\n    } catch (e: any) {\n        if (e.code && e.code === 4001) {\n            console.warn(\"User canceled signing\")\n            throw e\n        }\n        console.warn(\"Could not sign with EIP-712\")\n    }\n    return await signMessage(signer, transaction) \n}","import { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { SafeStatus } from \"./safe\";\nimport { buildPreValidatedSignature } from \"./signatures\";\n\nexport const prepareSignatures = async (status: SafeStatus, tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[], submitterAddress?: string): Promise<SafeTransactionSignature[]> => {\n    const signatureMap = new Map<String, SafeTransactionSignature>()\n    for (const signature of signatures) {\n        if (status.owners.indexOf(signature.signer) < 0) continue\n        if (submitterAddress === signature.signer || signatureMap.has(signature.signer)) continue\n        signatureMap.set(signature.signer, signature)\n    }\n    const submitterIsOwner = submitterAddress && status.owners.indexOf(submitterAddress) >= 0\n    const requiredSigntures = submitterIsOwner ? status.threshold.sub(1) : status.threshold\n    if (requiredSigntures.toNumber() > signatureMap.size) throw Error(`Not enough signatures (${signatureMap.size} of ${requiredSigntures})`)\n    const signatureArray = []\n    if (submitterIsOwner) {\n        signatureArray.push(await buildPreValidatedSignature(submitterAddress, tx))\n    }\n    return signatureArray.concat(Array.from(signatureMap.values()).slice(0, requiredSigntures.toNumber()))\n}\n\nconst buildStaticPart = (signature: SafeTransactionSignature, offset: number): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return \"\" +\n                ethers.utils.defaultAbiCoder.encode([\"address\"], [signature.signer]).slice(2) +\n                ethers.utils.defaultAbiCoder.encode([\"uint256\"], [offset]).slice(2) +\n                \"00\"\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return signature.data.slice(2)\n    }\n}\n\nconst buildDynamicPart = (signature: SafeTransactionSignature): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return ethers.utils.defaultAbiCoder.encode([\"bytes\"], [arrayify(signature.data)]).slice(2)\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return \"\"\n    }\n}\n\nexport const buildSignatureBytes = (signatures: SafeTransactionSignature[]): string => {\n    signatures.sort((left, right) => left.signer.toLowerCase().localeCompare(right.signer.toLowerCase()))\n    let staticParts = \"\"\n    let dynamicParts = \"\"\n    for (const sig of signatures) {\n        staticParts += buildStaticPart(sig, dynamicParts.length / 2)\n        dynamicParts += buildDynamicPart(sig)\n    }\n    return \"0x\" + staticParts + dynamicParts\n}","import { Contract, PopulatedTransaction } from \"@ethersproject/contracts\";\nimport { safeInterface, SignedSafeTransaction } from \"safe-indexer-ts\";\nimport { ethers, BigNumber, Signer } from \"ethers\";\nimport { SafeTransaction } from \"../models/transactions\";\n\nexport interface SafeStatus {\n    nonce: BigNumber,\n    threshold: BigNumber,\n    owners: string[],\n    version: string\n}\n\nexport class Safe {\n    protected readonly safeContract: Contract\n\n    constructor(address: string, providerOrSigner?: ethers.providers.Provider | Signer) {\n        this.safeContract = new Contract(address, safeInterface, providerOrSigner)\n    }\n\n    writable(signer: Signer): WritableSafe {\n        return new WritableSafe(this.safeContract.address, signer)\n    }\n\n    nonce(): Promise<BigNumber> {\n        return this.safeContract.nonce()\n    }\n\n    owners(): Promise<string> {\n        return this.safeContract.getOwners()\n    }\n\n    async status(): Promise<SafeStatus> {\n        const information = await Promise.all([\n            this.safeContract.nonce(),\n            this.safeContract.getThreshold(),\n            this.safeContract.getOwners(),\n            this.safeContract.VERSION(),\n        ])\n        return {\n            nonce: information[0],\n            threshold: information[1],\n            owners: information[2],\n            version: information[3]\n        }\n    }\n\n    async getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }> {\n        const hash: string = await this.safeContract.getTransactionHash(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.nonce\n        )\n        const version: string = await this.safeContract.VERSION()\n        return { hash, version }\n    }\n\n    populateTx(tx: SignedSafeTransaction): Promise<PopulatedTransaction> {\n        return this.safeContract.populateTransaction.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}\n\nexport class WritableSafe extends Safe {\n    constructor(address: string, signer: Signer) {\n        super(address, signer)\n    }\n\n    executeTx(tx: SignedSafeTransaction): Promise<string> {\n        return this.safeContract.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}","import { providers, Signer, BigNumber } from \"ethers\";\nimport { QueuedInteractionsDAO, QueuedSafeTransaction, TxSignaturesDAO } from \"../db/interactions\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"../utils/account\";\nimport { buildSignatureBytes, prepareSignatures } from \"../utils/execution\";\nimport { Safe } from \"../utils/safe\";\n\nexport interface QueueRepositoryUpdates {\n    onNewTx: () => void\n}\n\nexport class QueueRepository {\n    callbacks: Set<QueueRepositoryUpdates> = new Set()\n    queueDao: QueuedInteractionsDAO\n    signaturesDao: TxSignaturesDAO\n    account: Account\n    safe: Safe\n\n    constructor(account: Account, provider?: providers.Provider) {\n        this.account = account\n        this.queueDao = new QueuedInteractionsDAO(account.id)\n        this.signaturesDao = new TxSignaturesDAO(account.id)\n        this.safe = new Safe(account.address, provider)\n    }\n\n    registerCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.delete(callback)\n    }\n\n    private notifyNewTxs() {\n        this.callbacks.forEach((callback) => { \n            try {\n                callback.onNewTx()\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    async addTx(tx: SafeTransaction): Promise<QueuedSafeTransaction> {\n        const hashInfo = await this.safe.getTransactionHash(tx)\n        const queuedTx = {\n            id: hashInfo.hash,\n            version: hashInfo.version,\n            ...tx\n        }\n        await this.queueDao.add(queuedTx)\n        this.notifyNewTxs()\n        return queuedTx\n    }\n\n    async deleteTx(id: string): Promise<void> {\n        await this.queueDao.remove(id)\n        this.notifyNewTxs()\n    }\n\n    async getTx(hash: string): Promise<QueuedSafeTransaction> {\n        return this.queueDao.get(hash)\n    }\n\n    async getQueuedTxs(): Promise<QueuedSafeTransaction[]> {\n        const nonce = await this.safe.nonce()\n        return this.queueDao.getAll(nonce.toNumber())\n    }\n\n    async getNextNonce(): Promise<string> {\n        const queuedTxs = await this.getQueuedTxs()\n        if (queuedTxs.length > 0) {\n            return BigNumber.from(queuedTxs[queuedTxs.length - 1].nonce).add(1).toString()\n        }\n        return (await this.safe.nonce()).toString()\n    }\n\n    async getSignatures(hash: string): Promise<SafeTransactionSignature[]> {\n        return this.signaturesDao.getAll(hash)\n    }\n\n    async addSignature(signature: SafeTransactionSignature): Promise<void> {\n        await this.signaturesDao.add(signature)\n    }\n\n    async submitTx(tx: QueuedSafeTransaction, submitter: Signer, signatures: SafeTransactionSignature[]): Promise<string> {\n        const writableSafe = this.safe.writable(submitter)\n        const status = await this.safe.status()\n        if (status.nonce.toNumber() !== tx.nonce) throw Error(`Unexpected nonce! Expected ${status.nonce} got ${tx.nonce}`)\n        const submitterAddress = await submitter.getAddress()\n        const signatureBytes = buildSignatureBytes(await prepareSignatures(status, tx, signatures, submitterAddress))\n        const signedTx = {\n            signatures: signatureBytes,\n            ...tx\n        }\n        return writableSafe.executeTx(signedTx)\n    }\n\n}","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { QueueRepository } from \"../../logic/account/QueueRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst QueueRepoContext = React.createContext<QueueRepository | undefined>(undefined);\n\nexport const useQueueRepo = () => {\n    const repo = useContext(QueueRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const QueueRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { provider } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new QueueRepository(account, provider)\n    }, [ account, provider ])\n\n    return <QueueRepoContext.Provider value={repo}>\n        { children }\n    </QueueRepoContext.Provider>\n}\n\nexport default QueueRepositoryProvider","import React from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\n\nexport interface Props {\n    transaction: QueuedSafeTransaction,\n    showDetails?: (id: string) => void\n}\nexport const QueuedTxSummary: React.FC<Props> = ({ transaction, showDetails }) => {\n    return <div onClick={() => showDetails?.(transaction.id)}>\n        {transaction.to}<br />\n        {transaction.nonce} - {transaction.version} - {transaction.id.slice(0, 10)}<br />\n    </div>\n}\n\nexport default QueuedTxSummary","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useState } from 'react'\nimport { parseSafeSignature } from '../../../logic/utils/signatures'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    safeTxHash?: string\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const AddSignatureDialog: React.FC<Props> = ({ safeTxHash, open, handleClose, handleNewSignature }) => {\n    const [signatureString, setSignatureString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n\n    const handleAdd = async () => {\n        if (!safeTxHash) return\n        try {\n            const signature = await parseSafeSignature(signatureString, safeTxHash)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n            setSignatureString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Add Signature</DialogTitle>\n        <DialogContent>\n            <TextField label=\"Signature\" onChange={(e) => setSignatureString(e.target.value)} value={signatureString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleAdd}>Add</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default AddSignatureDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { parseSafeSignature, signQueuedTx } from '../../../logic/utils/signatures'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const SignTransactionDialog: React.FC<Props> = ({ transaction, open, handleClose, handleNewSignature }) => {\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n    const { signer, safeSigner } = useAppSettings()\n\n    const handleSign = async () => {\n        if (!open || !transaction || !signer) return\n        try {\n            const { signerAddress } = await safeSigner.status()\n            if (!signerAddress) throw Error(\"No accounts available\")\n            const signature = await signQueuedTx(signer, account, transaction)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleSign()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Sign Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default SignTransactionDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleTxSubmitted?: (ethereumTxHash: string) => void\n}\n\nexport const ExecuteTxDialog: React.FC<Props> = ({ transaction, open, handleClose, handleTxSubmitted }) => {\n    const queuedRepo = useQueueRepo()\n    const { signer, safeSigner } = useAppSettings()\n\n    const handleExecution = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const { signerAddress } = await safeSigner.status()\n            if (!signerAddress) throw Error(\"No accounts available\")\n            const signatures = await queuedRepo.getSignatures(transaction.id)\n            const ethereumTxHash = await queuedRepo.submitTx(transaction, signer, signatures)\n            handleTxSubmitted?.(ethereumTxHash)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleExecution()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n    <DialogTitle>Execute Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ExecuteTxDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Entry, Group, Header, LongText } from '../../../styled/tables';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { SafeTransactionSignature } from '../../../logic/models/transactions';\nimport AddSignatureDialog from './AddSignatureDialog';\nimport SignTransactionDialog from './SignTransactionDialog';\nimport ExecuteTxDialog from './ExecuteTxDialog';\nimport { shareableSignatureString } from '../../../logic/utils/signatures';\nimport { copyToClipboard, useDektopLayout } from '../../utils/media';\nimport TxData from '../../utils/TxData';\nimport { useAccount } from '../Dashboard';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport { Safe } from '../../../logic/utils/safe';\nimport { buildSignatureBytes, prepareSignatures } from '../../../logic/utils/execution';\nimport { PopulatedTransaction } from '@ethersproject/contracts';\nimport AddressInfo from '../../utils/AddressInfo';\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst shareSignature = (sig: SafeTransactionSignature) => {\n    const shareText = shareableSignatureString(sig)\n    copyToClipboard(shareText, \"Signature copied to clipboard!\")\n}\n\nexport const QueuedTxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [simulateLink, setSimulateLink] = useState<string | undefined>(undefined)\n    const [showAddSignature, setShowAddSignature] = useState(false)\n    const [showSignTransaction, setShowSignTransaction] = useState(false)\n    const [showExecuteTransaction, setShowExecuteTransaction] = useState(false)\n    const repo = useQueueRepo()\n    const account = useAccount()\n    const { signer } = useAppSettings()\n\n    const deleteTx = useCallback(async(id?: string) => {\n        if (!id) return\n        try {\n            await repo.deleteTx(id)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }, [repo, handleClose])\n\n    const [transaction, setTransaction] = useState<QueuedSafeTransaction | undefined>(undefined)\n    useEffect(() => {\n        setTransaction(undefined)\n        if (!id) return\n        const load = async () => {\n            try {\n                setTransaction(await repo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        load()\n    }, [id, repo, setTransaction, handleClose])\n\n    const [signatures, setSignatures] = useState<SafeTransactionSignature[] | undefined>(undefined)\n    const loadSignatures = useCallback(async () => {\n        console.log(\"Load Signatures\")\n        if (!id) return\n        try {\n            setSignatures(await repo.getSignatures(id))\n        } catch (e) {\n            console.error(e)\n        }\n    }, [id, repo, setSignatures])\n    useEffect(() => {\n        setSignatures(undefined)\n        loadSignatures()\n    }, [loadSignatures])\n    useEffect(() => {\n        if (!transaction || transaction.operation !== 0) {\n            setSimulateLink(undefined)\n            return\n        }\n        (async () => {\n            let populatedTx: PopulatedTransaction | undefined\n            if (signer && signatures) {\n                try {\n                    const submitterAddress = await signer.getAddress()\n                    const safe = new Safe(account.address, signer)\n                    const status = await safe.status()\n                    const signatureBytes = buildSignatureBytes(await prepareSignatures(status, transaction, signatures, submitterAddress))\n                    populatedTx = await safe.populateTx({\n                        signatures: signatureBytes,\n                        ...transaction\n                    })\n                    populatedTx.from = submitterAddress\n                } catch (e) {\n                    console.error(e)\n                }\n            }\n            try {\n                let link = \"https://dashboard.tenderly.co/simulator/new?\"\n                link += \"network=\" + account.chainId + \"&\"\n                console.log(populatedTx)\n                if (populatedTx) {\n                    link += \"from=\" + populatedTx.from + \"&\"\n                    link += \"contractAddress=\" + populatedTx.to + \"&\"\n                    link += \"rawFunctionInput=\" + populatedTx.data + \"&\"\n                    link += \"value=\" + BigNumber.from(populatedTx.value || \"0\").toString() + \"&\"\n                } else {\n                    link += \"from=\" + account.address + \"&\"\n                    link += \"contractAddress=\" + transaction.to + \"&\"\n                    link += \"rawFunctionInput=\" + transaction.data + \"&\"\n                    link += \"value=\" + BigNumber.from(transaction.value).toString() + \"&\"\n                }\n                setSimulateLink(link)\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [transaction, account, signer, repo, signatures])\n    return <>\n        <TxDialog open={!!id && !showAddSignature} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n            <DialogTitle>Transaction Details</DialogTitle>\n            <DialogContent>\n                {transaction ? (\n                    <Group>\n                        <Header>Id:</Header>\n                        <Entry>\n                            <LongText>{transaction.id}</LongText>\n                        </Entry>\n                        <Header>Operation:</Header>\n                        <Entry>\n                            <Typography>{transaction.operation}</Typography>\n                        </Entry>\n                        <Header>To:</Header>\n                        <Entry>\n                            <AddressInfo address={transaction.to} />\n                        </Entry>\n                        <Header>Value:</Header>\n                        <Entry>\n                            <Typography>{transaction.value}</Typography>\n                        </Entry>\n                        <Header>Data:</Header>\n                        <TxData data={transaction.data} />\n                        <Header>Nonce:</Header>\n                        <Entry>\n                            <LongText>{transaction.nonce}</LongText>\n                        </Entry>\n                        <Header>Signatures:</Header>\n                        {signatures?.map((sig) => (<Entry>\n                            <AddressInfo onClick={() => { shareSignature(sig) }} address={sig.signer} />\n                        </Entry>))}\n                        <Button onClick={() => setShowSignTransaction(true)}>Sign</Button>\n                        <Button onClick={() => setShowAddSignature(true)}>Add</Button>\n                        <Button onClick={() => setShowExecuteTransaction(true)}>Execute</Button>\n                        <Button onClick={() => deleteTx(id)} color=\"error\">Delete Tx</Button>\n                    </Group>\n                ) : (\n                    <>\"Unknown details\"</>\n                )}\n            </DialogContent>\n            <DialogActions>\n                {simulateLink && (<Button onClick={() => { window.open(simulateLink, \"_blank\") }}>Simulate</Button>)}\n                <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </TxDialog>\n        <AddSignatureDialog open={showAddSignature} handleClose={() => setShowAddSignature(false)} handleNewSignature={loadSignatures} safeTxHash={id} />\n        <SignTransactionDialog open={showSignTransaction} handleClose={() => setShowSignTransaction(false)} handleNewSignature={loadSignatures} transaction={transaction} />\n        <ExecuteTxDialog open={showExecuteTransaction} handleClose={() => setShowExecuteTransaction(false)} handleTxSubmitted={handleClose} transaction={transaction} />\n    </>\n}\n\nexport default QueuedTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport { ethers, BigNumber } from 'ethers'\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { SafeTransaction, MetaTransaction } from '../../../logic/models/transactions'\nimport { buildTx } from '../../../logic/utils/proposing'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n    onConfirm: (tx: QueuedSafeTransaction, requestId?: string) => void\n    onReject?: (message: string, requestId?: string) => void\n    transactions?: MetaTransaction[]\n    requestId?: string\n}\n\nexport const ProposeTxs: React.FC<Props> = ({ open, handleClose, onConfirm, onReject, requestId, transactions }) => {\n    const [toString, setToString] = useState(\"\")\n    const [valueString, setValueString] = useState(\"\")\n    const [dataString, setDataString] = useState(\"\")\n    const [operationString, setOperationString] = useState(\"\")\n    const [nonceString, setNonceString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n\n    useEffect(() => {\n        if (!open) return\n        (async () => {\n            try {\n                setNonceString(await queuedRepo.getNextNonce())\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [queuedRepo, open])\n\n    useEffect(() => {\n        const defaultTx = buildTx(account, transactions)\n        setToString(defaultTx.to)\n        setValueString(defaultTx.value)\n        setDataString(defaultTx.data)\n        setOperationString(defaultTx.operation.toString())\n    }, [account, transactions])\n\n    const cancelCreation = () => {\n        onReject?.(\"Canceled\", requestId)\n        handleClose()\n    }\n\n    const handleCreate = async () => {\n        try {\n            if (dataString && !ethers.utils.isHexString(dataString)) throw Error(\"Invalid data\")\n            const tx: SafeTransaction = {\n                to: ethers.utils.getAddress(toString),\n                value: BigNumber.from(valueString).toString(),\n                data: dataString || \"0x\",\n                nonce: parseInt(nonceString),\n                operation: parseInt(operationString),\n                safeTxGas: \"0\",\n                baseGas: \"0\",\n                gasPrice: \"0\",\n                gasToken: ethers.constants.AddressZero,\n                refundReceiver: ethers.constants.AddressZero,\n            }\n            const queuedTx = await queuedRepo.addTx(tx)\n            onConfirm(queuedTx, requestId)\n            handleClose()\n            setToString(\"\")\n            setValueString(\"\")\n            setDataString(\"\")\n            setOperationString(\"\")\n            setNonceString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n    return <TxDialog open={open} onClose={cancelCreation} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Add Tx</DialogTitle>\n        <DialogContent>\n            <TextField label=\"To\" onChange={(e) => setToString(e.target.value)} value={toString} fullWidth /><br />\n            <TextField label=\"Value\" onChange={(e) => setValueString(e.target.value)} value={valueString} fullWidth /><br />\n            <TextField label=\"Data\" onChange={(e) => setDataString(e.target.value)} value={dataString} fullWidth /><br />\n            <TextField label=\"Operation\" onChange={(e) => setOperationString(e.target.value)} value={operationString} fullWidth /><br />\n            <TextField label=\"Nonce\" onChange={(e) => setNonceString(e.target.value)} value={nonceString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={cancelCreation}>Cancel</Button>\n          <Button onClick={handleCreate} color=\"primary\">Create</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ProposeTxs","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Button, styled } from '@mui/material';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider';\nimport QueuedTxSummary from './QueuedTxSummary';\nimport QueuedTxDetails from './QueuedTxDetails';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\nimport { Callback } from 'safe-indexer-ts';\nimport { QueueRepositoryUpdates } from '../../../logic/account/QueueRepository';\nimport ProposeTxs from './ProposeTxsDialog';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\"\n}))\n\nfunction Queue() {\n  const [showNewTxDialog, setShowNewTxDialog] = useState<boolean>(false)\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [ququedTxs, setQueuedTxs] = useState<QueuedSafeTransaction[]>([])\n  const queueRepo = useQueueRepo()\n  const txRepo = useTransactionRepo()\n\n  const loadQueuedTxs = useCallback(async () => {\n    try {\n      setQueuedTxs(await queueRepo.getQueuedTxs())\n    } catch (e) {\n      console.error(e)\n    }\n  }, [queueRepo, setQueuedTxs])\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: loadQueuedTxs\n    }\n    txRepo.registerCallback(callback)\n    return () => txRepo.unregisterCallback(callback)\n  }, [txRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    const callback: QueueRepositoryUpdates = {\n      onNewTx: loadQueuedTxs\n    }\n    queueRepo.registerCallback(callback)\n    return () => queueRepo.unregisterCallback(callback)\n  }, [queueRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    loadQueuedTxs()\n  }, [loadQueuedTxs])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={showNewTxDialog} handleClose={() => setShowNewTxDialog(false)} onConfirm={() => loadQueuedTxs() } />\n  }, [showNewTxDialog, setShowNewTxDialog])\n\n  const details = useMemo(() => {\n    return <QueuedTxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      <Button onClick={() => setShowNewTxDialog(true)}>Add Transaction</Button>\n      {ququedTxs.map((tx) => <QueuedTxSummary transaction={tx} showDetails={(id) => setSelectedId(id)} />)}\n      {creation}\n      {details}\n    </Root>\n  );\n}\n\nexport default Queue;\n","export const defaultApps: AppOption[] = [\n    {\n        title: \"Balances\",\n        url: \"https://rimeissner.dev/sapp-balances/\"\n    },\n    {\n        title: \"WalletConnect\",\n        url: \"https://apps.gnosis-safe.io/wallet-connect\"\n    },\n    {\n        title: \"ENS\",\n        url: \"https://app.ens.domains/\"\n    }\n].map((entry) => {return {\n    section: \"Default\",\n    ...entry\n}})\n\nexport interface AppOption {\n    section: string,\n    title: string,\n    url: string\n}","import { Account } from \"../utils/account\";\nimport { AbstractDAO, AbstractDB } from \"./base\";\n\nexport const ACCOUNTS_STORE = \"accounts\"\nexport const ACCOUNTS_KEY = \"id\"\nexport const ACCOUNTS_INDEX = \"timestamp\"\n\nexport const APP_URLS_STORE = \"app_urls\"\nexport const APP_URLS_KEY = \"id\"\nexport const APP_URLS_INDEX = \"timestamp\"\n\nexport interface StoredAccount extends Account {\n    timestamp: number\n}\n\nexport interface StoredAppUrls {\n    id: string,\n    timestamp: number\n}\n\nexport class AppDB extends AbstractDB {\n    constructor() {\n        super(\"app_state\", 2, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(ACCOUNTS_STORE, { keyPath: ACCOUNTS_KEY })\n                store.createIndex(ACCOUNTS_INDEX, ACCOUNTS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(APP_URLS_STORE, { keyPath: APP_URLS_KEY })\n                store.createIndex(APP_URLS_INDEX, APP_URLS_INDEX, { unique: false })\n            }\n        });\n    }\n}\n\nexport class AccountsDAO extends AbstractDAO<StoredAccount> {\n    constructor() {\n        super(new AppDB(), ACCOUNTS_STORE)\n    }\n\n    getAll(): Promise<StoredAccount[]> {\n        return this.getAllByIndex(ACCOUNTS_INDEX)\n    }\n}\n\nexport class AppUrlsDAO extends AbstractDAO<StoredAppUrls> {\n    constructor() {\n        super(new AppDB(), APP_URLS_STORE)\n    }\n\n    getAll(): Promise<StoredAppUrls[]> {\n        return this.getAllByIndex(APP_URLS_INDEX)\n    }\n}\n","import React, { useState } from 'react'\nimport { grey } from '@mui/material/colors';\nimport { Group } from '../../styled/tables';\nimport { Box, styled } from '@mui/system';\nimport { SwipeableDrawer, Typography } from '@mui/material';\n\n\nconst Sidebar = styled(Group)(({ theme }) => ({\n    height: \"100vh\",\n    width: \"400px\",\n    overflowY: \"scroll\"\n}))\n\nconst StyledBox = styled(Box)(({ theme }) => ({\n    backgroundColor: theme.palette.mode === 'light' ? '#fff' : grey[800],\n}));\n\nconst Puller = styled(Box)(({ theme }) => ({\n    width: 30,\n    height: 6,\n    backgroundColor: theme.palette.mode === 'light' ? grey[300] : grey[900],\n    borderRadius: 3,\n    position: 'absolute',\n    top: 8,\n    left: 'calc(50% - 15px)',\n}));\n\nexport const drawerBleeding = 64\n\nexport const ResponsiveSidebar: React.FC<{ isDesktop: boolean, header?: (expanded: boolean) => React.ReactNode }> = ({ isDesktop, children, header }) => {\n    const [open, setOpen] = useState(true);\n\n    const toggleDrawer = (newOpen: boolean) => () => {\n        setOpen(newOpen);\n    };\n\n    if (!isDesktop) {\n        return (<SwipeableDrawer\n            id=\"transaction_drawer\"\n            anchor=\"bottom\"\n            open={open}\n            onClose={toggleDrawer(false)}\n            onOpen={toggleDrawer(true)}\n            swipeAreaWidth={drawerBleeding}\n            disableSwipeToOpen={false}\n            ModalProps={{\n                keepMounted: true,\n            }}\n            sx={{\n                '& > .MuiPaper-root': {\n                    height: `calc(90% - ${drawerBleeding}px)`,\n                    overflow: 'visible',\n                    },\n            }}\n        >\n            <StyledBox\n                sx={{\n                    position: 'absolute',\n                    top: -drawerBleeding,\n                    height: drawerBleeding,\n                    borderTopLeftRadius: 8,\n                    borderTopRightRadius: 8,\n                    visibility: 'visible',\n                    right: 0,\n                    left: 0,\n                    justifyContent: 'center',\n                    display: 'flex',\n                    alignItems: 'center'\n                }}\n            >\n                <Puller />\n                {header?.(open)}\n            </StyledBox>\n            <StyledBox\n                sx={{\n                    px: 2,\n                    pb: 2,\n                    height: '100%',\n                    overflow: 'auto',\n                }}\n            >\n                {children}\n            </StyledBox>\n        </SwipeableDrawer>)\n    }\n    return (<Sidebar>\n        {header?.(true)}\n        {children}\n    </Sidebar>)\n}","export const chainIdToNetwork: Record<number, string> = {\n    1: \"MAINNET\",\n    2: \"MORDEN\",\n    3: \"ROPSTEN\",\n    4: \"RINKEBY\",\n    5: \"GOERLI\",\n    42: \"KOVAN\",\n    56: \"BSC\",\n    100: \"XDAI\",\n    137: \"POLYGON\",\n    246: \"ENERGY_WEB_CHAIN\",\n    4447: \"LOCAL\",\n    73799: \"VOLTA\",\n}","import {\n    getSDKVersion,\n    SDKMessageEvent,\n    MethodToResponse,\n    Methods,\n    SafeInfo,\n    MessageFormatter,\n    RequestId,\n    BaseTransaction,\n    RPCPayload\n} from '@gnosis.pm/safe-apps-sdk'\nimport {\n    providers\n} from 'ethers'\nimport { Account } from '../utils/account'\nimport { chainIdToNetwork } from '../utils/chainIdToNetwork'\n\ntype LegacyMethods = 'getEnvInfo'\ntype SDKMethods = Methods | LegacyMethods\n\nexport interface MessageHandlers {\n    onTransactionProposal: (transactions: BaseTransaction[], requestId: RequestId) => void\n}\n\nexport class FrameCommunicator {\n    provider?: providers.JsonRpcProvider\n    constructor(\n        readonly frame: React.RefObject<HTMLIFrameElement>,\n        readonly appUrl: string,\n        readonly info: Account,\n        readonly handlers: MessageHandlers\n    ) { }\n\n    handleMessage(\n        method: SDKMethods,\n        params: unknown,\n        requestId: RequestId\n    ) {\n        if (!method) {\n            console.error('ThirdPartyApp: A message was received without message id.')\n            return\n        }\n        console.log(`Received ${method} with ${JSON.stringify(params)}`)\n\n        switch (method) {\n            case 'sendTransactions': {\n                if (params) {\n                    this.handlers.onTransactionProposal(\n                        // @ts-expect-error explore ways to fix this\n                        params.txs as Transaction[],\n                        requestId,\n                    )\n                }\n                break\n            }\n\n            case 'getEnvInfo': {\n                this.sendResponse({ txServiceUrl: \"\" }, requestId)\n                break\n            }\n\n            case 'getSafeInfo': {\n                this.sendResponse({\n                    safeAddress: this.info.address,\n                    chainId: this.info.chainId,\n                    network: chainIdToNetwork[this.info.chainId],\n                }, requestId)\n                break\n            }\n\n            case 'rpcCall': {\n                const payload = params as RPCPayload\n                const communicator = this\n                try {\n                    this.provider!!.send(payload.call, payload.params).then(\n                        (resp: any) => {\n                            communicator.sendResponse(resp, requestId)\n                        }, (err: any) => {\n                            communicator.sendError(err, requestId)\n                        }\n                    )\n                } catch (err: any) {\n                    communicator.sendError(err.toString(), requestId)\n                }\n                break\n            }\n\n            default: {\n                console.error(`ThirdPartyApp: A message was received with an unknown method ${method}.`)\n                this.sendError(`Unknown method ${method}.`, requestId)\n                break\n            }\n        }\n    }\n\n    onMessage(message: SDKMessageEvent) {\n        if (message.source === window) {\n            return\n        }\n        if (!this.appUrl.includes(message.origin)) {\n            console.error(`ThirdPartyApp: A message was received from an unknown origin ${message.origin}`)\n            return\n        }\n        this.handleMessage(message.data.method, message.data.params, message.data.id)\n    }\n\n    sendResponse(\n        data: MethodToResponse[Methods],\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeResponse(requestId, data, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    sendError(\n        error: string,\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    connect(defaultWindow?: Window): (() => void) | undefined {\n        const eventWindow = defaultWindow || this.frame.current?.contentWindow\n        if (!eventWindow) return\n        const callback = (ev: MessageEvent<any>) => { this.onMessage(ev) }\n        eventWindow.addEventListener('message', callback)\n        return () => {\n            eventWindow.removeEventListener('message', callback)\n        }\n    }\n}","import { useCallback, useEffect, useMemo, useState, useRef } from 'react';\nimport { CircularProgress, styled } from '@mui/material';\nimport { FrameCommunicator } from '../../../logic/apps/connector';\nimport {\n  RequestId,\n  BaseTransaction\n} from '@gnosis.pm/safe-apps-sdk'\nimport { useAccount } from '../Dashboard';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport ProposeTxs from '../queue/ProposeTxsDialog';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\n\nconst AppFrame = styled('iframe')(({ theme }) => ({\n  width: \"100%\",\n  height: \"100%\",\n  border: 0\n}))\n\ninterface ProposalParams {\n    transactions: BaseTransaction[]\n    requestId: RequestId\n}\n\nexport interface Props {\n  appUrl: string\n}\n\nconst AppWindow: React.FC<Props> = ({ appUrl }) =>  {\n  const account = useAccount()\n  const { provider } = useAppSettings()\n  const [loading, setLoading] = useState<boolean>(false)\n  const [proposalParams, setProposalParams] = useState<ProposalParams | undefined>(undefined)\n  const appFrame = useRef<HTMLIFrameElement>(null)\n  const communicator: FrameCommunicator = useMemo(() => {\n    return new FrameCommunicator(appFrame, appUrl, account, {\n      onTransactionProposal: (transactions, requestId) => {\n        if (transactions.length == 0) return\n        if (document.hidden) {\n          window.alert(\"New transaction\")\n        }\n        setProposalParams({ transactions, requestId })\n      }\n    })\n  }, [account, appFrame, appUrl, setProposalParams])\n\n  useEffect(() => {\n    communicator.provider = provider\n  }, [communicator, provider])\n\n  const handleTransactionConfirmation = useCallback(async (tx: QueuedSafeTransaction, requestId?: string) => {\n    console.log(\"handleTransactionConfirmation\", tx, requestId)\n    communicator.sendResponse({ safeTxHash: tx.id }, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  const handleTransactionRejection = useCallback(async (message: string, requestId?: string) => {\n    console.log(\"handleTransactionRejection\", message, requestId)\n    communicator.sendError(message, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  useEffect(() => {\n    return communicator.connect(window)\n  }, [communicator])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={!!proposalParams}\n      transactions={proposalParams?.transactions?.map((tx) => {\n        return {\n          ...tx,\n          operation: 0\n        }\n      })}\n      requestId={proposalParams?.requestId}\n      onReject={handleTransactionRejection}\n      onConfirm={handleTransactionConfirmation}\n      handleClose={() => setProposalParams(undefined) } />\n  }, [proposalParams, handleTransactionRejection, handleTransactionConfirmation])\n\n  if (loading) return (<CircularProgress />)\n  return (\n    <>\n      <AppFrame ref={appFrame} src={appUrl} />\n      {creation}\n    </>\n  );\n}\n\nexport default AppWindow;\n","import { Autocomplete, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport { useState, useMemo, useEffect } from 'react';\nimport { AppOption, defaultApps } from '../../../logic/apps/appList';\nimport { AppUrlsDAO } from '../../../logic/db/app';\nimport { Group, Row } from '../../../styled/tables';\nimport { useDektopLayout } from '../../utils/media';\nimport { drawerBleeding } from '../ResponsiveSidebar';\nimport AppWindow from './AppWindow';\n\nconst Root = styled(Group)(({ theme }) => ({\n}))\n\nfunction Apps() {\n  const appUrlsDao = useMemo(() => new AppUrlsDAO(), [])\n  const [appUrl, setAppUrl] = useState(defaultApps[0].url)\n  const [appUrlError, setAppUrlError] = useState(\"\")\n  const [appUrlInput, setAppUrlInput] = useState(appUrl)\n  const [appUrlsHistory, setAppUrlsHistory] = useState<AppOption[]>([])\n  const isDesktop = useDektopLayout()\n\n  useEffect(() => {\n    (async () => {\n      const appHistory = (await appUrlsDao.getAll()).map(appUrl => {\n        return {\n          section: \"History\",\n          title: appUrl.id,\n          url: appUrl.id\n        }\n      })\n      setAppUrlsHistory(defaultApps.concat(appHistory))\n    })()\n  }, [setAppUrlsHistory, appUrl])\n\n  const handleInputChange = (input: string | AppOption | null, openUrl?: boolean) => {\n    let newValue: string\n    if (!input) {\n      newValue = \"\"\n    } else if (typeof input === \"string\") {\n      newValue = input\n    } else {\n      newValue = input.url\n    }\n    setAppUrlInput(newValue)\n    setAppUrlError(\"\")\n\n    if (openUrl) {\n      openAppUrl(newValue)\n    }\n  }\n\n  const openAppUrl = async (appUrl: string) => {\n    let cleanUrl = appUrl.trim()\n    if (cleanUrl.length === 0) {\n      setAppUrlError(\"Empty App Url is not allowed\")\n      return\n    }\n    if (!cleanUrl.startsWith(\"http\")) {\n      cleanUrl = \"https://\" + cleanUrl\n    }\n    await appUrlsDao.add({ id: cleanUrl, timestamp: new Date().getTime() })\n    setAppUrl(cleanUrl)\n  }\n  const marginBottom = isDesktop ? 0 : drawerBleeding;\n  return (\n    <Root sx={{\n      textAlign: \"center\",\n      width: `100vw`,\n      height: `calc(100vh - ${marginBottom}px)`\n    }}>\n      <Row>\n        <Autocomplete\n          id=\"free-solo-demo\"\n          freeSolo\n          fullWidth\n          options={appUrlsHistory}\n          defaultValue={defaultApps[0]}\n          groupBy={(option) => option.section}\n          getOptionLabel={(option: AppOption | string) => {\n            if (typeof option === \"string\") return option\n            return option.title\n          }}\n          onChange={(e, newValue) => handleInputChange(newValue, !!newValue && newValue !== \"\")}\n          renderInput={(params) =>\n            <TextField\n              {...params}\n              label=\"App Url\"\n              value={appUrlInput}\n              error={!!appUrlError}\n              helperText={appUrlError}\n              variant=\"filled\"\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          }\n        />\n      </Row>\n      <AppWindow appUrl={appUrl} />\n    </Root>\n  );\n}\n\nexport default Apps;\n","import { Button, Dialog, DialogContent, DialogTitle, Switch, TextField, Typography } from '@mui/material'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Callback } from 'safe-indexer-ts'\nimport { Group, Row } from '../../styled/tables'\nimport { useAppSettings } from '../provider/AppSettingsProvider'\nimport { useTransactionRepo } from '../provider/TransactionRepositoryProvider'\n\nexport interface Props {\n    open: boolean,\n    handleClose: () => void,\n    reindex?: () => void,\n}\n\nexport const SettingsDialog: React.FC<Props> = ({ open, reindex, handleClose }) => {\n    const { useCustomRpc, toggleCustomRpc, customRpc, updateCustomRpc, networkConfig, updateNetworkConfig } = useAppSettings()\n    const [status, setStatus] = useState<string>(\"\")\n    const txRepo = useTransactionRepo()\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: () => { },\n            onStatusUpdate: (update) => {\n                switch (update.type) {\n                    case \"up_to_date\":\n                        setStatus(`Up to date with block ${update.latestBlock}`)\n                        break;\n                    case \"processing\":\n                        setStatus(`Indexing block ${update.fromBlock}/${update.latestBlock}`)\n                        break;\n                    case \"aborted\":\n                        setStatus(`Indexing aborted: ${update.reason}`)\n                        break;\n                    default:\n                        setStatus(\"\")\n                        break;\n                }\n            }\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, setStatus])\n\n    const updateStartingBlock = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: parseInt(value),\n                maxBlocks: networkConfig.maxBlocks\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    const updateMaxBlocks = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: networkConfig.startingBlock,\n                maxBlocks: parseInt(value)\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    return <Dialog open={open} onClose={handleClose} maxWidth=\"xs\" fullWidth>\n        <DialogTitle>Settings</DialogTitle>\n        <DialogContent>\n            <Group>\n                <Typography variant=\"caption\">Status</Typography>\n                {status}\n                <br /><br />\n                <Typography variant=\"caption\">App Settings</Typography>\n                <Row sx={{ alignItems: 'center' }}>\n                    Use custom prc endpoint <Switch checked={useCustomRpc} onChange={(_, checked) => toggleCustomRpc(checked)} /><br />\n                </Row>\n                <TextField label=\"RPC\" onChange={(e) => updateCustomRpc(e.target.value)} value={customRpc} fullWidth /><br />\n                <TextField label=\"Intital block\" onChange={(e) => updateStartingBlock(e.target.value)} value={networkConfig.startingBlock} fullWidth /><br />\n                <TextField label=\"Max blocks\" onChange={(e) => updateMaxBlocks(e.target.value)} value={networkConfig.maxBlocks} fullWidth /><br />\n                {\n                    !!reindex && (<>\n                        <Typography variant=\"caption\">Account Settings</Typography><br />\n                        <Button onClick={() => reindex()}>Reindex</Button><br />\n                    </>)\n                }\n            </Group>\n        </DialogContent>\n    </Dialog>\n}\n\nexport default SettingsDialog","import { Typography } from \"@mui/material\"\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useAccount } from \"../Dashboard\"\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { Group, Row } from \"../../../styled/tables\";\nimport { shortAddress } from \"../../../logic/utils/address\";\nimport { Settings } from \"@mui/icons-material\";\nimport SettingsDialog from \"../../settings/SettingsDialog\";\nimport { useTransactionRepo } from \"../../provider/TransactionRepositoryProvider\";\nimport { useQueueRepo } from \"../../provider/QueueRepositoryProvider\";\nimport { Callback } from \"safe-indexer-ts\";\nimport { QueueRepositoryUpdates } from \"../../../logic/account/QueueRepository\";\nimport { useCopyAddress } from \"../../utils/media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AccountHeader: React.FC<{ expanded: boolean }> = ({ expanded }) => {\n    const [showSettings, setShowSettings] = useState<boolean>(false)\n    const [queueSize, setQueueSize] = useState<number>(0)\n    const account = useAccount()\n    const iconSrc = useMemo(() => makeBlockie(account.address), [account]);\n    const txRepo = useTransactionRepo()\n    const queueRepo = useQueueRepo()\n\n    // TODO: we have this logic in multiple places. Should be extracted\n    const loadQueuedTxs = useCallback(async () => {\n        try {\n            setQueueSize((await queueRepo.getQueuedTxs()).length)\n        } catch (e) {\n            console.error(e)\n        }\n    }, [queueRepo, setQueueSize])\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: loadQueuedTxs\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, loadQueuedTxs])\n\n    useEffect(() => {\n        const callback: QueueRepositoryUpdates = {\n            onNewTx: loadQueuedTxs\n        }\n        queueRepo.registerCallback(callback)\n        return () => queueRepo.unregisterCallback(callback)\n    }, [queueRepo, loadQueuedTxs])\n\n    useEffect(() => {\n      loadQueuedTxs()\n    }, [loadQueuedTxs])\n\n    const reindex = useCallback(async () => {\n        txRepo.reindex()\n    }, [txRepo])\n\n    const copyAddress = useCopyAddress(account.address)\n\n    return <Row sx={{\n        paddingX: '16px',\n        width: `calc(100% - 32px)`,\n        justifyContent: 'space-between',\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" />\n        <Group sx={{ paddingX: '8px', textAlign: 'center' }} onClick={copyAddress} >\n            <Typography sx={{ fontFamily: 'Monospace' }} >{shortAddress(account.address)}</Typography>\n            Chain {account.chainId}\n        </Group>\n        {expanded ? (\n            <Settings onClick={() => setShowSettings(true)} />\n        ) : queueSize.toString()\n        }\n        <SettingsDialog open={showSettings} handleClose={() => setShowSettings(false)} reindex={reindex} />\n    </Row>\n}\n\nexport default AccountHeader","import { Button } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport { useAppSettings } from \"../../provider/AppSettingsProvider\";\nimport { useAccount } from \"../Dashboard\";\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport const SignerInfo: React.FC = () => {\n    const { chainId } = useAccount()\n    const { signer, safeSigner } = useAppSettings()\n    return <Root>\n        <hr />\n        { !!signer ? \n            <Button onClick={() => safeSigner.disconnect() }>Disconnect Signer</Button>  : \n            <Button onClick={() => safeSigner.connect(chainId) }>Connect Signer</Button> \n        }\n    </Root>\n}\n\nexport default SignerInfo","import React, { useContext, useEffect } from 'react'\nimport { useParams } from 'react-router'\nimport Transactions from './transaction/Transactions';\nimport TransactionRepositoryProvider from '../provider/TransactionRepositoryProvider';\nimport QueueRepositoryProvider from '../provider/QueueRepositoryProvider';\nimport Queue from './queue/Queue';\nimport { Row } from '../../styled/tables';\nimport Apps from './apps/Apps';\nimport { Account, parseAccount } from '../../logic/utils/account';\nimport { useDektopLayout } from '../utils/media';\nimport { ResponsiveSidebar } from './ResponsiveSidebar';\nimport { Typography } from '@mui/material';\nimport AccountHeader from './header/AccountHeader';\nimport { useAppSettings } from '../provider/AppSettingsProvider';\nimport SignerInfo from './signer/SignerInfo';\n\ninterface Path {\n    account: string\n}\n\nconst AccountContext = React.createContext<Account | undefined>(undefined);\n\nexport const useAccount = () => {\n    const account = useContext(AccountContext)\n    if (!account) throw Error(\"Account not available!\")\n    return account\n}\n\nexport const Dashboard: React.FC = () => {\n    const { account } = useParams<Path>() //0x969c350577B6CD3A8E963cBB8D9c728B840c459e\n    const isDesktop = useDektopLayout();\n    const { safeSigner } = useAppSettings()\n    const value = parseAccount(account)\n\n    useEffect(() => {\n        if (!value) return\n        safeSigner.prepare(value.chainId)\n    }, [value?.chainId])\n\n    if (!value) return (<>\n        \"Invalid account\"\n    </>)\n\n    return <AccountContext.Provider value={value}>\n        <TransactionRepositoryProvider>\n            <QueueRepositoryProvider>\n                <Row>\n                    <ResponsiveSidebar isDesktop={isDesktop} header={(expanded) => <AccountHeader expanded={expanded} />}>\n                        <SignerInfo />\n                        <Queue />\n                        <Transactions />\n                    </ResponsiveSidebar>\n                    <Apps />\n                </Row>\n            </QueueRepositoryProvider>\n        </TransactionRepositoryProvider>\n    </AccountContext.Provider>\n}\n\nexport default Dashboard","import { Button, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { useHistory } from 'react-router';\nimport { AccountsDAO, StoredAccount } from '../../logic/db/app';\nimport { parseAccount } from '../../logic/utils/account';\nimport { Entry, Group, LongText, Row } from '../../styled/tables';\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\",\n    padding: 16,\n}))\n\nexport const Welcome: React.FC = () => {\n    const [addressInput, setAddressInput] = useState(\"\")\n    const [addressError, setAddressError] = useState(\"\")\n    const [accountHistory, setAccountHistory] = useState<StoredAccount[]>([])\n    const history = useHistory()\n    const accountsDao = useMemo(() => new AccountsDAO(), [])\n\n    const handleAddressInput = (address: string) => {\n        setAddressInput(address)\n        setAddressError(\"\")\n    }\n\n    useEffect(() => {\n        (async () => {\n            setAccountHistory(await accountsDao.getAll())\n        })()\n    }, [setAccountHistory])\n\n    const openAccount = async (address: string) => {\n        const account = parseAccount(address)\n        if (!account) {\n            setAddressError(\"Invalid account!\")\n            return\n        }\n        accountsDao.add({\n            ...account,\n            timestamp: new Date().getTime()\n        })\n        history.push(\"/\" + account.id)\n    }\n\n    return <Root>\n        Welcome!<br /><br />\n        <TextField label=\"Account address\" onChange={(e) => handleAddressInput(e.target.value)} value={addressInput} error={!!addressError} helperText={addressError} fullWidth /><br />\n        <Button onClick={() => openAccount(addressInput)}>Open</Button>\n        {accountHistory.map((account) => {\n            return (\n                <Entry onClick={() => openAccount(account.id)}>\n                    <LongText>{account.id}</LongText>\n                </Entry>\n            )\n        })}\n    </Root>\n}\n\nexport default Welcome","import React from 'react'\nimport { Route, Switch, HashRouter as Router } from \"react-router-dom\"\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Dashboard from './account/Dashboard';\nimport AppSettingsProvider from './provider/AppSettingsProvider';\nimport Welcome from './welcome/Welcome';\n\nconst theme = createTheme({})\n\nexport const Root: React.FC = () => {\n    return (\n        <AppSettingsProvider>\n            <ThemeProvider theme={theme}>\n                <Router>\n                    <Switch>\n                        <Route path=\"/:account\">\n                            <Dashboard />\n                        </Route>\n                        <Route path=\"/\">\n                            <Welcome />\n                        </Route>\n                    </Switch>\n                </Router>\n            </ThemeProvider>\n        </AppSettingsProvider>\n    )\n}\n\nexport default Root","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n// Ethers dependencies \n// TODO: move to separate repo\n__exportStar(require(\"./ethers/loader\"), exports);\n__exportStar(require(\"./ethers/parser\"), exports);\n__exportStar(require(\"./ethers/constants\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detailsTopics = exports.parentTopics = exports.etherReceivedTopic = exports.moduleDetailsTopic = exports.moduleFailureTopic = exports.moduleSuccessTopic = exports.multisigDetailsTopic = exports.failureTopic = exports.successTopic = exports.safeInterface = exports.safeAbi = exports.transferTopic = exports.erc721Interface = exports.erc20OldInterface = exports.erc20Interface = exports.erc721InterfaceDefinition = exports.erc20OldInterfaceDefinition = exports.erc20InterfaceDefinition = void 0;\nvar safe_deployments_1 = require(\"@gnosis.pm/safe-deployments\");\nvar ethers_1 = require(\"ethers\");\nexports.erc20InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 amount)\"\n];\nexports.erc20OldInterfaceDefinition = [\n    \"event Transfer(address indexed from, address to, uint256 amount)\"\n];\nexports.erc721InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\n];\nexports.erc20Interface = new ethers_1.ethers.utils.Interface(exports.erc20InterfaceDefinition);\nexports.erc20OldInterface = new ethers_1.ethers.utils.Interface(exports.erc20OldInterfaceDefinition);\nexports.erc721Interface = new ethers_1.ethers.utils.Interface(exports.erc721InterfaceDefinition);\n// The same for all interfaces as `indexed` has no impact on the topic\nexports.transferTopic = exports.erc20Interface.getEventTopic(\"Transfer\");\nexports.safeAbi = safe_deployments_1.getSafeL2SingletonDeployment({ released: undefined }).abi;\nexports.safeInterface = new ethers_1.ethers.utils.Interface(exports.safeAbi);\nexports.successTopic = exports.safeInterface.getEventTopic(\"ExecutionSuccess\");\nexports.failureTopic = exports.safeInterface.getEventTopic(\"ExecutionFailure\");\nexports.multisigDetailsTopic = exports.safeInterface.getEventTopic(\"SafeMultiSigTransaction\");\nexports.moduleSuccessTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleSuccess\");\nexports.moduleFailureTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleFailure\");\nexports.moduleDetailsTopic = exports.safeInterface.getEventTopic(\"SafeModuleTransaction\");\nexports.etherReceivedTopic = exports.safeInterface.getEventTopic(\"SafeReceived\");\n// Failure topics cannot generate sub events, we should remove them in the future\nexports.parentTopics = [exports.successTopic, exports.moduleSuccessTopic, exports.failureTopic, exports.moduleFailureTopic];\nexports.detailsTopics = [exports.multisigDetailsTopic, exports.moduleDetailsTopic];\n"],"sourceRoot":""}