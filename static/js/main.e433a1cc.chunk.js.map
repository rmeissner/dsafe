{"version":3,"sources":["../../simple-indexer/safe-indexer-ts/bin/ethers/parser/utils.js","logic/utils/proposing.ts","../../simple-indexer/safe-indexer-ts/bin/types/index.js","../../simple-indexer/safe-indexer-ts/bin/types/ethereum.js","../../simple-indexer/safe-indexer-ts/bin/types/indexer.js","../../simple-indexer/safe-indexer-ts/bin/types/interactions.js","../../simple-indexer/safe-indexer-ts/bin/indexer.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/loader/sources.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/module.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/multisig.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/settings.js","../../simple-indexer/safe-indexer-ts/bin/ethers/parser/transfers.js","logic/db/base.ts","logic/db/safe.ts","logic/db/interactions.ts","logic/state/indexer.ts","logic/account/TransactionRepository.ts","logic/utils/indexer.ts","logic/account/SafeSigner.ts","logic/utils/chainInfo.ts","components/provider/AppSettingsProvider.tsx","components/provider/TransactionRepositoryProvider.tsx","logic/utils/account.ts","components/utils/media.ts","styled/tables.ts","logic/utils/address.ts","components/utils/AddressInfo.tsx","components/account/transaction/details/SettingsTxDetails.tsx","components/account/transaction/summary/SettingsTxSummary.tsx","components/account/transaction/summary/TransferTxSummary.tsx","components/account/transaction/TxSummary.tsx","components/account/transaction/details/TxEvents.tsx","components/utils/TxData.tsx","components/account/transaction/details/ModuleTxDetails.tsx","components/account/transaction/details/MultisigTxDetails.tsx","components/account/transaction/details/TransferTxDetails.tsx","components/account/transaction/TxDetails.tsx","components/account/transaction/Transactions.tsx","logic/utils/signatures.ts","logic/utils/execution.ts","logic/utils/safe.ts","logic/account/QueueRepository.ts","components/provider/QueueRepositoryProvider.tsx","components/account/queue/QueuedTxSummary.tsx","components/account/queue/AddSignatureDialog.tsx","components/account/queue/SignTransactionDialog.tsx","components/account/queue/ExecuteTxDialog.tsx","components/account/queue/QueuedTxDetails.tsx","components/account/queue/ProposeTxsDialog.tsx","components/account/queue/Queue.tsx","logic/apps/appList.ts","logic/db/app.ts","components/account/ResponsiveSidebar.tsx","logic/utils/chainIdToNetwork.ts","logic/apps/connector.ts","components/account/apps/AppWindow.tsx","components/account/apps/Apps.tsx","components/settings/SettingsDialog.tsx","components/account/header/AccountHeader.tsx","components/account/signer/SignerInfo.tsx","components/account/Dashboard.tsx","components/welcome/Welcome.tsx","components/App.tsx","reportWebVitals.ts","serviceWorkerRegistration.ts","index.tsx","../../simple-indexer/safe-indexer-ts/bin/index.js","../../simple-indexer/safe-indexer-ts/bin/ethers/constants.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","mapEvents","mapEvent","decoder","event","_a","_b","_c","decode","undefined","interaction","logs","all","map","removeHexPrefix","input","toLowerCase","startsWith","slice","encodeData","operation","to","data","dataBuffer","Buffer","from","utils","solidityPack","BigNumber","toHexString","buildTx","account","transactions","chainId","network","toString","multiSendDeployment","getMultiSendDeployment","Error","multiSendInterface","Interface","abi","multiSendBytes","transaction","multiSendData","encodeFunctionData","networkAddresses","buildMultiSend","__createBinding","create","o","m","k","k2","enumerable","get","__exportStar","p","prototype","hasOwnProperty","require","__assign","assign","s","i","arguments","SafeIndexer","sleep","timeout","cb","setTimeout","conditionalSleep","configDefaults","earliestBlock","maxBlocks","upToDateTimeout","syncTimeout","reverse","state","loader","parser","callback","config","running","paused","instanceId","Math","random","updateConfig","update","postStatusUpdate","status","onStatusUpdate","console","error","getCurrentBlockInterval","latestBlock","log","earliestIndexedBlock","lastIndexedBlock","fromBlock","max","toBlock","min","ensureBlockDefaults","watch","_d","activeChainId","errorMsg","blockInterval","e_1","_e","loadChainId","logger","type","reason","code","loadCurrentBlock","processBlocks","shutdown","pause","resume","events","interactions","loadEvents","safe","parse","onNewInteractions","EthersLoader","isOlder","compare","base","blockNumber","transactionIndex","logIndex","provider","sources","getNetwork","getBlockNumber","merge","loaders","_i","loaderCount","logResults","currentLogIndex","out","runs","resultIndex","nextLog","candidate","Array","fill","toEvent","eventId","_this","l","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","OutgoingTransferEventSource","IncomingTransferEventSource","IncomingEthEventSource","SettingsChangeEventSource","ModuleTransactionEventSource","MultisigTransactionEventSource","StaticTopicEventSource","ethers_1","constants_1","BaseEventSource","name","address","filter","buildFilter","getLogs","_super","topics","successTopic","failureTopic","multisigDetailsTopic","moduleSuccessTopic","moduleFailureTopic","moduleDetailsTopic","safeInterface","getEventTopic","etherReceivedTopic","transferTopic","ethers","defaultAbiCoder","encode","EthersParser","module_1","multisig_1","settings_1","transfers_1","groupIdFromEvent","transactionHash","decoders","MultisigDecoder","ModuleDecoder","TransferDecoder","SettingsDecoder","updateGroupedLogs","groups","detailsCandidate","parentCandidate","currentChildren","parent","details","children","group","detailsCandidates","currentGroupId","events_1","groupId","isParentCandidate","isDetailsCandidate","parentTopics","indexOf","detailsTopics","subEvents","detailEvent","inter","utils_1","useFallbackDecoding","decodeEthereumTx","tx","decodeFromEthereumHash","txHash","ethTx","getTransaction","decodeModuleDetailsEvent","parsed","decodeEventLog","decodeInternal","module","success","subLogs","parentDecoder","decodedTx","id","block","getBlock","blockHash","number","timestamp","eventParams","safe_contracts_1","NonceMapper","init","calculateHash111","nonce","_TypedDataEncoder","hash","verifyingContract","EIP712_SAFE_TX_TYPE","expectedHash","currentNonce","Contract","safeAbi","toNumber","calculateSafeTransactionHash","nonceMapper","decodeFunctionData","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","signatures","safeTxHash","concat","decodeMultisigDetailsEvent","additionalInfo","setupTopic","addedOwnerTopic","removedOwnerTopic","changeThresholdTopic","enabledModuleTopic","disabledModuledTopic","changeFallbackHandlerTopic","changeGuardTopic","getSettingsDetails","component","change","owner","threshold","handler","guard","decodeSettingsChange","decodeTokenTransfer","eventInterface","erc721Interface","erc20Interface","erc20OldInterface","tokenAddress","amount","tokenId","sender","receipient","direction","decodeEtherTransfer","AbstractDB","dbKey","dbVersion","migration","internalDb","indexedDB","window","a","dbStore","request","open","onerror","onsuccess","onupgradeneeded","oldVersion","version","AbstractDAO","db","storeName","entry","objectStore","put","delete","index","key","getAll","clear","INTERACTIONS_STORE","INTERACTIONS_INDEX","QUEUED_TX_STORE","QUEUED_TX_INDEX","TX_SIGNATURES_STORE","TX_SIGNATURES_INDEX","SafeDB","createObjectStore","keyPath","createIndex","unique","InteractionsDAO","getAllByIndex","QueuedInteractionsDAO","IDBKeyRange","lowerBound","TxSignaturesDAO","parseIntWithFallback","fallback","parseInt","Number","isNaN","IndexerState","defaultBlock","_lastIndexedBlock","_earliestIndexedBlock","_earliestBlock","storedEarliestIndexedBlock","localStorage","getItem","storedLastIndexedBlock","storedEarliestBlock","setItem","removeItem","TransactionRepository","networkConfig","callbacks","Set","currentStatus","indexer","startingBlock","disconnect","getIndexer","catch","add","postCurrentStatusUpdateToCallback","checkForCreation","forEach","handleNewInteraction","postCurrentStatusUpdate","drop","reset","SafeSigner","onboard","rpcProvider","providerChangeListener","listener","networkId","showSelection","wallets","walletName","rpc","bridge","rpcUrl","Onboard","subscriptions","wallet","walletSelect","description","walletCheck","checkName","lastSelectedWallet","prepare","walletReset","getState","signerAddress","findChainRpc","includeInfura","chain","chains","find","includes","defaultConfig","AppSettingsContext","React","createContext","useAppSettings","appSettings","useContext","AppSettingsProvider","useState","useCustomRpc","setUseCustomRpc","customRpc","setCustomRpc","infuraToken","setInfuraToken","connectedProvider","setConnectedProvider","storedConfig","JSON","setNetworkConfig","getChainRpc","useCallback","replaceAll","loadProvider","providers","JsonRpcProvider","Web3Provider","chainRpc","signer","useMemo","getSigner","safeSigner","useEffect","setRpcProvider","onProviderChange","Provider","toggleCustomRpc","updateCustomRpc","updateInfuraToken","updateNetworkConfig","serialized","stringify","TransactionRepoContext","useTransactionRepo","repo","TransactionRepositoryProvider","useAccount","connect","buildCaip2Addr","parseAddress","getAddress","parseAccount","shortName","accountParts","split","shortNames","networkParts","parseChainId","useDektopLayout","useMediaQuery","copyToClipboard","text","copyMessage","navigator","clipboard","writeText","alert","useCopyAddress","shareableText","Group","styled","theme","display","flexDirection","Row","Header","textAlign","Entry","alignItems","paddingBottom","LongText","Typography","width","wordWrap","shortAddress","visibleChars","identicon","size","xs","sm","md","lg","xl","xxl","StyledImg","height","borderRadius","AddressInfo","onClick","iconSrc","makeBlockie","copyAddress","sx","src","fontFamily","paddingX","IconButton","color","ContentCopy","fontSize","renderSettingsValue","SettingsTxDetails","Date","toUTCString","toUpperCase","Summary","SettingsTxSummary","settingsChange","hideDate","showDetails","TransferTxSummary","transfer","TxSummary","TxEvents","TxData","collapsed","setCollapsed","decodePossible","canCollapse","displayData","Link","textDecoration","Button","ModuleTxDetails","MultisigTxDetails","renderDetails","asset","subjectTitle","subject","TransferTxDetails","TxDialog","Dialog","TxDetails","handleClose","debugLink","setDebugLink","txRepo","setInteraction","loadInteraction","getTx","link","onClose","maxWidth","fullWidth","fullScreen","DialogTitle","DialogContent","DialogActions","Root","Transactions","selectedId","setSelectedId","txs","setTxs","accountRepo","getAllTxs","loaded","registerCallback","unregisterCallback","recoverEthSign","signature","hashMessage","arrayify","recoverAddress","recoverEIP712","signatureId","signatureData","keccak256","parseSafeSignature","signatureString","sigType","signatureParts","getEIP712Domain","signEip712","_signTypedData","SafeTx","recoveredAddress","signMessage","buildPreValidatedSignature","signQueuedTx","warn","prepareSignatures","submitterAddress","signatureMap","Map","owners","has","set","submitterIsOwner","requiredSigntures","sub","signatureArray","values","buildStaticPart","offset","buildDynamicPart","buildSignatureBytes","sort","left","right","localeCompare","staticParts","dynamicParts","sig","Safe","providerOrSigner","safeContract","WritableSafe","getOwners","getThreshold","VERSION","information","getTransactionHash","populateTransaction","execTransaction","QueueRepository","queueDao","signaturesDao","onNewTx","hashInfo","queuedTx","notifyNewTxs","remove","getQueuedTxs","queuedTxs","submitter","writableSafe","writable","signatureBytes","signedTx","executeTx","QueueRepoContext","useQueueRepo","QueueRepositoryProvider","QueuedTxSummary","AddSignatureDialog","handleNewSignature","setSignatureString","queuedRepo","handleAdd","addSignature","TextField","onChange","target","SignTransactionDialog","handleSign","ExecuteTxDialog","handleTxSubmitted","handleExecution","getSignatures","submitTx","ethereumTxHash","QueuedTxDetails","simulateLink","setSimulateLink","showAddSignature","setShowAddSignature","showSignTransaction","setShowSignTransaction","showExecuteTransaction","setShowExecuteTransaction","deleteTx","setTransaction","load","setSignatures","loadSignatures","populateTx","populatedTx","shareText","shareSignature","ProposeTxs","onConfirm","onReject","requestId","setToString","valueString","setValueString","dataString","setDataString","operationString","setOperationString","nonceString","setNonceString","getNextNonce","defaultTx","cancelCreation","handleCreate","isHexString","constants","AddressZero","addTx","Queue","showNewTxDialog","setShowNewTxDialog","ququedTxs","setQueuedTxs","queueRepo","loadQueuedTxs","creation","defaultApps","title","url","section","ACCOUNTS_STORE","ACCOUNTS_INDEX","APP_URLS_STORE","APP_URLS_INDEX","AppDB","AccountsDAO","AppUrlsDAO","Sidebar","overflowY","StyledBox","Box","backgroundColor","palette","mode","grey","Puller","position","top","ResponsiveSidebar","isDesktop","header","setOpen","toggleDrawer","newOpen","SwipeableDrawer","anchor","onOpen","swipeAreaWidth","disableSwipeToOpen","ModalProps","keepMounted","overflow","borderTopLeftRadius","borderTopRightRadius","visibility","justifyContent","px","pb","chainIdToNetwork","FrameCommunicator","frame","appUrl","info","handlers","method","params","onTransactionProposal","sendResponse","txServiceUrl","safeAddress","payload","communicator","send","resp","err","sendError","message","source","origin","handleMessage","frameWindow","current","contentWindow","sdkVersion","getSDKVersion","msg","MessageFormatter","makeResponse","postMessage","makeErrorResponse","defaultWindow","eventWindow","ev","onMessage","addEventListener","removeEventListener","AppFrame","border","AppWindow","loading","proposalParams","setProposalParams","appFrame","useRef","document","hidden","handleTransactionConfirmation","handleTransactionRejection","CircularProgress","ref","Apps","appUrlsDao","setAppUrl","appUrlError","setAppUrlError","appUrlInput","setAppUrlInput","appUrlsHistory","setAppUrlsHistory","appHistory","handleInputChange","openUrl","newValue","openAppUrl","cleanUrl","trim","getTime","marginBottom","Autocomplete","freeSolo","options","defaultValue","groupBy","option","getOptionLabel","renderInput","helperText","variant","SettingsDialog","reindex","setStatus","updateStartingBlock","updateMaxBlocks","Switch","checked","AccountHeader","expanded","showSettings","setShowSettings","queueSize","setQueueSize","Settings","SignerInfo","AccountContext","Dashboard","useParams","padding","Welcome","addressInput","setAddressInput","addressError","setAddressError","accountHistory","setAccountHistory","history","useHistory","accountsDao","openAccount","createTheme","ThemeProvider","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","App","getElementById","URL","process","href","fetch","headers","response","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","erc721InterfaceDefinition","erc20OldInterfaceDefinition","erc20InterfaceDefinition","safe_deployments_1","getSafeL2SingletonDeployment","released"],"mappings":"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","file":"static/js/main.e433a1cc.chunk.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapEvents = exports.mapEvent = void 0;\nvar mapEvent = function (decoder, event) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a;\n    var _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _b = {\n                    event: event\n                };\n                if (!decoder) return [3 /*break*/, 2];\n                return [4 /*yield*/, decoder.decode(event)];\n            case 1:\n                _a = _c.sent();\n                return [3 /*break*/, 3];\n            case 2:\n                _a = undefined;\n                _c.label = 3;\n            case 3: return [2 /*return*/, (_b.interaction = _a,\n                    _b)];\n        }\n    });\n}); };\nexports.mapEvent = mapEvent;\nvar mapEvents = function (decoder, logs) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!logs)\n                    return [2 /*return*/, []];\n                return [4 /*yield*/, Promise.all(logs.map(function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            return [2 /*return*/, exports.mapEvent(decoder, e)];\n                        });\n                    }); }))];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n}); };\nexports.mapEvents = mapEvents;\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { utils } from \"ethers\";\nimport { MetaTransaction } from \"../models/transactions\"\nimport { getMultiSendDeployment } from \"@gnosis.pm/safe-deployments\"\nimport { Account } from \"./account\";\n\nexport const removeHexPrefix = (input: string) => input.toLowerCase().startsWith(\"0x\") ? input.slice(2) : input;\n\nconst encodeData = (operation: number, to: string, value: string, data: string) => {\n    let dataBuffer = Buffer.from(removeHexPrefix(data), \"hex\")\n    return removeHexPrefix(utils.solidityPack(\n        [\"uint8\", \"address\", \"uint256\", \"uint256\", \"bytes\"],\n        [operation, to, BigNumber.from(value).toHexString(), dataBuffer.length, dataBuffer]\n    ))\n}\n\nexport const buildMultiSend = (transactions: MetaTransaction[], chainId: number): MetaTransaction => {\n    const network = chainId.toString()\n    const multiSendDeployment = getMultiSendDeployment({ network })\n    if (!multiSendDeployment) throw Error(\"MultiSend not available on this network\")\n    const multiSendInterface = new utils.Interface(multiSendDeployment.abi)\n    let multiSendBytes = \"0x\"\n    for (let transaction of transactions) {\n        multiSendBytes += encodeData(0, transaction.to, transaction.value, transaction.data)\n    }\n    const multiSendData = multiSendInterface.encodeFunctionData(\"multiSend\", [multiSendBytes])\n    return {\n        to: multiSendDeployment.networkAddresses[network],\n        value: \"0x00\",\n        data: multiSendData,\n        operation: 1\n    }\n}\n\n\nexport const buildTx = (account: Account, transactions?: MetaTransaction[]): MetaTransaction => {\n    if (!transactions || transactions.length === 0) {\n        return {\n            to: \"\",\n            value: \"\",\n            data: \"\",\n            operation: 0\n        }\n    }\n    if (transactions.length === 1) {\n        return transactions[0]\n    }\n    return buildMultiSend(transactions, account.chainId)\n}","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./ethereum\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n__exportStar(require(\"./interactions\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeIndexer = void 0;\nvar sleep = function (timeout) { return new Promise(function (cb) { return setTimeout(cb, timeout); }); };\nvar conditionalSleep = function (timeout) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(timeout && timeout > 0)) return [3 /*break*/, 2];\n                return [4 /*yield*/, sleep(timeout)];\n            case 1:\n                _a.sent();\n                _a.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar configDefaults = {\n    earliestBlock: 0,\n    maxBlocks: 100,\n    upToDateTimeout: 10000,\n    syncTimeout: 100,\n    reverse: false\n};\nvar SafeIndexer = /** @class */ (function () {\n    function SafeIndexer(state, loader, parser, callback, config) {\n        this.running = true;\n        this.paused = false;\n        this.instanceId = Math.random().toString(36);\n        this.state = state;\n        this.loader = loader;\n        this.parser = parser;\n        this.callback = callback;\n        this.config = __assign(__assign({}, configDefaults), config);\n    }\n    SafeIndexer.prototype.updateConfig = function (update) {\n        this.config = __assign(__assign({}, this.config), update);\n    };\n    SafeIndexer.prototype.postStatusUpdate = function (status) {\n        var _a, _b;\n        try {\n            (_b = (_a = this.callback) === null || _a === void 0 ? void 0 : _a.onStatusUpdate) === null || _b === void 0 ? void 0 : _b.call(_a, status);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    SafeIndexer.prototype.getCurrentBlockInterval = function (earliestBlock, latestBlock, reverse) {\n        console.log(this.state);\n        var earliestIndexedBlock = this.state.earliestIndexedBlock;\n        var lastIndexedBlock = this.state.lastIndexedBlock;\n        var maxBlocks = this.config.maxBlocks;\n        if (reverse !== undefined ? reverse : this.config.reverse) {\n            if (earliestBlock >= earliestIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: Math.max(earliestBlock, earliestIndexedBlock - maxBlocks),\n                toBlock: earliestIndexedBlock - 1\n            };\n        }\n        else {\n            if (latestBlock <= lastIndexedBlock) {\n                return;\n            }\n            return {\n                fromBlock: lastIndexedBlock + 1,\n                toBlock: Math.min(latestBlock, lastIndexedBlock + maxBlocks)\n            };\n        }\n    };\n    SafeIndexer.prototype.ensureBlockDefaults = function (latestBlock) {\n        if (this.config.earliestBlock < 0) {\n            this.config.earliestBlock = latestBlock;\n        }\n        if (this.state.earliestIndexedBlock < 0) {\n            this.state.earliestIndexedBlock = latestBlock + 1;\n        }\n        if (this.state.lastIndexedBlock < 0) {\n            this.state.lastIndexedBlock = latestBlock - 1;\n        }\n    };\n    SafeIndexer.prototype.watch = function (reverse) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var activeChainId, errorMsg, latestBlock, earliestBlock, blockInterval, fromBlock, toBlock, e_1;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadChainId()];\n                    case 1:\n                        activeChainId = _e.sent();\n                        if (this.config.chainId && activeChainId != this.config.chainId) {\n                            errorMsg = \"Wrong chain! Expected \" + this.config.chainId + \" got \" + activeChainId;\n                            (_a = this.config.logger) === null || _a === void 0 ? void 0 : _a.error(errorMsg);\n                            this.postStatusUpdate({ type: \"aborted\", reason: errorMsg, code: 1 });\n                            return [2 /*return*/];\n                        }\n                        _e.label = 2;\n                    case 2:\n                        if (!this.running) return [3 /*break*/, 14];\n                        if (!this.paused) return [3 /*break*/, 4];\n                        return [4 /*yield*/, sleep(this.config.syncTimeout)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 4: return [4 /*yield*/, this.loader.loadCurrentBlock()];\n                    case 5:\n                        latestBlock = _e.sent();\n                        this.ensureBlockDefaults(latestBlock);\n                        earliestBlock = this.config.earliestBlock;\n                        blockInterval = this.getCurrentBlockInterval(earliestBlock, latestBlock, reverse);\n                        if (!!blockInterval) return [3 /*break*/, 7];\n                        (_b = this.config.logger) === null || _b === void 0 ? void 0 : _b.log(this.instanceId, \"Up to date with current block!\");\n                        this.postStatusUpdate({ type: \"up_to_date\", latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 6:\n                        _e.sent();\n                        return [3 /*break*/, 2];\n                    case 7:\n                        fromBlock = blockInterval.fromBlock, toBlock = blockInterval.toBlock;\n                        this.postStatusUpdate({ type: \"processing\", fromBlock: fromBlock, toBlock: toBlock, latestBlock: latestBlock, earliestBlock: earliestBlock });\n                        (_c = this.config.logger) === null || _c === void 0 ? void 0 : _c.log(this.instanceId, \"Process from block\", fromBlock, \"to block\", toBlock);\n                        _e.label = 8;\n                    case 8:\n                        _e.trys.push([8, 11, , 13]);\n                        return [4 /*yield*/, this.processBlocks(fromBlock, toBlock)];\n                    case 9:\n                        _e.sent();\n                        this.state.lastIndexedBlock = Math.max(toBlock, this.state.lastIndexedBlock);\n                        this.state.earliestIndexedBlock = Math.min(fromBlock, this.state.earliestIndexedBlock);\n                        return [4 /*yield*/, conditionalSleep(this.config.syncTimeout)];\n                    case 10:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 11:\n                        e_1 = _e.sent();\n                        (_d = this.config.logger) === null || _d === void 0 ? void 0 : _d.error(e_1);\n                        return [4 /*yield*/, conditionalSleep(this.config.upToDateTimeout)];\n                    case 12:\n                        _e.sent();\n                        return [3 /*break*/, 13];\n                    case 13: return [3 /*break*/, 2];\n                    case 14:\n                        console.log(this.instanceId, \"Shutting down\");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SafeIndexer.prototype.shutdown = function () {\n        this.running = false;\n    };\n    SafeIndexer.prototype.pause = function () {\n        this.paused = true;\n    };\n    SafeIndexer.prototype.resume = function () {\n        this.paused = false;\n    };\n    SafeIndexer.prototype.processBlocks = function (from, to) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, interactions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadEvents(from, to, this.config.safe)];\n                    case 1:\n                        events = _a.sent();\n                        return [4 /*yield*/, this.parser.parse(events)];\n                    case 2:\n                        interactions = _a.sent();\n                        if (interactions.length > 0)\n                            try {\n                                this.callback.onNewInteractions(interactions);\n                            }\n                            catch (_b) { }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SafeIndexer;\n}());\nexports.SafeIndexer = SafeIndexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersLoader = void 0;\n__exportStar(require(\"./sources\"), exports);\nvar isOlder = function (compare, base) {\n    if (compare === undefined)\n        return false;\n    if (base === undefined)\n        return true;\n    if (compare.blockNumber != base.blockNumber)\n        return compare.blockNumber < base.blockNumber;\n    if (compare.transactionIndex != base.transactionIndex)\n        return compare.transactionIndex < base.transactionIndex;\n    if (compare.logIndex != base.logIndex)\n        return compare.logIndex < base.logIndex;\n    return false; // Equal defaults to false\n};\nvar EthersLoader = /** @class */ (function () {\n    function EthersLoader(provider, sources) {\n        this.provider = provider;\n        this.sources = sources;\n    }\n    EthersLoader.prototype.loadChainId = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var network;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        network = _a.sent();\n                        return [2 /*return*/, network.chainId];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.loadCurrentBlock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.provider.getBlockNumber()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.merge = function () {\n        var loaders = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            loaders[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var loaderCount, logResults, currentLogIndex, i, out, runs, resultIndex, nextLog, i, candidate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        loaderCount = loaders.length;\n                        if (loaderCount == 0)\n                            return [2 /*return*/, []];\n                        return [4 /*yield*/, Promise.all(loaders)];\n                    case 1:\n                        logResults = _a.sent();\n                        if (loaderCount == 1)\n                            return [2 /*return*/, logResults[0]];\n                        currentLogIndex = new Array(loaderCount).fill(0);\n                        for (i = 0; i < loaderCount; i++)\n                            currentLogIndex[i] = 0;\n                        out = [];\n                        runs = 0;\n                        // Panic check against endless loop (10k is max amount of events, per loader)\n                        while (runs < 10000 * loaderCount) {\n                            resultIndex = 0;\n                            nextLog = logResults[0][currentLogIndex[0]];\n                            for (i = 1; i < loaderCount; i++) {\n                                candidate = logResults[i][currentLogIndex[i]];\n                                if (isOlder(candidate, nextLog)) {\n                                    resultIndex = i;\n                                    nextLog = candidate;\n                                }\n                            }\n                            currentLogIndex[resultIndex]++;\n                            if (nextLog)\n                                out.push(nextLog);\n                            else\n                                break;\n                            runs++;\n                        }\n                        return [2 /*return*/, out];\n                }\n            });\n        });\n    };\n    EthersLoader.prototype.toEvent = function (log, safe) {\n        return __assign(__assign({}, log), { eventId: log.logIndex.toString(), account: safe });\n    };\n    EthersLoader.prototype.loadEvents = function (from, to, safe) {\n        return __awaiter(this, void 0, void 0, function () {\n            var logs;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.merge.apply(this, this.sources.map(function (l) { return l.loadEvents(from, to, safe); }))];\n                    case 1:\n                        logs = _a.sent();\n                        return [2 /*return*/, logs.reverse().map(function (e) { return _this.toEvent(e, safe); })];\n                }\n            });\n        });\n    };\n    return EthersLoader;\n}());\nexports.EthersLoader = EthersLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingTransferEventSource = exports.IncomingTransferEventSource = exports.IncomingEthEventSource = exports.SettingsChangeEventSource = exports.ModuleTransactionEventSource = exports.MultisigTransactionEventSource = exports.StaticTopicEventSource = void 0;\nvar ethers_1 = require(\"ethers\");\nvar constants_1 = require(\"../constants\");\nvar BaseEventSource = /** @class */ (function () {\n    function BaseEventSource(name, provider) {\n        this.provider = provider;\n        this.name = name;\n    }\n    BaseEventSource.prototype.loadEvents = function (fromBlock, toBlock, address) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filter;\n            return __generator(this, function (_a) {\n                filter = this.buildFilter(fromBlock, toBlock, address);\n                return [2 /*return*/, this.provider.getLogs(filter).then(function (e) {\n                        //console.debug(this.name, \"source loaded\", e.length, \"events\")\n                        return e;\n                    })];\n            });\n        });\n    };\n    return BaseEventSource;\n}());\nvar StaticTopicEventSource = /** @class */ (function (_super) {\n    __extends(StaticTopicEventSource, _super);\n    function StaticTopicEventSource(name, topics, provider) {\n        var _this = _super.call(this, name, provider) || this;\n        _this.topics = topics;\n        return _this;\n    }\n    StaticTopicEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        return {\n            topics: [this.topics],\n            address: address,\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return StaticTopicEventSource;\n}(BaseEventSource));\nexports.StaticTopicEventSource = StaticTopicEventSource;\nvar MultisigTransactionEventSource = /** @class */ (function (_super) {\n    __extends(MultisigTransactionEventSource, _super);\n    function MultisigTransactionEventSource(provider) {\n        return _super.call(this, \"MultiSig\", [constants_1.successTopic, constants_1.failureTopic, constants_1.multisigDetailsTopic], provider) || this;\n    }\n    return MultisigTransactionEventSource;\n}(StaticTopicEventSource));\nexports.MultisigTransactionEventSource = MultisigTransactionEventSource;\nvar ModuleTransactionEventSource = /** @class */ (function (_super) {\n    __extends(ModuleTransactionEventSource, _super);\n    function ModuleTransactionEventSource(provider) {\n        return _super.call(this, \"Module\", [constants_1.moduleSuccessTopic, constants_1.moduleFailureTopic, constants_1.moduleDetailsTopic], provider) || this;\n    }\n    return ModuleTransactionEventSource;\n}(StaticTopicEventSource));\nexports.ModuleTransactionEventSource = ModuleTransactionEventSource;\nvar SettingsChangeEventSource = /** @class */ (function (_super) {\n    __extends(SettingsChangeEventSource, _super);\n    function SettingsChangeEventSource(provider) {\n        return _super.call(this, \"Settings\", [\n            \"SafeSetup\",\n            \"AddedOwner\",\n            \"RemovedOwner\",\n            \"ChangedThreshold\",\n            \"EnabledModule\",\n            \"DisabledModule\",\n            \"ChangedFallbackHandler\",\n            \"ChangedGuard\",\n        ].map(function (name) { return constants_1.safeInterface.getEventTopic(name); }), provider) || this;\n    }\n    return SettingsChangeEventSource;\n}(StaticTopicEventSource));\nexports.SettingsChangeEventSource = SettingsChangeEventSource;\nvar IncomingEthEventSource = /** @class */ (function (_super) {\n    __extends(IncomingEthEventSource, _super);\n    function IncomingEthEventSource(provider) {\n        return _super.call(this, \"Incoming Ether\", [constants_1.etherReceivedTopic], provider) || this;\n    }\n    return IncomingEthEventSource;\n}(StaticTopicEventSource));\nexports.IncomingEthEventSource = IncomingEthEventSource;\nvar IncomingTransferEventSource = /** @class */ (function (_super) {\n    __extends(IncomingTransferEventSource, _super);\n    function IncomingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    IncomingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return IncomingTransferEventSource;\n}(BaseEventSource));\nexports.IncomingTransferEventSource = IncomingTransferEventSource;\nvar OutgoingTransferEventSource = /** @class */ (function (_super) {\n    __extends(OutgoingTransferEventSource, _super);\n    function OutgoingTransferEventSource(provider) {\n        return _super.call(this, \"Incoming transfers\", provider) || this;\n    }\n    OutgoingTransferEventSource.prototype.buildFilter = function (fromBlock, toBlock, address) {\n        // Transfer events are only supported if an account address is provided\n        if (!address)\n            throw Error(\"Transfer event source requires an address\");\n        return {\n            topics: [[constants_1.transferTopic], null, [ethers_1.ethers.utils.defaultAbiCoder.encode([\"address\"], [address])]],\n            fromBlock: fromBlock,\n            toBlock: toBlock,\n        };\n    };\n    return OutgoingTransferEventSource;\n}(BaseEventSource));\nexports.OutgoingTransferEventSource = OutgoingTransferEventSource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthersParser = void 0;\nvar constants_1 = require(\"../constants\");\nvar module_1 = require(\"./module\");\nvar multisig_1 = require(\"./multisig\");\nvar settings_1 = require(\"./settings\");\nvar transfers_1 = require(\"./transfers\");\nvar EthersParser = /** @class */ (function () {\n    function EthersParser(provider) {\n        this.groupIdFromEvent = function (event) { return \"\" + event.transactionHash; };\n        this.provider = provider;\n        this.decoders = [\n            new multisig_1.MultisigDecoder(provider),\n            new module_1.ModuleDecoder(provider),\n            new transfers_1.TransferDecoder(provider),\n            new settings_1.SettingsDecoder(provider)\n        ];\n    }\n    EthersParser.prototype.updateGroupedLogs = function (groups, detailsCandidate, parentCandidate, currentChildren) {\n        if (parentCandidate) {\n            groups.push({\n                parent: parentCandidate,\n                details: detailsCandidate,\n                children: currentChildren\n            });\n        }\n        else if (currentChildren.length > 0) {\n            groups.push.apply(groups, currentChildren.map(function (log) { return { parent: log, children: [] }; }));\n        }\n    };\n    EthersParser.prototype.group = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var out, currentChildren, detailsCandidates, parentCandidate, currentGroupId, _i, events_1, event, groupId, isParentCandidate, isDetailsCandidate;\n            return __generator(this, function (_a) {\n                out = [];\n                currentChildren = [];\n                detailsCandidates = [];\n                currentGroupId = undefined;\n                for (_i = 0, events_1 = events; _i < events_1.length; _i++) {\n                    event = events_1[_i];\n                    groupId = this.groupIdFromEvent(event);\n                    isParentCandidate = constants_1.parentTopics.indexOf(event.topics[0]) >= 0;\n                    isDetailsCandidate = constants_1.detailsTopics.indexOf(event.topics[0]) >= 0;\n                    if (currentGroupId !== groupId || (isParentCandidate && parentCandidate)) {\n                        this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                        parentCandidate = undefined;\n                        detailsCandidates = [];\n                        currentChildren = [];\n                        currentGroupId = undefined;\n                    }\n                    if (!currentGroupId)\n                        currentGroupId = groupId;\n                    if (isParentCandidate) {\n                        parentCandidate = event;\n                    }\n                    else if (isDetailsCandidate) {\n                        detailsCandidates.push(event);\n                    }\n                    else {\n                        currentChildren.push(event);\n                    }\n                }\n                this.updateGroupedLogs(out, detailsCandidates.pop(), parentCandidate, currentChildren);\n                return [2 /*return*/, out];\n            });\n        });\n    };\n    EthersParser.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, decoder, interaction;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _i = 0, _a = this.decoders;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        decoder = _a[_i];\n                        return [4 /*yield*/, decoder.decode(event, subEvents, detailEvent, this)];\n                    case 2:\n                        interaction = _b.sent();\n                        if (interaction)\n                            return [2 /*return*/, interaction];\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EthersParser.prototype.parse = function (events) {\n        return __awaiter(this, void 0, void 0, function () {\n            var groups, inter;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.group(events)];\n                    case 1:\n                        groups = _a.sent();\n                        inter = groups.map(function (_a) {\n                            var parent = _a.parent, children = _a.children, details = _a.details;\n                            return _this.decode(parent, children, details);\n                        });\n                        return [4 /*yield*/, Promise.all(inter)];\n                    case 2: return [2 /*return*/, (_a.sent()).filter(function (e) { return e !== undefined; })];\n                }\n            });\n        });\n    };\n    return EthersParser;\n}());\nexports.EthersParser = EthersParser;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ModuleDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar ModuleDecoder = /** @class */ (function () {\n    function ModuleDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    ModuleDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        // TODO: implement\n        return undefined;\n    };\n    ModuleDecoder.prototype.decodeFromEthereumHash = function (safe, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _a.sent();\n                        return [2 /*return*/, this.decodeEthereumTx(safe, ethTx)];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decodeModuleDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeModuleTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n        };\n    };\n    ModuleDecoder.prototype.decodeInternal = function (safe, module, event, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var decodedTx, id, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"module_\" + event.transactionHash + \"_\" + event.eventId;\n                        decodedTx = this.decodeModuleDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"module_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.module = module,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    ModuleDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.moduleSuccessTopic: return [3 /*break*/, 1];\n                            case constants_1.moduleFailureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFromModuleFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, eventParams.module, event, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ModuleDecoder;\n}());\nexports.ModuleDecoder = ModuleDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultisigDecoder = void 0;\nvar ethers_1 = require(\"ethers\");\nvar safe_contracts_1 = require(\"@gnosis.pm/safe-contracts\");\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"./utils\");\nvar NonceMapper = /** @class */ (function () {\n    function NonceMapper(provider) {\n        this.provider = provider;\n    }\n    NonceMapper.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, this.provider.getNetwork()];\n                    case 1:\n                        _a.chainId = (_b.sent()).chainId;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NonceMapper.prototype.calculateHash111 = function (tx, nonce) {\n        return ethers_1.ethers.utils._TypedDataEncoder.hash({ verifyingContract: tx.safe }, safe_contracts_1.EIP712_SAFE_TX_TYPE, __assign(__assign({}, tx), { nonce: nonce }));\n    };\n    NonceMapper.prototype.map = function (expectedHash, tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var safe, currentNonce, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.chainId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        safe = new ethers_1.ethers.Contract(tx.safe, constants_1.safeAbi, this.provider);\n                        return [4 /*yield*/, safe.nonce()];\n                    case 3:\n                        currentNonce = (_a.sent()).toNumber();\n                        for (nonce = currentNonce; nonce >= 0; nonce--) {\n                            if (this.calculateHash111(tx, nonce) === expectedHash)\n                                return [2 /*return*/, nonce];\n                            if (safe_contracts_1.calculateSafeTransactionHash(safe, __assign(__assign({}, tx), { nonce: nonce }), this.chainId) === expectedHash)\n                                return [2 /*return*/, nonce];\n                        }\n                        return [2 /*return*/, -1];\n                }\n            });\n        });\n    };\n    return NonceMapper;\n}());\nvar MultisigDecoder = /** @class */ (function () {\n    function MultisigDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.nonceMapper = new NonceMapper(provider);\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    MultisigDecoder.prototype.decodeEthereumTx = function (safe, tx) {\n        try {\n            if (tx.to !== safe) {\n                console.log(\"Transaction is not to the Safe\");\n                return undefined;\n            }\n            var result = constants_1.safeInterface.decodeFunctionData(\"execTransaction\", tx.data);\n            return {\n                safe: safe,\n                to: result.to,\n                value: result.value.toString(),\n                data: result.data,\n                operation: result.operation,\n                safeTxGas: result.safeTxGas.toString(),\n                baseGas: result.baseGas.toString(),\n                gasPrice: result.gasPrice.toString(),\n                gasToken: result.gasToken,\n                refundReceiver: result.refundReceiver,\n                signatures: result.signatures,\n            };\n        }\n        catch (e) {\n            // TODO: try to decode other ways \n            console.log(\"Unknown function\", tx.data.slice(0, 10));\n            return undefined;\n        }\n    };\n    MultisigDecoder.prototype.decodeFromEthereumHash = function (safe, safeTxHash, txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ethTx, decodedTx, _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        console.log(\"Fallback to transaction decoding\");\n                        return [4 /*yield*/, this.provider.getTransaction(txHash)];\n                    case 1:\n                        ethTx = _c.sent();\n                        decodedTx = this.decodeEthereumTx(safe, ethTx);\n                        if (!decodedTx)\n                            return [2 /*return*/, undefined];\n                        _a = [__assign({}, decodedTx)];\n                        _b = {};\n                        return [4 /*yield*/, this.nonceMapper.map(safeTxHash, decodedTx)];\n                    case 2: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_b.nonce = _c.sent(), _b)]))];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decodeMultisigDetailsEvent = function (event) {\n        if (!event)\n            return undefined;\n        var parsed = constants_1.safeInterface.decodeEventLog(\"SafeMultiSigTransaction\", event.data, event.topics);\n        return {\n            to: parsed.to,\n            value: parsed.value.toString(),\n            data: parsed.data,\n            operation: parsed.operation,\n            safeTxGas: parsed.safeTxGas.toString(),\n            baseGas: parsed.baseGas.toString(),\n            gasPrice: parsed.gasPrice.toString(),\n            gasToken: parsed.gasToken,\n            refundReceiver: parsed.refundReceiver,\n            signatures: parsed.signatures,\n            nonce: ethers_1.BigNumber.from(parsed.additionalInfo.slice(0, 66)).toNumber()\n        };\n    };\n    MultisigDecoder.prototype.decodeInternal = function (safe, event, safeTxHash, success, subLogs, details, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, decodedTx, block, txMeta;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        id = \"multisig_\" + safeTxHash;\n                        decodedTx = this.decodeMultisigDetailsEvent(details);\n                        if (!(!decodedTx && this.useFallbackDecoding)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.decodeFromEthereumHash(safe, safeTxHash, event.transactionHash)];\n                    case 1:\n                        decodedTx = _b.sent();\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 3:\n                        block = _b.sent();\n                        _a = {\n                            type: \"multisig_transaction\",\n                            id: id,\n                            block: block.number,\n                            timestamp: block.timestamp\n                        };\n                        return [4 /*yield*/, utils_1.mapEvents(parentDecoder, subLogs)];\n                    case 4:\n                        txMeta = (_a.logs = _b.sent(),\n                            _a.txHash = event.transactionHash,\n                            _a.safeTxHash = safeTxHash,\n                            _a.success = success,\n                            _a.details = decodedTx,\n                            _a);\n                        return [2 /*return*/, txMeta];\n                }\n            });\n        });\n    };\n    MultisigDecoder.prototype.decode = function (event, subEvents, detailEvent, parentDecoder) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, eventParams, eventParams;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.successTopic: return [3 /*break*/, 1];\n                            case constants_1.failureTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionSuccess\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, true, subEvents, detailEvent, parentDecoder)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ExecutionFailure\", event.data, event.topics);\n                        return [4 /*yield*/, this.decodeInternal(event.address, event, eventParams.txHash, false, subEvents, detailEvent, parentDecoder)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return MultisigDecoder;\n}());\nexports.MultisigDecoder = MultisigDecoder;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingsDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar setupTopic = constants_1.safeInterface.getEventTopic(\"SafeSetup\");\nvar addedOwnerTopic = constants_1.safeInterface.getEventTopic(\"AddedOwner\");\nvar removedOwnerTopic = constants_1.safeInterface.getEventTopic(\"RemovedOwner\");\nvar changeThresholdTopic = constants_1.safeInterface.getEventTopic(\"ChangedThreshold\");\nvar enabledModuleTopic = constants_1.safeInterface.getEventTopic(\"EnabledModule\");\nvar disabledModuledTopic = constants_1.safeInterface.getEventTopic(\"DisabledModule\");\nvar changeFallbackHandlerTopic = constants_1.safeInterface.getEventTopic(\"ChangedFallbackHandler\");\nvar changeGuardTopic = constants_1.safeInterface.getEventTopic(\"ChangedGuard\");\nvar SettingsDecoder = /** @class */ (function () {\n    function SettingsDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    SettingsDecoder.prototype.getSettingsDetails = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventParams, eventParams, eventParams, eventParams, eventParams, eventParams, eventParams;\n            return __generator(this, function (_a) {\n                switch (event.topics[0]) {\n                    case addedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"AddedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'added',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case removedOwnerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"RemovedOwner\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'owners',\n                                change: 'removed',\n                                value: eventParams.owner\n                            }];\n                    }\n                    case changeThresholdTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedThreshold\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'threshold',\n                                change: 'set',\n                                value: eventParams.threshold.toString()\n                            }];\n                    }\n                    case enabledModuleTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"EnabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'added',\n                                value: eventParams.module\n                            }];\n                    }\n                    case disabledModuledTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"DisabledModule\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'modules',\n                                change: 'removed',\n                                value: eventParams.module\n                            }];\n                    }\n                    case changeFallbackHandlerTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedFallbackHandler\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'fallbackHandler',\n                                change: 'set',\n                                value: eventParams.handler\n                            }];\n                    }\n                    case changeGuardTopic: {\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"ChangedGuard\", event.data, event.topics);\n                        return [2 /*return*/, {\n                                component: 'guard',\n                                change: 'set',\n                                value: eventParams.guard\n                            }];\n                    }\n                    default: {\n                        return [2 /*return*/, undefined];\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    SettingsDecoder.prototype.decodeSettingsChange = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var details, block;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getSettingsDetails(event)];\n                    case 1:\n                        details = _a.sent();\n                        if (!details)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _a.sent();\n                        return [2 /*return*/, __assign({ type: \"settings\", id: \"settings_\" + event.transactionHash + \"_\" + event.eventId, block: block.number, timestamp: block.timestamp, txHash: event.transactionHash }, details)];\n                }\n            });\n        });\n    };\n    SettingsDecoder.prototype.decode = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, block;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case setupTopic: return [3 /*break*/, 1];\n                        }\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 2:\n                        block = _b.sent();\n                        return [2 /*return*/, {\n                                type: \"setup\",\n                                id: \"setup_\" + event.transactionHash + \"_\" + event.eventId,\n                                block: block.number,\n                                timestamp: block.timestamp,\n                                txHash: event.transactionHash,\n                            }];\n                    case 3:\n                        {\n                            return [2 /*return*/, this.decodeSettingsChange(event)];\n                        }\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SettingsDecoder;\n}());\nexports.SettingsDecoder = SettingsDecoder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransferDecoder = void 0;\nvar constants_1 = require(\"../constants\");\nvar TransferDecoder = /** @class */ (function () {\n    function TransferDecoder(provider, useFallbackDecoding) {\n        this.provider = provider;\n        this.useFallbackDecoding = useFallbackDecoding || true;\n    }\n    TransferDecoder.prototype.decodeTokenTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, type, eventInterface, eventParams, details;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        type = \"\";\n                        if (event.topics.length === 4) {\n                            eventInterface = constants_1.erc721Interface;\n                            type = \"ERC721\";\n                        }\n                        else if (event.topics.length === 3) {\n                            eventInterface = constants_1.erc20Interface;\n                            type = \"ERC20\";\n                        }\n                        else if (event.topics.length === 2) {\n                            eventInterface = constants_1.erc20OldInterface;\n                            type = \"ERC20\";\n                        }\n                        else {\n                            return [2 /*return*/, undefined];\n                        }\n                        eventParams = eventInterface.decodeEventLog(\"Transfer\", event.data, event.topics);\n                        if (type === \"ERC20\") {\n                            details = {\n                                type: \"ERC20\",\n                                tokenAddress: event.address,\n                                value: eventParams.amount.toString()\n                            };\n                        }\n                        else {\n                            details = {\n                                type: \"ERC721\",\n                                tokenAddress: event.address,\n                                tokenId: eventParams.tokenId.toString()\n                            };\n                        }\n                        return [2 /*return*/, {\n                                type: \"transfer\",\n                                id: id,\n                                block: block.number,\n                                txHash: event.transactionHash,\n                                timestamp: block.timestamp,\n                                sender: eventParams.from,\n                                receipient: eventParams.to,\n                                direction: (eventParams.to.toLowerCase() === safe.toLowerCase() ? \"INCOMING\" : \"OUTGOING\"),\n                                details: details\n                            }];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decodeEtherTransfer = function (safe, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, block, eventParams, details, transferMeta;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = \"transfer_\" + event.transactionHash + \"_\" + event.eventId;\n                        return [4 /*yield*/, this.provider.getBlock(event.blockHash)];\n                    case 1:\n                        block = _a.sent();\n                        eventParams = constants_1.safeInterface.decodeEventLog(\"SafeReceived\", event.data, event.topics);\n                        details = {\n                            type: \"ETHER\",\n                            value: eventParams.value.toString()\n                        };\n                        transferMeta = {\n                            type: \"transfer\",\n                            id: id,\n                            sender: eventParams.sender,\n                            receipient: safe,\n                            direction: \"INCOMING\",\n                            timestamp: block.timestamp,\n                            txHash: event.transactionHash,\n                            details: details\n                        };\n                        return [2 /*return*/, transferMeta];\n                }\n            });\n        });\n    };\n    TransferDecoder.prototype.decode = function (event, subEvents, detailEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.topics[0];\n                        switch (_a) {\n                            case constants_1.transferTopic: return [3 /*break*/, 1];\n                            case constants_1.etherReceivedTopic: return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        if (!event.account)\n                            return [2 /*return*/, undefined];\n                        return [4 /*yield*/, this.decodeTokenTransfer(event.account, event)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                    case 3:\n                        if (subEvents && subEvents.length > 0)\n                            console.error(\"Sub logs for transfer entry!\", event, subEvents);\n                        return [4 /*yield*/, this.decodeEtherTransfer(event.address, event)];\n                    case 4: return [2 /*return*/, _b.sent()];\n                    case 5:\n                        {\n                            return [2 /*return*/, undefined];\n                        }\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return TransferDecoder;\n}());\nexports.TransferDecoder = TransferDecoder;\n","export abstract class AbstractDB {\n    private internalDb: IDBDatabase | undefined;\n    private indexedDB = window.indexedDB;\n    readonly dbKey: string;\n    readonly dbVersion: number;\n    readonly migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void;\n\n    constructor(dbKey: string, dbVersion: number, migration: (db: IDBDatabase, oldVersion: number, newVersion: number) => void) {\n        this.dbKey = dbKey;\n        this.dbVersion = dbVersion;\n        this.migration = migration;\n    }\n\n    async open(): Promise<IDBDatabase> {\n        if (this.internalDb) return this.internalDb\n        const dbStore = this;\n        return new Promise((callback, reject) => {\n            const request = this.indexedDB.open(this.dbKey, this.dbVersion)\n            request.onerror = function () {\n                reject(\"Error: \" + this.error);\n            }\n            request.onsuccess = function () {\n                dbStore.internalDb = this.result;\n                callback(this.result);\n            }\n            request.onupgradeneeded = function (event) {\n                dbStore.migration(this.result, event.oldVersion, this.result.version)\n            }\n        })\n    }\n}\n\nexport abstract class AbstractDAO<T> {\n    readonly db: AbstractDB;\n    readonly storeName: string;\n\n    constructor(db: AbstractDB, storeName: string) {\n        this.db = db;\n        this.storeName = storeName;\n    }\n\n\n    async add(entry: T): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.put(entry).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async remove(id: string): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.delete(id).onsuccess = function () {\n                callback()\n            }\n        })\n    }\n\n    async get(id: string): Promise<T> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.get(id).onsuccess = function () {\n                callback(this.result as T)\n            }\n        })\n    }\n\n    async getAllByIndex(index: string, key?: IDBKeyRange | IDBValidKey): Promise<T[]> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            const store = transaction.objectStore(this.storeName)\n            store.index(index).getAll(key).onsuccess = function () {\n                callback(this.result.reverse() as T[])\n            }\n        })\n    }\n\n    async drop(): Promise<void> {\n        const db = await this.db.open();\n        return new Promise((callback, reject) => {\n            const transaction = db.transaction([this.storeName], \"readwrite\");\n            transaction.onerror = function (e) {\n                reject(e)\n            }\n            transaction.objectStore(this.storeName).clear().onsuccess = function () {\n                callback()\n            }\n        })\n    }\n}","import { AbstractDB } from \"./base\";\n\nexport const INTERACTIONS_STORE = \"interactions\"\nexport const INTERACTIONS_KEY = \"id\"\nexport const INTERACTIONS_INDEX = \"timestamp\"\n\nexport const QUEUED_TX_STORE = \"queued_tx\"\nexport const QUEUED_TX_KEY = \"id\"\nexport const QUEUED_TX_INDEX = \"nonce\"\n\nexport const TX_SIGNATURES_STORE = \"tx_signatures\"\nexport const TX_SIGNATURES_KEY = \"id\"\nexport const TX_SIGNATURES_INDEX = \"safeTxHash\"\n\nexport class SafeDB extends AbstractDB {\n    constructor(safe: string) {\n        super(safe, 3, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(INTERACTIONS_STORE, { keyPath: INTERACTIONS_KEY })\n                store.createIndex(INTERACTIONS_INDEX, INTERACTIONS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(QUEUED_TX_STORE, { keyPath: QUEUED_TX_KEY })\n                store.createIndex(QUEUED_TX_INDEX, QUEUED_TX_INDEX, { unique: false })\n            }\n            if (oldVersion < 3) {\n                const store = db.createObjectStore(TX_SIGNATURES_STORE, { keyPath: TX_SIGNATURES_KEY })\n                store.createIndex(TX_SIGNATURES_INDEX, TX_SIGNATURES_INDEX, { unique: false })\n            }\n        });\n    }\n}","import { SafeInteraction } from \"safe-indexer-ts\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { AbstractDAO } from \"./base\";\nimport { INTERACTIONS_INDEX, INTERACTIONS_STORE, QUEUED_TX_INDEX, QUEUED_TX_STORE, SafeDB, TX_SIGNATURES_INDEX, TX_SIGNATURES_STORE } from \"./safe\";\n\n\nexport class InteractionsDAO extends AbstractDAO<SafeInteraction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), INTERACTIONS_STORE)\n    }\n\n    getAll(): Promise<SafeInteraction[]> {\n        return this.getAllByIndex(INTERACTIONS_INDEX)\n    }\n\n}\n\nexport interface QueuedSafeTransaction extends SafeTransaction {\n    id: string\n    version: string\n}\n\nexport class QueuedInteractionsDAO extends AbstractDAO<QueuedSafeTransaction> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), QUEUED_TX_STORE)\n    }\n\n    getAll(nonce: number): Promise<QueuedSafeTransaction[]> {\n        return this.getAllByIndex(QUEUED_TX_INDEX, IDBKeyRange.lowerBound(nonce))\n    }\n}\n\nexport class TxSignaturesDAO extends AbstractDAO<SafeTransactionSignature> {\n    constructor(safe: string) {\n        super(new SafeDB(safe), TX_SIGNATURES_STORE)\n    }\n\n    getAll(safeTxHash: string): Promise<SafeTransactionSignature[]> {\n        return this.getAllByIndex(TX_SIGNATURES_INDEX, safeTxHash)\n    }\n}","import { State } from \"safe-indexer-ts\";\n\nconst parseIntWithFallback = (input: string | undefined | null, fallback: number): number => {\n    if (!input) return fallback\n    const value = parseInt(input)\n    if (Number.isNaN(value)) return fallback\n    return value\n}\n\nexport class IndexerState implements State {\n    safe: string;\n    defaultBlock: number;\n    private _lastIndexedBlock: number;\n    private _earliestIndexedBlock: number; // 8485873 is the Block of initial 1.3.0 deployment\n    private _earliestBlock: number;\n\n    constructor(safe: string, defaultBlock?: number) {\n        this.safe = safe;\n        this.defaultBlock = defaultBlock || -1;\n        const storedEarliestIndexedBlock = localStorage.getItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe);\n        this._earliestIndexedBlock = parseIntWithFallback(storedEarliestIndexedBlock, this.defaultBlock);\n        const storedLastIndexedBlock = localStorage.getItem(\"indexer_state_safe_last_indexed_block\" + this.safe);\n        this._lastIndexedBlock = parseIntWithFallback(storedLastIndexedBlock, this.defaultBlock);\n        const storedEarliestBlock = localStorage.getItem(\"indexer_state_safe_earliest_block\" + this.safe);\n        this._earliestBlock = parseIntWithFallback(storedEarliestBlock, 0);\n    }\n\n    set lastIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_last_indexed_block\" + this.safe, value.toString())\n        this._lastIndexedBlock = value;\n    }\n    get lastIndexedBlock() {\n        return this._lastIndexedBlock\n    }\n\n    set earliestIndexedBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe, value.toString())\n        this._earliestIndexedBlock = value;\n    }\n    get earliestIndexedBlock() {\n        return this._earliestIndexedBlock\n    }\n\n    set earliestBlock(value: number) {\n        localStorage.setItem(\"indexer_state_safe_earliest_block\" + this.safe, value.toString())\n        this._earliestBlock = value;\n    }\n    get earliestBlock() {\n        return this._earliestBlock\n    }\n\n    reset() {\n        localStorage.removeItem(\"indexer_state_safe_earliest_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_last_indexed_block\" + this.safe)\n        localStorage.removeItem(\"indexer_state_safe_earliest_block\" + this.safe)\n        this._lastIndexedBlock = this.defaultBlock\n        this._earliestIndexedBlock = this.defaultBlock\n    }\n}","import { providers } from \"ethers\";\nimport { Callback, IndexerStatus, SafeIndexer, SafeInteraction } from \"safe-indexer-ts\";\nimport { NetworkConfig } from \"../../components/provider/AppSettingsProvider\";\nimport { InteractionsDAO } from \"../db/interactions\";\nimport { IndexerState } from \"../state/indexer\";\nimport { Account } from \"../utils/account\";\nimport { getIndexer } from \"../utils/indexer\";\n\n\nexport class TransactionRepository implements Callback {\n    callbacks: Set<Callback> = new Set()\n    currentStatus: IndexerStatus | undefined\n    indexer: SafeIndexer | undefined\n    state: IndexerState\n    db: InteractionsDAO\n    account: Account\n    networkConfig: NetworkConfig\n\n    constructor(account: Account, networkConfig: NetworkConfig) {\n        this.account = account\n        this.networkConfig = networkConfig\n        this.db = new InteractionsDAO(account.id)\n        this.state = new IndexerState(account.id, networkConfig.startingBlock)\n    }\n\n    connect(provider: providers.Provider): () => void {\n        this.disconnect()\n        console.log(\"connect\")\n        console.log(\"#####\", {provider})\n        const indexer = getIndexer(this.account, provider, this.state, this.networkConfig, this)\n        console.log(\"#####\", {indexer})\n        this.indexer = indexer\n        indexer.watch().catch((e) => console.error(e))\n        indexer.watch(true).catch((e) => console.error(e))\n        return () => {\n            console.log(\"#####\", \"stop\", {indexer})\n            indexer.shutdown()\n        }\n    }\n\n    disconnect() {\n        console.log(\"disconnect\")\n        this.indexer?.shutdown()\n        this.currentStatus = undefined\n    }\n\n    registerCallback(callback: Callback) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: Callback) {\n        this.callbacks.delete(callback)\n        this.postCurrentStatusUpdateToCallback(callback)\n    }\n\n    private checkForCreation(interactions: SafeInteraction[]) {\n        for (const interaction of interactions) {\n            if (interaction.type === \"setup\" || (\n                interaction.type === \"multisig_transaction\" && interaction.details?.nonce === 0\n            )) {\n                console.log(\"Found creation, stop reverse indexing\")\n                const earliestBlock = Math.max(0, interaction.block - this.networkConfig.maxBlocks)\n                this.state.earliestBlock = earliestBlock\n                this.indexer?.updateConfig({ earliestBlock })\n                return\n            }\n        }\n    }\n\n    private async handleNewInteraction(interaction: SafeInteraction) {\n        try {\n            await this.db.add(interaction)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    onNewInteractions(interactions: SafeInteraction[]) {\n        this.checkForCreation(interactions)\n        interactions.forEach((i) => { this.handleNewInteraction(i) })\n        this.callbacks.forEach((callback) => {\n            try {\n                callback.onNewInteractions(interactions)\n            } catch (e) {\n                console.error(e)\n            }\n        })\n    }\n\n    onStatusUpdate(update: IndexerStatus) {\n        this.currentStatus = update\n        this.postCurrentStatusUpdate()\n    }\n\n    private postCurrentStatusUpdate() {\n        if (!this.currentStatus) return\n        this.callbacks.forEach((cb) => { this.postCurrentStatusUpdateToCallback(cb) })\n    }\n\n    private postCurrentStatusUpdateToCallback(callback: Callback) {\n        const currentStatus = this.currentStatus\n        if (!currentStatus) return\n        try {\n            callback.onStatusUpdate?.(currentStatus)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    async getTx(id: string): Promise<SafeInteraction> {\n        return this.db.get(id)\n    }\n\n    async getAllTxs(): Promise<SafeInteraction[]> {\n        return this.db.getAll()\n    }\n\n    async reindex(): Promise<boolean> {\n        this.currentStatus = undefined\n        const indexer = this.indexer\n        if (!indexer) return false;\n        indexer.pause();\n        await this.db.drop();\n        this.state.reset();\n        indexer.resume();\n        return true\n    }\n\n}","\nimport { providers } from 'ethers';\nimport { Callback, EthersLoader, EthersParser, IncomingEthEventSource, IncomingTransferEventSource, ModuleTransactionEventSource, MultisigTransactionEventSource, OutgoingTransferEventSource, SafeIndexer, SafeIndexerUserConfig, SettingsChangeEventSource } from 'safe-indexer-ts'\nimport { NetworkConfig } from '../../components/provider/AppSettingsProvider';\nimport { IndexerState } from '../state/indexer';\nimport { Account } from './account';\n\nexport const getIndexer = (account: Account, provider: providers.Provider, state: IndexerState, networkConfig: NetworkConfig, callback: Callback): SafeIndexer => {\n    const loader = new EthersLoader(provider, [\n        new MultisigTransactionEventSource(provider), \n        new ModuleTransactionEventSource(provider), \n        new IncomingTransferEventSource(provider), \n        new OutgoingTransferEventSource(provider), \n        new IncomingEthEventSource(provider), \n        new SettingsChangeEventSource(provider)\n    ])\n    const parser = new EthersParser(provider)\n    const config: SafeIndexerUserConfig = { chainId: account.chainId, safe: account.address, maxBlocks: networkConfig.maxBlocks, logger: console, earliestBlock: state.earliestBlock }\n    return new SafeIndexer(state, loader, parser, callback, config)\n}","import Onboard from 'bnc-onboard'\nimport { API, WalletInitOptions } from \"bnc-onboard/dist/src/interfaces\";\nimport { findChainRpc } from '../utils/chainInfo';\n\nexport interface SignerInfo {\n    signerAddress?: string\n}\n\nexport class SafeSigner {\n\n    private onboard?: API\n    private rpcProvider?: (networkId: number) => string | undefined\n    private providerChangeListener?: (provider: any | null) => void\n\n    onProviderChange(listener?: (provider: any) => void) {\n        this.providerChangeListener = listener\n    }\n\n    setRpcProvider(rpcProvider: ((networkId: number) => string | undefined) | undefined) {\n        this.rpcProvider = rpcProvider\n    }\n\n    async prepare(networkId: number, showSelection?: boolean): Promise<boolean> {\n        this.clear()\n        const wallets: WalletInitOptions[] = [\n            { walletName: \"metamask\" },\n        ]\n        const rpc = this.rpcProvider?.(networkId)\n        if (rpc) {\n            wallets.push(\n                {\n                    walletName: 'walletConnect',\n                    rpc: {\n                        [networkId.toString()]: rpc\n                    },\n                    bridge: 'https://safe-walletconnect.gnosis.io/',\n                },\n                {\n                  walletName: 'ledger',\n                  rpcUrl: rpc\n                }\n            )\n        }\n        const onboard = Onboard({\n            networkId,\n            subscriptions: {\n                wallet: wallet => {\n                    if (wallet.name) localStorage.setItem(\"last_selected_wallet_name\", wallet.name)\n                    try {\n                        this.providerChangeListener?.(wallet.provider)\n                    } catch (e) {\n                        console.error(e)\n                    }\n                }\n            },\n            walletSelect: {\n                description: 'Please select a Signer',\n                wallets\n            },\n            walletCheck: [\n                { checkName: 'derivationPath' },\n                { checkName: 'connect' },\n                { checkName: 'accounts' },\n                { checkName: 'network' }\n            ],\n        })\n        this.onboard = onboard\n        const lastSelectedWallet = localStorage.getItem(\"last_selected_wallet_name\") || undefined\n        if (!lastSelectedWallet && showSelection != true) return false\n        if (await onboard.walletSelect(lastSelectedWallet))\n            return await onboard.walletCheck();\n        return false\n    }\n\n    async connect(networkId: number): Promise<boolean> {\n        return this.prepare(networkId, true)\n    }\n\n    async disconnect(): Promise<void> {\n        localStorage.removeItem(\"last_selected_wallet_name\")\n        this.clear()\n    }\n\n    async clear() {\n        this.onboard?.walletReset()\n        this.onboard = undefined\n    }\n\n    status(): SignerInfo {\n        try {\n            const state = this.onboard?.getState()\n            return {\n                signerAddress: state?.address\n            }\n        } catch (e) {\n            return {}\n        }\n    }\n}","import chains from '../../logic/utils/chains.json'\n\nexport const findChainRpc = (networkId: number, includeInfura: boolean): string | undefined => {\n    const chain = chains.find(\n        (chain) => {\n            return chain.chainId === networkId\n        }\n    )\n    return chain?.rpc?.find(\n        (rpc) => {\n            return !rpc.startsWith(\"ws\") && (includeInfura || !rpc.includes(\"INFURA_API_KEY\"))\n        }\n    )\n}","import { ethers, providers, Signer } from \"ethers\";\nimport { TypedDataSigner } from \"@ethersproject/abstract-signer\"\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport { SafeSigner } from \"../../logic/account/SafeSigner\";\nimport { findChainRpc } from \"../../logic/utils/chainInfo\";\n\nexport interface NetworkConfig {\n    maxBlocks: number,\n    startingBlock: number\n}\n\nconst defaultConfig: NetworkConfig = {\n    startingBlock: -1,\n    maxBlocks: 1000\n}\n\nexport interface AppSettings {\n    readonly infuraToken: string,\n    readonly customRpc: string,\n    readonly useCustomRpc: boolean,\n    readonly signer: Signer & TypedDataSigner | undefined,\n    readonly safeSigner: SafeSigner,\n    readonly networkConfig: NetworkConfig,\n    loadProvider: (networkId: number) => providers.JsonRpcProvider | undefined,\n    toggleCustomRpc: (value: boolean) => void\n    updateCustomRpc: (value: string) => void\n    updateInfuraToken: (value: string) => void\n    updateNetworkConfig: (value: NetworkConfig) => void\n}\n\nconst AppSettingsContext = React.createContext<AppSettings | undefined>(undefined);\n\nexport const useAppSettings = () => {\n    const appSettings = useContext(AppSettingsContext)\n    if (!appSettings) throw Error(\"App Settings not available!\")\n    return appSettings\n}\n\nexport const AppSettingsProvider: React.FC = ({ children }) => {\n    const [useCustomRpc, setUseCustomRpc] = useState(localStorage.getItem(\"app_state_use_rpc\") === \"true\")\n    const [customRpc, setCustomRpc] = useState(localStorage.getItem(\"app_state_rpc\") || \"\")\n    const [infuraToken, setInfuraToken] = useState(localStorage.getItem(\"app_state_infura_token\") || \"\")\n    const [connectedProvider, setConnectedProvider] = useState<any | null>(undefined)\n    const storedConfig = localStorage.getItem(\"app_state_network_config\")\n    const [networkConfig, setNetworkConfig] = useState<NetworkConfig>(storedConfig ? JSON.parse(storedConfig) : defaultConfig)\n    const toggleCustomRpc = (value: boolean) => {\n        localStorage.setItem(\"app_state_use_rpc\", value ? \"true\" : \"false\")\n        setUseCustomRpc(value)\n    }\n    const updateCustomRpc = (value: string) => {\n        localStorage.setItem(\"app_state_rpc\", value)\n        setCustomRpc(value)\n    }\n    const updateInfuraToken = (value: string) => {\n        localStorage.setItem(\"app_state_infura_token\", value)\n        setInfuraToken(value)\n    }\n    const updateNetworkConfig = (value: NetworkConfig) => {\n        const serialized = JSON.stringify({\n            maxBlocks: value.maxBlocks || 100,\n            startingBlock: value.startingBlock || -1\n        })\n        localStorage.setItem(\"app_state_network_config\", serialized)\n        setNetworkConfig(value)\n    }\n\n    const getChainRpc = useCallback((networkId: number): string | undefined => {\n        if (infuraToken) {\n            const rpcUrl = findChainRpc(networkId, true)\n            return rpcUrl?.replaceAll(\"${INFURA_API_KEY}\", infuraToken);\n        }\n        return findChainRpc(networkId, false)\n    }, [infuraToken])\n\n    const loadProvider = useCallback((networkId: number): providers.JsonRpcProvider | undefined => {\n        if (useCustomRpc) {\n            if (!customRpc) return undefined\n            return new ethers.providers.JsonRpcProvider(customRpc);\n        }\n        if (connectedProvider) {\n            console.log(\"#####\", {connectedProvider})\n            return new ethers.providers.Web3Provider(connectedProvider)\n        }\n        const chainRpc = getChainRpc(networkId)\n        if (chainRpc) {\n            console.log(\"#####\", {chainRpc})\n            return new ethers.providers.JsonRpcProvider(chainRpc);\n        }\n        return undefined\n    }, [getChainRpc, useCustomRpc, connectedProvider])\n\n    const signer = useMemo(() => {\n        if (connectedProvider) {\n            return new ethers.providers.Web3Provider(connectedProvider).getSigner()\n        }\n        return undefined;\n    }, [connectedProvider])\n\n    // TODO refactor all safeSigner hooks into separate file\n    const safeSigner = useMemo(() => {\n        return new SafeSigner();\n    }, [])\n\n    useEffect(() => {\n        safeSigner.setRpcProvider(getChainRpc)\n    }, [safeSigner, getChainRpc])\n\n    useEffect(() => {\n        safeSigner.onProviderChange(setConnectedProvider)\n    }, [safeSigner, setConnectedProvider])\n\n    return <AppSettingsContext.Provider value={{\n        customRpc, useCustomRpc, infuraToken, signer, networkConfig,\n        loadProvider, toggleCustomRpc, updateCustomRpc, updateInfuraToken, updateNetworkConfig,\n        safeSigner\n    }}>\n        {children}\n    </AppSettingsContext.Provider>\n}\n\nexport default AppSettingsProvider","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { TransactionRepository as TransactionRepository } from \"../../logic/account/TransactionRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst TransactionRepoContext = React.createContext<TransactionRepository | undefined>(undefined);\n\nexport const useTransactionRepo = () => {\n    const repo = useContext(TransactionRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const TransactionRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { loadProvider, networkConfig } = useAppSettings()\n\n    const repo = useMemo(() => {\n        return new TransactionRepository(account, networkConfig)\n    }, [ account, networkConfig ])\n\n    useEffect(() => {\n        const provider = loadProvider(account.chainId)\n        if (!provider) return\n        return repo.connect(provider)\n    }, [repo, loadProvider])\n\n    useEffect(() => {\n        return () => repo.disconnect()\n    }, [repo])\n\n    return <TransactionRepoContext.Provider value={repo}>\n        { children }\n    </TransactionRepoContext.Provider>\n}\n\nexport default TransactionRepositoryProvider","import { ethers } from 'ethers'\nimport shortNames from './shortNameToChainId.json'\n\nexport interface Account {\n    id: string\n    chainId: number\n    address: string\n}\n\nexport const buildCaip2Addr = (chainId: number, address: string) => {\n    return `eip155:${chainId}:${address}`\n}\n\nexport const shortNameToChainId = (shortName: string): string | undefined => {\n    return (shortNames as Record<string, string>)[shortName]\n}\n\nexport const parseAddress = (address: string): string | undefined => {\n    try {\n        return ethers.utils.getAddress(address)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseChainId = (chainId: string): number | undefined => {\n    try {\n        return parseInt(chainId)\n    } catch {\n        return undefined\n    }\n}\n\nexport const parseAccount = (account: string): Account | undefined => {\n    const accountParts = account.split(\":\")\n    let network = undefined\n    let address = undefined\n    if (accountParts.length == 1) {\n        address = parseAddress(accountParts[0])\n        network = \"eip155:1\"\n    } else if (accountParts.length == 2) {\n        address = parseAddress(accountParts[1])\n        network = shortNameToChainId(accountParts[0])\n    } else if (accountParts.length == 3) {\n        address = parseAddress(accountParts[2])\n        network = `${accountParts[0]}:${accountParts[1]}`\n    }\n\n    if (!network || !address) return undefined\n    const networkParts = network.split(\":\")\n    if (networkParts.length != 2 || networkParts[0] !== \"eip155\") return undefined\n    const chainId = parseChainId(networkParts[1])\n    if (!chainId) return undefined\n    return {\n        address,\n        chainId: chainId,\n        id: buildCaip2Addr(chainId, address)\n    }\n}","import { useMediaQuery } from \"@mui/material\";\nimport { buildCaip2Addr } from \"../../logic/utils/account\";\nimport { useAccount } from \"../account/Dashboard\";\n\nexport const useDektopLayout = (): boolean => useMediaQuery('(min-width:600px)');\n\nexport const copyToClipboard = (text: string, copyMessage?: string) => {\n    try {\n        navigator.clipboard.writeText(text)\n        if (copyMessage) {\n            window.alert(copyMessage)\n        }\n    }  catch (e) {\n        console.log(e)\n    }\n}\n\nexport const useCopyAddress = (address: string): (() => void) => {\n    const account = useAccount()\n    const shareableText = buildCaip2Addr(account.chainId, address)\n    return () => { copyToClipboard(shareableText, \"Copied address to clipboard!\") }\n}","import { Typography } from \"@mui/material\"\nimport { styled } from \"@mui/system\"\n\nexport const Group = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const Row = styled('div')(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'row'\n}))\n\nexport const Header = styled('div')(({ theme }) => ({\n    textAlign: 'start'\n}))\n\nexport const Entry = styled('div')(({ theme }) => ({\n    display: 'flex',\n    alignItems: 'center',\n    paddingBottom: 16\n}))\n\nexport const LongText = styled(Typography)(({ theme }) => ({\n    width: '100%',\n    textAlign: 'start',\n    wordWrap: 'break-word'\n}))","export const shortAddress = (address: string, visibleChars: number = 4): string => {\n    const length = address.length\n    if (length <= 2 * visibleChars + 2) return address;\n    return \"0x\" + address.slice(2, 2 + visibleChars) + '...' + address.slice(address.length - visibleChars)\n}","import { IconButton, Typography } from \"@mui/material\"\nimport { useMemo } from \"react\";\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { ContentCopy } from \"@mui/icons-material\";\nimport { Row } from \"../../styled/tables\";\nimport { shortAddress } from \"../../logic/utils/address\";\nimport { copyToClipboard, useCopyAddress } from \"./media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AddressInfo: React.FC<{ address: string, onClick?: (address: string) => void  }> = ({ address, onClick }) => {\n    const iconSrc = useMemo(() => makeBlockie(address), [address]);\n    const copyAddress = useCopyAddress(address)\n    return <Row sx={{\n        width: `calc(100% - 32px)`,\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" onClick={() => onClick?.(address) } />\n        <Typography sx={{ fontFamily: 'Monospace', paddingX: '8px' }} onClick={() => onClick?.(address) } >{shortAddress(address)}</Typography>\n        <IconButton color=\"default\" component=\"span\" onClick={() => copyAddress() }>\n            <ContentCopy fontSize=\"small\" />\n        </IconButton>\n    </Row>\n}\n\nexport default AddressInfo","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { SettingsChangeTx, TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: SettingsChangeTx\n}\n\nexport const renderSettingsValue = (component: string, value: string): React.ReactNode => {\n    switch (component) {\n        case 'owners':\n        case 'modules':\n        case 'fallbackHandler':\n            return <AddressInfo address={value} />\n        default:\n            return <LongText>{value}</LongText>\n    }\n}\n\nconst capitalize = (value: string): string => {\n    if (value.length < 2) return value\n    return value.slice(0, 1).toUpperCase() + value.slice(1)\n}\n\nexport const SettingsTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>{capitalize(transaction.component)} {transaction.change}</Header>\n        <Entry>\n            {renderSettingsValue(transaction.component, transaction.value)}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group >\n}\n\nexport default SettingsTxDetails","import styled from '@emotion/styled';\nimport React from 'react'\nimport { SettingsChangeTx } from 'safe-indexer-ts'\nimport { Entry, Group, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\nimport { renderSettingsValue } from '../details/SettingsTxDetails';\n\nexport interface Props {\n    settingsChange: SettingsChangeTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'inline-block',\n    width: '100%',\n    wordWrap: 'break-word'\n}))\n\nexport const SettingsTxSummary: React.FC<Props> = ({ settingsChange, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(settingsChange.id)}>\n        {`${settingsChange.component} ${settingsChange.change}`}\n        {hideDate && renderSettingsValue(settingsChange.component, settingsChange.value)}\n        {!hideDate && (<>\n            <br />{new Date(settingsChange.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default SettingsTxSummary","import styled from '@emotion/styled';\nimport React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event, TransferTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    transfer: TransferTx,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\n\nconst Summary = styled(Entry)(({ theme }) => ({\n    display: 'flex',\n    flexDirection: 'column'\n}))\n\nexport const TransferTxSummary: React.FC<Props> = ({ transfer, hideDate, showDetails }) => {\n    return <Summary onClick={() => showDetails?.(transfer.id)}>\n        {`${transfer.direction} ${transfer.details.type} Transfer`}\n        {!hideDate && (<>\n            <br />{new Date(transfer.timestamp * 1000).toUTCString()}\n        </>)}\n    </Summary>\n}\n\nexport default TransferTxSummary","import React from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\nimport TransferTxSummary from './summary/TransferTxSummary'\n\nexport interface Props {\n    interaction: SafeInteraction,\n    showDetails?: (id: string) => void,\n    hideDate?: boolean\n}\nexport const TxSummary: React.FC<Props> = ({ interaction, showDetails, hideDate }) => {\n    switch (interaction.type) {\n        case \"multisig_transaction\":\n        case \"module_transaction\":\n        case \"setup\":\n            return <div onClick={() => showDetails?.(interaction.id)}>\n                {`${interaction.type}`}<br />\n                {!hideDate ? `${new Date(interaction.timestamp * 1000).toUTCString()}` : \"\"}<br />\n                <br />\n            </div>\n        case \"settings\":\n            return <SettingsTxSummary settingsChange={interaction} hideDate={hideDate} showDetails={showDetails} />\n        case \"transfer\":\n            return <TransferTxSummary transfer={interaction} hideDate={hideDate} showDetails={showDetails} />\n        default:\n            return <div>\n                Unknown Interaction\n            </div>\n    }\n}\n\nexport default TxSummary","import React, { ReactElement } from 'react'\nimport { SafeInteractionEvent, Event } from 'safe-indexer-ts'\nimport { Entry, Group, Header } from '../../../../styled/tables';\nimport TxSummary from '../TxSummary';\n\nexport interface Props {\n    interactions: SafeInteractionEvent[]\n}\n\nconst eventSummary = (event: Event): ReactElement => {\n    return <div>\n        {`Event - ${event.eventId}`}<br />\n        <br />\n    </div>\n}\n\nexport const TxEvents: React.FC<Props> = ({ interactions }) => {\n    if (interactions.length == 0) return <></>\n    return <>\n        <Header>Events:</Header>\n        <Group sx={{ textAlign: \"left\" }}>\n            {interactions.map((e) => (<Entry>\n                {e.interaction ? <TxSummary interaction={e.interaction} hideDate /> : eventSummary(e.event)}\n            </Entry>))}\n        </Group>\n    </>\n}\n\nexport default TxEvents","import React, { useState } from 'react'\nimport { Button, Link, Typography } from '@mui/material';\nimport { Group, LongText } from '../../styled/tables';\n\nexport interface Props {\n    data: string\n}\n\nexport const TxData: React.FC<Props> = ({ data }) => {\n    const [collapsed, setCollapsed] = useState<boolean>(true)\n    const decodePossible = data.length >= 10\n    const canCollapse = data.length >= 42\n    const displayData = canCollapse && collapsed ? data.slice(0, 24) + `...` : data\n    return <Group sx={{ paddingBottom: \"16px\" }}>\n        <LongText>{displayData} {canCollapse && (<Link onClick={() => { setCollapsed(!collapsed) }} sx={{ textDecoration: \"none\" }}>{collapsed ? \"Expand\" : \"Collapse\"}</Link>)}</LongText>\n        {decodePossible && (<Button onClick={() => { window.open('https://rimeissner.dev/transaction-decoder/#/?data=' + data, '_blank'); }}>Decode</Button>)}\n    </Group>\n}\n\nexport default TxData","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { ModuleTx } from 'safe-indexer-ts'\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport { Typography } from '@mui/material';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: ModuleTx\n}\n\nexport const ModuleTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Module:</Header>\n        <Entry>\n            <AddressInfo address={transaction.module} />\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default ModuleTxDetails","import React from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { MultisigTx } from 'safe-indexer-ts'\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport TxEvents from './TxEvents';\nimport TxData from '../../../utils/TxData';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: MultisigTx\n}\n\nexport const MultisigTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>Status:</Header>\n        <Entry>\n            {transaction.success ? (\n                <><Typography>Success</Typography><CheckCircleIcon color=\"success\" /></>\n            ) : (\n                <><Typography>Error</Typography><ErrorIcon color=\"error\" /></>\n            )}\n        </Entry>\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n        <Header>Id:</Header>\n        <Entry>\n            <LongText>{transaction.safeTxHash}</LongText>\n        </Entry>\n        {transaction.details ? (\n            <Group>\n                <Header>Operation:</Header>\n                <Entry>\n                    <Typography>{transaction.details.operation}</Typography>\n                </Entry>\n                <Header>To:</Header>\n                <Entry>\n                    <AddressInfo address={transaction.details.to} />\n                </Entry>\n                <Header>Value:</Header>\n                <Entry>\n                    <Typography>{transaction.details.value}</Typography>\n                </Entry>\n                <Header>Data:</Header>\n                <TxData data={transaction.details.data} />\n                <Header>Nonce:</Header>\n                <Entry>\n                    <LongText>{transaction.details.nonce}</LongText>\n                </Entry>\n                <Header>Signatures:</Header>\n                <Entry>\n                    <LongText>{transaction.details.signatures}</LongText>\n                </Entry>\n            </Group>\n        ) : (\n            <Entry>No details available</Entry>\n        )}\n        <TxEvents interactions={transaction.logs} />\n    </Group>\n}\n\nexport default MultisigTxDetails","import React, { ReactElement } from 'react'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { TransferDetails, TransferTx } from 'safe-indexer-ts'\nimport { styled } from '@mui/system';\nimport { Typography } from '@mui/material';\nimport { Entry, Group, Header, LongText } from '../../../../styled/tables';\nimport AddressInfo from '../../../utils/AddressInfo';\n\nexport interface Props {\n    transaction: TransferTx\n}\n\nconst renderDetails = (details: TransferDetails): ReactElement => {\n    let asset: string = \"\"\n    let subjectTitle: string = \"\"\n    let subject: string = \"\"\n    switch (details.type) {\n        case \"ERC20\":\n            asset = \"ERC20 - \" + details.tokenAddress\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        case \"ERC721\":\n            asset = \"ERC721 - \" + details.tokenAddress\n            subjectTitle = \"ID\"\n            subject = details.tokenId\n            break\n        case \"ETHER\":\n            asset = \"Ether\"\n            subjectTitle = \"Value\"\n            subject = details.value\n            break\n        default:\n            break\n    }\n    return (<>\n        <Header>Asset:</Header>\n        <Entry>\n            <Typography>{asset}</Typography>\n        </Entry>\n        <Header>{subjectTitle}</Header>\n        <Entry>\n            <Typography>{subject}</Typography>\n        </Entry>\n    </>)\n}\n\nexport const TransferTxDetails: React.FC<Props> = ({ transaction }) => {\n    return <Group>\n        <Header>Date:</Header>\n        <Entry>\n            <Typography>{new Date(transaction.timestamp * 1000).toUTCString()}</Typography>\n        </Entry>\n        <Header>From:</Header>\n        <Entry>\n            <AddressInfo address={transaction.sender} />\n        </Entry>\n        <Header>To:</Header>\n        <Entry>\n            <AddressInfo address={transaction.receipient} />\n        </Entry>\n        {renderDetails(transaction.details)}\n        <Header>Ethereum Transaction:</Header>\n        <Entry>\n            <LongText>{transaction.txHash}</LongText>\n        </Entry>\n    </Group>\n}\n\nexport default TransferTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { ReactElement, useEffect, useState } from 'react'\nimport { SafeInteraction } from 'safe-indexer-ts'\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\nimport ModuleTxDetails from './details/ModuleTxDetails'\nimport MultisigTxDetails from './details/MultisigTxDetails'\nimport SettingsTxDetails from './details/SettingsTxDetails'\nimport TransferTxDetails from './details/TransferTxDetails'\nimport SettingsTxSummary from './summary/SettingsTxSummary'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst renderDetails = (interaction?: SafeInteraction): ReactElement => {\n    switch (interaction?.type) {\n        case \"multisig_transaction\":\n            return (<MultisigTxDetails transaction={interaction} />)\n        case \"module_transaction\":\n            return (<ModuleTxDetails transaction={interaction} />)\n        case \"transfer\":\n            return (<TransferTxDetails transaction={interaction} />)\n        case \"settings\":\n            return <SettingsTxDetails transaction={interaction} />\n        default:\n            return (<>\"Unknown details\"</>)\n    }\n}\n\nexport const TxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [debugLink, setDebugLink] = useState<string | undefined>(undefined)\n    const txRepo = useTransactionRepo()\n    const account = useAccount()\n    const [interaction, setInteraction] = useState<SafeInteraction | undefined>(undefined)\n    useEffect(() => {\n        setInteraction(undefined)\n        if (!id) return\n        const loadInteraction = async () => {\n            try {\n                setInteraction(await txRepo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        loadInteraction()\n    }, [id, txRepo, setInteraction, handleClose])\n\n    useEffect(() => {\n        if (!interaction) {\n            setDebugLink(undefined)\n            return\n        }\n        let link = \"https://dashboard.tenderly.co/tx/\"\n        link += account.chainId + \"/\"\n        link += interaction?.txHash\n        setDebugLink(link)\n    }, [interaction, account])\n    return <TxDialog open={!!id} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Transaction Details</DialogTitle>\n        <DialogContent>\n            {renderDetails(interaction)}\n        </DialogContent>\n        <DialogActions>\n            {debugLink && (<Button onClick={() => { window.open(debugLink, \"_blank\") }}>Debug</Button>)}\n            <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default TxDetails","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Callback, SafeInteraction } from 'safe-indexer-ts';\nimport { Button, styled, Typography } from '@mui/material';\nimport { useAccount } from '../Dashboard';\nimport SettingsDialog from '../../settings/SettingsDialog';\nimport TxDetails from './TxDetails';\nimport TxSummary from './TxSummary';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\",\n}))\n\nfunction Transactions() {\n  const account = useAccount()\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [txs, setTxs] = useState<SafeInteraction[]>([])\n  const accountRepo = useTransactionRepo()\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: () => {\n        accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n      }\n    }\n    accountRepo.registerCallback(callback)\n    return () => accountRepo.unregisterCallback(callback)\n  }, [accountRepo, txs, setTxs])\n\n  useEffect(() => {\n    // Reset id if account changes\n    setSelectedId(undefined)\n  }, [account])\n\n  const showDetails = useCallback(async (id) => {\n    setSelectedId(id)\n  }, [setSelectedId])\n\n  useEffect(() => {\n    setTxs([])\n    accountRepo.getAllTxs().then((loaded) => setTxs(loaded))\n  }, [accountRepo, setTxs])\n\n  const details = useMemo(() => {\n    return <TxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      {txs.map((e) => <TxSummary interaction={e} showDetails={(id) => showDetails(id)} />)}\n      {details}\n    </Root>\n  );\n}\n\nexport default Transactions;\n","import { Signer, TypedDataSigner, TypedDataDomain, TypedDataField } from \"@ethersproject/abstract-signer\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"./account\";\n\nexport type SafeSignatureType = \"eip712\" | \"eth_sign\" | \"pre_validated\" | \"contract\"\n\nconst recoverEthSign = (safeTxHash: string, signature: string) => {\n    const hash = ethers.utils.hashMessage(ethers.utils.arrayify(safeTxHash))\n    // TODO: adjust v\n    return ethers.utils.recoverAddress(hash, signature)\n}\n\nconst recoverEIP712 = (safeTxHash: string, signature: string) => {\n    return ethers.utils.recoverAddress(safeTxHash, signature)\n}\n\nconst recoverPreValidated = async (signature: string) => {\n    // TODO: add on-chain check\n    return signature.slice(0, 66)\n}\n\nexport const checkSafeTransactionSignature = async (signature: SafeTransactionSignature) => {\n    let signer;\n    switch (signature.type) {\n        case \"eth_sign\": {\n            signer = recoverEthSign(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"eip712\": {\n            signer = recoverEIP712(signature.safeTxHash, signature.data)\n            break\n        }\n        case \"pre_validated\": {\n            signer = recoverPreValidated(signature.data)\n            break\n        }\n        case \"contract\": {\n            throw Error(\"Contract signatures not supported yet\")\n        }\n        default: {\n            throw Error(\"Unknown signature type\")\n        }\n    }\n    if (signer !== signature.signer) throw Error(`Unexpected signer! Expected ${signature.signer} got ${signer}`)\n}\n\nexport const shareableSignatureString = (signature: SafeTransactionSignature): string => {\n    return `${signature.data}:${signature.signer}:${signature.safeTxHash}:${signature.type}`\n}\n\nconst signatureId = (signatureData: string, safeTxHash: string): string => ethers.utils.keccak256(signatureData + safeTxHash.slice(2))\n\nexport const parseSafeSignature = async (signatureString: string, safeTxHash?: string, sigType?: SafeSignatureType): Promise<SafeTransactionSignature> => {\n    const signatureParts = signatureString.split(\":\")\n    if (\n        (signatureParts.length == 2 && !safeTxHash && !sigType) ||\n        (signatureParts.length == 3 && !sigType) ||\n        signatureParts.length != 4\n    ) {\n        throw Error(\"Missing Safe signature info\")\n    }\n    const data = signatureParts[0]\n    const signer = signatureParts[1]\n    const hash = safeTxHash || signatureParts[2]\n    // TODO: verify signature type\n    const type = sigType || signatureParts[3] as SafeSignatureType\n    const id = signatureId(data, hash)\n    return {\n        id,\n        type,\n        signer,\n        safeTxHash: hash,\n        data\n    }\n}\n\nexport const parseSignatureType = (signature: string): SafeSignatureType => {\n    const sigType = signature.slice(-2)\n    switch(sigType) {\n        case \"00\": {\n            return \"contract\" // contract signature (aka old eip 1271 version)\n        }\n        case \"01\": {\n            return \"pre_validated\" // pre-validated signature\n        }\n        case \"1b\": \n        case \"1c\": {\n            return \"eip712\" // Typed Data based signature\n        }\n        case \"1f\": \n        case \"20\": {\n            return \"eth_sign\" // eth_sign based signature\n        }\n        default: \n            throw Error(\"Unknown signature type\")\n    }\n}\n\nconst getEIP712Domain = (version: string, account: Account): TypedDataDomain => {\n    switch (version) {\n        case \"1.3.0\": {\n            return {\n                verifyingContract: account.address,\n                chainId: account.chainId\n            }\n        }\n        default: {\n            return { verifyingContract: account.address }\n        }\n    }\n}\n\nconst getEIP712TxType = (version: string): Record<string, TypedDataField[]> => {\n    switch (version) {\n        case \"0.1.0\": {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"dataGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n        default: {\n            return {\n                SafeTx: [\n                    { type: \"address\", name: \"to\" },\n                    { type: \"uint256\", name: \"value\" },\n                    { type: \"bytes\", name: \"data\" },\n                    { type: \"uint8\", name: \"operation\" },\n                    { type: \"uint256\", name: \"safeTxGas\" },\n                    { type: \"uint256\", name: \"baseGas\" },\n                    { type: \"uint256\", name: \"gasPrice\" },\n                    { type: \"address\", name: \"gasToken\" },\n                    { type: \"address\", name: \"refundReceiver\" },\n                    { type: \"uint256\", name: \"nonce\" },\n                ]\n            }\n        }\n    }\n}\n\nconst signEip712 = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer._signTypedData(\n        getEIP712Domain(transaction.version, account),\n        getEIP712TxType(transaction.version),\n        transaction\n    )\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEIP712(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    const id = signatureId(signatureString, transaction.id)\n    return {\n        type: \"eip712\",\n        id,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nconst signMessage = async (signer: Signer & TypedDataSigner, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signatureString = await signer.signMessage(arrayify(transaction.id))\n    const signerAddress = await signer.getAddress()\n    const recoveredAddress = recoverEthSign(transaction.id, signatureString)\n    if (recoveredAddress !== signerAddress) {\n        // ToDo: check contract signature\n        throw Error(`Unexpected signer! Expected ${signerAddress} got ${recoveredAddress}`)\n    }\n    const id = signatureId(signatureString, transaction.id)\n    return {\n        type: \"eth_sign\",\n        id,\n        signer: signerAddress,\n        data: signatureString,\n        safeTxHash: transaction.id\n    }\n}\n\nexport const buildPreValidatedSignature = async (signerAddress: string, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    const signature = \"0x000000000000000000000000\" + signerAddress.slice(2) + \"0000000000000000000000000000000000000000000000000000000000000000\" + \"01\"\n    const id = signatureId(signature, transaction.id)\n    return {\n        id,\n        safeTxHash: transaction.id,\n        type: \"pre_validated\",\n        signer: signerAddress,\n        data: signature,\n    }\n}\n\nexport const signQueuedTx = async (signer: Signer & TypedDataSigner, account: Account, transaction: QueuedSafeTransaction): Promise<SafeTransactionSignature> => {\n    try {\n        return await signEip712(signer, account, transaction)\n    } catch (e: any) {\n        if (e.code && e.code === 4001) {\n            console.warn(\"User canceled signing\")\n            throw e\n        }\n        console.warn(\"Could not sign with EIP-712\")\n    }\n    return await signMessage(signer, transaction) \n}","import { arrayify } from \"@ethersproject/bytes\";\nimport { ethers } from \"ethers\";\nimport { QueuedSafeTransaction } from \"../db/interactions\";\nimport { SafeTransactionSignature } from \"../models/transactions\";\nimport { SafeStatus } from \"./safe\";\nimport { buildPreValidatedSignature } from \"./signatures\";\n\nexport const prepareSignatures = async (status: SafeStatus, tx: QueuedSafeTransaction, signatures: SafeTransactionSignature[], submitterAddress?: string): Promise<SafeTransactionSignature[]> => {\n    const signatureMap = new Map<String, SafeTransactionSignature>()\n    for (const signature of signatures) {\n        if (status.owners.indexOf(signature.signer) < 0) continue\n        if (submitterAddress === signature.signer || signatureMap.has(signature.signer)) continue\n        signatureMap.set(signature.signer, signature)\n    }\n    const submitterIsOwner = submitterAddress && status.owners.indexOf(submitterAddress) >= 0\n    const requiredSigntures = submitterIsOwner ? status.threshold.sub(1) : status.threshold\n    if (requiredSigntures.toNumber() > signatureMap.size) throw Error(`Not enough signatures (${signatureMap.size} of ${requiredSigntures})`)\n    const signatureArray = []\n    if (submitterIsOwner) {\n        signatureArray.push(await buildPreValidatedSignature(submitterAddress, tx))\n    }\n    return signatureArray.concat(Array.from(signatureMap.values()).slice(0, requiredSigntures.toNumber()))\n}\n\nconst buildStaticPart = (signature: SafeTransactionSignature, offset: number): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return \"\" +\n                ethers.utils.defaultAbiCoder.encode([\"address\"], [signature.signer]).slice(2) +\n                ethers.utils.defaultAbiCoder.encode([\"uint256\"], [offset]).slice(2) +\n                \"00\"\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return signature.data.slice(2)\n    }\n}\n\nconst buildDynamicPart = (signature: SafeTransactionSignature): string => {\n    // TODO: can we refactor this out\n    switch (signature.type) {\n        case \"contract\":\n            return ethers.utils.defaultAbiCoder.encode([\"bytes\"], [arrayify(signature.data)]).slice(2)\n        case \"eip712\":\n        case \"pre_validated\":\n        case \"eth_sign\":\n            return \"\"\n    }\n}\n\nexport const buildSignatureBytes = (signatures: SafeTransactionSignature[]): string => {\n    signatures.sort((left, right) => left.signer.toLowerCase().localeCompare(right.signer.toLowerCase()))\n    let staticParts = \"\"\n    let dynamicParts = \"\"\n    for (const sig of signatures) {\n        staticParts += buildStaticPart(sig, dynamicParts.length / 2)\n        dynamicParts += buildDynamicPart(sig)\n    }\n    return \"0x\" + staticParts + dynamicParts\n}","import { Contract, PopulatedTransaction } from \"@ethersproject/contracts\";\nimport { safeInterface, SignedSafeTransaction } from \"safe-indexer-ts\";\nimport { ethers, BigNumber, Signer } from \"ethers\";\nimport { SafeTransaction } from \"../models/transactions\";\n\nexport interface SafeStatus {\n    nonce: BigNumber,\n    threshold: BigNumber,\n    owners: string[],\n    version: string\n}\n\nexport class Safe {\n    protected readonly safeContract: Contract\n\n    constructor(address: string, providerOrSigner?: ethers.providers.Provider | Signer) {\n        this.safeContract = new Contract(address, safeInterface, providerOrSigner)\n    }\n\n    writable(signer: Signer): WritableSafe {\n        return new WritableSafe(this.safeContract.address, signer)\n    }\n\n    nonce(): Promise<BigNumber> {\n        return this.safeContract.nonce()\n    }\n\n    owners(): Promise<string> {\n        return this.safeContract.getOwners()\n    }\n\n    async status(): Promise<SafeStatus> {\n        const information = await Promise.all([\n            this.safeContract.nonce(),\n            this.safeContract.getThreshold(),\n            this.safeContract.getOwners(),\n            this.safeContract.VERSION(),\n        ])\n        return {\n            nonce: information[0],\n            threshold: information[1],\n            owners: information[2],\n            version: information[3]\n        }\n    }\n\n    async getTransactionHash(tx: SafeTransaction): Promise<{ hash: string, version: string }> {\n        const hash: string = await this.safeContract.getTransactionHash(\n            tx.to,\n            tx.value,\n            tx.data,\n            tx.operation,\n            tx.safeTxGas,\n            tx.baseGas,\n            tx.gasPrice,\n            tx.gasToken,\n            tx.refundReceiver,\n            tx.nonce\n        )\n        const version: string = await this.safeContract.VERSION()\n        return { hash, version }\n    }\n\n    populateTx(tx: SignedSafeTransaction): Promise<PopulatedTransaction> {\n        return this.safeContract.populateTransaction.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}\n\nexport class WritableSafe extends Safe {\n    constructor(address: string, signer: Signer) {\n        super(address, signer)\n    }\n\n    executeTx(tx: SignedSafeTransaction): Promise<string> {\n        return this.safeContract.execTransaction(\n            tx.to,\n            tx.value, \n            tx.data, \n            tx.operation, \n            tx.safeTxGas, \n            tx.baseGas, \n            tx.gasPrice, \n            tx.gasToken, \n            tx.refundReceiver, \n            tx.signatures\n        )\n    }\n}","import { providers, Signer, BigNumber } from \"ethers\";\nimport { QueuedInteractionsDAO, QueuedSafeTransaction, TxSignaturesDAO } from \"../db/interactions\";\nimport { SafeTransaction, SafeTransactionSignature } from \"../models/transactions\";\nimport { Account } from \"../utils/account\";\nimport { buildSignatureBytes, prepareSignatures } from \"../utils/execution\";\nimport { Safe } from \"../utils/safe\";\n\nexport interface QueueRepositoryUpdates {\n    onNewTx: () => void\n}\n\nexport class QueueRepository {\n    callbacks: Set<QueueRepositoryUpdates> = new Set()\n    queueDao: QueuedInteractionsDAO\n    signaturesDao: TxSignaturesDAO\n    account: Account\n    safe: Safe\n\n    constructor(account: Account, provider?: providers.Provider) {\n        this.account = account\n        this.queueDao = new QueuedInteractionsDAO(account.id)\n        this.signaturesDao = new TxSignaturesDAO(account.id)\n        this.safe = new Safe(account.address, provider)\n    }\n\n    registerCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.add(callback)\n    }\n\n    unregisterCallback(callback: QueueRepositoryUpdates) {\n        this.callbacks.delete(callback)\n    }\n\n    private notifyNewTxs() {\n        this.callbacks.forEach((callback) => { \n            try {\n                callback.onNewTx()\n            } catch (e) {\n                console.log(e)\n            }\n        })\n    }\n\n    async addTx(tx: SafeTransaction): Promise<QueuedSafeTransaction> {\n        const hashInfo = await this.safe.getTransactionHash(tx)\n        const queuedTx = {\n            id: hashInfo.hash,\n            version: hashInfo.version,\n            ...tx\n        }\n        await this.queueDao.add(queuedTx)\n        this.notifyNewTxs()\n        return queuedTx\n    }\n\n    async deleteTx(id: string): Promise<void> {\n        await this.queueDao.remove(id)\n        this.notifyNewTxs()\n    }\n\n    async getTx(hash: string): Promise<QueuedSafeTransaction> {\n        return this.queueDao.get(hash)\n    }\n\n    async getQueuedTxs(): Promise<QueuedSafeTransaction[]> {\n        const nonce = await this.safe.nonce()\n        return this.queueDao.getAll(nonce.toNumber())\n    }\n\n    async getNextNonce(): Promise<string> {\n        const queuedTxs = await this.getQueuedTxs()\n        if (queuedTxs.length > 0) {\n            return BigNumber.from(queuedTxs[queuedTxs.length - 1].nonce).add(1).toString()\n        }\n        return (await this.safe.nonce()).toString()\n    }\n\n    async getSignatures(hash: string): Promise<SafeTransactionSignature[]> {\n        return this.signaturesDao.getAll(hash)\n    }\n\n    async addSignature(signature: SafeTransactionSignature): Promise<void> {\n        await this.signaturesDao.add(signature)\n    }\n\n    async submitTx(tx: QueuedSafeTransaction, submitter: Signer, signatures: SafeTransactionSignature[]): Promise<string> {\n        const writableSafe = this.safe.writable(submitter)\n        const status = await this.safe.status()\n        if (status.nonce.toNumber() !== tx.nonce) throw Error(`Unexpected nonce! Expected ${status.nonce} got ${tx.nonce}`)\n        const submitterAddress = await submitter.getAddress()\n        const signatureBytes = buildSignatureBytes(await prepareSignatures(status, tx, signatures, submitterAddress))\n        const signedTx = {\n            signatures: signatureBytes,\n            ...tx\n        }\n        return writableSafe.executeTx(signedTx)\n    }\n\n}","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { QueueRepository } from \"../../logic/account/QueueRepository\";\nimport { useAccount } from \"../account/Dashboard\";\nimport { useAppSettings } from \"./AppSettingsProvider\";\n\n\nconst QueueRepoContext = React.createContext<QueueRepository | undefined>(undefined);\n\nexport const useQueueRepo = () => {\n    const repo = useContext(QueueRepoContext)\n    if (!repo) throw Error(\"AccountInfoRepository not available!\")\n    return repo\n}\n\nexport const QueueRepositoryProvider: React.FC = ({ children }) => {\n    const account = useAccount()\n    const { loadProvider } = useAppSettings()\n\n    const repo = useMemo(() => {\n        const provider = loadProvider(account.chainId)\n        return new QueueRepository(account, provider)\n    }, [ account, loadProvider ])\n\n    return <QueueRepoContext.Provider value={repo}>\n        { children }\n    </QueueRepoContext.Provider>\n}\n\nexport default QueueRepositoryProvider","import React from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\n\nexport interface Props {\n    transaction: QueuedSafeTransaction,\n    showDetails?: (id: string) => void\n}\nexport const QueuedTxSummary: React.FC<Props> = ({ transaction, showDetails }) => {\n    return <div onClick={() => showDetails?.(transaction.id)}>\n        {transaction.to}<br />\n        {transaction.nonce} - {transaction.version} - {transaction.id.slice(0, 10)}<br />\n    </div>\n}\n\nexport default QueuedTxSummary","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useState } from 'react'\nimport { parseSafeSignature } from '../../../logic/utils/signatures'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    safeTxHash?: string\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const AddSignatureDialog: React.FC<Props> = ({ safeTxHash, open, handleClose, handleNewSignature }) => {\n    const [signatureString, setSignatureString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n\n    const handleAdd = async () => {\n        if (!safeTxHash) return\n        try {\n            const signature = await parseSafeSignature(signatureString, safeTxHash)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n            setSignatureString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Add Signature</DialogTitle>\n        <DialogContent>\n            <TextField label=\"Signature\" onChange={(e) => setSignatureString(e.target.value)} value={signatureString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleAdd}>Add</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default AddSignatureDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { parseSafeSignature, signQueuedTx } from '../../../logic/utils/signatures'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleNewSignature?: () => void\n}\n\nexport const SignTransactionDialog: React.FC<Props> = ({ transaction, open, handleClose, handleNewSignature }) => {\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n    const { signer, safeSigner } = useAppSettings()\n\n    const handleSign = async () => {\n        if (!open || !transaction || !signer) return\n        try {\n            const { signerAddress } = await safeSigner.status()\n            if (!signerAddress) throw Error(\"No accounts available\")\n            const signature = await signQueuedTx(signer, account, transaction)\n            await queuedRepo.addSignature(signature)\n            handleNewSignature?.()\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleSign()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Sign Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default SignTransactionDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useEffect } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useAppSettings } from '../../provider/AppSettingsProvider'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    transaction?: QueuedSafeTransaction\n    handleClose: () => void\n    handleTxSubmitted?: (ethereumTxHash: string) => void\n}\n\nexport const ExecuteTxDialog: React.FC<Props> = ({ transaction, open, handleClose, handleTxSubmitted }) => {\n    const queuedRepo = useQueueRepo()\n    const { signer, safeSigner } = useAppSettings()\n\n    const handleExecution = async () => {\n        // TODO: show error for signer\n        if (!open || !transaction || !signer) return\n        try {\n            const { signerAddress } = await safeSigner.status()\n            if (!signerAddress) throw Error(\"No accounts available\")\n            const signatures = await queuedRepo.getSignatures(transaction.id)\n            const ethereumTxHash = await queuedRepo.submitTx(transaction, signer, signatures)\n            handleTxSubmitted?.(ethereumTxHash)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        handleExecution()\n    }, [open, transaction])\n\n    return <TxDialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n    <DialogTitle>Execute Transaction</DialogTitle>\n        <DialogContent>\n            Check for wallet for signing information\n        </DialogContent>\n        <DialogActions>\n        <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ExecuteTxDialog","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@mui/material'\nimport { styled } from '@mui/system'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Entry, Group, Header, LongText } from '../../../styled/tables';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { SafeTransactionSignature } from '../../../logic/models/transactions';\nimport AddSignatureDialog from './AddSignatureDialog';\nimport SignTransactionDialog from './SignTransactionDialog';\nimport ExecuteTxDialog from './ExecuteTxDialog';\nimport { shareableSignatureString } from '../../../logic/utils/signatures';\nimport { copyToClipboard, useDektopLayout } from '../../utils/media';\nimport TxData from '../../utils/TxData';\nimport { useAccount } from '../Dashboard';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport { Safe } from '../../../logic/utils/safe';\nimport { buildSignatureBytes, prepareSignatures } from '../../../logic/utils/execution';\nimport { PopulatedTransaction } from '@ethersproject/contracts';\nimport AddressInfo from '../../utils/AddressInfo';\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    id?: string,\n    handleClose: () => void\n}\n\nconst shareSignature = (sig: SafeTransactionSignature) => {\n    const shareText = shareableSignatureString(sig)\n    copyToClipboard(shareText, \"Signature copied to clipboard!\")\n}\n\nexport const QueuedTxDetails: React.FC<Props> = ({ id, handleClose }) => {\n    const [simulateLink, setSimulateLink] = useState<string | undefined>(undefined)\n    const [showAddSignature, setShowAddSignature] = useState(false)\n    const [showSignTransaction, setShowSignTransaction] = useState(false)\n    const [showExecuteTransaction, setShowExecuteTransaction] = useState(false)\n    const repo = useQueueRepo()\n    const account = useAccount()\n    const { signer } = useAppSettings()\n\n    const deleteTx = useCallback(async(id?: string) => {\n        if (!id) return\n        try {\n            await repo.deleteTx(id)\n            handleClose()\n        } catch (e) {\n            console.error(e)\n        }\n    }, [repo, handleClose])\n\n    const [transaction, setTransaction] = useState<QueuedSafeTransaction | undefined>(undefined)\n    useEffect(() => {\n        setTransaction(undefined)\n        if (!id) return\n        const load = async () => {\n            try {\n                setTransaction(await repo.getTx(id))\n            } catch {\n                handleClose()\n            }\n        }\n        load()\n    }, [id, repo, setTransaction, handleClose])\n\n    const [signatures, setSignatures] = useState<SafeTransactionSignature[] | undefined>(undefined)\n    const loadSignatures = useCallback(async () => {\n        console.log(\"Load Signatures\")\n        if (!id) return\n        try {\n            setSignatures(await repo.getSignatures(id))\n        } catch (e) {\n            console.error(e)\n        }\n    }, [id, repo, setSignatures])\n    useEffect(() => {\n        setSignatures(undefined)\n        loadSignatures()\n    }, [loadSignatures])\n    useEffect(() => {\n        if (!transaction || transaction.operation !== 0) {\n            setSimulateLink(undefined)\n            return\n        }\n        (async () => {\n            let populatedTx: PopulatedTransaction | undefined\n            if (signer && signatures) {\n                try {\n                    const submitterAddress = await signer.getAddress()\n                    const safe = new Safe(account.address, signer)\n                    const status = await safe.status()\n                    const signatureBytes = buildSignatureBytes(await prepareSignatures(status, transaction, signatures, submitterAddress))\n                    populatedTx = await safe.populateTx({\n                        signatures: signatureBytes,\n                        ...transaction\n                    })\n                    populatedTx.from = submitterAddress\n                } catch (e) {\n                    console.error(e)\n                }\n            }\n            try {\n                let link = \"https://dashboard.tenderly.co/simulator/new?\"\n                link += \"network=\" + account.chainId + \"&\"\n                if (populatedTx) {\n                    link += \"from=\" + populatedTx.from + \"&\"\n                    link += \"contractAddress=\" + populatedTx.to + \"&\"\n                    link += \"rawFunctionInput=\" + populatedTx.data + \"&\"\n                    link += \"value=\" + BigNumber.from(populatedTx.value || \"0\").toString() + \"&\"\n                } else {\n                    link += \"from=\" + account.address + \"&\"\n                    link += \"contractAddress=\" + transaction.to + \"&\"\n                    link += \"rawFunctionInput=\" + transaction.data + \"&\"\n                    link += \"value=\" + BigNumber.from(transaction.value).toString() + \"&\"\n                }\n                setSimulateLink(link)\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [transaction, account, signer, repo, signatures])\n    return <>\n        <TxDialog open={!!id && !showAddSignature} onClose={handleClose} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n            <DialogTitle>Transaction Details</DialogTitle>\n            <DialogContent>\n                {transaction ? (\n                    <Group>\n                        <Header>Id:</Header>\n                        <Entry>\n                            <LongText>{transaction.id}</LongText>\n                        </Entry>\n                        <Header>Operation:</Header>\n                        <Entry>\n                            <Typography>{transaction.operation}</Typography>\n                        </Entry>\n                        <Header>To:</Header>\n                        <Entry>\n                            <AddressInfo address={transaction.to} />\n                        </Entry>\n                        <Header>Value:</Header>\n                        <Entry>\n                            <Typography>{transaction.value}</Typography>\n                        </Entry>\n                        <Header>Data:</Header>\n                        <TxData data={transaction.data} />\n                        <Header>Nonce:</Header>\n                        <Entry>\n                            <LongText>{transaction.nonce}</LongText>\n                        </Entry>\n                        <Header>Signatures:</Header>\n                        {signatures?.map((sig) => (<Entry>\n                            <AddressInfo onClick={() => { shareSignature(sig) }} address={sig.signer} />\n                        </Entry>))}\n                        <Button onClick={() => setShowSignTransaction(true)}>Sign</Button>\n                        <Button onClick={() => setShowAddSignature(true)}>Add</Button>\n                        <Button onClick={() => setShowExecuteTransaction(true)}>Execute</Button>\n                        <Button onClick={() => deleteTx(id)} color=\"error\">Delete Tx</Button>\n                    </Group>\n                ) : (\n                    <>\"Unknown details\"</>\n                )}\n            </DialogContent>\n            <DialogActions>\n                {simulateLink && (<Button onClick={() => { window.open(simulateLink, \"_blank\") }}>Simulate</Button>)}\n                <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </TxDialog>\n        <AddSignatureDialog open={showAddSignature} handleClose={() => setShowAddSignature(false)} handleNewSignature={loadSignatures} safeTxHash={id} />\n        <SignTransactionDialog open={showSignTransaction} handleClose={() => setShowSignTransaction(false)} handleNewSignature={loadSignatures} transaction={transaction} />\n        <ExecuteTxDialog open={showExecuteTransaction} handleClose={() => setShowExecuteTransaction(false)} handleTxSubmitted={handleClose} transaction={transaction} />\n    </>\n}\n\nexport default QueuedTxDetails","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\nimport { styled } from '@mui/system'\nimport { ethers, BigNumber } from 'ethers'\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions'\nimport { SafeTransaction, MetaTransaction } from '../../../logic/models/transactions'\nimport { buildTx } from '../../../logic/utils/proposing'\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider'\nimport { useDektopLayout } from '../../utils/media'\nimport { useAccount } from '../Dashboard'\n\nconst TxDialog = styled(Dialog)(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport interface Props {\n    open: boolean\n    handleClose: () => void\n    onConfirm: (tx: QueuedSafeTransaction, requestId?: string) => void\n    onReject?: (message: string, requestId?: string) => void\n    transactions?: MetaTransaction[]\n    requestId?: string\n}\n\nexport const ProposeTxs: React.FC<Props> = ({ open, handleClose, onConfirm, onReject, requestId, transactions }) => {\n    const [toString, setToString] = useState(\"\")\n    const [valueString, setValueString] = useState(\"\")\n    const [dataString, setDataString] = useState(\"\")\n    const [operationString, setOperationString] = useState(\"\")\n    const [nonceString, setNonceString] = useState(\"\")\n    const queuedRepo = useQueueRepo()\n    const account = useAccount()\n\n    useEffect(() => {\n        if (!open) return\n        (async () => {\n            try {\n                setNonceString(await queuedRepo.getNextNonce())\n            } catch (e) {\n                console.error(e)\n            }\n        })()\n    }, [queuedRepo, open])\n\n    useEffect(() => {\n        const defaultTx = buildTx(account, transactions)\n        setToString(defaultTx.to)\n        setValueString(defaultTx.value)\n        setDataString(defaultTx.data)\n        setOperationString(defaultTx.operation.toString())\n    }, [account, transactions])\n\n    const cancelCreation = () => {\n        onReject?.(\"Canceled\", requestId)\n        handleClose()\n    }\n\n    const handleCreate = async () => {\n        try {\n            if (dataString && !ethers.utils.isHexString(dataString)) throw Error(\"Invalid data\")\n            const tx: SafeTransaction = {\n                to: ethers.utils.getAddress(toString),\n                value: BigNumber.from(valueString).toString(),\n                data: dataString || \"0x\",\n                nonce: parseInt(nonceString),\n                operation: parseInt(operationString),\n                safeTxGas: \"0\",\n                baseGas: \"0\",\n                gasPrice: \"0\",\n                gasToken: ethers.constants.AddressZero,\n                refundReceiver: ethers.constants.AddressZero,\n            }\n            const queuedTx = await queuedRepo.addTx(tx)\n            onConfirm(queuedTx, requestId)\n            handleClose()\n            setToString(\"\")\n            setValueString(\"\")\n            setDataString(\"\")\n            setOperationString(\"\")\n            setNonceString(\"\")\n        } catch (e) {\n            console.error(e)\n        }\n    }\n    return <TxDialog open={open} onClose={cancelCreation} maxWidth=\"md\" fullWidth fullScreen={!useDektopLayout()}>\n        <DialogTitle>Add Tx</DialogTitle>\n        <DialogContent>\n            <TextField label=\"To\" onChange={(e) => setToString(e.target.value)} value={toString} fullWidth /><br />\n            <TextField label=\"Value\" onChange={(e) => setValueString(e.target.value)} value={valueString} fullWidth /><br />\n            <TextField label=\"Data\" onChange={(e) => setDataString(e.target.value)} value={dataString} fullWidth /><br />\n            <TextField label=\"Operation\" onChange={(e) => setOperationString(e.target.value)} value={operationString} fullWidth /><br />\n            <TextField label=\"Nonce\" onChange={(e) => setNonceString(e.target.value)} value={nonceString} fullWidth /><br />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={cancelCreation}>Cancel</Button>\n          <Button onClick={handleCreate} color=\"primary\">Create</Button>\n        </DialogActions>\n    </TxDialog>\n}\n\nexport default ProposeTxs","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Button, styled } from '@mui/material';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\nimport { useQueueRepo } from '../../provider/QueueRepositoryProvider';\nimport QueuedTxSummary from './QueuedTxSummary';\nimport QueuedTxDetails from './QueuedTxDetails';\nimport { useTransactionRepo } from '../../provider/TransactionRepositoryProvider';\nimport { Callback } from 'safe-indexer-ts';\nimport { QueueRepositoryUpdates } from '../../../logic/account/QueueRepository';\nimport ProposeTxs from './ProposeTxsDialog';\n\nconst Root = styled('div')(({ theme }) => ({\n  textAlign: \"center\"\n}))\n\nfunction Queue() {\n  const [showNewTxDialog, setShowNewTxDialog] = useState<boolean>(false)\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined)\n  const [ququedTxs, setQueuedTxs] = useState<QueuedSafeTransaction[]>([])\n  const queueRepo = useQueueRepo()\n  const txRepo = useTransactionRepo()\n\n  const loadQueuedTxs = useCallback(async () => {\n    try {\n      setQueuedTxs(await queueRepo.getQueuedTxs())\n    } catch (e) {\n      console.error(e)\n    }\n  }, [queueRepo, setQueuedTxs])\n\n  useEffect(() => {\n    const callback: Callback = {\n      onNewInteractions: loadQueuedTxs\n    }\n    txRepo.registerCallback(callback)\n    return () => txRepo.unregisterCallback(callback)\n  }, [txRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    const callback: QueueRepositoryUpdates = {\n      onNewTx: loadQueuedTxs\n    }\n    queueRepo.registerCallback(callback)\n    return () => queueRepo.unregisterCallback(callback)\n  }, [queueRepo, loadQueuedTxs])\n\n  useEffect(() => {\n    loadQueuedTxs()\n  }, [loadQueuedTxs])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={showNewTxDialog} handleClose={() => setShowNewTxDialog(false)} onConfirm={() => loadQueuedTxs() } />\n  }, [showNewTxDialog, setShowNewTxDialog])\n\n  const details = useMemo(() => {\n    return <QueuedTxDetails id={selectedId} handleClose={() => setSelectedId(undefined)} />\n  }, [selectedId, setSelectedId])\n\n  return (\n    <Root>\n      <hr />\n      <Button onClick={() => setShowNewTxDialog(true)}>Add Transaction</Button>\n      {ququedTxs.map((tx) => <QueuedTxSummary transaction={tx} showDetails={(id) => setSelectedId(id)} />)}\n      {creation}\n      {details}\n    </Root>\n  );\n}\n\nexport default Queue;\n","export const defaultApps: AppOption[] = [\n    {\n        title: \"Balances\",\n        url: \"https://rimeissner.dev/sapp-balances/\"\n    },\n    {\n        title: \"WalletConnect\",\n        url: \"https://apps.gnosis-safe.io/wallet-connect\"\n    },\n    {\n        title: \"ENS\",\n        url: \"https://app.ens.domains/\"\n    }\n].map((entry) => {return {\n    section: \"Default\",\n    ...entry\n}})\n\nexport interface AppOption {\n    section: string,\n    title: string,\n    url: string\n}","import { Account } from \"../utils/account\";\nimport { AbstractDAO, AbstractDB } from \"./base\";\n\nexport const ACCOUNTS_STORE = \"accounts\"\nexport const ACCOUNTS_KEY = \"id\"\nexport const ACCOUNTS_INDEX = \"timestamp\"\n\nexport const APP_URLS_STORE = \"app_urls\"\nexport const APP_URLS_KEY = \"id\"\nexport const APP_URLS_INDEX = \"timestamp\"\n\nexport interface StoredAccount extends Account {\n    timestamp: number\n}\n\nexport interface StoredAppUrls {\n    id: string,\n    timestamp: number\n}\n\nexport class AppDB extends AbstractDB {\n    constructor() {\n        super(\"app_state\", 2, (db, oldVersion) => {\n            if (oldVersion < 1) {\n                const store = db.createObjectStore(ACCOUNTS_STORE, { keyPath: ACCOUNTS_KEY })\n                store.createIndex(ACCOUNTS_INDEX, ACCOUNTS_INDEX, { unique: false })\n            }\n            if (oldVersion < 2) {\n                const store = db.createObjectStore(APP_URLS_STORE, { keyPath: APP_URLS_KEY })\n                store.createIndex(APP_URLS_INDEX, APP_URLS_INDEX, { unique: false })\n            }\n        });\n    }\n}\n\nexport class AccountsDAO extends AbstractDAO<StoredAccount> {\n    constructor() {\n        super(new AppDB(), ACCOUNTS_STORE)\n    }\n\n    getAll(): Promise<StoredAccount[]> {\n        return this.getAllByIndex(ACCOUNTS_INDEX)\n    }\n}\n\nexport class AppUrlsDAO extends AbstractDAO<StoredAppUrls> {\n    constructor() {\n        super(new AppDB(), APP_URLS_STORE)\n    }\n\n    getAll(): Promise<StoredAppUrls[]> {\n        return this.getAllByIndex(APP_URLS_INDEX)\n    }\n}\n","import React, { useState } from 'react'\nimport { grey } from '@mui/material/colors';\nimport { Group } from '../../styled/tables';\nimport { Box, styled } from '@mui/system';\nimport { SwipeableDrawer, Typography } from '@mui/material';\n\n\nconst Sidebar = styled(Group)(({ theme }) => ({\n    height: \"100vh\",\n    width: \"400px\",\n    overflowY: \"scroll\"\n}))\n\nconst StyledBox = styled(Box)(({ theme }) => ({\n    backgroundColor: theme.palette.mode === 'light' ? '#fff' : grey[800],\n}));\n\nconst Puller = styled(Box)(({ theme }) => ({\n    width: 30,\n    height: 6,\n    backgroundColor: theme.palette.mode === 'light' ? grey[300] : grey[900],\n    borderRadius: 3,\n    position: 'absolute',\n    top: 8,\n    left: 'calc(50% - 15px)',\n}));\n\nexport const drawerBleeding = 64\n\nexport const ResponsiveSidebar: React.FC<{ isDesktop: boolean, header?: (expanded: boolean) => React.ReactNode }> = ({ isDesktop, children, header }) => {\n    const [open, setOpen] = useState(true);\n\n    const toggleDrawer = (newOpen: boolean) => () => {\n        setOpen(newOpen);\n    };\n\n    if (!isDesktop) {\n        return (<SwipeableDrawer\n            id=\"transaction_drawer\"\n            anchor=\"bottom\"\n            open={open}\n            onClose={toggleDrawer(false)}\n            onOpen={toggleDrawer(true)}\n            swipeAreaWidth={drawerBleeding}\n            disableSwipeToOpen={false}\n            ModalProps={{\n                keepMounted: true,\n            }}\n            sx={{\n                '& > .MuiPaper-root': {\n                    height: `calc(90% - ${drawerBleeding}px)`,\n                    overflow: 'visible',\n                    },\n            }}\n        >\n            <StyledBox\n                sx={{\n                    position: 'absolute',\n                    top: -drawerBleeding,\n                    height: drawerBleeding,\n                    borderTopLeftRadius: 8,\n                    borderTopRightRadius: 8,\n                    visibility: 'visible',\n                    right: 0,\n                    left: 0,\n                    justifyContent: 'center',\n                    display: 'flex',\n                    alignItems: 'center'\n                }}\n            >\n                <Puller />\n                {header?.(open)}\n            </StyledBox>\n            <StyledBox\n                sx={{\n                    px: 2,\n                    pb: 2,\n                    height: '100%',\n                    overflow: 'auto',\n                }}\n            >\n                {children}\n            </StyledBox>\n        </SwipeableDrawer>)\n    }\n    return (<Sidebar>\n        {header?.(true)}\n        {children}\n    </Sidebar>)\n}","export const chainIdToNetwork: Record<number, string> = {\n    1: \"MAINNET\",\n    2: \"MORDEN\",\n    3: \"ROPSTEN\",\n    4: \"RINKEBY\",\n    5: \"GOERLI\",\n    42: \"KOVAN\",\n    56: \"BSC\",\n    100: \"XDAI\",\n    137: \"POLYGON\",\n    246: \"ENERGY_WEB_CHAIN\",\n    4447: \"LOCAL\",\n    73799: \"VOLTA\",\n}","import {\n    getSDKVersion,\n    SDKMessageEvent,\n    MethodToResponse,\n    Methods,\n    SafeInfo,\n    MessageFormatter,\n    RequestId,\n    BaseTransaction,\n    RPCPayload\n} from '@gnosis.pm/safe-apps-sdk'\nimport {\n    providers\n} from 'ethers'\nimport { Account } from '../utils/account'\nimport { chainIdToNetwork } from '../utils/chainIdToNetwork'\n\ntype LegacyMethods = 'getEnvInfo'\ntype SDKMethods = Methods | LegacyMethods\n\nexport interface MessageHandlers {\n    onTransactionProposal: (transactions: BaseTransaction[], requestId: RequestId) => void\n}\n\nexport class FrameCommunicator {\n    provider?: providers.JsonRpcProvider\n    constructor(\n        readonly frame: React.RefObject<HTMLIFrameElement>,\n        readonly appUrl: string,\n        readonly info: Account,\n        readonly handlers: MessageHandlers\n    ) { }\n\n    handleMessage(\n        method: SDKMethods,\n        params: unknown,\n        requestId: RequestId\n    ) {\n        if (!method) {\n            console.error('ThirdPartyApp: A message was received without message id.')\n            return\n        }\n        console.log(`Received ${method} with ${JSON.stringify(params)}`)\n\n        switch (method) {\n            case 'sendTransactions': {\n                if (params) {\n                    this.handlers.onTransactionProposal(\n                        // @ts-expect-error explore ways to fix this\n                        params.txs as Transaction[],\n                        requestId,\n                    )\n                }\n                break\n            }\n\n            case 'getEnvInfo': {\n                this.sendResponse({ txServiceUrl: \"\" }, requestId)\n                break\n            }\n\n            case 'getSafeInfo': {\n                this.sendResponse({\n                    safeAddress: this.info.address,\n                    chainId: this.info.chainId,\n                    network: chainIdToNetwork[this.info.chainId],\n                }, requestId)\n                break\n            }\n\n            case 'rpcCall': {\n                const payload = params as RPCPayload\n                const communicator = this\n                try {\n                    this.provider!!.send(payload.call, payload.params).then(\n                        (resp: any) => {\n                            communicator.sendResponse(resp, requestId)\n                        }, (err: any) => {\n                            communicator.sendError(err, requestId)\n                        }\n                    )\n                } catch (err: any) {\n                    communicator.sendError(err.toString(), requestId)\n                }\n                break\n            }\n\n            default: {\n                console.error(`ThirdPartyApp: A message was received with an unknown method ${method}.`)\n                this.sendError(`Unknown method ${method}.`, requestId)\n                break\n            }\n        }\n    }\n\n    onMessage(message: SDKMessageEvent) {\n        if (message.source === window) {\n            return\n        }\n        if (!this.appUrl.includes(message.origin)) {\n            console.error(`ThirdPartyApp: A message was received from an unknown origin ${message.origin}`)\n            return\n        }\n        this.handleMessage(message.data.method, message.data.params, message.data.id)\n    }\n\n    sendResponse(\n        data: MethodToResponse[Methods],\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeResponse(requestId, data, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    sendError(\n        error: string,\n        requestId: RequestId\n    ) {\n        const frameWindow = this.frame.current?.contentWindow\n        if (!frameWindow) return\n        const sdkVersion = getSDKVersion()\n        const msg = MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n        frameWindow.postMessage(msg, this.appUrl)\n    }\n\n    connect(defaultWindow?: Window): (() => void) | undefined {\n        const eventWindow = defaultWindow || this.frame.current?.contentWindow\n        if (!eventWindow) return\n        const callback = (ev: MessageEvent<any>) => { this.onMessage(ev) }\n        eventWindow.addEventListener('message', callback)\n        return () => {\n            eventWindow.removeEventListener('message', callback)\n        }\n    }\n}","import { useCallback, useEffect, useMemo, useState, useRef } from 'react';\nimport { CircularProgress, styled } from '@mui/material';\nimport { FrameCommunicator } from '../../../logic/apps/connector';\nimport {\n  RequestId,\n  BaseTransaction\n} from '@gnosis.pm/safe-apps-sdk'\nimport { useAccount } from '../Dashboard';\nimport { useAppSettings } from '../../provider/AppSettingsProvider';\nimport ProposeTxs from '../queue/ProposeTxsDialog';\nimport { QueuedSafeTransaction } from '../../../logic/db/interactions';\n\nconst AppFrame = styled('iframe')(({ theme }) => ({\n  width: \"100%\",\n  height: \"100%\",\n  border: 0\n}))\n\ninterface ProposalParams {\n    transactions: BaseTransaction[]\n    requestId: RequestId\n}\n\nexport interface Props {\n  appUrl: string\n}\n\nconst AppWindow: React.FC<Props> = ({ appUrl }) =>  {\n  const account = useAccount()\n  const { loadProvider } = useAppSettings()\n  const [loading, setLoading] = useState<boolean>(false)\n  const [proposalParams, setProposalParams] = useState<ProposalParams | undefined>(undefined)\n  const appFrame = useRef<HTMLIFrameElement>(null)\n  const communicator: FrameCommunicator = useMemo(() => {\n    return new FrameCommunicator(appFrame, appUrl, account, {\n      onTransactionProposal: (transactions, requestId) => {\n        if (transactions.length == 0) return\n        if (document.hidden) {\n          window.alert(\"New transaction\")\n        }\n        setProposalParams({ transactions, requestId })\n      }\n    })\n  }, [account, appFrame, appUrl, setProposalParams])\n\n  useEffect(() => {\n    communicator.provider = loadProvider(account.chainId)\n  }, [communicator, account, loadProvider])\n\n  const handleTransactionConfirmation = useCallback(async (tx: QueuedSafeTransaction, requestId?: string) => {\n    console.log(\"handleTransactionConfirmation\", tx, requestId)\n    communicator.sendResponse({ safeTxHash: tx.id }, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  const handleTransactionRejection = useCallback(async (message: string, requestId?: string) => {\n    console.log(\"handleTransactionRejection\", message, requestId)\n    communicator.sendError(message, requestId || \"\")\n  }, [communicator, setProposalParams])\n\n  useEffect(() => {\n    return communicator.connect(window)\n  }, [communicator])\n\n  const creation = useMemo(() => {\n    return <ProposeTxs open={!!proposalParams}\n      transactions={proposalParams?.transactions?.map((tx) => {\n        return {\n          ...tx,\n          operation: 0\n        }\n      })}\n      requestId={proposalParams?.requestId}\n      onReject={handleTransactionRejection}\n      onConfirm={handleTransactionConfirmation}\n      handleClose={() => setProposalParams(undefined) } />\n  }, [proposalParams, handleTransactionRejection, handleTransactionConfirmation])\n\n  if (loading) return (<CircularProgress />)\n  return (\n    <>\n      <AppFrame ref={appFrame} src={appUrl} />\n      {creation}\n    </>\n  );\n}\n\nexport default AppWindow;\n","import { Autocomplete, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport { useState, useMemo, useEffect } from 'react';\nimport { AppOption, defaultApps } from '../../../logic/apps/appList';\nimport { AppUrlsDAO } from '../../../logic/db/app';\nimport { Group, Row } from '../../../styled/tables';\nimport { useDektopLayout } from '../../utils/media';\nimport { drawerBleeding } from '../ResponsiveSidebar';\nimport AppWindow from './AppWindow';\n\nconst Root = styled(Group)(({ theme }) => ({\n}))\n\nfunction Apps() {\n  const appUrlsDao = useMemo(() => new AppUrlsDAO(), [])\n  const [appUrl, setAppUrl] = useState(defaultApps[0].url)\n  const [appUrlError, setAppUrlError] = useState(\"\")\n  const [appUrlInput, setAppUrlInput] = useState(appUrl)\n  const [appUrlsHistory, setAppUrlsHistory] = useState<AppOption[]>([])\n  const isDesktop = useDektopLayout()\n\n  useEffect(() => {\n    (async () => {\n      const appHistory = (await appUrlsDao.getAll()).map(appUrl => {\n        return {\n          section: \"History\",\n          title: appUrl.id,\n          url: appUrl.id\n        }\n      })\n      setAppUrlsHistory(defaultApps.concat(appHistory))\n    })()\n  }, [setAppUrlsHistory, appUrl])\n\n  const handleInputChange = (input: string | AppOption | null, openUrl?: boolean) => {\n    let newValue: string\n    if (!input) {\n      newValue = \"\"\n    } else if (typeof input === \"string\") {\n      newValue = input\n    } else {\n      newValue = input.url\n    }\n    setAppUrlInput(newValue)\n    setAppUrlError(\"\")\n\n    if (openUrl) {\n      openAppUrl(newValue)\n    }\n  }\n\n  const openAppUrl = async (appUrl: string) => {\n    let cleanUrl = appUrl.trim()\n    if (cleanUrl.length === 0) {\n      setAppUrlError(\"Empty App Url is not allowed\")\n      return\n    }\n    if (!cleanUrl.startsWith(\"http\")) {\n      cleanUrl = \"https://\" + cleanUrl\n    }\n    await appUrlsDao.add({ id: cleanUrl, timestamp: new Date().getTime() })\n    setAppUrl(cleanUrl)\n  }\n  const marginBottom = isDesktop ? 0 : drawerBleeding;\n  return (\n    <Root sx={{\n      textAlign: \"center\",\n      width: `100vw`,\n      height: `calc(100vh - ${marginBottom}px)`\n    }}>\n      <Row>\n        <Autocomplete\n          id=\"free-solo-demo\"\n          freeSolo\n          fullWidth\n          options={appUrlsHistory}\n          defaultValue={defaultApps[0]}\n          groupBy={(option) => option.section}\n          getOptionLabel={(option: AppOption | string) => {\n            if (typeof option === \"string\") return option\n            return option.title\n          }}\n          onChange={(e, newValue) => handleInputChange(newValue, !!newValue && newValue !== \"\")}\n          renderInput={(params) =>\n            <TextField\n              {...params}\n              label=\"App Url\"\n              value={appUrlInput}\n              error={!!appUrlError}\n              helperText={appUrlError}\n              variant=\"filled\"\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          }\n        />\n      </Row>\n      <AppWindow appUrl={appUrl} />\n    </Root>\n  );\n}\n\nexport default Apps;\n","import { Button, Dialog, DialogContent, DialogTitle, Switch, TextField, Typography } from '@mui/material'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Callback } from 'safe-indexer-ts'\nimport { Group, Row } from '../../styled/tables'\nimport { useAppSettings } from '../provider/AppSettingsProvider'\nimport { useTransactionRepo } from '../provider/TransactionRepositoryProvider'\n\nexport interface Props {\n    open: boolean,\n    handleClose: () => void,\n    reindex?: () => void,\n}\n\nexport const SettingsDialog: React.FC<Props> = ({ open, reindex, handleClose }) => {\n    const {\n        useCustomRpc, toggleCustomRpc,\n        customRpc, updateCustomRpc,\n        networkConfig, updateNetworkConfig,\n        infuraToken, updateInfuraToken\n    } = useAppSettings()\n    const [status, setStatus] = useState<string>(\"\")\n    const txRepo = useTransactionRepo()\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: () => { },\n            onStatusUpdate: (update) => {\n                switch (update.type) {\n                    case \"up_to_date\":\n                        setStatus(`Up to date with block ${update.latestBlock}`)\n                        break;\n                    case \"processing\":\n                        setStatus(`Indexing block ${update.fromBlock}/${update.latestBlock}`)\n                        break;\n                    case \"aborted\":\n                        setStatus(`Indexing aborted: ${update.reason}`)\n                        break;\n                    default:\n                        setStatus(\"\")\n                        break;\n                }\n            }\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, setStatus])\n\n    const updateStartingBlock = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: parseInt(value),\n                maxBlocks: networkConfig.maxBlocks\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    const updateMaxBlocks = useCallback((value: string) => {\n        try {\n            updateNetworkConfig({\n                startingBlock: networkConfig.startingBlock,\n                maxBlocks: parseInt(value)\n            })\n        } catch (e) {\n            console.error(e)\n        }\n    }, [networkConfig, updateNetworkConfig])\n\n    return <Dialog open={open} onClose={handleClose} maxWidth=\"xs\" fullWidth>\n        <DialogTitle>Settings</DialogTitle>\n        <DialogContent>\n            <Group>\n                <Typography variant=\"caption\">Status</Typography>\n                {status}\n                <br /><br />\n                <Typography variant=\"caption\">App Settings</Typography>\n                <Row sx={{ alignItems: 'center' }}>\n                    Use custom prc endpoint <Switch checked={useCustomRpc} onChange={(_, checked) => toggleCustomRpc(checked)} /><br />\n                </Row>\n                <TextField label=\"RPC\" onChange={(e) => updateCustomRpc(e.target.value)} value={customRpc} fullWidth /><br />\n                <TextField label=\"Infura Token\" onChange={(e) => updateInfuraToken(e.target.value)} value={infuraToken} fullWidth /><br />\n                <TextField label=\"Intital block\" onChange={(e) => updateStartingBlock(e.target.value)} value={networkConfig.startingBlock} fullWidth /><br />\n                <TextField label=\"Max blocks\" onChange={(e) => updateMaxBlocks(e.target.value)} value={networkConfig.maxBlocks} fullWidth /><br />\n                {\n                    !!reindex && (<>\n                        <Typography variant=\"caption\">Account Settings</Typography><br />\n                        <Button onClick={() => reindex()}>Reindex</Button><br />\n                    </>)\n                }\n            </Group>\n        </DialogContent>\n    </Dialog>\n}\n\nexport default SettingsDialog","import { Typography } from \"@mui/material\"\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useAccount } from \"../Dashboard\"\nimport makeBlockie from 'ethereum-blockies-base64';\nimport { styled } from \"@mui/system\";\nimport { Group, Row } from \"../../../styled/tables\";\nimport { shortAddress } from \"../../../logic/utils/address\";\nimport { Settings } from \"@mui/icons-material\";\nimport SettingsDialog from \"../../settings/SettingsDialog\";\nimport { useTransactionRepo } from \"../../provider/TransactionRepositoryProvider\";\nimport { useQueueRepo } from \"../../provider/QueueRepositoryProvider\";\nimport { Callback } from \"safe-indexer-ts\";\nimport { QueueRepositoryUpdates } from \"../../../logic/account/QueueRepository\";\nimport { useCopyAddress } from \"../../utils/media\";\n\nconst theme = {\n    identicon: {\n        size: {\n            xs: '10px',\n            sm: '16px',\n            md: '32px',\n            lg: '40px',\n            xl: '48px',\n            xxl: '60px',\n        },\n    },\n}\n\ntype Theme = typeof theme;\ntype ThemeIdenticonSize = keyof Theme['identicon']['size'];\n\nconst StyledImg = styled('img')<{ size: ThemeIdenticonSize }>(({ theme: Theme, size }) => ({\n    height: theme.identicon.size[size],\n    width: theme.identicon.size[size],\n    borderRadius: '50%'\n}));\n\nexport const AccountHeader: React.FC<{ expanded: boolean }> = ({ expanded }) => {\n    const [showSettings, setShowSettings] = useState<boolean>(false)\n    const [queueSize, setQueueSize] = useState<number>(0)\n    const account = useAccount()\n    const iconSrc = useMemo(() => makeBlockie(account.address), [account]);\n    const txRepo = useTransactionRepo()\n    const queueRepo = useQueueRepo()\n\n    // TODO: we have this logic in multiple places. Should be extracted\n    const loadQueuedTxs = useCallback(async () => {\n        try {\n            setQueueSize((await queueRepo.getQueuedTxs()).length)\n        } catch (e) {\n            console.error(e)\n        }\n    }, [queueRepo, setQueueSize])\n\n    useEffect(() => {\n        const callback: Callback = {\n            onNewInteractions: loadQueuedTxs\n        }\n        txRepo.registerCallback(callback)\n        return () => txRepo.unregisterCallback(callback)\n    }, [txRepo, loadQueuedTxs])\n\n    useEffect(() => {\n        const callback: QueueRepositoryUpdates = {\n            onNewTx: loadQueuedTxs\n        }\n        queueRepo.registerCallback(callback)\n        return () => queueRepo.unregisterCallback(callback)\n    }, [queueRepo, loadQueuedTxs])\n\n    useEffect(() => {\n      loadQueuedTxs()\n    }, [loadQueuedTxs])\n\n    const reindex = useCallback(async () => {\n        txRepo.reindex()\n    }, [txRepo])\n\n    const copyAddress = useCopyAddress(account.address)\n\n    return <Row sx={{\n        paddingX: '16px',\n        width: `calc(100% - 32px)`,\n        justifyContent: 'space-between',\n        textAlign: 'left',\n        alignItems: 'center'\n    }}>\n        <StyledImg src={iconSrc} size=\"md\" />\n        <Group sx={{ paddingX: '8px', textAlign: 'center' }} onClick={copyAddress} >\n            <Typography sx={{ fontFamily: 'Monospace' }} >{shortAddress(account.address)}</Typography>\n            Chain {account.chainId}\n        </Group>\n        {expanded ? (\n            <Settings onClick={() => setShowSettings(true)} />\n        ) : queueSize.toString()\n        }\n        <SettingsDialog open={showSettings} handleClose={() => setShowSettings(false)} reindex={reindex} />\n    </Row>\n}\n\nexport default AccountHeader","import { Button } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport { useAppSettings } from \"../../provider/AppSettingsProvider\";\nimport { useAccount } from \"../Dashboard\";\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\"\n}))\n\nexport const SignerInfo: React.FC = () => {\n    const { chainId } = useAccount()\n    const { signer, safeSigner } = useAppSettings()\n    return <Root>\n        <hr />\n        { !!signer ? \n            <Button onClick={() => safeSigner.disconnect() }>Disconnect Signer</Button>  : \n            <Button onClick={() => safeSigner.connect(chainId) }>Connect Signer</Button> \n        }\n    </Root>\n}\n\nexport default SignerInfo","import React, { useContext, useEffect } from 'react'\nimport { useParams } from 'react-router'\nimport Transactions from './transaction/Transactions';\nimport TransactionRepositoryProvider from '../provider/TransactionRepositoryProvider';\nimport QueueRepositoryProvider from '../provider/QueueRepositoryProvider';\nimport Queue from './queue/Queue';\nimport { Row } from '../../styled/tables';\nimport Apps from './apps/Apps';\nimport { Account, parseAccount } from '../../logic/utils/account';\nimport { useDektopLayout } from '../utils/media';\nimport { ResponsiveSidebar } from './ResponsiveSidebar';\nimport { Typography } from '@mui/material';\nimport AccountHeader from './header/AccountHeader';\nimport { useAppSettings } from '../provider/AppSettingsProvider';\nimport SignerInfo from './signer/SignerInfo';\n\ninterface Path {\n    account: string\n}\n\nconst AccountContext = React.createContext<Account | undefined>(undefined);\n\nexport const useAccount = () => {\n    const account = useContext(AccountContext)\n    if (!account) throw Error(\"Account not available!\")\n    return account\n}\n\nexport const Dashboard: React.FC = () => {\n    const { account } = useParams<Path>() //0x969c350577B6CD3A8E963cBB8D9c728B840c459e\n    const isDesktop = useDektopLayout();\n    const { safeSigner } = useAppSettings()\n    const value = parseAccount(account)\n\n    useEffect(() => {\n        if (!value) return\n        safeSigner.prepare(value.chainId)\n    }, [value?.chainId])\n\n    if (!value) return (<>\n        \"Invalid account\"\n    </>)\n\n    return <AccountContext.Provider value={value}>\n        <TransactionRepositoryProvider>\n            <QueueRepositoryProvider>\n                <Row>\n                    <ResponsiveSidebar isDesktop={isDesktop} header={(expanded) => <AccountHeader expanded={expanded} />}>\n                        <SignerInfo />\n                        <Queue />\n                        <Transactions />\n                    </ResponsiveSidebar>\n                    <Apps />\n                </Row>\n            </QueueRepositoryProvider>\n        </TransactionRepositoryProvider>\n    </AccountContext.Provider>\n}\n\nexport default Dashboard","import { Button, TextField } from '@mui/material';\nimport { styled } from '@mui/system';\nimport React, { useEffect, useMemo, useState } from 'react'\nimport { useHistory } from 'react-router';\nimport { AccountsDAO, StoredAccount } from '../../logic/db/app';\nimport { parseAccount } from '../../logic/utils/account';\nimport { Entry, Group, LongText, Row } from '../../styled/tables';\n\nconst Root = styled('div')(({ theme }) => ({\n    textAlign: \"center\",\n    padding: 16,\n}))\n\nexport const Welcome: React.FC = () => {\n    const [addressInput, setAddressInput] = useState(\"\")\n    const [addressError, setAddressError] = useState(\"\")\n    const [accountHistory, setAccountHistory] = useState<StoredAccount[]>([])\n    const history = useHistory()\n    const accountsDao = useMemo(() => new AccountsDAO(), [])\n\n    const handleAddressInput = (address: string) => {\n        setAddressInput(address)\n        setAddressError(\"\")\n    }\n\n    useEffect(() => {\n        (async () => {\n            setAccountHistory(await accountsDao.getAll())\n        })()\n    }, [setAccountHistory])\n\n    const openAccount = async (address: string) => {\n        const account = parseAccount(address)\n        if (!account) {\n            setAddressError(\"Invalid account!\")\n            return\n        }\n        accountsDao.add({\n            ...account,\n            timestamp: new Date().getTime()\n        })\n        history.push(\"/\" + account.id)\n    }\n\n    return <Root>\n        Welcome!<br /><br />\n        <TextField label=\"Account address\" onChange={(e) => handleAddressInput(e.target.value)} value={addressInput} error={!!addressError} helperText={addressError} fullWidth /><br />\n        <Button onClick={() => openAccount(addressInput)}>Open</Button>\n        {accountHistory.map((account) => {\n            return (\n                <Entry onClick={() => openAccount(account.id)}>\n                    <LongText>{account.id}</LongText>\n                </Entry>\n            )\n        })}\n    </Root>\n}\n\nexport default Welcome","import React from 'react'\nimport { Route, Switch, HashRouter as Router } from \"react-router-dom\"\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Dashboard from './account/Dashboard';\nimport AppSettingsProvider from './provider/AppSettingsProvider';\nimport Welcome from './welcome/Welcome';\n\nconst theme = createTheme({})\n\nexport const Root: React.FC = () => {\n    return (\n        <AppSettingsProvider>\n            <ThemeProvider theme={theme}>\n                <Router>\n                    <Switch>\n                        <Route path=\"/:account\">\n                            <Dashboard />\n                        </Route>\n                        <Route path=\"/\">\n                            <Welcome />\n                        </Route>\n                    </Switch>\n                </Router>\n            </ThemeProvider>\n        </AppSettingsProvider>\n    )\n}\n\nexport default Root","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://cra.link/PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://cra.link/PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./indexer\"), exports);\n// Ethers dependencies \n// TODO: move to separate repo\n__exportStar(require(\"./ethers/loader\"), exports);\n__exportStar(require(\"./ethers/parser\"), exports);\n__exportStar(require(\"./ethers/constants\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detailsTopics = exports.parentTopics = exports.etherReceivedTopic = exports.moduleDetailsTopic = exports.moduleFailureTopic = exports.moduleSuccessTopic = exports.multisigDetailsTopic = exports.failureTopic = exports.successTopic = exports.safeInterface = exports.safeAbi = exports.transferTopic = exports.erc721Interface = exports.erc20OldInterface = exports.erc20Interface = exports.erc721InterfaceDefinition = exports.erc20OldInterfaceDefinition = exports.erc20InterfaceDefinition = void 0;\nvar safe_deployments_1 = require(\"@gnosis.pm/safe-deployments\");\nvar ethers_1 = require(\"ethers\");\nexports.erc20InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 amount)\"\n];\nexports.erc20OldInterfaceDefinition = [\n    \"event Transfer(address indexed from, address to, uint256 amount)\"\n];\nexports.erc721InterfaceDefinition = [\n    \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\n];\nexports.erc20Interface = new ethers_1.ethers.utils.Interface(exports.erc20InterfaceDefinition);\nexports.erc20OldInterface = new ethers_1.ethers.utils.Interface(exports.erc20OldInterfaceDefinition);\nexports.erc721Interface = new ethers_1.ethers.utils.Interface(exports.erc721InterfaceDefinition);\n// The same for all interfaces as `indexed` has no impact on the topic\nexports.transferTopic = exports.erc20Interface.getEventTopic(\"Transfer\");\nexports.safeAbi = safe_deployments_1.getSafeL2SingletonDeployment({ released: undefined }).abi;\nexports.safeInterface = new ethers_1.ethers.utils.Interface(exports.safeAbi);\nexports.successTopic = exports.safeInterface.getEventTopic(\"ExecutionSuccess\");\nexports.failureTopic = exports.safeInterface.getEventTopic(\"ExecutionFailure\");\nexports.multisigDetailsTopic = exports.safeInterface.getEventTopic(\"SafeMultiSigTransaction\");\nexports.moduleSuccessTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleSuccess\");\nexports.moduleFailureTopic = exports.safeInterface.getEventTopic(\"ExecutionFromModuleFailure\");\nexports.moduleDetailsTopic = exports.safeInterface.getEventTopic(\"SafeModuleTransaction\");\nexports.etherReceivedTopic = exports.safeInterface.getEventTopic(\"SafeReceived\");\n// Failure topics cannot generate sub events, we should remove them in the future\nexports.parentTopics = [exports.successTopic, exports.moduleSuccessTopic, exports.failureTopic, exports.moduleFailureTopic];\nexports.detailsTopics = [exports.multisigDetailsTopic, exports.moduleDetailsTopic];\n"],"sourceRoot":""}